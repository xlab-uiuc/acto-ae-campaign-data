2023-04-01 23:08:45,787 INFO   , MainThread, acto.py  :961, Acto started with [['acto.py', '--config', 'data/cockroach-operator/config.json', '--num-workers', '16', '--num-cases', '1', '--workdir', 'testrun-crdb-whitebox', '--notify-crash']]
2023-04-01 23:08:45,787 INFO   , MainThread, acto.py  :962, Operator config: <common.OperatorConfig object at 0x7ff23a8b1940>
2023-04-01 23:08:45,792 INFO   , MainThread, acto.py  :662, Loading context from file
2023-04-01 23:08:45,793 WARNING, MainThread, schema.py:437, Object schema ['metadata'] does not have properties nor additionalProperties
2023-04-01 23:08:45,796 WARNING, MainThread, schema.py:573, Field [name] does not have a schema, using opaque schema
2023-04-01 23:08:45,804 INFO   , MainThread, acto.py  :636, Applied custom fields: [["spec", "affinity"], ["spec", "dataStore", "pvc", "spec"], ["spec", "dataStore", "pvc", "source"], ["spec", "dataStore", "hostPath"], ["spec", "resources"], ["spec", "tolerations"], ["spec", "topologySpreadConstraints"]]
2023-04-01 23:08:45,806 INFO   , MainThread, input.py :568, Overspecified field: ['spec', 'additionalAnnotations']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :568, Overspecified field: ['spec', 'additionalLabels']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :568, Overspecified field: ['spec', 'affinity']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :568, Overspecified field: ['spec', 'dataStore', 'hostPath']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :568, Overspecified field: ['spec', 'dataStore', 'pvc', 'spec', 'resources', 'requests']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :568, Overspecified field: ['spec', 'ingress', 'sql', 'annotations']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :568, Overspecified field: ['spec', 'ingress', 'ui', 'annotations']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :568, Overspecified field: ['spec', 'ingress', 'ui', 'tls', 'ITEM', 'hosts']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :568, Overspecified field: ['spec', 'nodeSelector']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :568, Overspecified field: ['spec', 'podEnvVariables']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :568, Overspecified field: ['spec', 'resources']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :568, Overspecified field: ['spec', 'tolerations']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :568, Overspecified field: ['spec', 'topologySpreadConstraints']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['apiVersion']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['kind']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['metadata']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['status']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'additionalAnnotations', 'additional_properties']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'additionalLabels', 'additional_properties']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'affinity', 'nodeAffinity']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'affinity', 'podAffinity']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'affinity', 'podAntiAffinity']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'dataStore', 'supportsAutoResize']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'dataStore', 'hostPath', 'path']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'dataStore', 'hostPath', 'type']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'dataStore', 'pvc', 'source', 'readOnly']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'dataStore', 'pvc', 'spec', 'accessModes']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'dataStore', 'pvc', 'spec', 'dataSource']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'dataStore', 'pvc', 'spec', 'selector']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'dataStore', 'pvc', 'spec', 'storageClassName']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'dataStore', 'pvc', 'spec', 'volumeName']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'dataStore', 'pvc', 'spec', 'resources', 'limits']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'dataStore', 'pvc', 'spec', 'resources', 'requests', 'storage']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'dataStore', 'pvc', 'spec', 'resources', 'requests', 'additional_properties']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'ingress', 'sql', 'tls']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'ingress', 'sql', 'annotations', 'additional_properties']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'ingress', 'ui', 'annotations', 'additional_properties']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'ingress', 'ui', 'tls', 'ITEM', 'hosts', 'ITEM']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'nodeSelector', 'additional_properties']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'podEnvVariables', 'ITEM']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'resources', 'limits']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'resources', 'requests']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'tolerations', 'ITEM']
2023-04-01 23:08:45,807 INFO   , MainThread, input.py :570, Unused field: ['spec', 'topologySpreadConstraints', 'ITEM']
2023-04-01 23:08:45,810 INFO   , MainThread, input.py :620, Parsed [84] fields from normal schema
2023-04-01 23:08:45,810 INFO   , MainThread, input.py :621, Parsed [23] fields from over-specified schema
2023-04-01 23:08:45,810 INFO   , MainThread, input.py :622, Parsed [119] fields from copied-over schema
2023-04-01 23:08:45,810 INFO   , MainThread, input.py :624, Generated [241] test cases for normal schemas
2023-04-01 23:08:45,810 INFO   , MainThread, input.py :625, Generated [82] test cases for overspecified schemas
2023-04-01 23:08:45,810 INFO   , MainThread, input.py :627, Generated [382] test cases for copiedover schemas
2023-04-01 23:08:45,810 INFO   , MainThread, input.py :628, Generated [32] test cases for semantic schemas
2023-04-01 23:08:45,817 INFO   , MainThread, acto.py  :1004, Acto generation finished in 0:00:00.029479
2023-04-01 23:08:45,817 INFO   , MainThread, acto.py  :747, Creating preload images archive
2023-04-01 23:08:54,161 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-0
2023-04-01 23:08:54,166 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-4
2023-04-01 23:08:54,171 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-3
2023-04-01 23:08:54,172 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-1
2023-04-01 23:08:54,172 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-2
2023-04-01 23:08:54,190 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-7
2023-04-01 23:08:54,190 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-6
2023-04-01 23:08:54,195 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-8
2023-04-01 23:08:54,196 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-5
2023-04-01 23:08:54,208 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-9
2023-04-01 23:08:54,208 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-10
2023-04-01 23:08:54,224 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-13
2023-04-01 23:08:54,227 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-11
2023-04-01 23:08:54,228 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-14
2023-04-01 23:08:54,229 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-12
2023-04-01 23:08:54,229 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-15
2023-04-01 23:09:45,729 INFO   , Thread-4, base.py  :41, Created cluster
2023-04-01 23:09:45,739 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:46,344 INFO   , Thread-1, base.py  :41, Created cluster
2023-04-01 23:09:46,355 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:47,290 INFO   , Thread-5, base.py  :41, Created cluster
2023-04-01 23:09:47,297 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:47,917 INFO   , Thread-7, base.py  :41, Created cluster
2023-04-01 23:09:47,926 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:48,492 INFO   , Thread-6, base.py  :41, Created cluster
2023-04-01 23:09:48,500 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:49,913 INFO   , Thread-2, base.py  :41, Created cluster
2023-04-01 23:09:49,930 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:50,652 INFO   , Thread-14, base.py  :41, Created cluster
2023-04-01 23:09:50,660 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:50,803 INFO   , Thread-10, base.py  :41, Created cluster
2023-04-01 23:09:50,803 INFO   , Thread-8, base.py  :41, Created cluster
2023-04-01 23:09:50,825 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:50,826 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:51,158 INFO   , Thread-3, base.py  :41, Created cluster
2023-04-01 23:09:51,168 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:52,902 INFO   , Thread-12, base.py  :41, Created cluster
2023-04-01 23:09:52,911 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:53,014 INFO   , Thread-15, base.py  :41, Created cluster
2023-04-01 23:09:53,025 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:53,688 INFO   , Thread-16, base.py  :41, Created cluster
2023-04-01 23:09:53,700 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:53,703 INFO   , Thread-13, base.py  :41, Created cluster
2023-04-01 23:09:53,718 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:53,754 INFO   , Thread-11, base.py  :41, Created cluster
2023-04-01 23:09:53,768 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:09:53,847 INFO   , Thread-9, base.py  :41, Created cluster
2023-04-01 23:09:53,857 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:10:22,448 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:23,369 DEBUG  , Thread-1, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:24,456 DEBUG  , Thread-5, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:25,921 DEBUG  , Thread-7, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:26,472 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:28,872 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:29,140 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:29,561 DEBUG  , Thread-14, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:31,907 DEBUG  , Thread-10, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:31,919 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:31,943 DEBUG  , Thread-12, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:31,969 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:31,979 DEBUG  , Thread-15, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:31,995 DEBUG  , Thread-13, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:31,996 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:32,007 DEBUG  , Thread-16, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:32,564 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-01 23:10:32,564 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:33,455 INFO   , Thread-1, deploy.py:91, Operator ready
2023-04-01 23:10:33,455 INFO   , Thread-1, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:34,541 INFO   , Thread-5, deploy.py:91, Operator ready
2023-04-01 23:10:34,541 INFO   , Thread-5, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:35,455 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:36,012 INFO   , Thread-7, deploy.py:91, Operator ready
2023-04-01 23:10:36,012 INFO   , Thread-7, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:36,559 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-01 23:10:36,559 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:36,823 DEBUG  , Thread-1, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:38,122 DEBUG  , Thread-5, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:38,958 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-01 23:10:38,958 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:39,226 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-01 23:10:39,227 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:39,642 INFO   , Thread-14, deploy.py:91, Operator ready
2023-04-01 23:10:39,642 INFO   , Thread-14, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:39,801 DEBUG  , Thread-7, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:40,332 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:42,012 INFO   , Thread-10, deploy.py:91, Operator ready
2023-04-01 23:10:42,013 INFO   , Thread-10, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:42,136 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-01 23:10:42,136 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:43,069 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-01 23:10:43,070 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:43,356 INFO   , Thread-12, deploy.py:91, Operator ready
2023-04-01 23:10:43,357 INFO   , Thread-12, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:43,360 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-01 23:10:43,368 INFO   , Thread-13, deploy.py:91, Operator ready
2023-04-01 23:10:43,371 INFO   , Thread-16, deploy.py:91, Operator ready
2023-04-01 23:10:43,375 INFO   , Thread-15, deploy.py:91, Operator ready
2023-04-01 23:10:43,395 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:43,395 INFO   , Thread-13, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:43,403 INFO   , Thread-16, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:43,404 INFO   , Thread-15, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:44,616 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:44,961 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:45,320 DEBUG  , Thread-14, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:45,588 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-01 23:10:45,588 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:46,903 INFO   , Thread-1, deploy.py:91, Operator ready
2023-04-01 23:10:46,903 INFO   , Thread-1, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:48,205 INFO   , Thread-5, deploy.py:91, Operator ready
2023-04-01 23:10:48,205 INFO   , Thread-5, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:48,834 DEBUG  , Thread-10, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:48,862 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:49,890 INFO   , Thread-7, deploy.py:91, Operator ready
2023-04-01 23:10:49,890 INFO   , Thread-7, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:49,900 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:50,047 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:50,068 DEBUG  , Thread-16, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:50,095 DEBUG  , Thread-12, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:50,109 DEBUG  , Thread-13, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:50,130 DEBUG  , Thread-15, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:10:50,413 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-01 23:10:50,413 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:54,698 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-01 23:10:54,698 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:55,050 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-01 23:10:55,050 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:55,430 INFO   , Thread-14, deploy.py:91, Operator ready
2023-04-01 23:10:55,430 INFO   , Thread-14, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:58,924 INFO   , Thread-10, deploy.py:91, Operator ready
2023-04-01 23:10:58,924 INFO   , Thread-10, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:58,994 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-01 23:10:58,994 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:10:59,985 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-01 23:10:59,986 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:11:00,139 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-01 23:11:00,139 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:11:00,222 INFO   , Thread-16, deploy.py:91, Operator ready
2023-04-01 23:11:00,222 INFO   , Thread-16, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:11:00,289 INFO   , Thread-13, deploy.py:91, Operator ready
2023-04-01 23:11:00,290 INFO   , Thread-13, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:11:00,341 INFO   , Thread-15, deploy.py:91, Operator ready
2023-04-01 23:11:00,341 INFO   , Thread-15, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:11:00,440 INFO   , Thread-12, deploy.py:91, Operator ready
2023-04-01 23:11:00,440 INFO   , Thread-12, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:11:25,706 WARNING, Thread-4, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:25,706 DEBUG  , Thread-4, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:27,028 WARNING, Thread-1, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:27,028 DEBUG  , Thread-1, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:28,321 WARNING, Thread-5, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:28,321 DEBUG  , Thread-5, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:28,782 INFO   , Thread-4, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:30,033 WARNING, Thread-7, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:30,034 DEBUG  , Thread-7, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:30,538 WARNING, Thread-6, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:30,539 DEBUG  , Thread-6, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:30,798 INFO   , Thread-1, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:32,613 INFO   , Thread-5, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:34,044 INFO   , Thread-7, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:34,147 INFO   , Thread-6, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:34,827 WARNING, Thread-2, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:34,828 DEBUG  , Thread-2, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:35,189 WARNING, Thread-8, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:35,190 DEBUG  , Thread-8, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:35,552 WARNING, Thread-14, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:35,553 DEBUG  , Thread-14, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:39,053 WARNING, Thread-10, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:39,054 DEBUG  , Thread-10, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:39,136 WARNING, Thread-3, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:39,136 DEBUG  , Thread-3, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:39,423 INFO   , Thread-2, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:40,105 WARNING, Thread-9, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:40,106 DEBUG  , Thread-9, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:40,258 WARNING, Thread-11, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:40,258 DEBUG  , Thread-11, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:40,343 WARNING, Thread-16, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:40,343 DEBUG  , Thread-16, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:40,359 INFO   , Thread-8, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:40,443 WARNING, Thread-13, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:40,445 DEBUG  , Thread-13, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:40,561 WARNING, Thread-15, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:40,568 DEBUG  , Thread-15, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:40,588 WARNING, Thread-12, schema.py:573, [trial: 0, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:11:40,589 DEBUG  , Thread-12, acto.py  :458, [trial: 0, gen: 0] Run and check
2023-04-01 23:11:40,761 INFO   , Thread-14, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:45,492 INFO   , Thread-10, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:45,613 INFO   , Thread-3, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:47,532 INFO   , Thread-9, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:47,795 INFO   , Thread-16, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:47,834 INFO   , Thread-13, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:47,840 INFO   , Thread-11, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:47,869 INFO   , Thread-12, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:11:47,894 INFO   , Thread-15, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:12:32,257 INFO   , Thread-1, runner.py:360, [trial: 0, gen: 0] System took 00:01:01 to converge
2023-04-01 23:12:32,258 DEBUG  , Thread-1, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:12:32,259 DEBUG  , Thread-1, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:12:32,366 DEBUG  , Thread-1, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:30Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:30Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:32Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '946', 'uid': '79a02b3f-3c2f-48ad-8fd8-514af4f4a9b5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:30Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:30Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:32Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:12:32,385 DEBUG  , Thread-1, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-8q4hs
2023-04-01 23:12:32,477 WARNING, Thread-1, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:12:32,478 INFO   , Thread-1, input.py :723, [trial: 0, gen: 1] Progress [20] cases left
2023-04-01 23:12:32,478 DEBUG  , Thread-1, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:12:32,478 INFO   , Thread-1, acto.py  :267, [trial: 0, gen: 1] Precondition of ["spec", "dataStore", "pvc", "source"] fails, try setup first
2023-04-01 23:12:32,479 INFO   , Thread-1, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/dataStore/pvc/source", "value": {"claimName": "ACTOKEY", "readOnly": true}}]
2023-04-01 23:12:32,479 DEBUG  , Thread-1, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:12:32,479 DEBUG  , Thread-1, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:12:32,826 INFO   , Thread-1, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:12:34,273 INFO   , Thread-6, runner.py:360, [trial: 0, gen: 0] System took 00:01:00 to converge
2023-04-01 23:12:34,274 DEBUG  , Thread-6, runner.py:98, [trial: 0, gen: 0] STDOUT: 
2023-04-01 23:12:34,274 DEBUG  , Thread-6, runner.py:99, [trial: 0, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-05-0000/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.85.37:443: connect: connection refused

2023-04-01 23:12:34,365 DEBUG  , Thread-6, runner.py:177, [trial: 0, gen: 0] {}
2023-04-01 23:12:34,365 ERROR  , Thread-6, runner.py:107, [trial: 0, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:12:34,366 INFO   , Thread-6, checker.py:103, [trial: 0, gen: 0] Connection refused, reject mutation
2023-04-01 23:12:34,366 INFO   , Thread-6, acto.py  :472, [trial: 0, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-01 23:12:40,284 INFO   , Thread-4, runner.py:360, [trial: 0, gen: 0] System took 00:01:11 to converge
2023-04-01 23:12:40,285 DEBUG  , Thread-4, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:12:40,285 DEBUG  , Thread-4, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:12:40,417 DEBUG  , Thread-4, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:32Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:28Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:28Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:32Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1104', 'uid': 'fef30211-c4a2-4459-9db0-5c15f290fd0a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:31Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:32Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:37Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:12:40,445 DEBUG  , Thread-4, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-5kvd9
2023-04-01 23:12:40,625 WARNING, Thread-4, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:12:40,626 INFO   , Thread-4, input.py :723, [trial: 0, gen: 1] Progress [20] cases left
2023-04-01 23:12:40,626 DEBUG  , Thread-4, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:12:40,626 INFO   , Thread-4, acto.py  :267, [trial: 0, gen: 1] Precondition of ["spec", "tolerations", 0] fails, try setup first
2023-04-01 23:12:40,627 INFO   , Thread-4, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/tolerations", "value": [{"key": "test-key", "operator": "Equal", "value": "test-value", "effect": "NoSchedule"}]}]
2023-04-01 23:12:40,627 DEBUG  , Thread-4, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:12:40,627 DEBUG  , Thread-4, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:12:40,947 INFO   , Thread-4, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:12:44,138 INFO   , Thread-5, runner.py:360, [trial: 0, gen: 0] System took 00:01:11 to converge
2023-04-01 23:12:44,139 DEBUG  , Thread-5, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:12:44,140 DEBUG  , Thread-5, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:12:44,281 DEBUG  , Thread-5, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:32Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:46Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1110', 'uid': 'b1b9be3a-1e6e-4429-a28a-bb6a57e40633'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:46Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:41Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:12:44,307 DEBUG  , Thread-5, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-vwh7g
2023-04-01 23:12:44,578 WARNING, Thread-5, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:12:44,579 INFO   , Thread-5, input.py :723, [trial: 0, gen: 1] Progress [20] cases left
2023-04-01 23:12:44,579 DEBUG  , Thread-5, test_case.py:51, [trial: 0, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:12:44,579 INFO   , Thread-5, acto.py  :263, [trial: 0, gen: 1] Precondition of ['spec', 'dataStore', 'hostPath'] satisfies
2023-04-01 23:12:44,579 INFO   , Thread-5, acto.py  :323, [trial: 0, gen: 1] Running bundled testcases
2023-04-01 23:12:44,579 DEBUG  , Thread-5, test_case.py:51, [trial: 0, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:12:44,579 INFO   , Thread-5, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/dataStore/hostPath", "value": {}}]
2023-04-01 23:12:44,579 DEBUG  , Thread-5, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:12:44,621 INFO   , Thread-7, runner.py:360, [trial: 0, gen: 0] System took 00:01:10 to converge
2023-04-01 23:12:44,623 DEBUG  , Thread-7, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:12:44,623 DEBUG  , Thread-7, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:12:44,760 DEBUG  , Thread-7, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:37Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:34Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:48Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1099', 'uid': 'd76e8d37-0df1-4a3c-b0d3-df2f6a891807'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:12:44,788 DEBUG  , Thread-7, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-kf5f8
2023-04-01 23:12:44,927 INFO   , Thread-5, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:12:45,000 WARNING, Thread-7, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:12:45,000 INFO   , Thread-7, input.py :723, [trial: 0, gen: 1] Progress [20] cases left
2023-04-01 23:12:45,001 DEBUG  , Thread-7, test_case.py:51, [trial: 0, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:12:45,001 INFO   , Thread-7, acto.py  :263, [trial: 0, gen: 1] Precondition of ['spec', 'ingress', 'sql'] satisfies
2023-04-01 23:12:45,001 INFO   , Thread-7, acto.py  :323, [trial: 0, gen: 1] Running bundled testcases
2023-04-01 23:12:45,001 DEBUG  , Thread-7, test_case.py:51, [trial: 0, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:12:45,001 INFO   , Thread-7, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {}}}]
2023-04-01 23:12:45,001 DEBUG  , Thread-7, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:12:46,928 INFO   , Thread-10, runner.py:360, [trial: 0, gen: 0] System took 00:01:01 to converge
2023-04-01 23:12:46,929 DEBUG  , Thread-10, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:12:46,930 DEBUG  , Thread-10, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:12:47,037 DEBUG  , Thread-10, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:45Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:47Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '954', 'uid': 'ff1bf25e-2052-4904-b681-09f01bb5fc14'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:45Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:45Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:47Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:12:47,059 DEBUG  , Thread-10, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-vlxk6
2023-04-01 23:12:47,181 WARNING, Thread-10, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:12:47,182 INFO   , Thread-10, input.py :723, [trial: 0, gen: 1] Progress [20] cases left
2023-04-01 23:12:47,182 DEBUG  , Thread-10, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:12:47,182 INFO   , Thread-10, acto.py  :267, [trial: 0, gen: 1] Precondition of ["spec", "maxSQLMemory"] fails, try setup first
2023-04-01 23:12:47,182 INFO   , Thread-10, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/maxSQLMemory", "value": "ACTOKEY"}]
2023-04-01 23:12:47,182 DEBUG  , Thread-10, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:12:47,182 DEBUG  , Thread-10, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:12:47,516 INFO   , Thread-10, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:12:49,430 INFO   , Thread-12, runner.py:360, [trial: 0, gen: 0] System took 00:01:01 to converge
2023-04-01 23:12:49,431 DEBUG  , Thread-12, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:12:49,431 DEBUG  , Thread-12, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:12:49,527 DEBUG  , Thread-12, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '970', 'uid': 'c57a7e9d-1d5e-4116-95f8-e4925213f4a8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:47Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:47Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:12:49,546 DEBUG  , Thread-12, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-zcq2q
2023-04-01 23:12:49,725 WARNING, Thread-12, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:12:49,726 INFO   , Thread-12, input.py :723, [trial: 0, gen: 1] Progress [13] cases left
2023-04-01 23:12:49,726 DEBUG  , Thread-12, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:12:49,726 INFO   , Thread-12, acto.py  :267, [trial: 0, gen: 1] Precondition of ["spec", "ingress", "sql", "ingressClassName"] fails, try setup first
2023-04-01 23:12:49,726 INFO   , Thread-12, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "ingressClassName": "ACTOKEY"}}}]
2023-04-01 23:12:49,726 DEBUG  , Thread-12, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:12:49,727 DEBUG  , Thread-12, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:12:50,048 INFO   , Thread-12, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:12:51,397 INFO   , Thread-14, runner.py:360, [trial: 0, gen: 0] System took 00:01:10 to converge
2023-04-01 23:12:51,398 DEBUG  , Thread-14, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:12:51,398 DEBUG  , Thread-14, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:12:51,550 DEBUG  , Thread-14, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:44Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:40Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:40Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:44Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:44Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1100', 'uid': '3318e776-66a1-48bd-9494-3f3e1f11466b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:12:51,578 DEBUG  , Thread-14, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-fh8fj
2023-04-01 23:12:51,748 WARNING, Thread-14, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:12:51,749 INFO   , Thread-14, input.py :723, [trial: 0, gen: 1] Progress [10] cases left
2023-04-01 23:12:51,749 DEBUG  , Thread-14, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:12:51,749 INFO   , Thread-14, acto.py  :267, [trial: 0, gen: 1] Precondition of ["spec", "ingress", "sql", "annotations", "ACTOKEY"] fails, try setup first
2023-04-01 23:12:51,750 INFO   , Thread-14, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "annotations": {"ACTOKEY": "ACTOKEY"}}}}]
2023-04-01 23:12:51,750 DEBUG  , Thread-14, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:12:51,750 DEBUG  , Thread-14, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:12:52,005 INFO   , Thread-8, runner.py:360, [trial: 0, gen: 0] System took 00:01:11 to converge
2023-04-01 23:12:52,006 DEBUG  , Thread-8, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:12:52,007 DEBUG  , Thread-8, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:12:52,079 INFO   , Thread-14, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:12:52,169 DEBUG  , Thread-8, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:44Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:40Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:40Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:54Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1126', 'uid': '03682151-b6ff-4466-91e8-f9bd7397ff23'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:12:52,196 DEBUG  , Thread-8, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-jct8c
2023-04-01 23:12:52,448 WARNING, Thread-8, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:12:52,449 INFO   , Thread-8, input.py :723, [trial: 0, gen: 1] Progress [20] cases left
2023-04-01 23:12:52,449 DEBUG  , Thread-8, test_case.py:51, [trial: 0, gen: 1] Precondition [change_precondition] Result [False]
2023-04-01 23:12:52,449 INFO   , Thread-8, acto.py  :267, [trial: 0, gen: 1] Precondition of ["spec", "nodeSelector", "ACTOKEY"] fails, try setup first
2023-04-01 23:12:52,450 INFO   , Thread-8, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/nodeSelector", "value": {"ACTOKEY": "ACTOKEY"}}]
2023-04-01 23:12:52,450 DEBUG  , Thread-8, test_case.py:51, [trial: 0, gen: 1] Precondition [change_precondition] Result [True]
2023-04-01 23:12:52,450 DEBUG  , Thread-8, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:12:52,777 INFO   , Thread-8, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:12:54,747 INFO   , Thread-6, runner.py:291, [trial: 0, gen: 0] Waiting for system to converge... 
2023-04-01 23:12:58,785 INFO   , Thread-9, runner.py:360, [trial: 0, gen: 0] System took 00:01:11 to converge
2023-04-01 23:12:58,786 DEBUG  , Thread-9, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:12:58,786 DEBUG  , Thread-9, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:12:58,931 DEBUG  , Thread-9, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:50Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:51Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1119', 'uid': '7a6e0e13-b14c-415c-b62e-870f4e47589c'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:01Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:56Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:12:58,967 DEBUG  , Thread-9, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-b8llg
2023-04-01 23:12:58,993 INFO   , Thread-16, runner.py:360, [trial: 0, gen: 0] System took 00:01:11 to converge
2023-04-01 23:12:58,994 DEBUG  , Thread-16, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:12:58,994 DEBUG  , Thread-16, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:12:59,265 WARNING, Thread-9, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:12:59,266 INFO   , Thread-9, input.py :723, [trial: 0, gen: 1] Progress [20] cases left
2023-04-01 23:12:59,266 DEBUG  , Thread-9, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:12:59,266 INFO   , Thread-9, acto.py  :267, [trial: 0, gen: 1] Precondition of ["spec", "nodeTLSSecret"] fails, try setup first
2023-04-01 23:12:59,266 INFO   , Thread-9, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/nodeTLSSecret", "value": "ACTOKEY"}]
2023-04-01 23:12:59,266 DEBUG  , Thread-9, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:12:59,266 DEBUG  , Thread-9, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:12:59,322 DEBUG  , Thread-16, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:12:02Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1135', 'uid': '787fd6b6-a785-48c1-95f8-e1c1acac1142'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:12:59,350 DEBUG  , Thread-16, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-hb7zf
2023-04-01 23:12:59,595 WARNING, Thread-16, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:12:59,596 INFO   , Thread-16, input.py :723, [trial: 0, gen: 1] Progress [10] cases left
2023-04-01 23:12:59,596 DEBUG  , Thread-16, test_case.py:51, [trial: 0, gen: 1] Precondition [change_precondition] Result [False]
2023-04-01 23:12:59,596 INFO   , Thread-16, acto.py  :267, [trial: 0, gen: 1] Precondition of ["spec", "clientTLSSecret"] fails, try setup first
2023-04-01 23:12:59,597 INFO   , Thread-16, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/clientTLSSecret", "value": "ACTOKEY"}]
2023-04-01 23:12:59,597 DEBUG  , Thread-16, test_case.py:51, [trial: 0, gen: 1] Precondition [change_precondition] Result [True]
2023-04-01 23:12:59,597 DEBUG  , Thread-16, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:12:59,609 INFO   , Thread-9, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:12:59,639 INFO   , Thread-15, runner.py:360, [trial: 0, gen: 0] System took 00:01:11 to converge
2023-04-01 23:12:59,640 DEBUG  , Thread-15, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:12:59,640 DEBUG  , Thread-15, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:12:59,791 DEBUG  , Thread-15, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:52Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1131', 'uid': '2ebc27e0-802d-4bab-8dcb-f56df10773be'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:12:59,821 DEBUG  , Thread-15, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-sj25m
2023-04-01 23:12:59,941 INFO   , Thread-16, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:13:00,021 WARNING, Thread-15, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:13:00,028 INFO   , Thread-15, input.py :723, [trial: 0, gen: 1] Progress [10] cases left
2023-04-01 23:13:00,029 DEBUG  , Thread-15, test_case.py:51, [trial: 0, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:13:00,029 INFO   , Thread-15, acto.py  :263, [trial: 0, gen: 1] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom', 'fieldRef'] satisfies
2023-04-01 23:13:00,029 INFO   , Thread-15, acto.py  :323, [trial: 0, gen: 1] Running bundled testcases
2023-04-01 23:13:00,029 DEBUG  , Thread-15, test_case.py:51, [trial: 0, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:13:00,030 INFO   , Thread-15, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"fieldRef": {}}}]}]
2023-04-01 23:13:00,031 DEBUG  , Thread-15, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:13:00,312 INFO   , Thread-15, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:13:08,788 INFO   , Thread-2, runner.py:360, [trial: 0, gen: 0] System took 00:01:29 to converge
2023-04-01 23:13:08,790 DEBUG  , Thread-2, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:13:08,790 DEBUG  , Thread-2, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:13:08,922 DEBUG  , Thread-2, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:43Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:39Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:43Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:43Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1103', 'uid': 'e245d522-350e-44b5-82a4-9c9d41d021cb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:42Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:13:08,950 DEBUG  , Thread-2, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-57pkm
2023-04-01 23:13:09,193 WARNING, Thread-2, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:13:09,194 INFO   , Thread-2, input.py :723, [trial: 0, gen: 1] Progress [20] cases left
2023-04-01 23:13:09,194 DEBUG  , Thread-2, test_case.py:51, [trial: 0, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:13:09,194 INFO   , Thread-2, acto.py  :263, [trial: 0, gen: 1] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom', 'configMapKeyRef'] satisfies
2023-04-01 23:13:09,194 INFO   , Thread-2, acto.py  :323, [trial: 0, gen: 1] Running bundled testcases
2023-04-01 23:13:09,194 DEBUG  , Thread-2, test_case.py:51, [trial: 0, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:13:09,194 INFO   , Thread-2, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"configMapKeyRef": {}}}]}]
2023-04-01 23:13:09,194 DEBUG  , Thread-2, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:13:09,489 INFO   , Thread-2, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:13:11,354 INFO   , Thread-11, runner.py:360, [trial: 0, gen: 0] System took 00:01:23 to converge
2023-04-01 23:13:11,355 DEBUG  , Thread-11, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:13:11,355 DEBUG  , Thread-11, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:13:11,495 DEBUG  , Thread-11, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:52Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1129', 'uid': '36566158-1e42-4935-8b68-0ef97fe6f61e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:52Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:13:11,522 DEBUG  , Thread-11, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-2hgz7
2023-04-01 23:13:11,697 WARNING, Thread-11, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:13:11,697 INFO   , Thread-11, input.py :723, [trial: 0, gen: 1] Progress [20] cases left
2023-04-01 23:13:11,698 DEBUG  , Thread-11, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:13:11,698 INFO   , Thread-11, acto.py  :267, [trial: 0, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "configMapKeyRef", "name"] fails, try setup first
2023-04-01 23:13:11,698 INFO   , Thread-11, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY"}}}]}]
2023-04-01 23:13:11,698 DEBUG  , Thread-11, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:13:11,698 DEBUG  , Thread-11, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:13:12,041 INFO   , Thread-11, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:13:33,795 INFO   , Thread-1, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:13:33,796 DEBUG  , Thread-1, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:13:33,796 DEBUG  , Thread-1, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:13:33,908 DEBUG  , Thread-1, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":true},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:30Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:12:34Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1050', 'uid': '79a02b3f-3c2f-48ad-8fd8-514af4f4a9b5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY', 'readOnly': True}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:30Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:30Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:12:34Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:13:34,001 DEBUG  , Thread-1, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-8q4hs
2023-04-01 23:13:34,380 INFO   , Thread-1, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [1805] Number of delta: [149]
2023-04-01 23:13:34,381 INFO   , Thread-1, acto.py  :323, [trial: 0, gen: 1] Running bundled testcases
2023-04-01 23:13:34,381 DEBUG  , Thread-1, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:13:34,381 INFO   , Thread-1, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "remove", "path": "/spec/dataStore/pvc/source/readOnly"}, {"op": "remove", "path": "/spec/dataStore/pvc/source/claimName"}]
2023-04-01 23:13:34,382 DEBUG  , Thread-1, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:13:34,694 INFO   , Thread-1, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:13:45,122 INFO   , Thread-5, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:13:45,123 DEBUG  , Thread-5, runner.py:98, [trial: 0, gen: 1] STDOUT: 
2023-04-01 23:13:45,123 DEBUG  , Thread-5, runner.py:99, [trial: 0, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-04-0000/mutated-1.yaml": error validating data: ValidationError(CrdbCluster.spec.dataStore.hostPath): missing required field "path" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.dataStore.hostPath; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:13:45,128 INFO   , Thread-7, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:13:45,281 DEBUG  , Thread-5, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:32Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:46Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1110', 'uid': 'b1b9be3a-1e6e-4429-a28a-bb6a57e40633'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:46Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:41Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:13:45,307 DEBUG  , Thread-5, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-vwh7g
2023-04-01 23:13:45,581 INFO   , Thread-5, checker.py:213, [trial: 0, gen: 1] Invalid input, reject mutation
2023-04-01 23:13:45,581 INFO   , Thread-5, checker.py:214, [trial: 0, gen: 1] STDOUT: 
2023-04-01 23:13:45,581 INFO   , Thread-5, checker.py:215, [trial: 0, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-04-0000/mutated-1.yaml": error validating data: ValidationError(CrdbCluster.spec.dataStore.hostPath): missing required field "path" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.dataStore.hostPath; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:13:46,069 INFO   , Thread-5, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3456] Number of delta: [0]
2023-04-01 23:13:46,071 DEBUG  , Thread-5, acto.py  :374, [trial: 0, gen: 1] Invalid input, revert
2023-04-01 23:13:46,071 WARNING, Thread-5, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:13:46,071 DEBUG  , Thread-5, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:13:46,452 INFO   , Thread-5, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:13:51,252 INFO   , Thread-3, runner.py:360, [trial: 0, gen: 0] System took 00:02:05 to converge
2023-04-01 23:13:51,253 DEBUG  , Thread-3, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:13:51,253 DEBUG  , Thread-3, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:13:51,393 DEBUG  , Thread-3, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:45Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:49Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1120', 'uid': '3f32ec47-cba4-483a-b6c2-9d2bd57fe216'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:59Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:48Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:49Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:13:51,420 DEBUG  , Thread-3, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-5hssr
2023-04-01 23:13:51,676 WARNING, Thread-3, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:13:51,676 INFO   , Thread-3, input.py :723, [trial: 0, gen: 1] Progress [20] cases left
2023-04-01 23:13:51,676 DEBUG  , Thread-3, test_case.py:51, [trial: 0, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:13:51,676 INFO   , Thread-3, acto.py  :263, [trial: 0, gen: 1] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom', 'fieldRef', 'apiVersion'] satisfies
2023-04-01 23:13:51,676 INFO   , Thread-3, acto.py  :323, [trial: 0, gen: 1] Running bundled testcases
2023-04-01 23:13:51,676 DEBUG  , Thread-3, test_case.py:51, [trial: 0, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:13:51,677 INFO   , Thread-3, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"fieldRef": {"fieldPath": "ACTOKEY", "apiVersion": ""}}}]}]
2023-04-01 23:13:51,677 DEBUG  , Thread-3, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:13:52,046 INFO   , Thread-3, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:13:52,203 INFO   , Thread-14, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:13:52,204 DEBUG  , Thread-14, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:13:52,204 DEBUG  , Thread-14, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:13:52,361 DEBUG  , Thread-14, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:52Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"annotations":{"ACTOKEY":"ACTOKEY"},"host":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:40Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:12:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}, 'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:12:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:52Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1265', 'uid': '3318e776-66a1-48bd-9494-3f3e1f11466b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'annotations': {'ACTOKEY': 'ACTOKEY'}, 'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:13:22Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:13:52,391 DEBUG  , Thread-14, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-fh8fj
2023-04-01 23:13:53,167 INFO   , Thread-14, common.py:560, [trial: 0, gen: 1] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:13:53,167 INFO   , Thread-14, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3463] Number of delta: [9]
2023-04-01 23:13:53,168 INFO   , Thread-14, acto.py  :301, [trial: 0, gen: 1] Setup produced invalid input
2023-04-01 23:13:53,168 WARNING, Thread-14, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:13:53,169 DEBUG  , Thread-14, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:13:53,502 INFO   , Thread-14, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:13:53,657 INFO   , Thread-13, runner.py:360, [trial: 0, gen: 0] System took 00:02:05 to converge
2023-04-01 23:13:53,658 DEBUG  , Thread-13, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:13:53,658 DEBUG  , Thread-13, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:13:53,809 DEBUG  , Thread-13, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:52Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1130', 'uid': 'e79a3795-9224-49e4-8af8-d4ab758d8aeb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:13:53,836 DEBUG  , Thread-13, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-tshhh
2023-04-01 23:13:54,076 WARNING, Thread-13, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:13:54,077 INFO   , Thread-13, input.py :723, [trial: 0, gen: 1] Progress [10] cases left
2023-04-01 23:13:54,077 DEBUG  , Thread-13, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:13:54,077 INFO   , Thread-13, acto.py  :263, [trial: 0, gen: 1] Precondition of ['spec', 'dataStore', 'pvc', 'spec'] satisfies
2023-04-01 23:13:54,077 INFO   , Thread-13, acto.py  :323, [trial: 0, gen: 1] Running bundled testcases
2023-04-01 23:13:54,077 DEBUG  , Thread-13, test_case.py:51, [trial: 0, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:13:54,077 INFO   , Thread-13, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "remove", "path": "/spec/dataStore/pvc/spec/accessModes"}, {"op": "remove", "path": "/spec/dataStore/pvc/spec/volumeMode"}, {"op": "remove", "path": "/spec/dataStore/pvc/spec/resources"}]
2023-04-01 23:13:54,077 DEBUG  , Thread-13, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:13:54,449 INFO   , Thread-13, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:13:58,563 INFO   , Thread-8, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:14:00,431 INFO   , Thread-15, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:14:00,433 DEBUG  , Thread-15, runner.py:98, [trial: 0, gen: 1] STDOUT: 
2023-04-01 23:14:00,433 DEBUG  , Thread-15, runner.py:99, [trial: 0, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-14-0000/mutated-1.yaml": error validating data: ValidationError(CrdbCluster.spec.podEnvVariables[0].valueFrom.fieldRef): missing required field "fieldPath" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.podEnvVariables.valueFrom.fieldRef; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:14:00,590 DEBUG  , Thread-15, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:52Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1131', 'uid': '2ebc27e0-802d-4bab-8dcb-f56df10773be'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:14:00,623 DEBUG  , Thread-15, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-sj25m
2023-04-01 23:14:00,895 INFO   , Thread-15, checker.py:213, [trial: 0, gen: 1] Invalid input, reject mutation
2023-04-01 23:14:00,895 INFO   , Thread-15, checker.py:214, [trial: 0, gen: 1] STDOUT: 
2023-04-01 23:14:00,895 INFO   , Thread-15, checker.py:215, [trial: 0, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-14-0000/mutated-1.yaml": error validating data: ValidationError(CrdbCluster.spec.podEnvVariables[0].valueFrom.fieldRef): missing required field "fieldPath" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.podEnvVariables.valueFrom.fieldRef; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:14:01,106 ERROR  , Thread-15, checker.py:301, [trial: 0, gen: 1] Found no matching fields for input delta
2023-04-01 23:14:01,106 ERROR  , Thread-15, checker.py:302, [trial: 0, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'name']]
2023-04-01 23:14:01,315 INFO   , Thread-15, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3456] Number of delta: [0]
2023-04-01 23:14:01,316 DEBUG  , Thread-15, acto.py  :374, [trial: 0, gen: 1] Invalid input, revert
2023-04-01 23:14:01,317 WARNING, Thread-15, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:14:01,317 DEBUG  , Thread-15, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:14:01,712 INFO   , Thread-15, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:14:02,114 INFO   , Thread-12, runner.py:360, [trial: 0, gen: 1] System took 00:01:12 to converge
2023-04-01 23:14:02,115 DEBUG  , Thread-12, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:14:02,115 DEBUG  , Thread-12, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:14:02,272 DEBUG  , Thread-12, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","ingressClassName":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:ingressClassName': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:50Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:12:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:13:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1345', 'uid': 'c57a7e9d-1d5e-4116-95f8-e4925213f4a8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'ingressClassName': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:54Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:13:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:13:55Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:14:02,301 DEBUG  , Thread-12, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-zcq2q
2023-04-01 23:14:03,123 INFO   , Thread-12, common.py:560, [trial: 0, gen: 1] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-01 23:14:03,124 INFO   , Thread-12, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3771] Number of delta: [1094]
2023-04-01 23:14:03,124 INFO   , Thread-12, acto.py  :301, [trial: 0, gen: 1] Setup produced invalid input
2023-04-01 23:14:03,125 WARNING, Thread-12, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:14:03,125 DEBUG  , Thread-12, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:14:03,483 INFO   , Thread-12, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:14:06,350 INFO   , Thread-6, runner.py:360, [trial: 0, gen: 0] System took 00:01:11 to converge
2023-04-01 23:14:06,351 DEBUG  , Thread-6, runner.py:98, [trial: 0, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:14:06,351 DEBUG  , Thread-6, runner.py:99, [trial: 0, gen: 0] STDERR: 
2023-04-01 23:14:06,499 DEBUG  , Thread-6, runner.py:177, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:58Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:12:54Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:12:58Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:12:58Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1234', 'uid': '601576aa-be1a-4d75-a857-b25b73752994'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:09Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:13:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:14:06,526 DEBUG  , Thread-6, runner.py:202, [trial: 0, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-8h4vc
2023-04-01 23:14:06,819 WARNING, Thread-6, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:14:06,820 INFO   , Thread-6, input.py :723, [trial: 0, gen: 1] Progress [20] cases left
2023-04-01 23:14:06,820 DEBUG  , Thread-6, test_case.py:51, [trial: 0, gen: 1] Precondition [pop_precondition] Result [False]
2023-04-01 23:14:06,820 INFO   , Thread-6, acto.py  :267, [trial: 0, gen: 1] Precondition of ["spec", "ingress", "sql", "tls", 0, "hosts"] fails, try setup first
2023-04-01 23:14:06,822 INFO   , Thread-6, acto.py  :107, [trial: 0, gen: 1] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": [{"hosts": ["ACTOKEY", "ACTOKEY"]}]}}}]
2023-04-01 23:14:06,822 DEBUG  , Thread-6, test_case.py:51, [trial: 0, gen: 1] Precondition [pop_precondition] Result [True]
2023-04-01 23:14:06,822 DEBUG  , Thread-6, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:14:07,137 INFO   , Thread-6, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:14:09,606 INFO   , Thread-2, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:14:09,612 DEBUG  , Thread-2, runner.py:98, [trial: 0, gen: 1] STDOUT: 
2023-04-01 23:14:09,612 DEBUG  , Thread-2, runner.py:99, [trial: 0, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-01-0000/mutated-1.yaml": error validating data: ValidationError(CrdbCluster.spec.podEnvVariables[0].valueFrom.configMapKeyRef): missing required field "key" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.podEnvVariables.valueFrom.configMapKeyRef; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:14:09,753 DEBUG  , Thread-2, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:43Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:39Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:43Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:43Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1103', 'uid': 'e245d522-350e-44b5-82a4-9c9d41d021cb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:42Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:14:09,782 DEBUG  , Thread-2, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-57pkm
2023-04-01 23:14:10,143 INFO   , Thread-2, checker.py:213, [trial: 0, gen: 1] Invalid input, reject mutation
2023-04-01 23:14:10,143 INFO   , Thread-2, checker.py:214, [trial: 0, gen: 1] STDOUT: 
2023-04-01 23:14:10,143 INFO   , Thread-2, checker.py:215, [trial: 0, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-01-0000/mutated-1.yaml": error validating data: ValidationError(CrdbCluster.spec.podEnvVariables[0].valueFrom.configMapKeyRef): missing required field "key" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.podEnvVariables.valueFrom.configMapKeyRef; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:14:10,365 ERROR  , Thread-2, checker.py:301, [trial: 0, gen: 1] Found no matching fields for input delta
2023-04-01 23:14:10,365 ERROR  , Thread-2, checker.py:302, [trial: 0, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'name']]
2023-04-01 23:14:10,576 INFO   , Thread-2, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3456] Number of delta: [0]
2023-04-01 23:14:10,578 DEBUG  , Thread-2, acto.py  :374, [trial: 0, gen: 1] Invalid input, revert
2023-04-01 23:14:10,578 WARNING, Thread-2, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:14:10,578 DEBUG  , Thread-2, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:14:10,955 INFO   , Thread-2, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:14:45,292 INFO   , Thread-7, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:14:45,293 DEBUG  , Thread-7, runner.py:98, [trial: 0, gen: 1] STDOUT: 
2023-04-01 23:14:45,293 DEBUG  , Thread-7, runner.py:99, [trial: 0, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-06-0000/mutated-1.yaml": error validating data: ValidationError(CrdbCluster.spec.ingress.sql): missing required field "host" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.ingress.sql; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:14:45,427 DEBUG  , Thread-7, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:37Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:34Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:11:48Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1099', 'uid': 'd76e8d37-0df1-4a3c-b0d3-df2f6a891807'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:14:45,454 DEBUG  , Thread-7, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-kf5f8
2023-04-01 23:14:45,741 INFO   , Thread-7, checker.py:213, [trial: 0, gen: 1] Invalid input, reject mutation
2023-04-01 23:14:45,741 INFO   , Thread-7, checker.py:214, [trial: 0, gen: 1] STDOUT: 
2023-04-01 23:14:45,741 INFO   , Thread-7, checker.py:215, [trial: 0, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-06-0000/mutated-1.yaml": error validating data: ValidationError(CrdbCluster.spec.ingress.sql): missing required field "host" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.ingress.sql; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:14:46,236 INFO   , Thread-7, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3456] Number of delta: [0]
2023-04-01 23:14:46,236 DEBUG  , Thread-7, acto.py  :374, [trial: 0, gen: 1] Invalid input, revert
2023-04-01 23:14:46,237 WARNING, Thread-7, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:14:46,237 DEBUG  , Thread-7, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:14:46,571 INFO   , Thread-5, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:14:46,572 DEBUG  , Thread-5, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:14:46,572 DEBUG  , Thread-5, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:14:46,623 INFO   , Thread-7, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:14:46,728 DEBUG  , Thread-5, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:32Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:46Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1316', 'uid': 'b1b9be3a-1e6e-4429-a28a-bb6a57e40633'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:46Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:41Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:14:46,763 DEBUG  , Thread-5, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-vwh7g
2023-04-01 23:14:47,526 DEBUG  , Thread-5, acto.py  :383, [trial: 0, gen: 1] Only one patch, no need to isolate
2023-04-01 23:14:47,527 WARNING, Thread-5, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:14:47,527 INFO   , Thread-5, input.py :723, [trial: 0, gen: 3] Progress [19] cases left
2023-04-01 23:14:47,527 DEBUG  , Thread-5, test_case.py:51, [trial: 0, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-01 23:14:47,527 INFO   , Thread-5, acto.py  :267, [trial: 0, gen: 3] Precondition of ["spec", "maxUnavailable"] fails, try setup first
2023-04-01 23:14:47,527 INFO   , Thread-5, acto.py  :107, [trial: 0, gen: 3] JSON patch: [{"op": "add", "path": "/spec/maxUnavailable", "value": 2}]
2023-04-01 23:14:47,528 DEBUG  , Thread-5, test_case.py:51, [trial: 0, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-01 23:14:47,528 DEBUG  , Thread-5, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:14:47,846 INFO   , Thread-5, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:14:53,619 INFO   , Thread-14, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:14:53,620 DEBUG  , Thread-14, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:14:53,620 DEBUG  , Thread-14, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:14:53,769 DEBUG  , Thread-14, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:52Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:40Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:12:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}, 'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:12:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:13:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1312', 'uid': '3318e776-66a1-48bd-9494-3f3e1f11466b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:13:22Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:14:53,796 DEBUG  , Thread-14, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-fh8fj
2023-04-01 23:14:54,587 INFO   , Thread-14, acto.py  :321, [trial: 0, gen: 1] All setups failed
2023-04-01 23:14:54,587 WARNING, Thread-14, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:14:54,587 INFO   , Thread-14, input.py :723, [trial: 0, gen: 3] Progress [9] cases left
2023-04-01 23:14:54,588 DEBUG  , Thread-14, test_case.py:51, [trial: 0, gen: 3] Precondition [change_precondition] Result [False]
2023-04-01 23:14:54,588 INFO   , Thread-14, acto.py  :267, [trial: 0, gen: 3] Precondition of ["spec", "ingress", "sql", "annotations", "ACTOKEY"] fails, try setup first
2023-04-01 23:14:54,588 INFO   , Thread-14, acto.py  :107, [trial: 0, gen: 3] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "annotations": {"ACTOKEY": "ACTOKEY"}}}}]
2023-04-01 23:14:54,588 DEBUG  , Thread-14, test_case.py:51, [trial: 0, gen: 3] Precondition [change_precondition] Result [True]
2023-04-01 23:14:54,588 DEBUG  , Thread-14, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:14:54,627 INFO   , Thread-13, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:14:54,628 DEBUG  , Thread-13, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:14:54,628 DEBUG  , Thread-13, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:14:54,779 DEBUG  , Thread-13, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:13:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:13:54Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1377', 'uid': 'e79a3795-9224-49e4-8af8-d4ab758d8aeb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'resources': {}}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:14:24Z', 'message': 'updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: [spec.resources[storage]: Invalid value: "0": must be greater than zero, spec.resources.requests.storage: Forbidden: field can not be less than previous value]', 'status': 'Failed', 'type': 'ResizePVC'}], 'version': 'v21.2.10'}}}
2023-04-01 23:14:54,805 DEBUG  , Thread-13, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-tshhh
2023-04-01 23:14:54,942 INFO   , Thread-14, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:14:55,347 WARNING, Thread-13, checker.py:347, [trial: 0, gen: 1] 'AccessModeSchema' object is not subscriptable happened when trying to fetch default value
2023-04-01 23:14:55,347 ERROR  , Thread-13, checker.py:301, [trial: 0, gen: 1] Found no matching fields for input delta
2023-04-01 23:14:55,347 ERROR  , Thread-13, checker.py:302, [trial: 0, gen: 1] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'accessModes', 0]]
2023-04-01 23:14:55,572 INFO   , Thread-13, common.py:560, [trial: 0, gen: 1] Recognized invalid input through regex: updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: [spec.resources[storage]: Invalid value: "0": must be greater than zero, spec.resources.requests.storage: Forbidden: field can not be less than previous value]
2023-04-01 23:14:55,572 INFO   , Thread-13, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3457] Number of delta: [7]
2023-04-01 23:14:55,574 DEBUG  , Thread-13, acto.py  :374, [trial: 0, gen: 1] Invalid input, revert
2023-04-01 23:14:55,574 WARNING, Thread-13, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:14:55,575 DEBUG  , Thread-13, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:14:55,911 INFO   , Thread-13, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:15:01,916 INFO   , Thread-15, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:15:01,916 DEBUG  , Thread-15, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:15:01,917 DEBUG  , Thread-15, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:15:02,057 DEBUG  , Thread-15, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:52Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1338', 'uid': '2ebc27e0-802d-4bab-8dcb-f56df10773be'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:15:02,083 DEBUG  , Thread-15, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-sj25m
2023-04-01 23:15:02,799 DEBUG  , Thread-15, acto.py  :383, [trial: 0, gen: 1] Only one patch, no need to isolate
2023-04-01 23:15:02,799 WARNING, Thread-15, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:15:02,800 INFO   , Thread-15, input.py :723, [trial: 0, gen: 3] Progress [9] cases left
2023-04-01 23:15:02,800 DEBUG  , Thread-15, test_case.py:51, [trial: 0, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-01 23:15:02,800 INFO   , Thread-15, acto.py  :267, [trial: 0, gen: 3] Precondition of ["spec", "dataStore", "hostPath", "type"] fails, try setup first
2023-04-01 23:15:02,800 INFO   , Thread-15, acto.py  :107, [trial: 0, gen: 3] JSON patch: [{"op": "add", "path": "/spec/dataStore/hostPath", "value": {"path": "/tmp/test", "type": "DirectoryOrCreate"}}]
2023-04-01 23:15:02,801 DEBUG  , Thread-15, test_case.py:51, [trial: 0, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-01 23:15:02,801 DEBUG  , Thread-15, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:15:03,135 INFO   , Thread-15, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:15:07,273 INFO   , Thread-6, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:15:07,274 DEBUG  , Thread-6, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:15:07,275 DEBUG  , Thread-6, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:15:07,426 DEBUG  , Thread-6, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[{"hosts":["ACTOKEY","ACTOKEY"]}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:12:54Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:14:07Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:14:08Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:14:08Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1404', 'uid': '601576aa-be1a-4d75-a857-b25b73752994'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'tls': [{'hosts': ['ACTOKEY', 'ACTOKEY']}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:09Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:13:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:14:36Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:15:07,456 DEBUG  , Thread-6, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-8h4vc
2023-04-01 23:15:08,228 INFO   , Thread-6, common.py:560, [trial: 0, gen: 1] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:15:08,228 INFO   , Thread-6, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3464] Number of delta: [10]
2023-04-01 23:15:08,229 INFO   , Thread-6, acto.py  :301, [trial: 0, gen: 1] Setup produced invalid input
2023-04-01 23:15:08,230 WARNING, Thread-6, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:15:08,230 DEBUG  , Thread-6, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:15:08,561 INFO   , Thread-6, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:15:11,082 INFO   , Thread-2, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:15:11,083 DEBUG  , Thread-2, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:15:11,083 DEBUG  , Thread-2, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:15:11,232 DEBUG  , Thread-2, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:43Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:39Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:43Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:43Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1336', 'uid': 'e245d522-350e-44b5-82a4-9c9d41d021cb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:42Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:15:11,259 DEBUG  , Thread-2, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-57pkm
2023-04-01 23:15:12,035 DEBUG  , Thread-2, acto.py  :383, [trial: 0, gen: 1] Only one patch, no need to isolate
2023-04-01 23:15:12,035 WARNING, Thread-2, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:15:12,036 INFO   , Thread-2, input.py :723, [trial: 0, gen: 3] Progress [19] cases left
2023-04-01 23:15:12,036 DEBUG  , Thread-2, test_case.py:51, [trial: 0, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-01 23:15:12,036 INFO   , Thread-2, acto.py  :267, [trial: 0, gen: 3] Precondition of ["spec", "dataStore", "pvc", "spec", "volumeName"] fails, try setup first
2023-04-01 23:15:12,036 INFO   , Thread-2, acto.py  :107, [trial: 0, gen: 3] JSON patch: [{"op": "add", "path": "/spec/dataStore/pvc/spec/volumeName", "value": "ACTOKEY"}]
2023-04-01 23:15:12,036 DEBUG  , Thread-2, test_case.py:51, [trial: 0, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-01 23:15:12,037 DEBUG  , Thread-2, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:15:12,371 INFO   , Thread-2, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:15:20,453 INFO   , Thread-10, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:15:22,551 INFO   , Thread-12, runner.py:360, [trial: 0, gen: 1] System took 00:01:19 to converge
2023-04-01 23:15:22,552 DEBUG  , Thread-12, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:15:22,553 DEBUG  , Thread-12, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:15:22,701 DEBUG  , Thread-12, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:12:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:13:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:14:03Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1359', 'uid': 'c57a7e9d-1d5e-4116-95f8-e4925213f4a8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:54Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:13:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:13:55Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:15:22,729 DEBUG  , Thread-12, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-zcq2q
2023-04-01 23:15:23,219 INFO   , Thread-12, acto.py  :321, [trial: 0, gen: 1] All setups failed
2023-04-01 23:15:23,219 WARNING, Thread-12, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:15:23,219 INFO   , Thread-12, input.py :723, [trial: 0, gen: 3] Progress [12] cases left
2023-04-01 23:15:23,220 DEBUG  , Thread-12, test_case.py:51, [trial: 0, gen: 3] Precondition [change_precondition] Result [False]
2023-04-01 23:15:23,220 INFO   , Thread-12, acto.py  :267, [trial: 0, gen: 3] Precondition of ["spec", "ingress", "sql", "ingressClassName"] fails, try setup first
2023-04-01 23:15:23,220 INFO   , Thread-12, acto.py  :107, [trial: 0, gen: 3] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "ingressClassName": "ACTOKEY"}}}]
2023-04-01 23:15:23,220 DEBUG  , Thread-12, test_case.py:51, [trial: 0, gen: 3] Precondition [change_precondition] Result [True]
2023-04-01 23:15:23,220 DEBUG  , Thread-12, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:15:23,763 INFO   , Thread-12, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:15:33,525 INFO   , Thread-4, runner.py:360, [trial: 0, gen: 1] System took 00:02:52 to converge
2023-04-01 23:15:33,526 DEBUG  , Thread-4, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:15:33,527 DEBUG  , Thread-4, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:15:33,689 DEBUG  , Thread-4, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:32Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"tolerations":[{"effect":"NoSchedule","key":"test-key","operator":"Equal","value":"test-value"}]}}\n'}, 'creationTimestamp': '2023-04-02T03:11:28Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:40Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1209', 'uid': 'fef30211-c4a2-4459-9db0-5c15f290fd0a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'tolerations': [{'effect': 'NoSchedule', 'key': 'test-key', 'operator': 'Equal', 'value': 'test-value'}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:31Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:32Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:37Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:15:33,712 DEBUG  , Thread-4, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-5kvd9
2023-04-01 23:15:34,564 INFO   , Thread-4, common.py:569, [trial: 0, gen: 1] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-01 23:15:34,565 INFO   , Thread-4, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3485] Number of delta: [104]
2023-04-01 23:15:34,567 INFO   , Thread-4, acto.py  :301, [trial: 0, gen: 1] Setup produced invalid input
2023-04-01 23:15:34,567 WARNING, Thread-4, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:15:34,568 DEBUG  , Thread-4, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:15:34,936 INFO   , Thread-4, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:15:41,473 INFO   , Thread-11, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:15:46,743 INFO   , Thread-7, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:15:46,745 DEBUG  , Thread-7, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:15:46,745 DEBUG  , Thread-7, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:15:46,887 DEBUG  , Thread-7, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:37Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:34Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:11:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:48Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1393', 'uid': 'd76e8d37-0df1-4a3c-b0d3-df2f6a891807'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:15:46,910 DEBUG  , Thread-7, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-kf5f8
2023-04-01 23:15:47,694 DEBUG  , Thread-7, acto.py  :383, [trial: 0, gen: 1] Only one patch, no need to isolate
2023-04-01 23:15:47,695 WARNING, Thread-7, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:15:47,696 INFO   , Thread-7, input.py :723, [trial: 0, gen: 3] Progress [19] cases left
2023-04-01 23:15:47,696 DEBUG  , Thread-7, test_case.py:51, [trial: 0, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-01 23:15:47,696 INFO   , Thread-7, acto.py  :267, [trial: 0, gen: 3] Precondition of ["spec", "ingress", "sql", "tls", 0, "secretName"] fails, try setup first
2023-04-01 23:15:47,697 INFO   , Thread-7, acto.py  :107, [trial: 0, gen: 3] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": [{"secretName": "ACTOKEY"}]}}}]
2023-04-01 23:15:47,697 DEBUG  , Thread-7, test_case.py:51, [trial: 0, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-01 23:15:47,697 DEBUG  , Thread-7, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:15:47,970 INFO   , Thread-5, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:15:47,972 DEBUG  , Thread-5, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:15:47,972 DEBUG  , Thread-5, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:15:48,029 INFO   , Thread-7, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:15:48,113 DEBUG  , Thread-5, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxUnavailable":2,"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:32Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxUnavailable': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:14:47Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1410', 'uid': 'b1b9be3a-1e6e-4429-a28a-bb6a57e40633'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 2, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:46Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:41Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:15:48,143 DEBUG  , Thread-5, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-vwh7g
2023-04-01 23:15:48,721 DEBUG  , Thread-5, checker.py:278, [trial: 0, gen: 3] Input delta [['spec', 'maxUnavailable']] matched with [['test-cluster', 'spec', 'max_unavailable']]
2023-04-01 23:15:48,931 INFO   , Thread-5, checker.py:134, [trial: 0, gen: 3] Number of system state fields: [3462] Number of delta: [6]
2023-04-01 23:15:48,932 INFO   , Thread-5, acto.py  :323, [trial: 0, gen: 3] Running bundled testcases
2023-04-01 23:15:48,932 DEBUG  , Thread-5, test_case.py:51, [trial: 0, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-01 23:15:48,933 INFO   , Thread-5, acto.py  :107, [trial: 0, gen: 3] JSON patch: [{"op": "replace", "path": "/spec/maxUnavailable", "value": 0}]
2023-04-01 23:15:48,933 DEBUG  , Thread-5, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:15:49,258 INFO   , Thread-5, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:15:55,681 INFO   , Thread-14, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:15:55,682 DEBUG  , Thread-14, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:15:55,682 DEBUG  , Thread-14, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:15:55,821 DEBUG  , Thread-14, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:52Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"annotations":{"ACTOKEY":"ACTOKEY"},"host":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:40Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:12:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:14:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:14:54Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1454', 'uid': '3318e776-66a1-48bd-9494-3f3e1f11466b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'annotations': {'ACTOKEY': 'ACTOKEY'}, 'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:15:23Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:15:55,850 DEBUG  , Thread-14, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-fh8fj
2023-04-01 23:15:56,360 ERROR  , Thread-14, checker.py:301, [trial: 0, gen: 3] Found no matching fields for input delta
2023-04-01 23:15:56,361 ERROR  , Thread-14, checker.py:302, [trial: 0, gen: 3] Input delta [['spec', 'ingress', 'sql', 'host']]
2023-04-01 23:15:56,645 INFO   , Thread-13, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:15:56,656 DEBUG  , Thread-13, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:15:56,657 DEBUG  , Thread-13, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:15:56,672 INFO   , Thread-14, common.py:560, [trial: 0, gen: 3] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:15:56,673 INFO   , Thread-14, checker.py:134, [trial: 0, gen: 3] Number of system state fields: [3463] Number of delta: [3]
2023-04-01 23:15:56,674 INFO   , Thread-14, acto.py  :301, [trial: 0, gen: 3] Setup produced invalid input
2023-04-01 23:15:56,675 WARNING, Thread-14, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:15:56,675 DEBUG  , Thread-14, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:15:56,820 DEBUG  , Thread-13, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:13:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:14:55Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1424', 'uid': 'e79a3795-9224-49e4-8af8-d4ab758d8aeb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:14:24Z', 'message': 'updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: [spec.resources[storage]: Invalid value: "0": must be greater than zero, spec.resources.requests.storage: Forbidden: field can not be less than previous value]', 'status': 'Failed', 'type': 'ResizePVC'}], 'version': 'v21.2.10'}}}
2023-04-01 23:15:56,852 DEBUG  , Thread-13, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-tshhh
2023-04-01 23:15:57,100 INFO   , Thread-14, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:15:57,602 DEBUG  , Thread-13, acto.py  :383, [trial: 0, gen: 1] Only one patch, no need to isolate
2023-04-01 23:15:57,602 WARNING, Thread-13, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:15:57,603 INFO   , Thread-13, input.py :723, [trial: 0, gen: 3] Progress [9] cases left
2023-04-01 23:15:57,603 DEBUG  , Thread-13, test_case.py:51, [trial: 0, gen: 3] Precondition [empty_precondition] Result [True]
2023-04-01 23:15:57,603 INFO   , Thread-13, acto.py  :263, [trial: 0, gen: 3] Precondition of ['spec', 'dataStore', 'pvc', 'spec'] satisfies
2023-04-01 23:15:57,603 INFO   , Thread-13, acto.py  :323, [trial: 0, gen: 3] Running bundled testcases
2023-04-01 23:15:57,603 DEBUG  , Thread-13, test_case.py:51, [trial: 0, gen: 3] Precondition [empty_precondition] Result [True]
2023-04-01 23:15:57,604 INFO   , Thread-13, acto.py  :107, [trial: 0, gen: 3] JSON patch: [{"op": "remove", "path": "/spec/dataStore/pvc/spec/accessModes"}, {"op": "remove", "path": "/spec/dataStore/pvc/spec/volumeMode"}, {"op": "remove", "path": "/spec/dataStore/pvc/spec/resources"}]
2023-04-01 23:15:57,604 DEBUG  , Thread-13, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:15:57,934 INFO   , Thread-13, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:16:03,263 INFO   , Thread-15, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:16:03,264 DEBUG  , Thread-15, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:16:03,264 DEBUG  , Thread-15, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:16:03,481 DEBUG  , Thread-15, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"hostPath":{"path":"/tmp/test","type":"DirectoryOrCreate"},"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:hostPath': {'.': {}, 'f:path': {}, 'f:type': {}}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:15:03Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1431', 'uid': '2ebc27e0-802d-4bab-8dcb-f56df10773be'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'hostPath': {'path': '/tmp/test', 'type': 'DirectoryOrCreate'}, 'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:16:03,515 DEBUG  , Thread-15, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-sj25m
2023-04-01 23:16:04,004 ERROR  , Thread-15, checker.py:301, [trial: 0, gen: 3] Found no matching fields for input delta
2023-04-01 23:16:04,004 ERROR  , Thread-15, checker.py:302, [trial: 0, gen: 3] Input delta [['spec', 'dataStore', 'hostPath', 'path']]
2023-04-01 23:16:04,213 INFO   , Thread-15, checker.py:134, [trial: 0, gen: 3] Number of system state fields: [3458] Number of delta: [2]
2023-04-01 23:16:04,214 DEBUG  , Thread-15, acto.py  :489, [trial: 0, gen: 3] Running recovery
2023-04-01 23:16:04,539 INFO   , Thread-15, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:16:07,217 INFO   , Thread-1, runner.py:360, [trial: 0, gen: 1] System took 00:02:32 to converge
2023-04-01 23:16:07,218 DEBUG  , Thread-1, runner.py:98, [trial: 0, gen: 1] STDOUT: 
2023-04-01 23:16:07,218 DEBUG  , Thread-1, runner.py:99, [trial: 0, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-00-0000/mutated-2.yaml": error validating data: ValidationError(CrdbCluster.spec.dataStore.pvc.source): missing required field "claimName" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.dataStore.pvc.source; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:16:07,375 DEBUG  , Thread-1, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":true},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:30Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:14:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1366', 'uid': '79a02b3f-3c2f-48ad-8fd8-514af4f4a9b5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY', 'readOnly': True}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:14:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:14:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:14:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:14:07Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:14:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:16:07,406 DEBUG  , Thread-1, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-8q4hs
2023-04-01 23:16:07,685 INFO   , Thread-1, common.py:569, [trial: 0, gen: 1] Recognized invalid input through field [claimName] in error message: error: error validating "testrun-crdb-whitebox/trial-00-0000/mutated-2.yaml": error validating data: ValidationError(CrdbCluster.spec.dataStore.pvc.source): missing required field "claimName" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.dataStore.pvc.source; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:16:07,685 INFO   , Thread-1, checker.py:213, [trial: 0, gen: 1] Invalid input, reject mutation
2023-04-01 23:16:07,685 INFO   , Thread-1, checker.py:214, [trial: 0, gen: 1] STDOUT: 
2023-04-01 23:16:07,685 INFO   , Thread-1, checker.py:215, [trial: 0, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-00-0000/mutated-2.yaml": error validating data: ValidationError(CrdbCluster.spec.dataStore.pvc.source): missing required field "claimName" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.dataStore.pvc.source; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:16:07,875 ERROR  , Thread-1, checker.py:301, [trial: 0, gen: 1] Found no matching fields for input delta
2023-04-01 23:16:07,875 ERROR  , Thread-1, checker.py:302, [trial: 0, gen: 1] Input delta [['spec', 'dataStore', 'pvc', 'source', 'claimName']]
2023-04-01 23:16:08,006 INFO   , Thread-1, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [4091] Number of delta: [1135]
2023-04-01 23:16:08,007 DEBUG  , Thread-1, acto.py  :374, [trial: 0, gen: 1] Invalid input, revert
2023-04-01 23:16:08,008 WARNING, Thread-1, schema.py:573, [trial: 0, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:16:08,008 DEBUG  , Thread-1, acto.py  :458, [trial: 0, gen: 1] Run and check
2023-04-01 23:16:08,391 INFO   , Thread-1, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:16:08,686 INFO   , Thread-6, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:16:08,687 DEBUG  , Thread-6, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:16:08,687 DEBUG  , Thread-6, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:16:08,842 DEBUG  , Thread-6, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:12:54Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:14:08Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:14:08Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:15:08Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1452', 'uid': '601576aa-be1a-4d75-a857-b25b73752994'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:09Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:13:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:14:36Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:16:08,876 DEBUG  , Thread-6, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-8h4vc
2023-04-01 23:16:09,688 INFO   , Thread-6, acto.py  :321, [trial: 0, gen: 1] All setups failed
2023-04-01 23:16:09,688 WARNING, Thread-6, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:16:09,688 INFO   , Thread-6, input.py :723, [trial: 0, gen: 3] Progress [19] cases left
2023-04-01 23:16:09,688 DEBUG  , Thread-6, test_case.py:51, [trial: 0, gen: 3] Precondition [empty_precondition] Result [True]
2023-04-01 23:16:09,688 INFO   , Thread-6, acto.py  :263, [trial: 0, gen: 3] Precondition of ['spec', 'ingress', 'sql', 'tls', 0, 'hosts'] satisfies
2023-04-01 23:16:09,689 INFO   , Thread-6, acto.py  :323, [trial: 0, gen: 3] Running bundled testcases
2023-04-01 23:16:09,689 DEBUG  , Thread-6, test_case.py:51, [trial: 0, gen: 3] Precondition [empty_precondition] Result [True]
2023-04-01 23:16:09,689 INFO   , Thread-6, acto.py  :107, [trial: 0, gen: 3] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": [{"hosts": []}]}}}]
2023-04-01 23:16:09,689 DEBUG  , Thread-6, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:16:10,036 INFO   , Thread-6, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:16:12,491 INFO   , Thread-2, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:16:12,492 DEBUG  , Thread-2, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:16:12,492 DEBUG  , Thread-2, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:16:12,632 DEBUG  , Thread-2, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:43Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem","volumeName":"ACTOKEY"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:39Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:43Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:15:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}, 'f:volumeName': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:15:12Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1481', 'uid': 'e245d522-350e-44b5-82a4-9c9d41d021cb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem', 'volumeName': 'ACTOKEY'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:42Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:15:42Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-01 23:16:12,660 DEBUG  , Thread-2, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-57pkm
2023-04-01 23:16:13,276 ERROR  , Thread-2, checker.py:301, [trial: 0, gen: 3] Found no matching fields for input delta
2023-04-01 23:16:13,276 ERROR  , Thread-2, checker.py:302, [trial: 0, gen: 3] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'volumeName']]
2023-04-01 23:16:13,491 INFO   , Thread-2, common.py:560, [trial: 0, gen: 3] Recognized invalid input through regex: failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than 'replicas', 'template', 'updateStrategy' and 'minReadySeconds' are forbidden
2023-04-01 23:16:13,491 INFO   , Thread-2, checker.py:134, [trial: 0, gen: 3] Number of system state fields: [3461] Number of delta: [5]
2023-04-01 23:16:13,494 INFO   , Thread-2, acto.py  :301, [trial: 0, gen: 3] Setup produced invalid input
2023-04-01 23:16:13,494 WARNING, Thread-2, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:16:13,496 DEBUG  , Thread-2, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:16:13,850 INFO   , Thread-2, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:16:14,074 INFO   , Thread-16, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:16:16,870 INFO   , Thread-9, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:16:20,535 INFO   , Thread-10, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:16:23,885 INFO   , Thread-12, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:16:23,886 DEBUG  , Thread-12, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:16:23,886 DEBUG  , Thread-12, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:16:24,000 INFO   , Thread-3, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:16:24,039 DEBUG  , Thread-12, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","ingressClassName":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:13:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:15:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:ingressClassName': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:15:23Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1574', 'uid': 'c57a7e9d-1d5e-4116-95f8-e4925213f4a8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'ingressClassName': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:54Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:13:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:19Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:16:24,076 DEBUG  , Thread-12, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-zcq2q
2023-04-01 23:16:24,683 ERROR  , Thread-12, checker.py:301, [trial: 0, gen: 3] Found no matching fields for input delta
2023-04-01 23:16:24,684 ERROR  , Thread-12, checker.py:302, [trial: 0, gen: 3] Input delta [['spec', 'ingress', 'sql', 'host']]
2023-04-01 23:16:24,907 INFO   , Thread-12, common.py:560, [trial: 0, gen: 3] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-01 23:16:24,907 INFO   , Thread-12, checker.py:134, [trial: 0, gen: 3] Number of system state fields: [3782] Number of delta: [3]
2023-04-01 23:16:24,907 INFO   , Thread-12, acto.py  :301, [trial: 0, gen: 3] Setup produced invalid input
2023-04-01 23:16:24,908 WARNING, Thread-12, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:16:24,908 DEBUG  , Thread-12, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:16:25,249 INFO   , Thread-12, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:16:48,174 INFO   , Thread-7, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:16:48,176 DEBUG  , Thread-7, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:16:48,177 DEBUG  , Thread-7, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:16:48,347 DEBUG  , Thread-7, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:15:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[{"secretName":"ACTOKEY"}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:34Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:15:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}, 'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:15:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:15:48Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1537', 'uid': 'd76e8d37-0df1-4a3c-b0d3-df2f6a891807'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'tls': [{'secretName': 'ACTOKEY'}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:16Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:16:48,379 DEBUG  , Thread-7, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-kf5f8
2023-04-01 23:16:49,174 INFO   , Thread-7, common.py:560, [trial: 0, gen: 3] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:16:49,174 INFO   , Thread-7, checker.py:134, [trial: 0, gen: 3] Number of system state fields: [3463] Number of delta: [9]
2023-04-01 23:16:49,175 INFO   , Thread-7, acto.py  :301, [trial: 0, gen: 3] Setup produced invalid input
2023-04-01 23:16:49,176 WARNING, Thread-7, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:16:49,176 DEBUG  , Thread-7, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:16:49,369 INFO   , Thread-5, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:16:49,370 DEBUG  , Thread-5, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:16:49,370 DEBUG  , Thread-5, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:16:49,508 INFO   , Thread-7, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:16:49,513 DEBUG  , Thread-5, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxUnavailable":0,"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:32Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxUnavailable': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:14:47Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1508', 'uid': 'b1b9be3a-1e6e-4429-a28a-bb6a57e40633'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 0, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:46Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:41Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:16:49,559 DEBUG  , Thread-5, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-vwh7g
2023-04-01 23:16:50,045 DEBUG  , Thread-5, checker.py:278, [trial: 0, gen: 3] Input delta [['spec', 'maxUnavailable']] matched with [['test-cluster', 'spec', 'max_unavailable']]
2023-04-01 23:16:50,257 INFO   , Thread-5, checker.py:134, [trial: 0, gen: 3] Number of system state fields: [3456] Number of delta: [8]
2023-04-01 23:16:50,258 WARNING, Thread-5, schema.py:573, [trial: 0, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:16:50,259 INFO   , Thread-5, input.py :723, [trial: 0, gen: 5] Progress [18] cases left
2023-04-01 23:16:50,259 DEBUG  , Thread-5, test_case.py:51, [trial: 0, gen: 5] Precondition [increase_precondition] Result [True]
2023-04-01 23:16:50,259 INFO   , Thread-5, acto.py  :263, [trial: 0, gen: 5] Precondition of ['spec', 'maxUnavailable'] satisfies
2023-04-01 23:16:50,259 INFO   , Thread-5, acto.py  :323, [trial: 0, gen: 5] Running bundled testcases
2023-04-01 23:16:50,259 DEBUG  , Thread-5, test_case.py:51, [trial: 0, gen: 5] Precondition [increase_precondition] Result [True]
2023-04-01 23:16:50,260 INFO   , Thread-5, acto.py  :107, [trial: 0, gen: 5] JSON patch: []
2023-04-01 23:16:50,260 DEBUG  , Thread-5, acto.py  :458, [trial: 0, gen: 5] Run and check
2023-04-01 23:16:50,590 INFO   , Thread-5, runner.py:291, [trial: 0, gen: 5] Waiting for system to converge... 
2023-04-01 23:16:57,716 INFO   , Thread-14, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:16:57,717 DEBUG  , Thread-14, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:16:57,717 DEBUG  , Thread-14, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:16:57,852 DEBUG  , Thread-14, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:52Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:40Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:12:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:14:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:15:57Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1508', 'uid': '3318e776-66a1-48bd-9494-3f3e1f11466b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:15:23Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:16:57,890 DEBUG  , Thread-14, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-fh8fj
2023-04-01 23:16:58,602 INFO   , Thread-13, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:16:58,614 DEBUG  , Thread-13, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:16:58,620 DEBUG  , Thread-13, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:16:58,847 INFO   , Thread-14, acto.py  :321, [trial: 0, gen: 3] All setups failed
2023-04-01 23:16:58,853 WARNING, Thread-14, schema.py:573, [trial: 0, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:16:58,859 INFO   , Thread-14, input.py :723, [trial: 0, gen: 5] Progress [8] cases left
2023-04-01 23:16:58,861 DEBUG  , Thread-14, test_case.py:51, [trial: 0, gen: 5] Precondition [empty_precondition] Result [True]
2023-04-01 23:16:58,861 INFO   , Thread-14, acto.py  :263, [trial: 0, gen: 5] Precondition of ['spec', 'ingress', 'sql', 'annotations', 'ACTOKEY'] satisfies
2023-04-01 23:16:58,861 INFO   , Thread-14, acto.py  :323, [trial: 0, gen: 5] Running bundled testcases
2023-04-01 23:16:58,861 DEBUG  , Thread-14, test_case.py:51, [trial: 0, gen: 5] Precondition [empty_precondition] Result [True]
2023-04-01 23:16:58,862 INFO   , Thread-14, acto.py  :107, [trial: 0, gen: 5] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "annotations": {"ACTOKEY": ""}}}}]
2023-04-01 23:16:58,863 DEBUG  , Thread-14, acto.py  :458, [trial: 0, gen: 5] Run and check
2023-04-01 23:16:58,966 DEBUG  , Thread-13, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:15:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:15:57Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1570', 'uid': 'e79a3795-9224-49e4-8af8-d4ab758d8aeb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'resources': {}}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:26Z', 'message': 'updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: [spec.resources[storage]: Invalid value: "0": must be greater than zero, spec.resources.requests.storage: Forbidden: field can not be less than previous value]', 'status': 'Failed', 'type': 'ResizePVC'}], 'version': 'v21.2.10'}}}
2023-04-01 23:16:58,994 DEBUG  , Thread-13, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-tshhh
2023-04-01 23:16:59,236 INFO   , Thread-14, runner.py:291, [trial: 0, gen: 5] Waiting for system to converge... 
2023-04-01 23:16:59,648 WARNING, Thread-13, checker.py:347, [trial: 0, gen: 3] 'AccessModeSchema' object is not subscriptable happened when trying to fetch default value
2023-04-01 23:16:59,650 ERROR  , Thread-13, checker.py:301, [trial: 0, gen: 3] Found no matching fields for input delta
2023-04-01 23:16:59,650 ERROR  , Thread-13, checker.py:302, [trial: 0, gen: 3] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'accessModes', 0]]
2023-04-01 23:16:59,867 INFO   , Thread-13, common.py:560, [trial: 0, gen: 3] Recognized invalid input through regex: updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: [spec.resources[storage]: Invalid value: "0": must be greater than zero, spec.resources.requests.storage: Forbidden: field can not be less than previous value]
2023-04-01 23:16:59,868 INFO   , Thread-13, checker.py:134, [trial: 0, gen: 3] Number of system state fields: [3457] Number of delta: [4]
2023-04-01 23:16:59,870 DEBUG  , Thread-13, acto.py  :374, [trial: 0, gen: 3] Invalid input, revert
2023-04-01 23:16:59,870 WARNING, Thread-13, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:16:59,871 DEBUG  , Thread-13, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:17:00,194 INFO   , Thread-13, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:17:03,403 INFO   , Thread-11, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:17:04,653 INFO   , Thread-15, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:17:04,655 DEBUG  , Thread-15, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:17:04,655 DEBUG  , Thread-15, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:17:04,793 DEBUG  , Thread-15, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:16:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1526', 'uid': '2ebc27e0-802d-4bab-8dcb-f56df10773be'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:17:04,820 DEBUG  , Thread-15, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-sj25m
2023-04-01 23:17:05,497 INFO   , Thread-15, acto.py  :187, Trial 0 finished, completed in 00:08:12
2023-04-01 23:17:05,497 INFO   , Thread-15, acto.py  :188, ---------------------------------------

2023-04-01 23:17:05,518 DEBUG  , Thread-15, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-sj25m
2023-04-01 23:17:08,495 INFO   , Thread-1, runner.py:360, [trial: 0, gen: 1] System took 00:01:00 to converge
2023-04-01 23:17:08,496 DEBUG  , Thread-1, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:17:08,496 DEBUG  , Thread-1, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:17:08,729 DEBUG  , Thread-1, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":true},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:30Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:14:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1564', 'uid': '79a02b3f-3c2f-48ad-8fd8-514af4f4a9b5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY', 'readOnly': True}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:14:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:14:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:14:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:14:07Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:14:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:17:08,759 DEBUG  , Thread-1, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-8q4hs
2023-04-01 23:17:09,216 DEBUG  , Thread-1, acto.py  :383, [trial: 0, gen: 1] Only one patch, no need to isolate
2023-04-01 23:17:09,216 WARNING, Thread-1, schema.py:573, [trial: 0, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-01 23:17:09,217 INFO   , Thread-1, input.py :723, [trial: 0, gen: 4] Progress [19] cases left
2023-04-01 23:17:09,217 DEBUG  , Thread-1, test_case.py:51, [trial: 0, gen: 4] Precondition [empty_precondition] Result [True]
2023-04-01 23:17:09,217 INFO   , Thread-1, acto.py  :263, [trial: 0, gen: 4] Precondition of ['spec', 'dataStore', 'pvc', 'source'] satisfies
2023-04-01 23:17:09,217 INFO   , Thread-1, acto.py  :323, [trial: 0, gen: 4] Running bundled testcases
2023-04-01 23:17:09,217 DEBUG  , Thread-1, test_case.py:51, [trial: 0, gen: 4] Precondition [empty_precondition] Result [True]
2023-04-01 23:17:09,217 INFO   , Thread-1, acto.py  :107, [trial: 0, gen: 4] JSON patch: [{"op": "remove", "path": "/spec/dataStore/pvc/source/readOnly"}, {"op": "remove", "path": "/spec/dataStore/pvc/source/claimName"}]
2023-04-01 23:17:09,218 DEBUG  , Thread-1, acto.py  :458, [trial: 0, gen: 4] Run and check
2023-04-01 23:17:09,510 INFO   , Thread-1, runner.py:291, [trial: 0, gen: 4] Waiting for system to converge... 
2023-04-01 23:17:10,163 INFO   , Thread-6, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:17:10,164 DEBUG  , Thread-6, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:17:10,164 DEBUG  , Thread-6, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:17:10,418 DEBUG  , Thread-6, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[{"hosts":[]}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:12:54Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:16:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:16:10Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1595', 'uid': '601576aa-be1a-4d75-a857-b25b73752994'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'tls': [{}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:09Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:13:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:38Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:17:10,451 DEBUG  , Thread-6, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-8h4vc
2023-04-01 23:17:10,957 ERROR  , Thread-6, checker.py:301, [trial: 0, gen: 3] Found no matching fields for input delta
2023-04-01 23:17:10,957 ERROR  , Thread-6, checker.py:302, [trial: 0, gen: 3] Input delta [['spec', 'ingress', 'sql', 'host']]
2023-04-01 23:17:11,165 INFO   , Thread-6, common.py:560, [trial: 0, gen: 3] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:17:11,166 INFO   , Thread-6, checker.py:134, [trial: 0, gen: 3] Number of system state fields: [3462] Number of delta: [2]
2023-04-01 23:17:11,167 DEBUG  , Thread-6, acto.py  :374, [trial: 0, gen: 3] Invalid input, revert
2023-04-01 23:17:11,167 WARNING, Thread-6, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:17:11,167 DEBUG  , Thread-6, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:17:11,514 INFO   , Thread-6, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:17:13,978 INFO   , Thread-2, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:17:13,979 DEBUG  , Thread-2, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:17:13,979 DEBUG  , Thread-2, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:17:14,114 DEBUG  , Thread-2, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:43Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:39Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:43Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:15:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:16:13Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1530', 'uid': 'e245d522-350e-44b5-82a4-9c9d41d021cb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:42Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:15:42Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-01 23:17:14,161 DEBUG  , Thread-2, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-57pkm
2023-04-01 23:17:14,174 INFO   , Thread-16, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:17:14,994 INFO   , Thread-2, acto.py  :321, [trial: 0, gen: 3] All setups failed
2023-04-01 23:17:14,995 WARNING, Thread-2, schema.py:573, [trial: 0, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:17:14,995 INFO   , Thread-2, input.py :723, [trial: 0, gen: 5] Progress [18] cases left
2023-04-01 23:17:14,995 DEBUG  , Thread-2, test_case.py:51, [trial: 0, gen: 5] Precondition [change_precondition] Result [False]
2023-04-01 23:17:14,995 INFO   , Thread-2, acto.py  :267, [trial: 0, gen: 5] Precondition of ["spec", "dataStore", "pvc", "spec", "volumeName"] fails, try setup first
2023-04-01 23:17:14,996 INFO   , Thread-2, acto.py  :107, [trial: 0, gen: 5] JSON patch: [{"op": "add", "path": "/spec/dataStore/pvc/spec/volumeName", "value": "ACTOKEY"}]
2023-04-01 23:17:14,996 DEBUG  , Thread-2, test_case.py:51, [trial: 0, gen: 5] Precondition [change_precondition] Result [True]
2023-04-01 23:17:14,996 DEBUG  , Thread-2, acto.py  :458, [trial: 0, gen: 5] Run and check
2023-04-01 23:17:15,344 INFO   , Thread-2, runner.py:291, [trial: 0, gen: 5] Waiting for system to converge... 
2023-04-01 23:17:16,952 INFO   , Thread-9, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:17:20,616 INFO   , Thread-10, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:17:21,587 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-14
2023-04-01 23:17:25,380 INFO   , Thread-12, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:17:25,381 DEBUG  , Thread-12, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:17:25,382 DEBUG  , Thread-12, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:17:25,521 DEBUG  , Thread-12, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:13:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:15:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:16:25Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1586', 'uid': 'c57a7e9d-1d5e-4116-95f8-e4925213f4a8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:54Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:13:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:19Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:17:25,552 DEBUG  , Thread-12, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-zcq2q
2023-04-01 23:17:26,422 INFO   , Thread-12, acto.py  :321, [trial: 0, gen: 3] All setups failed
2023-04-01 23:17:26,422 WARNING, Thread-12, schema.py:573, [trial: 0, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:17:26,423 INFO   , Thread-12, input.py :723, [trial: 0, gen: 5] Progress [11] cases left
2023-04-01 23:17:26,423 DEBUG  , Thread-12, test_case.py:51, [trial: 0, gen: 5] Precondition [empty_precondition] Result [True]
2023-04-01 23:17:26,423 INFO   , Thread-12, acto.py  :263, [trial: 0, gen: 5] Precondition of ['spec', 'ingress', 'sql', 'ingressClassName'] satisfies
2023-04-01 23:17:26,423 INFO   , Thread-12, acto.py  :323, [trial: 0, gen: 5] Running bundled testcases
2023-04-01 23:17:26,423 DEBUG  , Thread-12, test_case.py:51, [trial: 0, gen: 5] Precondition [empty_precondition] Result [True]
2023-04-01 23:17:26,423 INFO   , Thread-12, acto.py  :107, [trial: 0, gen: 5] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "ingressClassName": ""}}}]
2023-04-01 23:17:26,423 DEBUG  , Thread-12, acto.py  :458, [trial: 0, gen: 5] Run and check
2023-04-01 23:17:26,787 INFO   , Thread-12, runner.py:291, [trial: 0, gen: 5] Waiting for system to converge... 
2023-04-01 23:17:45,935 INFO   , Thread-3, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:17:49,642 INFO   , Thread-7, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:17:49,643 DEBUG  , Thread-7, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:17:49,644 DEBUG  , Thread-7, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:17:49,787 DEBUG  , Thread-7, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:15:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:34Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:15:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}, 'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:15:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:16:49Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1590', 'uid': 'd76e8d37-0df1-4a3c-b0d3-df2f6a891807'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:16Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:17:49,815 DEBUG  , Thread-7, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-kf5f8
2023-04-01 23:17:50,623 INFO   , Thread-7, acto.py  :321, [trial: 0, gen: 3] All setups failed
2023-04-01 23:17:50,623 WARNING, Thread-7, schema.py:573, [trial: 0, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:17:50,624 INFO   , Thread-7, input.py :723, [trial: 0, gen: 5] Progress [18] cases left
2023-04-01 23:17:50,624 DEBUG  , Thread-7, test_case.py:51, [trial: 0, gen: 5] Precondition [change_precondition] Result [False]
2023-04-01 23:17:50,624 INFO   , Thread-7, acto.py  :267, [trial: 0, gen: 5] Precondition of ["spec", "ingress", "sql", "tls", 0, "secretName"] fails, try setup first
2023-04-01 23:17:50,625 INFO   , Thread-7, acto.py  :107, [trial: 0, gen: 5] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": [{"secretName": "ACTOKEY"}]}}}]
2023-04-01 23:17:50,625 DEBUG  , Thread-7, test_case.py:51, [trial: 0, gen: 5] Precondition [change_precondition] Result [True]
2023-04-01 23:17:50,625 DEBUG  , Thread-7, acto.py  :458, [trial: 0, gen: 5] Run and check
2023-04-01 23:17:50,702 INFO   , Thread-5, runner.py:360, [trial: 0, gen: 5] System took 00:01:00 to converge
2023-04-01 23:17:50,703 DEBUG  , Thread-5, runner.py:98, [trial: 0, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:17:50,703 DEBUG  , Thread-5, runner.py:99, [trial: 0, gen: 5] STDERR: 
2023-04-01 23:17:50,842 DEBUG  , Thread-5, runner.py:177, [trial: 0, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxUnavailable":0,"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:32Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxUnavailable': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:14:47Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1508', 'uid': 'b1b9be3a-1e6e-4429-a28a-bb6a57e40633'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 0, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:46Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:41Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:17:50,868 DEBUG  , Thread-5, runner.py:202, [trial: 0, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-vwh7g
2023-04-01 23:17:50,987 INFO   , Thread-7, runner.py:291, [trial: 0, gen: 5] Waiting for system to converge... 
2023-04-01 23:17:51,647 WARNING, Thread-5, schema.py:573, [trial: 0, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-01 23:17:51,648 INFO   , Thread-5, input.py :723, [trial: 0, gen: 6] Progress [17] cases left
2023-04-01 23:17:51,648 DEBUG  , Thread-5, test_case.py:51, [trial: 0, gen: 6] Precondition [decrease_precondition] Result [False]
2023-04-01 23:17:51,648 INFO   , Thread-5, acto.py  :267, [trial: 0, gen: 6] Precondition of ["spec", "maxUnavailable"] fails, try setup first
2023-04-01 23:17:51,648 INFO   , Thread-5, acto.py  :107, [trial: 0, gen: 6] JSON patch: [{"op": "replace", "path": "/spec/maxUnavailable", "value": 5}]
2023-04-01 23:17:51,648 DEBUG  , Thread-5, test_case.py:51, [trial: 0, gen: 6] Precondition [decrease_precondition] Result [True]
2023-04-01 23:17:51,649 DEBUG  , Thread-5, acto.py  :458, [trial: 0, gen: 6] Run and check
2023-04-01 23:17:52,010 INFO   , Thread-5, runner.py:291, [trial: 0, gen: 6] Waiting for system to converge... 
2023-04-01 23:17:59,964 INFO   , Thread-14, runner.py:360, [trial: 0, gen: 5] System took 00:01:00 to converge
2023-04-01 23:17:59,966 DEBUG  , Thread-14, runner.py:98, [trial: 0, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:17:59,966 DEBUG  , Thread-14, runner.py:99, [trial: 0, gen: 5] STDERR: 
2023-04-01 23:18:00,112 DEBUG  , Thread-14, runner.py:177, [trial: 0, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:52Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"annotations":{"ACTOKEY":""},"host":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:40Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:16:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:16:59Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1649', 'uid': '3318e776-66a1-48bd-9494-3f3e1f11466b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'annotations': {'ACTOKEY': ''}, 'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:17:29Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:18:00,139 DEBUG  , Thread-14, runner.py:202, [trial: 0, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-fh8fj
2023-04-01 23:18:00,778 ERROR  , Thread-14, checker.py:301, [trial: 0, gen: 5] Found no matching fields for input delta
2023-04-01 23:18:00,778 ERROR  , Thread-14, checker.py:302, [trial: 0, gen: 5] Input delta [['spec', 'ingress', 'sql', 'host']]
2023-04-01 23:18:00,951 INFO   , Thread-13, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:18:00,957 DEBUG  , Thread-13, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:18:00,962 DEBUG  , Thread-13, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:18:01,048 INFO   , Thread-14, common.py:560, [trial: 0, gen: 5] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:18:01,054 INFO   , Thread-14, checker.py:134, [trial: 0, gen: 5] Number of system state fields: [3463] Number of delta: [3]
2023-04-01 23:18:01,072 DEBUG  , Thread-14, acto.py  :374, [trial: 0, gen: 5] Invalid input, revert
2023-04-01 23:18:01,072 WARNING, Thread-14, schema.py:573, [trial: 0, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:18:01,073 DEBUG  , Thread-14, acto.py  :458, [trial: 0, gen: 5] Run and check
2023-04-01 23:18:01,203 DEBUG  , Thread-13, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:15:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:17:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1620', 'uid': 'e79a3795-9224-49e4-8af8-d4ab758d8aeb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:26Z', 'message': 'updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: [spec.resources[storage]: Invalid value: "0": must be greater than zero, spec.resources.requests.storage: Forbidden: field can not be less than previous value]', 'status': 'Failed', 'type': 'ResizePVC'}], 'version': 'v21.2.10'}}}
2023-04-01 23:18:01,232 DEBUG  , Thread-13, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-tshhh
2023-04-01 23:18:01,549 INFO   , Thread-14, runner.py:291, [trial: 0, gen: 5] Waiting for system to converge... 
2023-04-01 23:18:02,101 DEBUG  , Thread-13, acto.py  :383, [trial: 0, gen: 3] Only one patch, no need to isolate
2023-04-01 23:18:02,102 WARNING, Thread-13, schema.py:573, [trial: 0, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:18:02,103 INFO   , Thread-13, input.py :723, [trial: 0, gen: 5] Progress [8] cases left
2023-04-01 23:18:02,103 DEBUG  , Thread-13, test_case.py:51, [trial: 0, gen: 5] Precondition [delete_precondition] Result [False]
2023-04-01 23:18:02,103 INFO   , Thread-13, acto.py  :267, [trial: 0, gen: 5] Precondition of ["spec", "podEnvVariables", 0, "valueFrom"] fails, try setup first
2023-04-01 23:18:02,104 INFO   , Thread-13, acto.py  :107, [trial: 0, gen: 5] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": null, "optional": false}, "fieldRef": {"apiVersion": "ACTOKEY", "fieldPath": "ACTOKEY"}, "resourceFieldRef": {"containerName": "ACTOKEY", "divisor": 3, "resource": "ACTOKEY"}, "secretKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": false}}}]}]
2023-04-01 23:18:02,104 DEBUG  , Thread-13, test_case.py:51, [trial: 0, gen: 5] Precondition [delete_precondition] Result [True]
2023-04-01 23:18:02,104 DEBUG  , Thread-13, acto.py  :458, [trial: 0, gen: 5] Run and check
2023-04-01 23:18:02,439 INFO   , Thread-13, runner.py:291, [trial: 0, gen: 5] Waiting for system to converge... 
2023-04-01 23:18:03,498 INFO   , Thread-11, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:18:09,628 INFO   , Thread-1, runner.py:360, [trial: 0, gen: 4] System took 00:01:00 to converge
2023-04-01 23:18:09,630 DEBUG  , Thread-1, runner.py:98, [trial: 0, gen: 4] STDOUT: 
2023-04-01 23:18:09,630 DEBUG  , Thread-1, runner.py:99, [trial: 0, gen: 4] STDERR: error: error validating "testrun-crdb-whitebox/trial-00-0000/mutated-4.yaml": error validating data: ValidationError(CrdbCluster.spec.dataStore.pvc.source): missing required field "claimName" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.dataStore.pvc.source; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:18:09,785 DEBUG  , Thread-1, runner.py:177, [trial: 0, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":true},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:30Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:14:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1564', 'uid': '79a02b3f-3c2f-48ad-8fd8-514af4f4a9b5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY', 'readOnly': True}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:14:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:14:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:14:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:14:07Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:14:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:18:09,818 DEBUG  , Thread-1, runner.py:202, [trial: 0, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-8q4hs
2023-04-01 23:18:10,232 INFO   , Thread-1, common.py:569, [trial: 0, gen: 4] Recognized invalid input through field [claimName] in error message: error: error validating "testrun-crdb-whitebox/trial-00-0000/mutated-4.yaml": error validating data: ValidationError(CrdbCluster.spec.dataStore.pvc.source): missing required field "claimName" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.dataStore.pvc.source; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:18:10,232 INFO   , Thread-1, checker.py:213, [trial: 0, gen: 4] Invalid input, reject mutation
2023-04-01 23:18:10,232 INFO   , Thread-1, checker.py:214, [trial: 0, gen: 4] STDOUT: 
2023-04-01 23:18:10,232 INFO   , Thread-1, checker.py:215, [trial: 0, gen: 4] STDERR: error: error validating "testrun-crdb-whitebox/trial-00-0000/mutated-4.yaml": error validating data: ValidationError(CrdbCluster.spec.dataStore.pvc.source): missing required field "claimName" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.dataStore.pvc.source; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:18:10,493 ERROR  , Thread-1, checker.py:301, [trial: 0, gen: 4] Found no matching fields for input delta
2023-04-01 23:18:10,493 ERROR  , Thread-1, checker.py:302, [trial: 0, gen: 4] Input delta [['spec', 'dataStore', 'pvc', 'source', 'claimName']]
2023-04-01 23:18:10,729 INFO   , Thread-1, checker.py:134, [trial: 0, gen: 4] Number of system state fields: [4091] Number of delta: [0]
2023-04-01 23:18:10,730 DEBUG  , Thread-1, acto.py  :374, [trial: 0, gen: 4] Invalid input, revert
2023-04-01 23:18:10,731 WARNING, Thread-1, schema.py:573, [trial: 0, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-01 23:18:10,731 DEBUG  , Thread-1, acto.py  :458, [trial: 0, gen: 4] Run and check
2023-04-01 23:18:11,091 INFO   , Thread-1, runner.py:291, [trial: 0, gen: 4] Waiting for system to converge... 
2023-04-01 23:18:11,636 INFO   , Thread-6, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:18:11,637 DEBUG  , Thread-6, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:18:11,638 DEBUG  , Thread-6, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:18:11,780 DEBUG  , Thread-6, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:12:54Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:16:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:17:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1646', 'uid': '601576aa-be1a-4d75-a857-b25b73752994'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:09Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:13:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:38Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:18:11,807 DEBUG  , Thread-6, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-8h4vc
2023-04-01 23:18:12,636 DEBUG  , Thread-6, acto.py  :383, [trial: 0, gen: 3] Only one patch, no need to isolate
2023-04-01 23:18:12,637 WARNING, Thread-6, schema.py:573, [trial: 0, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:18:12,637 INFO   , Thread-6, input.py :723, [trial: 0, gen: 5] Progress [18] cases left
2023-04-01 23:18:12,637 DEBUG  , Thread-6, test_case.py:51, [trial: 0, gen: 5] Precondition [delete_precondition] Result [True]
2023-04-01 23:18:12,637 INFO   , Thread-6, acto.py  :263, [trial: 0, gen: 5] Precondition of ['spec', 'nodes'] satisfies
2023-04-01 23:18:12,638 INFO   , Thread-6, acto.py  :323, [trial: 0, gen: 5] Running bundled testcases
2023-04-01 23:18:12,638 DEBUG  , Thread-6, test_case.py:51, [trial: 0, gen: 5] Precondition [delete_precondition] Result [True]
2023-04-01 23:18:12,638 INFO   , Thread-6, acto.py  :107, [trial: 0, gen: 5] JSON patch: [{"op": "replace", "path": "/spec/nodes", "value": 0}]
2023-04-01 23:18:12,638 DEBUG  , Thread-6, acto.py  :458, [trial: 0, gen: 5] Run and check
2023-04-01 23:18:12,987 INFO   , Thread-6, runner.py:291, [trial: 0, gen: 5] Waiting for system to converge... 
2023-04-01 23:18:14,936 INFO   , Thread-15, base.py  :41, Created cluster
2023-04-01 23:18:14,950 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:18:15,469 INFO   , Thread-2, runner.py:360, [trial: 0, gen: 5] System took 00:01:00 to converge
2023-04-01 23:18:15,470 DEBUG  , Thread-2, runner.py:98, [trial: 0, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:18:15,470 DEBUG  , Thread-2, runner.py:99, [trial: 0, gen: 5] STDERR: 
2023-04-01 23:18:15,608 DEBUG  , Thread-2, runner.py:177, [trial: 0, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:43Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem","volumeName":"ACTOKEY"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:39Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:17:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}, 'f:volumeName': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:17:15Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1671', 'uid': 'e245d522-350e-44b5-82a4-9c9d41d021cb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem', 'volumeName': 'ACTOKEY'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:42Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:17:45Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-01 23:18:15,637 DEBUG  , Thread-2, runner.py:202, [trial: 0, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-57pkm
2023-04-01 23:18:16,196 ERROR  , Thread-2, checker.py:301, [trial: 0, gen: 5] Found no matching fields for input delta
2023-04-01 23:18:16,196 ERROR  , Thread-2, checker.py:302, [trial: 0, gen: 5] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'volumeName']]
2023-04-01 23:18:16,424 INFO   , Thread-2, common.py:560, [trial: 0, gen: 5] Recognized invalid input through regex: failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than 'replicas', 'template', 'updateStrategy' and 'minReadySeconds' are forbidden
2023-04-01 23:18:16,424 INFO   , Thread-2, checker.py:134, [trial: 0, gen: 5] Number of system state fields: [3461] Number of delta: [2]
2023-04-01 23:18:16,426 INFO   , Thread-2, acto.py  :301, [trial: 0, gen: 5] Setup produced invalid input
2023-04-01 23:18:16,427 WARNING, Thread-2, schema.py:573, [trial: 0, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:18:16,427 DEBUG  , Thread-2, acto.py  :458, [trial: 0, gen: 5] Run and check
2023-04-01 23:18:16,744 INFO   , Thread-2, runner.py:291, [trial: 0, gen: 5] Waiting for system to converge... 
2023-04-01 23:18:17,691 INFO   , Thread-4, runner.py:360, [trial: 0, gen: 1] System took 00:02:42 to converge
2023-04-01 23:18:17,692 DEBUG  , Thread-4, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:18:17,692 DEBUG  , Thread-4, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:18:17,832 DEBUG  , Thread-4, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:32Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:28Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:15:34Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1670', 'uid': 'fef30211-c4a2-4459-9db0-5c15f290fd0a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:31Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:32Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:37Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:18:17,861 DEBUG  , Thread-4, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-5kvd9
2023-04-01 23:18:18,783 INFO   , Thread-4, acto.py  :321, [trial: 0, gen: 1] All setups failed
2023-04-01 23:18:18,783 WARNING, Thread-4, schema.py:573, [trial: 0, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:18:18,784 INFO   , Thread-4, input.py :723, [trial: 0, gen: 3] Progress [19] cases left
2023-04-01 23:18:18,784 DEBUG  , Thread-4, test_case.py:51, [trial: 0, gen: 3] Precondition [empty_precondition] Result [True]
2023-04-01 23:18:18,784 INFO   , Thread-4, acto.py  :263, [trial: 0, gen: 3] Precondition of ['spec', 'tolerations', 0] satisfies
2023-04-01 23:18:18,784 INFO   , Thread-4, acto.py  :323, [trial: 0, gen: 3] Running bundled testcases
2023-04-01 23:18:18,784 DEBUG  , Thread-4, test_case.py:51, [trial: 0, gen: 3] Precondition [empty_precondition] Result [True]
2023-04-01 23:18:18,785 INFO   , Thread-4, acto.py  :107, [trial: 0, gen: 3] JSON patch: [{"op": "add", "path": "/spec/tolerations", "value": [{}]}]
2023-04-01 23:18:18,785 DEBUG  , Thread-4, acto.py  :458, [trial: 0, gen: 3] Run and check
2023-04-01 23:18:19,286 INFO   , Thread-4, runner.py:291, [trial: 0, gen: 3] Waiting for system to converge... 
2023-04-01 23:18:23,422 INFO   , Thread-16, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:18:25,222 INFO   , Thread-9, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:18:26,901 INFO   , Thread-12, runner.py:360, [trial: 0, gen: 5] System took 00:01:00 to converge
2023-04-01 23:18:26,902 DEBUG  , Thread-12, runner.py:98, [trial: 0, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:18:26,902 DEBUG  , Thread-12, runner.py:99, [trial: 0, gen: 5] STDERR: 
2023-04-01 23:18:27,052 DEBUG  , Thread-12, runner.py:177, [trial: 0, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","ingressClassName":""}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:17:26Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:ingressClassName': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:17:26Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1767', 'uid': 'c57a7e9d-1d5e-4116-95f8-e4925213f4a8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:54Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:13:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:18:23Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:18:27,078 DEBUG  , Thread-12, runner.py:202, [trial: 0, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-zcq2q
2023-04-01 23:18:28,000 INFO   , Thread-12, common.py:560, [trial: 0, gen: 5] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:18:28,000 INFO   , Thread-12, checker.py:134, [trial: 0, gen: 5] Number of system state fields: [3781] Number of delta: [3]
2023-04-01 23:18:28,002 DEBUG  , Thread-12, acto.py  :374, [trial: 0, gen: 5] Invalid input, revert
2023-04-01 23:18:28,002 WARNING, Thread-12, schema.py:573, [trial: 0, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:18:28,003 DEBUG  , Thread-12, acto.py  :458, [trial: 0, gen: 5] Run and check
2023-04-01 23:18:28,325 INFO   , Thread-12, runner.py:291, [trial: 0, gen: 5] Waiting for system to converge... 
2023-04-01 23:18:32,319 DEBUG  , Thread-15, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:18:42,525 INFO   , Thread-15, deploy.py:91, Operator ready
2023-04-01 23:18:42,526 INFO   , Thread-15, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:18:44,650 DEBUG  , Thread-15, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:18:46,019 INFO   , Thread-3, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:18:51,727 INFO   , Thread-7, runner.py:360, [trial: 0, gen: 5] System took 00:01:00 to converge
2023-04-01 23:18:51,728 DEBUG  , Thread-7, runner.py:98, [trial: 0, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:18:51,728 DEBUG  , Thread-7, runner.py:99, [trial: 0, gen: 5] STDERR: 
2023-04-01 23:18:51,862 DEBUG  , Thread-7, runner.py:177, [trial: 0, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:15:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[{"secretName":"ACTOKEY"}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:34Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:15:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:17:50Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:17:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1729', 'uid': 'd76e8d37-0df1-4a3c-b0d3-df2f6a891807'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'tls': [{'secretName': 'ACTOKEY'}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:18:19Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:18:51,894 DEBUG  , Thread-7, runner.py:202, [trial: 0, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-kf5f8
2023-04-01 23:18:52,402 ERROR  , Thread-7, checker.py:301, [trial: 0, gen: 5] Found no matching fields for input delta
2023-04-01 23:18:52,403 ERROR  , Thread-7, checker.py:302, [trial: 0, gen: 5] Input delta [['spec', 'ingress', 'sql', 'host']]
2023-04-01 23:18:52,475 INFO   , Thread-5, runner.py:360, [trial: 0, gen: 6] System took 00:01:00 to converge
2023-04-01 23:18:52,486 DEBUG  , Thread-5, runner.py:98, [trial: 0, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:18:52,507 DEBUG  , Thread-5, runner.py:99, [trial: 0, gen: 6] STDERR: 
2023-04-01 23:18:52,731 INFO   , Thread-7, common.py:560, [trial: 0, gen: 5] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:18:52,732 INFO   , Thread-7, checker.py:134, [trial: 0, gen: 5] Number of system state fields: [3463] Number of delta: [3]
2023-04-01 23:18:52,744 INFO   , Thread-7, acto.py  :301, [trial: 0, gen: 5] Setup produced invalid input
2023-04-01 23:18:52,745 WARNING, Thread-7, schema.py:573, [trial: 0, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:18:52,745 DEBUG  , Thread-7, acto.py  :458, [trial: 0, gen: 5] Run and check
2023-04-01 23:18:52,835 DEBUG  , Thread-5, runner.py:177, [trial: 0, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxUnavailable":5,"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:32Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxUnavailable': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:14:47Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1693', 'uid': 'b1b9be3a-1e6e-4429-a28a-bb6a57e40633'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 5, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:46Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:41Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:18:52,862 DEBUG  , Thread-5, runner.py:202, [trial: 0, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-vwh7g
2023-04-01 23:18:53,182 INFO   , Thread-7, runner.py:291, [trial: 0, gen: 5] Waiting for system to converge... 
2023-04-01 23:18:53,462 DEBUG  , Thread-5, checker.py:278, [trial: 0, gen: 6] Input delta [['spec', 'maxUnavailable']] matched with [['test-cluster', 'spec', 'max_unavailable']]
2023-04-01 23:18:53,702 INFO   , Thread-5, checker.py:134, [trial: 0, gen: 6] Number of system state fields: [3456] Number of delta: [8]
2023-04-01 23:18:53,704 INFO   , Thread-5, acto.py  :323, [trial: 0, gen: 6] Running bundled testcases
2023-04-01 23:18:53,705 DEBUG  , Thread-5, test_case.py:51, [trial: 0, gen: 6] Precondition [decrease_precondition] Result [True]
2023-04-01 23:18:53,705 INFO   , Thread-5, acto.py  :107, [trial: 0, gen: 6] JSON patch: [{"op": "replace", "path": "/spec/maxUnavailable", "value": 2}]
2023-04-01 23:18:53,705 DEBUG  , Thread-5, acto.py  :458, [trial: 0, gen: 6] Run and check
2023-04-01 23:18:54,061 INFO   , Thread-5, runner.py:291, [trial: 0, gen: 6] Waiting for system to converge... 
2023-04-01 23:18:54,761 INFO   , Thread-15, deploy.py:91, Operator ready
2023-04-01 23:18:54,761 INFO   , Thread-15, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:19:02,204 INFO   , Thread-14, runner.py:360, [trial: 0, gen: 5] System took 00:01:00 to converge
2023-04-01 23:19:02,206 DEBUG  , Thread-14, runner.py:98, [trial: 0, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:19:02,207 DEBUG  , Thread-14, runner.py:99, [trial: 0, gen: 5] STDERR: 
2023-04-01 23:19:02,347 DEBUG  , Thread-14, runner.py:177, [trial: 0, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:52Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:40Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:16:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:18:01Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1698', 'uid': '3318e776-66a1-48bd-9494-3f3e1f11466b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:17:29Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:19:02,378 DEBUG  , Thread-14, runner.py:202, [trial: 0, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-fh8fj
2023-04-01 23:19:03,177 DEBUG  , Thread-14, acto.py  :383, [trial: 0, gen: 5] Only one patch, no need to isolate
2023-04-01 23:19:03,178 WARNING, Thread-14, schema.py:573, [trial: 0, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:19:03,178 INFO   , Thread-14, input.py :723, [trial: 0, gen: 7] Progress [7] cases left
2023-04-01 23:19:03,178 DEBUG  , Thread-14, test_case.py:51, [trial: 0, gen: 7] Precondition [delete_precondition] Result [False]
2023-04-01 23:19:03,178 INFO   , Thread-14, acto.py  :267, [trial: 0, gen: 7] Precondition of ["spec", "ingress"] fails, try setup first
2023-04-01 23:19:03,179 INFO   , Thread-14, acto.py  :107, [trial: 0, gen: 7] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": null, "ui": null}}]
2023-04-01 23:19:03,179 DEBUG  , Thread-14, test_case.py:51, [trial: 0, gen: 7] Precondition [delete_precondition] Result [True]
2023-04-01 23:19:03,179 DEBUG  , Thread-14, acto.py  :458, [trial: 0, gen: 7] Run and check
2023-04-01 23:19:03,522 INFO   , Thread-14, runner.py:291, [trial: 0, gen: 7] Waiting for system to converge... 
2023-04-01 23:19:09,170 INFO   , Thread-10, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:19:11,214 INFO   , Thread-1, runner.py:360, [trial: 0, gen: 4] System took 00:01:00 to converge
2023-04-01 23:19:11,215 DEBUG  , Thread-1, runner.py:98, [trial: 0, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:19:11,216 DEBUG  , Thread-1, runner.py:99, [trial: 0, gen: 4] STDERR: 
2023-04-01 23:19:11,359 DEBUG  , Thread-1, runner.py:177, [trial: 0, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":true},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:30Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:14:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1564', 'uid': '79a02b3f-3c2f-48ad-8fd8-514af4f4a9b5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY', 'readOnly': True}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:14:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:14:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:14:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:14:07Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:14:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:19:11,385 DEBUG  , Thread-1, runner.py:202, [trial: 0, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-8q4hs
2023-04-01 23:19:12,239 DEBUG  , Thread-1, acto.py  :383, [trial: 0, gen: 4] Only one patch, no need to isolate
2023-04-01 23:19:12,240 WARNING, Thread-1, schema.py:573, [trial: 0, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-01 23:19:12,240 INFO   , Thread-1, input.py :723, [trial: 0, gen: 6] Progress [18] cases left
2023-04-01 23:19:12,240 DEBUG  , Thread-1, test_case.py:51, [trial: 0, gen: 6] Precondition [delete_precondition] Result [True]
2023-04-01 23:19:12,240 INFO   , Thread-1, acto.py  :263, [trial: 0, gen: 6] Precondition of ['spec', 'image'] satisfies
2023-04-01 23:19:12,240 INFO   , Thread-1, acto.py  :323, [trial: 0, gen: 6] Running bundled testcases
2023-04-01 23:19:12,241 DEBUG  , Thread-1, test_case.py:51, [trial: 0, gen: 6] Precondition [delete_precondition] Result [True]
2023-04-01 23:19:12,241 INFO   , Thread-1, acto.py  :107, [trial: 0, gen: 6] JSON patch: [{"op": "remove", "path": "/spec/image/name"}]
2023-04-01 23:19:12,241 DEBUG  , Thread-1, acto.py  :458, [trial: 0, gen: 6] Run and check
2023-04-01 23:19:12,533 INFO   , Thread-1, runner.py:291, [trial: 0, gen: 6] Waiting for system to converge... 
2023-04-01 23:19:13,109 INFO   , Thread-6, runner.py:360, [trial: 0, gen: 5] System took 00:01:00 to converge
2023-04-01 23:19:13,111 DEBUG  , Thread-6, runner.py:98, [trial: 0, gen: 5] STDOUT: 
2023-04-01 23:19:13,111 DEBUG  , Thread-6, runner.py:99, [trial: 0, gen: 5] STDERR: The CrdbCluster "test-cluster" is invalid: spec.nodes: Invalid value: 0: spec.nodes in body should be greater than or equal to 3

2023-04-01 23:19:13,251 DEBUG  , Thread-6, runner.py:177, [trial: 0, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:12:54Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:16:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:17:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1646', 'uid': '601576aa-be1a-4d75-a857-b25b73752994'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:09Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:13:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:38Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:19:13,281 DEBUG  , Thread-6, runner.py:202, [trial: 0, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-8h4vc
2023-04-01 23:19:13,569 INFO   , Thread-6, common.py:560, [trial: 0, gen: 5] Recognized invalid input through regex: The CrdbCluster "test-cluster" is invalid: spec.nodes: Invalid value: 0: spec.nodes in body should be greater than or equal to 3

2023-04-01 23:19:13,569 INFO   , Thread-6, checker.py:213, [trial: 0, gen: 5] Invalid input, reject mutation
2023-04-01 23:19:13,569 INFO   , Thread-6, checker.py:214, [trial: 0, gen: 5] STDOUT: 
2023-04-01 23:19:13,569 INFO   , Thread-6, checker.py:215, [trial: 0, gen: 5] STDERR: The CrdbCluster "test-cluster" is invalid: spec.nodes: Invalid value: 0: spec.nodes in body should be greater than or equal to 3

2023-04-01 23:19:13,867 ERROR  , Thread-6, checker.py:301, [trial: 0, gen: 5] Found no matching fields for input delta
2023-04-01 23:19:13,867 ERROR  , Thread-6, checker.py:302, [trial: 0, gen: 5] Input delta [['spec', 'nodes']]
2023-04-01 23:19:14,085 INFO   , Thread-6, checker.py:134, [trial: 0, gen: 5] Number of system state fields: [3461] Number of delta: [0]
2023-04-01 23:19:14,087 DEBUG  , Thread-6, acto.py  :374, [trial: 0, gen: 5] Invalid input, revert
2023-04-01 23:19:14,087 WARNING, Thread-6, schema.py:573, [trial: 0, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:19:14,087 DEBUG  , Thread-6, acto.py  :458, [trial: 0, gen: 5] Run and check
2023-04-01 23:19:14,459 INFO   , Thread-6, runner.py:291, [trial: 0, gen: 5] Waiting for system to converge... 
2023-04-01 23:19:16,861 INFO   , Thread-2, runner.py:360, [trial: 0, gen: 5] System took 00:01:00 to converge
2023-04-01 23:19:16,863 DEBUG  , Thread-2, runner.py:98, [trial: 0, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:19:16,863 DEBUG  , Thread-2, runner.py:99, [trial: 0, gen: 5] STDERR: 
2023-04-01 23:19:16,997 DEBUG  , Thread-2, runner.py:177, [trial: 0, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:43Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:39Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:17:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:18:16Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1719', 'uid': 'e245d522-350e-44b5-82a4-9c9d41d021cb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:42Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:17:45Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-01 23:19:17,024 DEBUG  , Thread-2, runner.py:202, [trial: 0, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-57pkm
2023-04-01 23:19:17,860 INFO   , Thread-2, acto.py  :321, [trial: 0, gen: 5] All setups failed
2023-04-01 23:19:17,860 WARNING, Thread-2, schema.py:573, [trial: 0, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:19:17,861 INFO   , Thread-2, input.py :723, [trial: 0, gen: 7] Progress [17] cases left
2023-04-01 23:19:17,861 DEBUG  , Thread-2, test_case.py:51, [trial: 0, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-01 23:19:17,861 INFO   , Thread-2, acto.py  :263, [trial: 0, gen: 7] Precondition of ['spec', 'dataStore', 'pvc', 'spec', 'volumeName'] satisfies
2023-04-01 23:19:17,861 INFO   , Thread-2, acto.py  :323, [trial: 0, gen: 7] Running bundled testcases
2023-04-01 23:19:17,861 DEBUG  , Thread-2, test_case.py:51, [trial: 0, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-01 23:19:17,861 INFO   , Thread-2, acto.py  :107, [trial: 0, gen: 7] JSON patch: [{"op": "add", "path": "/spec/dataStore/pvc/spec/volumeName", "value": ""}]
2023-04-01 23:19:17,862 DEBUG  , Thread-2, acto.py  :458, [trial: 0, gen: 7] Run and check
2023-04-01 23:19:18,188 INFO   , Thread-2, runner.py:291, [trial: 0, gen: 7] Waiting for system to converge... 
2023-04-01 23:19:19,464 INFO   , Thread-4, runner.py:360, [trial: 0, gen: 3] System took 00:01:00 to converge
2023-04-01 23:19:19,465 DEBUG  , Thread-4, runner.py:98, [trial: 0, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:19:19,466 DEBUG  , Thread-4, runner.py:99, [trial: 0, gen: 3] STDERR: 
2023-04-01 23:19:19,613 DEBUG  , Thread-4, runner.py:177, [trial: 0, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:32Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"tolerations":[{}]}}\n'}, 'creationTimestamp': '2023-04-02T03:11:28Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:18:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2094', 'uid': 'fef30211-c4a2-4459-9db0-5c15f290fd0a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'tolerations': [{}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:31Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:32Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:37Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:19:19,648 DEBUG  , Thread-4, runner.py:202, [trial: 0, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-5kvd9
2023-04-01 23:19:20,376 INFO   , Thread-4, checker.py:134, [trial: 0, gen: 3] Number of system state fields: [3456] Number of delta: [24]
2023-04-01 23:19:20,377 WARNING, Thread-4, schema.py:573, [trial: 0, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-01 23:19:20,378 INFO   , Thread-4, input.py :723, [trial: 0, gen: 4] Progress [18] cases left
2023-04-01 23:19:20,378 DEBUG  , Thread-4, test_case.py:51, [trial: 0, gen: 4] Precondition [delete_precondition] Result [False]
2023-04-01 23:19:20,378 INFO   , Thread-4, acto.py  :267, [trial: 0, gen: 4] Precondition of ["spec", "podEnvVariables", 0, "value"] fails, try setup first
2023-04-01 23:19:20,379 INFO   , Thread-4, acto.py  :107, [trial: 0, gen: 4] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "value": "ACTOKEY"}]}]
2023-04-01 23:19:20,379 DEBUG  , Thread-4, test_case.py:51, [trial: 0, gen: 4] Precondition [delete_precondition] Result [True]
2023-04-01 23:19:20,379 DEBUG  , Thread-4, acto.py  :458, [trial: 0, gen: 4] Run and check
2023-04-01 23:19:20,704 INFO   , Thread-4, runner.py:291, [trial: 0, gen: 4] Waiting for system to converge... 
2023-04-01 23:19:28,453 INFO   , Thread-12, runner.py:360, [trial: 0, gen: 5] System took 00:01:00 to converge
2023-04-01 23:19:28,455 DEBUG  , Thread-12, runner.py:98, [trial: 0, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:19:28,455 DEBUG  , Thread-12, runner.py:99, [trial: 0, gen: 5] STDERR: 
2023-04-01 23:19:28,596 DEBUG  , Thread-12, runner.py:177, [trial: 0, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:17:26Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:sql': {'f:ingressClassName': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:18:28Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1776', 'uid': 'c57a7e9d-1d5e-4116-95f8-e4925213f4a8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:54Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:13:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:18:23Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:19:28,622 DEBUG  , Thread-12, runner.py:202, [trial: 0, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-zcq2q
2023-04-01 23:19:29,429 DEBUG  , Thread-12, acto.py  :383, [trial: 0, gen: 5] Only one patch, no need to isolate
2023-04-01 23:19:29,429 WARNING, Thread-12, schema.py:573, [trial: 0, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:19:29,430 INFO   , Thread-12, input.py :723, [trial: 0, gen: 7] Progress [10] cases left
2023-04-01 23:19:29,430 DEBUG  , Thread-12, test_case.py:51, [trial: 0, gen: 7] Precondition [delete_precondition] Result [False]
2023-04-01 23:19:29,430 INFO   , Thread-12, acto.py  :267, [trial: 0, gen: 7] Precondition of ["spec", "ingress", "ui", "tls", 0, "hosts", 0] fails, try setup first
2023-04-01 23:19:29,431 INFO   , Thread-12, acto.py  :107, [trial: 0, gen: 7] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": [{"hosts": ["ACTOKEY"]}]}}}]
2023-04-01 23:19:29,431 DEBUG  , Thread-12, test_case.py:51, [trial: 0, gen: 7] Precondition [delete_precondition] Result [True]
2023-04-01 23:19:29,431 DEBUG  , Thread-12, acto.py  :458, [trial: 0, gen: 7] Run and check
2023-04-01 23:19:29,770 INFO   , Thread-12, runner.py:291, [trial: 0, gen: 7] Waiting for system to converge... 
2023-04-01 23:19:34,899 WARNING, Thread-15, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:19:34,899 DEBUG  , Thread-15, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:19:37,484 INFO   , Thread-15, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:19:47,263 INFO   , Thread-11, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:19:53,813 INFO   , Thread-7, runner.py:360, [trial: 0, gen: 5] System took 00:01:00 to converge
2023-04-01 23:19:53,814 DEBUG  , Thread-7, runner.py:98, [trial: 0, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:19:53,815 DEBUG  , Thread-7, runner.py:99, [trial: 0, gen: 5] STDERR: 
2023-04-01 23:19:53,961 DEBUG  , Thread-7, runner.py:177, [trial: 0, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:15:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:34Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:15:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:17:50Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:18:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1781', 'uid': 'd76e8d37-0df1-4a3c-b0d3-df2f6a891807'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:18:19Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:19:53,989 DEBUG  , Thread-7, runner.py:202, [trial: 0, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-kf5f8
2023-04-01 23:19:54,654 INFO   , Thread-5, runner.py:360, [trial: 0, gen: 6] System took 00:01:00 to converge
2023-04-01 23:19:54,655 DEBUG  , Thread-5, runner.py:98, [trial: 0, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:19:54,660 DEBUG  , Thread-5, runner.py:99, [trial: 0, gen: 6] STDERR: 
2023-04-01 23:19:54,984 INFO   , Thread-7, acto.py  :321, [trial: 0, gen: 5] All setups failed
2023-04-01 23:19:54,984 WARNING, Thread-7, schema.py:573, [trial: 0, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:19:54,985 INFO   , Thread-7, input.py :723, [trial: 0, gen: 7] Progress [17] cases left
2023-04-01 23:19:54,985 DEBUG  , Thread-7, test_case.py:51, [trial: 0, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-01 23:19:54,985 INFO   , Thread-7, acto.py  :263, [trial: 0, gen: 7] Precondition of ['spec', 'ingress', 'sql', 'tls', 0, 'secretName'] satisfies
2023-04-01 23:19:54,985 INFO   , Thread-7, acto.py  :323, [trial: 0, gen: 7] Running bundled testcases
2023-04-01 23:19:54,985 DEBUG  , Thread-7, test_case.py:51, [trial: 0, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-01 23:19:54,985 INFO   , Thread-7, acto.py  :107, [trial: 0, gen: 7] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": [{"secretName": ""}]}}}]
2023-04-01 23:19:54,986 DEBUG  , Thread-7, acto.py  :458, [trial: 0, gen: 7] Run and check
2023-04-01 23:19:55,067 DEBUG  , Thread-5, runner.py:177, [trial: 0, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxUnavailable":2,"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:32Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxUnavailable': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:14:47Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1788', 'uid': 'b1b9be3a-1e6e-4429-a28a-bb6a57e40633'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 2, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:46Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:41Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:19:55,094 DEBUG  , Thread-5, runner.py:202, [trial: 0, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-vwh7g
2023-04-01 23:19:55,368 INFO   , Thread-7, runner.py:291, [trial: 0, gen: 7] Waiting for system to converge... 
2023-04-01 23:19:55,752 DEBUG  , Thread-5, checker.py:278, [trial: 0, gen: 6] Input delta [['spec', 'maxUnavailable']] matched with [['test-cluster', 'spec', 'max_unavailable']]
2023-04-01 23:19:55,976 INFO   , Thread-5, checker.py:134, [trial: 0, gen: 6] Number of system state fields: [3462] Number of delta: [6]
2023-04-01 23:19:55,979 WARNING, Thread-5, schema.py:573, [trial: 0, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-01 23:19:55,979 INFO   , Thread-5, input.py :723, [trial: 0, gen: 8] Progress [16] cases left
2023-04-01 23:19:55,980 DEBUG  , Thread-5, test_case.py:51, [trial: 0, gen: 8] Precondition [empty_precondition] Result [True]
2023-04-01 23:19:55,980 INFO   , Thread-5, acto.py  :263, [trial: 0, gen: 8] Precondition of ['spec', 'maxUnavailable'] satisfies
2023-04-01 23:19:55,980 INFO   , Thread-5, acto.py  :323, [trial: 0, gen: 8] Running bundled testcases
2023-04-01 23:19:55,980 DEBUG  , Thread-5, test_case.py:51, [trial: 0, gen: 8] Precondition [empty_precondition] Result [True]
2023-04-01 23:19:55,980 INFO   , Thread-5, acto.py  :107, [trial: 0, gen: 8] JSON patch: [{"op": "replace", "path": "/spec/maxUnavailable", "value": 0}]
2023-04-01 23:19:55,980 DEBUG  , Thread-5, acto.py  :458, [trial: 0, gen: 8] Run and check
2023-04-01 23:19:56,311 INFO   , Thread-5, runner.py:291, [trial: 0, gen: 8] Waiting for system to converge... 
2023-04-01 23:20:03,647 INFO   , Thread-14, runner.py:360, [trial: 0, gen: 7] System took 00:01:00 to converge
2023-04-01 23:20:03,649 DEBUG  , Thread-14, runner.py:98, [trial: 0, gen: 7] STDOUT: 
2023-04-01 23:20:03,649 DEBUG  , Thread-14, runner.py:99, [trial: 0, gen: 7] STDERR: Error from server (at least one of UI or SQL ingresses must be present): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"ingress\":{\"sql\":null,\"ui\":null},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"ingress":{"sql":null,"ui":null},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-13-0000/mutated-7.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: at least one of UI or SQL ingresses must be present

2023-04-01 23:20:03,792 DEBUG  , Thread-14, runner.py:177, [trial: 0, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:52Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:40Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:16:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:18:01Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1698', 'uid': '3318e776-66a1-48bd-9494-3f3e1f11466b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:17:29Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:20:03,819 DEBUG  , Thread-14, runner.py:202, [trial: 0, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-fh8fj
2023-04-01 23:20:04,106 INFO   , Thread-14, checker.py:213, [trial: 0, gen: 7] Invalid input, reject mutation
2023-04-01 23:20:04,106 INFO   , Thread-14, checker.py:214, [trial: 0, gen: 7] STDOUT: 
2023-04-01 23:20:04,106 INFO   , Thread-14, checker.py:215, [trial: 0, gen: 7] STDERR: Error from server (at least one of UI or SQL ingresses must be present): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"ingress\":{\"sql\":null,\"ui\":null},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"ingress":{"sql":null,"ui":null},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-13-0000/mutated-7.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: at least one of UI or SQL ingresses must be present

2023-04-01 23:20:04,617 INFO   , Thread-14, checker.py:134, [trial: 0, gen: 7] Number of system state fields: [3461] Number of delta: [0]
2023-04-01 23:20:04,618 INFO   , Thread-14, acto.py  :301, [trial: 0, gen: 7] Setup produced invalid input
2023-04-01 23:20:04,618 WARNING, Thread-14, schema.py:573, [trial: 0, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:20:04,619 DEBUG  , Thread-14, acto.py  :458, [trial: 0, gen: 7] Run and check
2023-04-01 23:20:04,961 INFO   , Thread-14, runner.py:291, [trial: 0, gen: 7] Waiting for system to converge... 
2023-04-01 23:20:09,259 INFO   , Thread-10, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:20:12,642 INFO   , Thread-1, runner.py:360, [trial: 0, gen: 6] System took 00:01:00 to converge
2023-04-01 23:20:12,642 DEBUG  , Thread-1, runner.py:98, [trial: 0, gen: 6] STDOUT: 
2023-04-01 23:20:12,643 DEBUG  , Thread-1, runner.py:99, [trial: 0, gen: 6] STDERR: error: error validating "testrun-crdb-whitebox/trial-00-0000/mutated-6.yaml": error validating data: ValidationError(CrdbCluster.spec.image): missing required field "name" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.image; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:20:12,795 DEBUG  , Thread-1, runner.py:177, [trial: 0, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":true},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:30Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:14:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1564', 'uid': '79a02b3f-3c2f-48ad-8fd8-514af4f4a9b5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY', 'readOnly': True}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:14:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:14:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:14:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:14:07Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:14:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:20:12,826 DEBUG  , Thread-1, runner.py:202, [trial: 0, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-8q4hs
2023-04-01 23:20:13,119 INFO   , Thread-1, common.py:569, [trial: 0, gen: 6] Recognized invalid input through field [name] in error message: error: error validating "testrun-crdb-whitebox/trial-00-0000/mutated-6.yaml": error validating data: ValidationError(CrdbCluster.spec.image): missing required field "name" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.image; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:20:13,119 INFO   , Thread-1, checker.py:213, [trial: 0, gen: 6] Invalid input, reject mutation
2023-04-01 23:20:13,119 INFO   , Thread-1, checker.py:214, [trial: 0, gen: 6] STDOUT: 
2023-04-01 23:20:13,119 INFO   , Thread-1, checker.py:215, [trial: 0, gen: 6] STDERR: error: error validating "testrun-crdb-whitebox/trial-00-0000/mutated-6.yaml": error validating data: ValidationError(CrdbCluster.spec.image): missing required field "name" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.image; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:20:13,352 DEBUG  , Thread-1, compare.py:79, [trial: 0, gen: 6] cockroachdb/cockroach - v21.2.10
2023-04-01 23:20:13,353 DEBUG  , Thread-1, compare.py:79, [trial: 0, gen: 6] cockroachdb/cockroach - v21.2.10
2023-04-01 23:20:13,364 DEBUG  , Thread-1, compare.py:79, [trial: 0, gen: 6] cockroachdb/cockroach - v21.2.10
2023-04-01 23:20:13,365 DEBUG  , Thread-1, compare.py:79, [trial: 0, gen: 6] cockroachdb/cockroach - v21.2.10
2023-04-01 23:20:13,365 DEBUG  , Thread-1, compare.py:79, [trial: 0, gen: 6] cockroachdb/cockroach - v21.2.10
2023-04-01 23:20:13,365 DEBUG  , Thread-1, compare.py:79, [trial: 0, gen: 6] cockroachdb/cockroach - v21.2.10
2023-04-01 23:20:13,366 DEBUG  , Thread-1, compare.py:79, [trial: 0, gen: 6] cockroachdb/cockroach - v21.2.10
2023-04-01 23:20:13,366 DEBUG  , Thread-1, compare.py:79, [trial: 0, gen: 6] cockroachdb/cockroach - v21.2.10
2023-04-01 23:20:13,378 DEBUG  , Thread-1, compare.py:79, [trial: 0, gen: 6] cockroachdb/cockroach - v21.2.10
2023-04-01 23:20:13,378 DEBUG  , Thread-1, compare.py:79, [trial: 0, gen: 6] cockroachdb/cockroach - v21.2.10
2023-04-01 23:20:13,601 INFO   , Thread-1, checker.py:134, [trial: 0, gen: 6] Number of system state fields: [3461] Number of delta: [158]
2023-04-01 23:20:13,602 DEBUG  , Thread-1, acto.py  :374, [trial: 0, gen: 6] Invalid input, revert
2023-04-01 23:20:13,602 WARNING, Thread-1, schema.py:573, [trial: 0, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-01 23:20:13,603 DEBUG  , Thread-1, acto.py  :458, [trial: 0, gen: 6] Run and check
2023-04-01 23:20:13,997 INFO   , Thread-1, runner.py:291, [trial: 0, gen: 6] Waiting for system to converge... 
2023-04-01 23:20:14,589 INFO   , Thread-6, runner.py:360, [trial: 0, gen: 5] System took 00:01:00 to converge
2023-04-01 23:20:14,590 DEBUG  , Thread-6, runner.py:98, [trial: 0, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:20:14,591 DEBUG  , Thread-6, runner.py:99, [trial: 0, gen: 5] STDERR: 
2023-04-01 23:20:14,729 DEBUG  , Thread-6, runner.py:177, [trial: 0, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:12:54Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:16:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:17:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1646', 'uid': '601576aa-be1a-4d75-a857-b25b73752994'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:09Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:13:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:38Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:20:14,761 DEBUG  , Thread-6, runner.py:202, [trial: 0, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-8h4vc
2023-04-01 23:20:15,583 DEBUG  , Thread-6, acto.py  :383, [trial: 0, gen: 5] Only one patch, no need to isolate
2023-04-01 23:20:15,583 WARNING, Thread-6, schema.py:573, [trial: 0, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:20:15,584 INFO   , Thread-6, input.py :723, [trial: 0, gen: 7] Progress [17] cases left
2023-04-01 23:20:15,584 DEBUG  , Thread-6, test_case.py:51, [trial: 0, gen: 7] Precondition [increase_precondition] Result [True]
2023-04-01 23:20:15,584 INFO   , Thread-6, acto.py  :263, [trial: 0, gen: 7] Precondition of ['spec', 'nodes'] satisfies
2023-04-01 23:20:15,584 INFO   , Thread-6, acto.py  :323, [trial: 0, gen: 7] Running bundled testcases
2023-04-01 23:20:15,584 DEBUG  , Thread-6, test_case.py:51, [trial: 0, gen: 7] Precondition [increase_precondition] Result [True]
2023-04-01 23:20:15,584 INFO   , Thread-6, acto.py  :107, [trial: 0, gen: 7] JSON patch: [{"op": "replace", "path": "/spec/nodes", "value": 5}]
2023-04-01 23:20:15,584 DEBUG  , Thread-6, acto.py  :458, [trial: 0, gen: 7] Run and check
2023-04-01 23:20:15,933 INFO   , Thread-6, runner.py:291, [trial: 0, gen: 7] Waiting for system to converge... 
2023-04-01 23:20:18,314 INFO   , Thread-2, runner.py:360, [trial: 0, gen: 7] System took 00:01:00 to converge
2023-04-01 23:20:18,315 DEBUG  , Thread-2, runner.py:98, [trial: 0, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:20:18,316 DEBUG  , Thread-2, runner.py:99, [trial: 0, gen: 7] STDERR: 
2023-04-01 23:20:18,464 DEBUG  , Thread-2, runner.py:177, [trial: 0, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:43Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem","volumeName":""}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:39Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:17:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}, 'f:volumeName': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:19:18Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1811', 'uid': 'e245d522-350e-44b5-82a4-9c9d41d021cb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:42Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:17:45Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-01 23:20:18,492 DEBUG  , Thread-2, runner.py:202, [trial: 0, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-57pkm
2023-04-01 23:20:19,343 INFO   , Thread-2, checker.py:134, [trial: 0, gen: 7] Number of system state fields: [3460] Number of delta: [0]
2023-04-01 23:20:19,344 WARNING, Thread-2, schema.py:573, [trial: 0, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-01 23:20:19,345 INFO   , Thread-2, input.py :723, [trial: 0, gen: 8] Progress [16] cases left
2023-04-01 23:20:19,345 DEBUG  , Thread-2, test_case.py:51, [trial: 0, gen: 8] Precondition [delete_precondition] Result [False]
2023-04-01 23:20:19,345 INFO   , Thread-2, acto.py  :267, [trial: 0, gen: 8] Precondition of ["spec", "topologySpreadConstraints"] fails, try setup first
2023-04-01 23:20:19,346 INFO   , Thread-2, acto.py  :107, [trial: 0, gen: 8] JSON patch: [{"op": "add", "path": "/spec/topologySpreadConstraints", "value": []}]
2023-04-01 23:20:19,346 DEBUG  , Thread-2, test_case.py:51, [trial: 0, gen: 8] Precondition [delete_precondition] Result [False]
2023-04-01 23:20:19,346 ERROR  , Thread-2, acto.py  :277, [trial: 0, gen: 8] Setup does not work correctly
2023-04-01 23:20:19,346 INFO   , Thread-2, acto.py  :321, [trial: 0, gen: 8] All setups failed
2023-04-01 23:20:19,346 WARNING, Thread-2, schema.py:573, [trial: 0, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-01 23:20:19,346 INFO   , Thread-2, input.py :723, [trial: 0, gen: 8] Progress [15] cases left
2023-04-01 23:20:19,346 DEBUG  , Thread-2, test_case.py:51, [trial: 0, gen: 8] Precondition [push_precondition] Result [False]
2023-04-01 23:20:19,346 INFO   , Thread-2, acto.py  :267, [trial: 0, gen: 8] Precondition of ["spec", "topologySpreadConstraints"] fails, try setup first
2023-04-01 23:20:19,347 INFO   , Thread-2, acto.py  :107, [trial: 0, gen: 8] JSON patch: [{"op": "add", "path": "/spec/topologySpreadConstraints", "value": [{"labelSelector": {"matchExpressions": [{"key": "ACTOKEY", "operator": "ACTOKEY", "values": []}, {"key": "ACTOKEY", "operator": "ACTOKEY", "values": ["ACTOKEY", "ACTOKEY", "ACTOKEY", "ACTOKEY"]}, {"key": "ACTOKEY", "operator": "ACTOKEY", "values": null}], "matchLabels": {"ACTOKEY": "ACTOKEY"}}, "maxSkew": 0, "topologyKey": "ACTOKEY", "whenUnsatisfiable": "ACTOKEY"}, {"labelSelector": {"matchExpressions": null, "matchLabels": {"ACTOKEY": "ACTOKEY"}}, "maxSkew": 3, "topologyKey": "ACTOKEY", "whenUnsatisfiable": "ACTOKEY"}]}]
2023-04-01 23:20:19,347 DEBUG  , Thread-2, test_case.py:51, [trial: 0, gen: 8] Precondition [push_precondition] Result [True]
2023-04-01 23:20:19,347 DEBUG  , Thread-2, acto.py  :458, [trial: 0, gen: 8] Run and check
2023-04-01 23:20:19,691 INFO   , Thread-2, runner.py:291, [trial: 0, gen: 8] Waiting for system to converge... 
2023-04-01 23:20:20,833 INFO   , Thread-4, runner.py:360, [trial: 0, gen: 4] System took 00:01:00 to converge
2023-04-01 23:20:20,834 DEBUG  , Thread-4, runner.py:98, [trial: 0, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:20:20,834 DEBUG  , Thread-4, runner.py:99, [trial: 0, gen: 4] STDERR: 
2023-04-01 23:20:20,971 DEBUG  , Thread-4, runner.py:177, [trial: 0, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:32Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","value":"ACTOKEY"}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"tolerations":[{}]}}\n'}, 'creationTimestamp': '2023-04-02T03:11:28Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:19:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2199', 'uid': 'fef30211-c4a2-4459-9db0-5c15f290fd0a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'value': 'ACTOKEY'}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'tolerations': [{}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:31Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:32Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:37Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:20:20,998 DEBUG  , Thread-4, runner.py:202, [trial: 0, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-5kvd9
2023-04-01 23:20:21,896 INFO   , Thread-4, checker.py:134, [trial: 0, gen: 4] Number of system state fields: [3461] Number of delta: [6]
2023-04-01 23:20:21,897 INFO   , Thread-4, acto.py  :323, [trial: 0, gen: 4] Running bundled testcases
2023-04-01 23:20:21,897 DEBUG  , Thread-4, test_case.py:51, [trial: 0, gen: 4] Precondition [delete_precondition] Result [True]
2023-04-01 23:20:21,898 INFO   , Thread-4, acto.py  :107, [trial: 0, gen: 4] JSON patch: [{"op": "replace", "path": "/spec/podEnvVariables/0/value", "value": ""}]
2023-04-01 23:20:21,898 DEBUG  , Thread-4, acto.py  :458, [trial: 0, gen: 4] Run and check
2023-04-01 23:20:22,214 INFO   , Thread-4, runner.py:291, [trial: 0, gen: 4] Waiting for system to converge... 
2023-04-01 23:20:28,601 INFO   , Thread-13, runner.py:323, [trial: 0, gen: 5] Statefulset test-cluster is not ready yet
2023-04-01 23:20:29,810 INFO   , Thread-3, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:20:29,896 INFO   , Thread-12, runner.py:360, [trial: 0, gen: 7] System took 00:01:00 to converge
2023-04-01 23:20:29,897 DEBUG  , Thread-12, runner.py:98, [trial: 0, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:20:29,897 DEBUG  , Thread-12, runner.py:99, [trial: 0, gen: 7] STDERR: 
2023-04-01 23:20:30,049 DEBUG  , Thread-12, runner.py:177, [trial: 0, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","tls":[{"hosts":["ACTOKEY"]}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:19:29Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'f:ingressClassName': {}}, 'f:ui': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:19:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1961', 'uid': 'c57a7e9d-1d5e-4116-95f8-e4925213f4a8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY', 'tls': [{'hosts': ['ACTOKEY']}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:54Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:13:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:20:25Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:20:30,075 DEBUG  , Thread-12, runner.py:202, [trial: 0, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-zcq2q
2023-04-01 23:20:30,812 INFO   , Thread-12, common.py:560, [trial: 0, gen: 7] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-01 23:20:30,812 INFO   , Thread-12, checker.py:134, [trial: 0, gen: 7] Number of system state fields: [3467] Number of delta: [4]
2023-04-01 23:20:30,813 INFO   , Thread-12, acto.py  :301, [trial: 0, gen: 7] Setup produced invalid input
2023-04-01 23:20:30,813 WARNING, Thread-12, schema.py:573, [trial: 0, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:20:30,814 DEBUG  , Thread-12, acto.py  :458, [trial: 0, gen: 7] Run and check
2023-04-01 23:20:31,148 INFO   , Thread-12, runner.py:291, [trial: 0, gen: 7] Waiting for system to converge... 
2023-04-01 23:20:38,978 INFO   , Thread-15, runner.py:360, [trial: 1, gen: 0] System took 00:01:01 to converge
2023-04-01 23:20:38,979 DEBUG  , Thread-15, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:20:38,979 DEBUG  , Thread-15, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:20:39,085 DEBUG  , Thread-15, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:19:37Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:19:37Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:19:39Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '908', 'uid': 'c8fe7c24-ff1f-459b-90ba-e5845cebfaaf'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:19:37Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:19:37Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:19:39Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:20:39,114 DEBUG  , Thread-15, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-gcs6c
2023-04-01 23:20:39,327 WARNING, Thread-15, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:20:39,328 INFO   , Thread-15, input.py :723, [trial: 1, gen: 1] Progress [8] cases left
2023-04-01 23:20:39,328 DEBUG  , Thread-15, test_case.py:51, [trial: 1, gen: 1] Precondition [change_precondition] Result [False]
2023-04-01 23:20:39,328 INFO   , Thread-15, acto.py  :267, [trial: 1, gen: 1] Precondition of ["spec", "dataStore", "hostPath", "type"] fails, try setup first
2023-04-01 23:20:39,328 INFO   , Thread-15, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/dataStore/hostPath", "value": {"path": "/tmp/test", "type": "DirectoryOrCreate"}}]
2023-04-01 23:20:39,328 DEBUG  , Thread-15, test_case.py:51, [trial: 1, gen: 1] Precondition [change_precondition] Result [True]
2023-04-01 23:20:39,328 DEBUG  , Thread-15, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:20:39,420 INFO   , Thread-16, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:20:39,684 INFO   , Thread-15, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:20:43,266 INFO   , Thread-9, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:20:47,349 INFO   , Thread-11, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:20:56,078 INFO   , Thread-7, runner.py:360, [trial: 0, gen: 7] System took 00:01:00 to converge
2023-04-01 23:20:56,079 DEBUG  , Thread-7, runner.py:98, [trial: 0, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:20:56,079 DEBUG  , Thread-7, runner.py:99, [trial: 0, gen: 7] STDERR: 
2023-04-01 23:20:56,222 DEBUG  , Thread-7, runner.py:177, [trial: 0, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:15:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[{"secretName":""}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:34Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:19:55Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:19:55Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1926', 'uid': 'd76e8d37-0df1-4a3c-b0d3-df2f6a891807'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'tls': [{}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:20:25Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:20:56,250 DEBUG  , Thread-7, runner.py:202, [trial: 0, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-kf5f8
2023-04-01 23:20:56,760 ERROR  , Thread-7, checker.py:301, [trial: 0, gen: 7] Found no matching fields for input delta
2023-04-01 23:20:56,760 ERROR  , Thread-7, checker.py:302, [trial: 0, gen: 7] Input delta [['spec', 'ingress', 'sql', 'host']]
2023-04-01 23:20:56,851 INFO   , Thread-5, runner.py:360, [trial: 0, gen: 8] System took 00:01:00 to converge
2023-04-01 23:20:56,857 DEBUG  , Thread-5, runner.py:98, [trial: 0, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:20:56,863 DEBUG  , Thread-5, runner.py:99, [trial: 0, gen: 8] STDERR: 
2023-04-01 23:20:57,090 INFO   , Thread-7, common.py:560, [trial: 0, gen: 7] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:20:57,090 INFO   , Thread-7, checker.py:134, [trial: 0, gen: 7] Number of system state fields: [3462] Number of delta: [2]
2023-04-01 23:20:57,100 DEBUG  , Thread-7, acto.py  :374, [trial: 0, gen: 7] Invalid input, revert
2023-04-01 23:20:57,101 WARNING, Thread-7, schema.py:573, [trial: 0, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:20:57,102 DEBUG  , Thread-7, acto.py  :458, [trial: 0, gen: 7] Run and check
2023-04-01 23:20:57,188 DEBUG  , Thread-5, runner.py:177, [trial: 0, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxUnavailable":0,"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:32Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxUnavailable': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:14:47Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1884', 'uid': 'b1b9be3a-1e6e-4429-a28a-bb6a57e40633'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 0, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:46Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:41Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:20:57,215 DEBUG  , Thread-5, runner.py:202, [trial: 0, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-vwh7g
2023-04-01 23:20:57,577 INFO   , Thread-7, runner.py:291, [trial: 0, gen: 7] Waiting for system to converge... 
2023-04-01 23:20:57,835 DEBUG  , Thread-5, checker.py:278, [trial: 0, gen: 8] Input delta [['spec', 'maxUnavailable']] matched with [['test-cluster', 'spec', 'max_unavailable']]
2023-04-01 23:20:58,054 INFO   , Thread-5, checker.py:134, [trial: 0, gen: 8] Number of system state fields: [3456] Number of delta: [8]
2023-04-01 23:20:58,057 WARNING, Thread-5, schema.py:573, [trial: 0, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-01 23:20:58,058 INFO   , Thread-5, input.py :723, [trial: 0, gen: 9] Progress [15] cases left
2023-04-01 23:20:58,058 DEBUG  , Thread-5, test_case.py:51, [trial: 0, gen: 9] Precondition [delete_precondition] Result [False]
2023-04-01 23:20:58,058 INFO   , Thread-5, acto.py  :267, [trial: 0, gen: 9] Precondition of ["spec", "dataStore", "supportsAutoResize"] fails, try setup first
2023-04-01 23:20:58,059 INFO   , Thread-5, acto.py  :107, [trial: 0, gen: 9] JSON patch: [{"op": "add", "path": "/spec/dataStore/supportsAutoResize", "value": true}]
2023-04-01 23:20:58,059 DEBUG  , Thread-5, test_case.py:51, [trial: 0, gen: 9] Precondition [delete_precondition] Result [True]
2023-04-01 23:20:58,059 DEBUG  , Thread-5, acto.py  :458, [trial: 0, gen: 9] Run and check
2023-04-01 23:20:58,449 INFO   , Thread-5, runner.py:291, [trial: 0, gen: 9] Waiting for system to converge... 
2023-04-01 23:21:05,079 INFO   , Thread-14, runner.py:360, [trial: 0, gen: 7] System took 00:01:00 to converge
2023-04-01 23:21:05,081 DEBUG  , Thread-14, runner.py:98, [trial: 0, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:21:05,081 DEBUG  , Thread-14, runner.py:99, [trial: 0, gen: 7] STDERR: 
2023-04-01 23:21:05,230 DEBUG  , Thread-14, runner.py:177, [trial: 0, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:52Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:40Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:16:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:18:01Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1698', 'uid': '3318e776-66a1-48bd-9494-3f3e1f11466b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:17:29Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:21:05,259 DEBUG  , Thread-14, runner.py:202, [trial: 0, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-fh8fj
2023-04-01 23:21:06,067 INFO   , Thread-14, acto.py  :321, [trial: 0, gen: 7] All setups failed
2023-04-01 23:21:06,067 WARNING, Thread-14, schema.py:573, [trial: 0, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-01 23:21:06,067 INFO   , Thread-14, input.py :723, [trial: 0, gen: 9] Progress [6] cases left
2023-04-01 23:21:06,068 DEBUG  , Thread-14, test_case.py:51, [trial: 0, gen: 9] Precondition [empty_precondition] Result [True]
2023-04-01 23:21:06,068 INFO   , Thread-14, acto.py  :263, [trial: 0, gen: 9] Precondition of ['spec', 'ingress'] satisfies
2023-04-01 23:21:06,068 INFO   , Thread-14, acto.py  :323, [trial: 0, gen: 9] Running bundled testcases
2023-04-01 23:21:06,068 DEBUG  , Thread-14, test_case.py:51, [trial: 0, gen: 9] Precondition [empty_precondition] Result [True]
2023-04-01 23:21:06,068 INFO   , Thread-14, acto.py  :107, [trial: 0, gen: 9] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {}}]
2023-04-01 23:21:06,068 DEBUG  , Thread-14, acto.py  :458, [trial: 0, gen: 9] Run and check
2023-04-01 23:21:06,411 INFO   , Thread-14, runner.py:291, [trial: 0, gen: 9] Waiting for system to converge... 
2023-04-01 23:21:09,356 INFO   , Thread-10, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:21:14,127 INFO   , Thread-1, runner.py:360, [trial: 0, gen: 6] System took 00:01:00 to converge
2023-04-01 23:21:14,128 DEBUG  , Thread-1, runner.py:98, [trial: 0, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:21:14,128 DEBUG  , Thread-1, runner.py:99, [trial: 0, gen: 6] STDERR: 
2023-04-01 23:21:14,261 DEBUG  , Thread-1, runner.py:177, [trial: 0, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":true},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:30Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:14:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1564', 'uid': '79a02b3f-3c2f-48ad-8fd8-514af4f4a9b5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY', 'readOnly': True}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:14:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:14:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:14:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:14:07Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:14:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:21:14,296 DEBUG  , Thread-1, runner.py:202, [trial: 0, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-8q4hs
2023-04-01 23:21:15,009 DEBUG  , Thread-1, acto.py  :383, [trial: 0, gen: 6] Only one patch, no need to isolate
2023-04-01 23:21:15,010 WARNING, Thread-1, schema.py:573, [trial: 0, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-01 23:21:15,011 INFO   , Thread-1, input.py :723, [trial: 0, gen: 8] Progress [17] cases left
2023-04-01 23:21:15,011 DEBUG  , Thread-1, test_case.py:51, [trial: 0, gen: 8] Precondition [empty_precondition] Result [True]
2023-04-01 23:21:15,011 INFO   , Thread-1, acto.py  :263, [trial: 0, gen: 8] Precondition of ['spec', 'image'] satisfies
2023-04-01 23:21:15,011 INFO   , Thread-1, acto.py  :323, [trial: 0, gen: 8] Running bundled testcases
2023-04-01 23:21:15,011 DEBUG  , Thread-1, test_case.py:51, [trial: 0, gen: 8] Precondition [empty_precondition] Result [True]
2023-04-01 23:21:15,011 INFO   , Thread-1, acto.py  :107, [trial: 0, gen: 8] JSON patch: [{"op": "remove", "path": "/spec/image/name"}]
2023-04-01 23:21:15,012 DEBUG  , Thread-1, acto.py  :458, [trial: 0, gen: 8] Run and check
2023-04-01 23:21:15,321 INFO   , Thread-1, runner.py:291, [trial: 0, gen: 8] Waiting for system to converge... 
2023-04-01 23:21:21,788 INFO   , Thread-8, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:21:22,334 INFO   , Thread-4, runner.py:360, [trial: 0, gen: 4] System took 00:01:00 to converge
2023-04-01 23:21:22,335 DEBUG  , Thread-4, runner.py:98, [trial: 0, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:21:22,336 DEBUG  , Thread-4, runner.py:99, [trial: 0, gen: 4] STDERR: 
2023-04-01 23:21:22,472 DEBUG  , Thread-4, runner.py:177, [trial: 0, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:32Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","value":""}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"tolerations":[{}]}}\n'}, 'creationTimestamp': '2023-04-02T03:11:28Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:19:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2294', 'uid': 'fef30211-c4a2-4459-9db0-5c15f290fd0a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY'}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'tolerations': [{}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:31Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:32Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:37Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:21:22,498 DEBUG  , Thread-4, runner.py:202, [trial: 0, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-5kvd9
2023-04-01 23:21:23,381 INFO   , Thread-4, checker.py:134, [trial: 0, gen: 4] Number of system state fields: [3454] Number of delta: [4]
2023-04-01 23:21:23,389 WARNING, Thread-4, schema.py:573, [trial: 0, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-01 23:21:23,392 INFO   , Thread-4, input.py :723, [trial: 0, gen: 6] Progress [17] cases left
2023-04-01 23:21:23,392 INFO   , Thread-6, runner.py:360, [trial: 0, gen: 7] System took 00:01:07 to converge
2023-04-01 23:21:23,393 DEBUG  , Thread-4, test_case.py:51, [trial: 0, gen: 6] Precondition [change_precondition] Result [True]
2023-04-01 23:21:23,394 INFO   , Thread-4, acto.py  :263, [trial: 0, gen: 6] Precondition of ['spec', 'podEnvVariables', 0, 'value'] satisfies
2023-04-01 23:21:23,394 DEBUG  , Thread-6, runner.py:98, [trial: 0, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:21:23,394 INFO   , Thread-4, acto.py  :323, [trial: 0, gen: 6] Running bundled testcases
2023-04-01 23:21:23,395 DEBUG  , Thread-6, runner.py:99, [trial: 0, gen: 7] STDERR: 
2023-04-01 23:21:23,395 DEBUG  , Thread-4, test_case.py:51, [trial: 0, gen: 6] Precondition [change_precondition] Result [True]
2023-04-01 23:21:23,397 INFO   , Thread-4, acto.py  :107, [trial: 0, gen: 6] JSON patch: [{"op": "replace", "path": "/spec/podEnvVariables/0/value", "value": "ACTOKEY"}]
2023-04-01 23:21:23,397 DEBUG  , Thread-4, acto.py  :458, [trial: 0, gen: 6] Run and check
2023-04-01 23:21:23,573 DEBUG  , Thread-6, runner.py:177, [trial: 0, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":5,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:12:54Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:16:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:17:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1922', 'uid': '601576aa-be1a-4d75-a857-b25b73752994'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 5, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:09Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:13:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:38Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:21:23,605 DEBUG  , Thread-6, runner.py:202, [trial: 0, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-8h4vc
2023-04-01 23:21:23,752 INFO   , Thread-4, runner.py:291, [trial: 0, gen: 6] Waiting for system to converge... 
2023-04-01 23:21:24,537 INFO   , Thread-6, checker.py:134, [trial: 0, gen: 7] Number of system state fields: [4439] Number of delta: [473]
2023-04-01 23:21:24,539 WARNING, Thread-6, schema.py:573, [trial: 0, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-01 23:21:24,539 INFO   , Thread-6, input.py :723, [trial: 0, gen: 8] Progress [16] cases left
2023-04-01 23:21:24,540 DEBUG  , Thread-6, test_case.py:51, [trial: 0, gen: 8] Precondition [decrease_precondition] Result [True]
2023-04-01 23:21:24,540 INFO   , Thread-6, acto.py  :263, [trial: 0, gen: 8] Precondition of ['spec', 'nodes'] satisfies
2023-04-01 23:21:24,540 INFO   , Thread-6, acto.py  :323, [trial: 0, gen: 8] Running bundled testcases
2023-04-01 23:21:24,540 DEBUG  , Thread-6, test_case.py:51, [trial: 0, gen: 8] Precondition [decrease_precondition] Result [True]
2023-04-01 23:21:24,540 INFO   , Thread-6, acto.py  :107, [trial: 0, gen: 8] JSON patch: [{"op": "replace", "path": "/spec/nodes", "value": 3}]
2023-04-01 23:21:24,540 DEBUG  , Thread-6, acto.py  :458, [trial: 0, gen: 8] Run and check
2023-04-01 23:21:24,891 INFO   , Thread-6, runner.py:291, [trial: 0, gen: 8] Waiting for system to converge... 
2023-04-01 23:21:29,903 INFO   , Thread-3, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:21:31,269 INFO   , Thread-12, runner.py:360, [trial: 0, gen: 7] System took 00:01:00 to converge
2023-04-01 23:21:31,270 DEBUG  , Thread-12, runner.py:98, [trial: 0, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:21:31,270 DEBUG  , Thread-12, runner.py:99, [trial: 0, gen: 7] STDERR: 
2023-04-01 23:21:31,398 DEBUG  , Thread-12, runner.py:177, [trial: 0, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:19:29Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:sql': {'f:ingressClassName': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:20:31Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1971', 'uid': 'c57a7e9d-1d5e-4116-95f8-e4925213f4a8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:54Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:13:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:20:25Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:21:31,424 DEBUG  , Thread-12, runner.py:202, [trial: 0, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-zcq2q
2023-04-01 23:21:32,255 INFO   , Thread-12, acto.py  :321, [trial: 0, gen: 7] All setups failed
2023-04-01 23:21:32,255 WARNING, Thread-12, schema.py:573, [trial: 0, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-01 23:21:32,256 INFO   , Thread-12, input.py :723, [trial: 0, gen: 9] Progress [9] cases left
2023-04-01 23:21:32,256 DEBUG  , Thread-12, test_case.py:51, [trial: 0, gen: 9] Precondition [change_precondition] Result [False]
2023-04-01 23:21:32,256 INFO   , Thread-12, acto.py  :267, [trial: 0, gen: 9] Precondition of ["spec", "ingress", "ui", "tls", 0, "hosts", 0] fails, try setup first
2023-04-01 23:21:32,256 INFO   , Thread-12, acto.py  :107, [trial: 0, gen: 9] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": [{"hosts": ["ACTOKEY"]}]}}}]
2023-04-01 23:21:32,257 DEBUG  , Thread-12, test_case.py:51, [trial: 0, gen: 9] Precondition [change_precondition] Result [True]
2023-04-01 23:21:32,257 DEBUG  , Thread-12, acto.py  :458, [trial: 0, gen: 9] Run and check
2023-04-01 23:21:32,586 INFO   , Thread-12, runner.py:291, [trial: 0, gen: 9] Waiting for system to converge... 
2023-04-01 23:21:43,585 INFO   , Thread-15, runner.py:360, [trial: 1, gen: 1] System took 00:01:03 to converge
2023-04-01 23:21:43,586 DEBUG  , Thread-15, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:21:43,586 DEBUG  , Thread-15, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:21:43,698 DEBUG  , Thread-15, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:20:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"hostPath":{"path":"/tmp/test","type":"DirectoryOrCreate"},"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:19:37Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:hostPath': {'.': {}, 'f:path': {}, 'f:type': {}}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:20:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:20:43Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:20:43Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1079', 'uid': 'c8fe7c24-ff1f-459b-90ba-e5845cebfaaf'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'hostPath': {'path': '/tmp/test', 'type': 'DirectoryOrCreate'}, 'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:19:37Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:20:42Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:20:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:19:39Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:21:09Z', 'message': 'failed to reconcile test-cluster: one of HostPath or VolumeClaim should be set', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-01 23:21:43,716 DEBUG  , Thread-15, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-gcs6c
2023-04-01 23:21:44,185 INFO   , Thread-15, common.py:569, [trial: 1, gen: 1] Recognized invalid input through field [type] in error message: failed to reconcile test-cluster: one of HostPath or VolumeClaim should be set
(1) attached stack trace
  -- stack trace:
  | github.com/cockroachdb/cockroach-operator/pkg/actor.deploy.Act
  | 	pkg/actor/deploy.go:79
  | [...repeated from below...]
Wraps: (2) failed to reconcile test-cluster
Wraps: (3) attached stack trace
  -- stack trace:
  | github.com/cockroachdb/cockroach-operator/apis/v1alpha1.(*Volume).Apply
  | 	apis/v1alpha1/volume.go:32
  | github.com/cockroachdb/cockroach-operator/pkg/resource.StatefulSetBuilder.Build
  | 	pkg/resource/statefulset.go:91
  | github.com/cockroachdb/cockroach-operator/pkg/resource.Reconciler.CompleteBuild
  | 	pkg/resource/resource.go:101
  | github.com/cockroachdb/cockroach-operator/pkg/resource.Reconciler.Reconcile.func1
  | 	pkg/resource/resource.go:96
  | github.com/cockroachdb/cockroach-operator/pkg/kube.glob..func2.1
  | 	pkg/kube/helpers.go:138
  | github.com/cockroachdb/cockroach-operator/pkg/kube.mutate
  | 	pkg/kube/helpers.go:210
  | github.com/cockroachdb/cockroach-operator/pkg/kube.CreateOrUpdateAnnotated
  | 	pkg/kube/helpers.go:153
  | github.com/cockroachdb/cockroach-operator/pkg/kube.glob..func2
  | 	pkg/kube/helpers.go:137
  | github.com/cockroachdb/cockroach-operator/pkg/resource.KubePersister.Persist
  | 	pkg/resource/resource.go:239
  | github.com/cockroachdb/cockroach-operator/pkg/resource.Reconciler.Reconcile
  | 	pkg/resource/resource.go:95
  | github.com/cockroachdb/cockroach-operator/pkg/actor.deploy.Act
  | 	pkg/actor/deploy.go:76
  | github.com/cockroachdb/cockroach-operator/pkg/controller.(*ClusterReconciler).Reconcile
  | 	pkg/controller/cluster_controller.go:154
  | sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
  | 	external/io_k8s_sigs_controller_runtime/pkg/internal/controller/controller.go:297
  | sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
  | 	external/io_k8s_sigs_controller_runtime/pkg/internal/controller/controller.go:252
  | sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.2
  | 	external/io_k8s_sigs_controller_runtime/pkg/internal/controller/controller.go:215
  | k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
  | 	external/io_k8s_apimachinery/pkg/util/wait/wait.go:185
  | k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
  | 	external/io_k8s_apimachinery/pkg/util/wait/wait.go:155
  | k8s.io/apimachinery/pkg/util/wait.BackoffUntil
  | 	external/io_k8s_apimachinery/pkg/util/wait/wait.go:156
  | k8s.io/apimachinery/pkg/util/wait.JitterUntil
  | 	external/io_k8s_apimachinery/pkg/util/wait/wait.go:133
  | k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
  | 	external/io_k8s_apimachinery/pkg/util/wait/wait.go:185
  | k8s.io/apimachinery/pkg/util/wait.UntilWithContext
  | 	external/io_k8s_apimachinery/pkg/util/wait/wait.go:99
  | runtime.goexit
  | 	src/runtime/asm_amd64.s:1581
Wraps: (4) one of HostPath or VolumeClaim should be set
Error types: (1) *withstack.withStack (2) *errutil.withPrefix (3) *withstack.withStack (4) *errutil.leafError
2023-04-01 23:21:44,186 INFO   , Thread-15, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [2114] Number of delta: [338]
2023-04-01 23:21:44,187 INFO   , Thread-15, acto.py  :301, [trial: 1, gen: 1] Setup produced invalid input
2023-04-01 23:21:44,187 WARNING, Thread-15, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:21:44,188 DEBUG  , Thread-15, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:21:44,540 INFO   , Thread-15, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:21:47,439 INFO   , Thread-11, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:21:50,523 INFO   , Thread-13, runner.py:323, [trial: 0, gen: 5] Statefulset test-cluster is not ready yet
2023-04-01 23:21:58,163 INFO   , Thread-7, runner.py:360, [trial: 0, gen: 7] System took 00:01:00 to converge
2023-04-01 23:21:58,164 DEBUG  , Thread-7, runner.py:98, [trial: 0, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:21:58,164 DEBUG  , Thread-7, runner.py:99, [trial: 0, gen: 7] STDERR: 
2023-04-01 23:21:58,298 DEBUG  , Thread-7, runner.py:177, [trial: 0, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:15:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:34Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:19:55Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:20:57Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1977', 'uid': 'd76e8d37-0df1-4a3c-b0d3-df2f6a891807'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:20:25Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:21:58,323 DEBUG  , Thread-7, runner.py:202, [trial: 0, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-kf5f8
2023-04-01 23:21:59,048 INFO   , Thread-5, runner.py:360, [trial: 0, gen: 9] System took 00:01:00 to converge
2023-04-01 23:21:59,059 DEBUG  , Thread-5, runner.py:98, [trial: 0, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:21:59,070 DEBUG  , Thread-5, runner.py:99, [trial: 0, gen: 9] STDERR: 
2023-04-01 23:21:59,274 DEBUG  , Thread-7, acto.py  :383, [trial: 0, gen: 7] Only one patch, no need to isolate
2023-04-01 23:21:59,275 WARNING, Thread-7, schema.py:573, [trial: 0, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-01 23:21:59,276 INFO   , Thread-7, input.py :723, [trial: 0, gen: 9] Progress [16] cases left
2023-04-01 23:21:59,276 DEBUG  , Thread-7, test_case.py:51, [trial: 0, gen: 9] Precondition [delete_precondition] Result [False]
2023-04-01 23:21:59,276 INFO   , Thread-7, acto.py  :267, [trial: 0, gen: 9] Precondition of ["spec", "ingress", "ui", "annotations"] fails, try setup first
2023-04-01 23:21:59,277 INFO   , Thread-7, acto.py  :107, [trial: 0, gen: 9] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "annotations": {"ACTOKEY": "ACTOKEY"}}}}]
2023-04-01 23:21:59,277 DEBUG  , Thread-7, test_case.py:51, [trial: 0, gen: 9] Precondition [delete_precondition] Result [True]
2023-04-01 23:21:59,277 DEBUG  , Thread-7, acto.py  :458, [trial: 0, gen: 9] Run and check
2023-04-01 23:21:59,370 DEBUG  , Thread-5, runner.py:177, [trial: 0, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}},"supportsAutoResize":true},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxUnavailable":0,"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:32Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}, 'f:supportsAutoResize': {}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxUnavailable': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:20:58Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1982', 'uid': 'b1b9be3a-1e6e-4429-a28a-bb6a57e40633'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': True}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 0, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:46Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:41Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:21:59,400 DEBUG  , Thread-5, runner.py:202, [trial: 0, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-vwh7g
2023-04-01 23:21:59,888 ERROR  , Thread-5, checker.py:301, [trial: 0, gen: 9] Found no matching fields for input delta
2023-04-01 23:21:59,888 ERROR  , Thread-5, checker.py:302, [trial: 0, gen: 9] Input delta [['spec', 'dataStore', 'supportsAutoResize']]
2023-04-01 23:22:00,227 INFO   , Thread-5, checker.py:134, [trial: 0, gen: 9] Number of system state fields: [3456] Number of delta: [1]
2023-04-01 23:22:00,228 DEBUG  , Thread-5, acto.py  :489, [trial: 0, gen: 9] Running recovery
2023-04-01 23:22:02,148 INFO   , Thread-7, runner.py:291, [trial: 0, gen: 9] Waiting for system to converge... 
2023-04-01 23:22:02,952 INFO   , Thread-5, runner.py:291, [trial: 0, gen: 9] Waiting for system to converge... 
2023-04-01 23:22:06,537 INFO   , Thread-14, runner.py:360, [trial: 0, gen: 9] System took 00:01:00 to converge
2023-04-01 23:22:06,538 DEBUG  , Thread-14, runner.py:98, [trial: 0, gen: 9] STDOUT: 
2023-04-01 23:22:06,538 DEBUG  , Thread-14, runner.py:99, [trial: 0, gen: 9] STDERR: Error from server (at least one of UI or SQL ingresses must be present): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"ingress\":{},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"ingress":{},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-13-0000/mutated-9.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: at least one of UI or SQL ingresses must be present

2023-04-01 23:22:06,681 DEBUG  , Thread-14, runner.py:177, [trial: 0, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:52Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:40Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:16:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:18:01Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1698', 'uid': '3318e776-66a1-48bd-9494-3f3e1f11466b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:17:29Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:22:06,710 DEBUG  , Thread-14, runner.py:202, [trial: 0, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-fh8fj
2023-04-01 23:22:07,007 INFO   , Thread-14, checker.py:213, [trial: 0, gen: 9] Invalid input, reject mutation
2023-04-01 23:22:07,007 INFO   , Thread-14, checker.py:214, [trial: 0, gen: 9] STDOUT: 
2023-04-01 23:22:07,007 INFO   , Thread-14, checker.py:215, [trial: 0, gen: 9] STDERR: Error from server (at least one of UI or SQL ingresses must be present): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"ingress\":{},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"ingress":{},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-13-0000/mutated-9.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: at least one of UI or SQL ingresses must be present

2023-04-01 23:22:07,431 INFO   , Thread-14, checker.py:134, [trial: 0, gen: 9] Number of system state fields: [3461] Number of delta: [0]
2023-04-01 23:22:07,432 DEBUG  , Thread-14, acto.py  :374, [trial: 0, gen: 9] Invalid input, revert
2023-04-01 23:22:07,432 WARNING, Thread-14, schema.py:573, [trial: 0, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-01 23:22:07,433 DEBUG  , Thread-14, acto.py  :458, [trial: 0, gen: 9] Run and check
2023-04-01 23:22:09,396 INFO   , Thread-14, runner.py:291, [trial: 0, gen: 9] Waiting for system to converge... 
2023-04-01 23:22:09,444 INFO   , Thread-10, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:22:15,449 INFO   , Thread-1, runner.py:360, [trial: 0, gen: 8] System took 00:01:00 to converge
2023-04-01 23:22:15,451 DEBUG  , Thread-1, runner.py:98, [trial: 0, gen: 8] STDOUT: 
2023-04-01 23:22:15,451 DEBUG  , Thread-1, runner.py:99, [trial: 0, gen: 8] STDERR: error: error validating "testrun-crdb-whitebox/trial-00-0000/mutated-8.yaml": error validating data: ValidationError(CrdbCluster.spec.image): missing required field "name" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.image; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:22:15,591 DEBUG  , Thread-1, runner.py:177, [trial: 0, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":true},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:30Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:14:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1564', 'uid': '79a02b3f-3c2f-48ad-8fd8-514af4f4a9b5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY', 'readOnly': True}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:14:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:14:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:14:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:14:07Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:14:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:22:15,617 DEBUG  , Thread-1, runner.py:202, [trial: 0, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-8q4hs
2023-04-01 23:22:16,018 INFO   , Thread-1, common.py:569, [trial: 0, gen: 8] Recognized invalid input through field [name] in error message: error: error validating "testrun-crdb-whitebox/trial-00-0000/mutated-8.yaml": error validating data: ValidationError(CrdbCluster.spec.image): missing required field "name" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.image; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:22:16,018 INFO   , Thread-1, checker.py:213, [trial: 0, gen: 8] Invalid input, reject mutation
2023-04-01 23:22:16,018 INFO   , Thread-1, checker.py:214, [trial: 0, gen: 8] STDOUT: 
2023-04-01 23:22:16,018 INFO   , Thread-1, checker.py:215, [trial: 0, gen: 8] STDERR: error: error validating "testrun-crdb-whitebox/trial-00-0000/mutated-8.yaml": error validating data: ValidationError(CrdbCluster.spec.image): missing required field "name" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.image; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:22:16,225 ERROR  , Thread-1, checker.py:301, [trial: 0, gen: 8] Found no matching fields for input delta
2023-04-01 23:22:16,225 ERROR  , Thread-1, checker.py:302, [trial: 0, gen: 8] Input delta [['spec', 'image', 'name']]
2023-04-01 23:22:16,434 INFO   , Thread-1, checker.py:134, [trial: 0, gen: 8] Number of system state fields: [3461] Number of delta: [0]
2023-04-01 23:22:16,435 DEBUG  , Thread-1, acto.py  :374, [trial: 0, gen: 8] Invalid input, revert
2023-04-01 23:22:16,436 WARNING, Thread-1, schema.py:573, [trial: 0, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-01 23:22:16,436 DEBUG  , Thread-1, acto.py  :458, [trial: 0, gen: 8] Run and check
2023-04-01 23:22:18,430 INFO   , Thread-1, runner.py:291, [trial: 0, gen: 8] Waiting for system to converge... 
2023-04-01 23:22:24,410 INFO   , Thread-4, runner.py:360, [trial: 0, gen: 6] System took 00:01:00 to converge
2023-04-01 23:22:24,411 DEBUG  , Thread-4, runner.py:98, [trial: 0, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:22:24,412 DEBUG  , Thread-4, runner.py:99, [trial: 0, gen: 6] STDERR: 
2023-04-01 23:22:24,552 DEBUG  , Thread-4, runner.py:177, [trial: 0, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:32Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","value":"ACTOKEY"}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"tolerations":[{}]}}\n'}, 'creationTimestamp': '2023-04-02T03:11:28Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:19:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2393', 'uid': 'fef30211-c4a2-4459-9db0-5c15f290fd0a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'value': 'ACTOKEY'}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'tolerations': [{}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:31Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:32Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:37Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:22:24,581 DEBUG  , Thread-4, runner.py:202, [trial: 0, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-5kvd9
2023-04-01 23:22:25,475 INFO   , Thread-4, checker.py:134, [trial: 0, gen: 6] Number of system state fields: [3455] Number of delta: [4]
2023-04-01 23:22:25,476 WARNING, Thread-4, schema.py:573, [trial: 0, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:22:25,477 INFO   , Thread-4, input.py :723, [trial: 0, gen: 7] Progress [16] cases left
2023-04-01 23:22:25,477 DEBUG  , Thread-4, test_case.py:51, [trial: 0, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-01 23:22:25,477 INFO   , Thread-4, acto.py  :263, [trial: 0, gen: 7] Precondition of ['spec', 'podEnvVariables', 0, 'value'] satisfies
2023-04-01 23:22:25,477 INFO   , Thread-4, acto.py  :323, [trial: 0, gen: 7] Running bundled testcases
2023-04-01 23:22:25,477 DEBUG  , Thread-4, test_case.py:51, [trial: 0, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-01 23:22:25,478 INFO   , Thread-4, acto.py  :107, [trial: 0, gen: 7] JSON patch: [{"op": "replace", "path": "/spec/podEnvVariables/0/value", "value": ""}]
2023-04-01 23:22:25,478 DEBUG  , Thread-4, acto.py  :458, [trial: 0, gen: 7] Run and check
2023-04-01 23:22:27,403 INFO   , Thread-4, runner.py:291, [trial: 0, gen: 7] Waiting for system to converge... 
2023-04-01 23:22:29,999 INFO   , Thread-3, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:22:32,741 INFO   , Thread-12, runner.py:360, [trial: 0, gen: 9] System took 00:01:00 to converge
2023-04-01 23:22:32,742 DEBUG  , Thread-12, runner.py:98, [trial: 0, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:22:32,742 DEBUG  , Thread-12, runner.py:99, [trial: 0, gen: 9] STDERR: 
2023-04-01 23:22:32,884 DEBUG  , Thread-12, runner.py:177, [trial: 0, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","tls":[{"hosts":["ACTOKEY"]}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 10, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:21:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'f:ingressClassName': {}}, 'f:ui': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:21:32Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2117', 'uid': 'c57a7e9d-1d5e-4116-95f8-e4925213f4a8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY', 'tls': [{'hosts': ['ACTOKEY']}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:54Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:13:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:22:02Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:22:32,912 DEBUG  , Thread-12, runner.py:202, [trial: 0, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-zcq2q
2023-04-01 23:22:33,420 ERROR  , Thread-12, checker.py:301, [trial: 0, gen: 9] Found no matching fields for input delta
2023-04-01 23:22:33,420 ERROR  , Thread-12, checker.py:302, [trial: 0, gen: 9] Input delta [['spec', 'ingress', 'ui', 'host']]
2023-04-01 23:22:33,631 INFO   , Thread-12, common.py:560, [trial: 0, gen: 9] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-01 23:22:33,632 INFO   , Thread-12, checker.py:134, [trial: 0, gen: 9] Number of system state fields: [3467] Number of delta: [3]
2023-04-01 23:22:33,633 INFO   , Thread-12, acto.py  :301, [trial: 0, gen: 9] Setup produced invalid input
2023-04-01 23:22:33,633 WARNING, Thread-12, schema.py:573, [trial: 0, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-01 23:22:33,634 DEBUG  , Thread-12, acto.py  :458, [trial: 0, gen: 9] Run and check
2023-04-01 23:22:35,570 INFO   , Thread-12, runner.py:291, [trial: 0, gen: 9] Waiting for system to converge... 
2023-04-01 23:22:47,557 INFO   , Thread-11, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:22:47,560 ERROR  , Thread-10, runner.py:363, [trial: 0, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:22:47,562 DEBUG  , Thread-10, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:22:47,563 DEBUG  , Thread-10, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:22:47,704 DEBUG  , Thread-10, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:50Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxSQLMemory":"ACTOKEY","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:45Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxSQLMemory': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:12:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:12:51Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2337', 'uid': 'ff1bf25e-2052-4904-b681-09f01bb5fc14'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxSQLMemory': 'ACTOKEY', 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:45Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:47Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:22:45Z', 'message': 'pod has not completely started', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:22:47,729 DEBUG  , Thread-10, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-vlxk6
2023-04-01 23:22:48,740 INFO   , Thread-10, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3482] Number of delta: [1258]
2023-04-01 23:22:48,740 ERROR  , Thread-10, checker.py:561, [trial: 0, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [None] with unhealthy status
2023-04-01 23:22:48,740 DEBUG  , Thread-10, acto.py  :489, [trial: 0, gen: 1] Running recovery
2023-04-01 23:22:50,616 INFO   , Thread-13, runner.py:323, [trial: 0, gen: 5] Statefulset test-cluster is not ready yet
2023-04-01 23:22:50,727 INFO   , Thread-10, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:22:51,798 INFO   , Thread-2, runner.py:323, [trial: 0, gen: 8] Statefulset test-cluster is not ready yet
2023-04-01 23:22:52,783 ERROR  , Thread-8, runner.py:363, [trial: 0, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:22:52,786 DEBUG  , Thread-8, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:22:52,787 DEBUG  , Thread-8, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:22:52,935 DEBUG  , Thread-8, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:44Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodeSelector":{"ACTOKEY":"ACTOKEY"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:40Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodeSelector': {'.': {}, 'f:ACTOKEY': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:52Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1232', 'uid': '03682151-b6ff-4466-91e8-f9bd7397ff23'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodeSelector': {'ACTOKEY': 'ACTOKEY'}, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:22:52,966 DEBUG  , Thread-8, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-jct8c
2023-04-01 23:22:53,602 DEBUG  , Thread-8, checker.py:278, [trial: 0, gen: 1] Input delta [['spec', 'nodeSelector', 'ACTOKEY']] matched with [['test-cluster-2', 'spec', 'node_selector', 'ACTOKEY']]
2023-04-01 23:22:53,602 DEBUG  , Thread-8, checker.py:278, [trial: 0, gen: 1] Input delta [['spec', 'nodeSelector', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'template', 'spec', 'node_selector', 'ACTOKEY']]
2023-04-01 23:22:53,807 INFO   , Thread-8, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3395] Number of delta: [82]
2023-04-01 23:22:53,807 ERROR  , Thread-8, checker.py:561, [trial: 0, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:22:53,807 ERROR  , Thread-8, checker.py:561, [trial: 0, gen: 1] Found pod: test-cluster-2 with unhealthy status
2023-04-01 23:22:53,808 DEBUG  , Thread-8, acto.py  :489, [trial: 0, gen: 1] Running recovery
2023-04-01 23:22:55,778 INFO   , Thread-8, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:22:57,439 INFO   , Thread-16, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:22:59,616 ERROR  , Thread-9, runner.py:363, [trial: 0, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:22:59,620 DEBUG  , Thread-9, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:22:59,620 DEBUG  , Thread-9, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:22:59,776 DEBUG  , Thread-9, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:50Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodeTLSSecret":"ACTOKEY","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodeTLSSecret': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:59Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1234', 'uid': '7a6e0e13-b14c-415c-b62e-870f4e47589c'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodeTLSSecret': 'ACTOKEY', 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:01Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:56Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:22:59,809 DEBUG  , Thread-9, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-b8llg
2023-04-01 23:23:00,043 ERROR  , Thread-16, runner.py:363, [trial: 0, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:23:00,059 DEBUG  , Thread-16, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:23:00,064 DEBUG  , Thread-16, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:23:00,859 DEBUG  , Thread-16, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"clientTLSSecret":"ACTOKEY","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:12:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:clientTLSSecret': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:59Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1247', 'uid': '787fd6b6-a785-48c1-95f8-e1c1acac1142'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'clientTLSSecret': 'ACTOKEY', 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:23:00,872 INFO   , Thread-9, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3439] Number of delta: [86]
2023-04-01 23:23:00,873 ERROR  , Thread-9, checker.py:561, [trial: 0, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:23:00,873 ERROR  , Thread-9, checker.py:561, [trial: 0, gen: 1] Found pod: test-cluster-2 with unhealthy status
2023-04-01 23:23:00,876 DEBUG  , Thread-9, acto.py  :489, [trial: 0, gen: 1] Running recovery
2023-04-01 23:23:00,928 DEBUG  , Thread-16, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-hb7zf
2023-04-01 23:23:01,662 INFO   , Thread-16, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3443] Number of delta: [68]
2023-04-01 23:23:01,662 ERROR  , Thread-16, checker.py:561, [trial: 0, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:23:01,662 ERROR  , Thread-16, checker.py:561, [trial: 0, gen: 1] Found pod: test-cluster-2 with unhealthy status
2023-04-01 23:23:01,663 DEBUG  , Thread-16, acto.py  :489, [trial: 0, gen: 1] Running recovery
2023-04-01 23:23:02,262 INFO   , Thread-7, runner.py:360, [trial: 0, gen: 9] System took 00:01:00 to converge
2023-04-01 23:23:02,263 DEBUG  , Thread-7, runner.py:98, [trial: 0, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:23:02,263 DEBUG  , Thread-7, runner.py:99, [trial: 0, gen: 9] STDERR: 
2023-04-01 23:23:02,387 DEBUG  , Thread-7, runner.py:177, [trial: 0, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:15:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"annotations":{"ACTOKEY":"ACTOKEY"},"host":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:34Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:22:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:22:02Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2121', 'uid': 'd76e8d37-0df1-4a3c-b0d3-df2f6a891807'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'annotations': {'ACTOKEY': 'ACTOKEY'}, 'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:22:30Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:23:02,423 DEBUG  , Thread-7, runner.py:202, [trial: 0, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-kf5f8
2023-04-01 23:23:03,320 INFO   , Thread-7, common.py:560, [trial: 0, gen: 9] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:23:03,326 INFO   , Thread-7, checker.py:134, [trial: 0, gen: 9] Number of system state fields: [3463] Number of delta: [4]
2023-04-01 23:23:03,331 INFO   , Thread-5, runner.py:360, [trial: 0, gen: 9] System took 00:01:00 to converge
2023-04-01 23:23:03,332 INFO   , Thread-7, acto.py  :301, [trial: 0, gen: 9] Setup produced invalid input
2023-04-01 23:23:03,333 WARNING, Thread-7, schema.py:573, [trial: 0, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-01 23:23:03,333 DEBUG  , Thread-5, runner.py:98, [trial: 0, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:23:03,334 DEBUG  , Thread-7, acto.py  :458, [trial: 0, gen: 9] Run and check
2023-04-01 23:23:03,335 DEBUG  , Thread-5, runner.py:99, [trial: 0, gen: 9] STDERR: 
2023-04-01 23:23:03,482 DEBUG  , Thread-5, runner.py:177, [trial: 0, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxUnavailable":0,"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:32Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxUnavailable': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:22:02Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2078', 'uid': 'b1b9be3a-1e6e-4429-a28a-bb6a57e40633'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 0, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:46Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:41Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:23:03,513 DEBUG  , Thread-5, runner.py:202, [trial: 0, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-vwh7g
2023-04-01 23:23:03,760 INFO   , Thread-7, runner.py:291, [trial: 0, gen: 9] Waiting for system to converge... 
2023-04-01 23:23:03,907 INFO   , Thread-9, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:23:04,314 INFO   , Thread-5, acto.py  :187, Trial 0 finished, completed in 00:14:11
2023-04-01 23:23:04,314 INFO   , Thread-5, acto.py  :188, ---------------------------------------

2023-04-01 23:23:04,350 DEBUG  , Thread-5, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-vwh7g
2023-04-01 23:23:04,739 INFO   , Thread-16, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:23:09,522 INFO   , Thread-14, runner.py:360, [trial: 0, gen: 9] System took 00:01:00 to converge
2023-04-01 23:23:09,524 DEBUG  , Thread-14, runner.py:98, [trial: 0, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:23:09,524 DEBUG  , Thread-14, runner.py:99, [trial: 0, gen: 9] STDERR: 
2023-04-01 23:23:09,673 DEBUG  , Thread-14, runner.py:177, [trial: 0, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:52Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:40Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:16:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:18:01Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1698', 'uid': '3318e776-66a1-48bd-9494-3f3e1f11466b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:17:29Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:23:09,704 DEBUG  , Thread-14, runner.py:202, [trial: 0, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-fh8fj
2023-04-01 23:23:10,571 DEBUG  , Thread-14, acto.py  :383, [trial: 0, gen: 9] Only one patch, no need to isolate
2023-04-01 23:23:10,576 INFO   , Thread-14, acto.py  :187, Trial 0 finished, completed in 00:14:17
2023-04-01 23:23:10,576 INFO   , Thread-14, acto.py  :188, ---------------------------------------

2023-04-01 23:23:10,599 DEBUG  , Thread-14, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-fh8fj
2023-04-01 23:23:12,048 ERROR  , Thread-11, runner.py:363, [trial: 0, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:23:12,048 DEBUG  , Thread-11, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:23:12,049 DEBUG  , Thread-11, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:23:12,177 DEBUG  , Thread-11, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:13:12Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1260', 'uid': '36566158-1e42-4935-8b68-0ef97fe6f61e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:52Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:23:12,204 DEBUG  , Thread-11, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-2hgz7
2023-04-01 23:23:12,900 INFO   , Thread-11, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3045] Number of delta: [224]
2023-04-01 23:23:12,900 ERROR  , Thread-11, checker.py:561, [trial: 0, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:23:12,901 DEBUG  , Thread-11, acto.py  :489, [trial: 0, gen: 1] Running recovery
2023-04-01 23:23:12,940 INFO   , Thread-15, runner.py:360, [trial: 1, gen: 1] System took 00:01:28 to converge
2023-04-01 23:23:12,941 DEBUG  , Thread-15, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:23:12,942 DEBUG  , Thread-15, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:23:13,200 DEBUG  , Thread-15, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:20:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:19:37Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:21:44Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:21:55Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1280', 'uid': 'c8fe7c24-ff1f-459b-90ba-e5845cebfaaf'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:21:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:20:42Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:20:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:19:39Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:21:09Z', 'message': 'failed to reconcile test-cluster: one of HostPath or VolumeClaim should be set', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T03:21:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:23:13,225 DEBUG  , Thread-15, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-gcs6c
2023-04-01 23:23:13,668 INFO   , Thread-15, acto.py  :321, [trial: 1, gen: 1] All setups failed
2023-04-01 23:23:13,668 WARNING, Thread-15, schema.py:573, [trial: 1, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:23:13,669 INFO   , Thread-15, input.py :723, [trial: 1, gen: 3] Progress [7] cases left
2023-04-01 23:23:13,669 DEBUG  , Thread-15, test_case.py:51, [trial: 1, gen: 3] Precondition [empty_precondition] Result [True]
2023-04-01 23:23:13,669 INFO   , Thread-15, acto.py  :263, [trial: 1, gen: 3] Precondition of ['spec', 'dataStore', 'hostPath', 'type'] satisfies
2023-04-01 23:23:13,669 INFO   , Thread-15, acto.py  :323, [trial: 1, gen: 3] Running bundled testcases
2023-04-01 23:23:13,669 DEBUG  , Thread-15, test_case.py:51, [trial: 1, gen: 3] Precondition [empty_precondition] Result [True]
2023-04-01 23:23:13,670 INFO   , Thread-15, acto.py  :107, [trial: 1, gen: 3] JSON patch: [{"op": "add", "path": "/spec/dataStore/hostPath", "value": {"path": "/tmp/test", "type": ""}}]
2023-04-01 23:23:13,670 DEBUG  , Thread-15, acto.py  :458, [trial: 1, gen: 3] Run and check
2023-04-01 23:23:14,036 INFO   , Thread-15, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:23:14,869 INFO   , Thread-11, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:23:18,569 INFO   , Thread-1, runner.py:360, [trial: 0, gen: 8] System took 00:01:00 to converge
2023-04-01 23:23:18,570 DEBUG  , Thread-1, runner.py:98, [trial: 0, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:23:18,570 DEBUG  , Thread-1, runner.py:99, [trial: 0, gen: 8] STDERR: 
2023-04-01 23:23:18,715 DEBUG  , Thread-1, runner.py:177, [trial: 0, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":true},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:30Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:12:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:14:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1564', 'uid': '79a02b3f-3c2f-48ad-8fd8-514af4f4a9b5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY', 'readOnly': True}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:14:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:14:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:14:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:14:07Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:14:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:23:18,742 DEBUG  , Thread-1, runner.py:202, [trial: 0, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-8q4hs
2023-04-01 23:23:19,551 DEBUG  , Thread-1, acto.py  :383, [trial: 0, gen: 8] Only one patch, no need to isolate
2023-04-01 23:23:19,557 INFO   , Thread-1, acto.py  :187, Trial 0 finished, completed in 00:14:26
2023-04-01 23:23:19,558 INFO   , Thread-1, acto.py  :188, ---------------------------------------

2023-04-01 23:23:19,586 DEBUG  , Thread-1, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-8q4hs
2023-04-01 23:23:19,594 INFO   , Thread-6, runner.py:360, [trial: 0, gen: 8] System took 00:01:54 to converge
2023-04-01 23:23:19,595 DEBUG  , Thread-6, runner.py:98, [trial: 0, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:23:19,595 DEBUG  , Thread-6, runner.py:99, [trial: 0, gen: 8] STDERR: 
2023-04-01 23:23:19,603 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-4
2023-04-01 23:23:19,767 DEBUG  , Thread-6, runner.py:177, [trial: 0, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:12:54Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:16:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:17:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2125', 'uid': '601576aa-be1a-4d75-a857-b25b73752994'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:09Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:13:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:38Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:23:19,801 DEBUG  , Thread-6, runner.py:202, [trial: 0, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-8h4vc
2023-04-01 23:23:20,629 INFO   , Thread-14, common.py:629, Trial testrun-crdb-whitebox/trial-13-0000 completed without error
2023-04-01 23:23:20,893 INFO   , Thread-6, checker.py:134, [trial: 0, gen: 8] Number of system state fields: [4013] Number of delta: [200]
2023-04-01 23:23:20,896 WARNING, Thread-6, schema.py:573, [trial: 0, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-01 23:23:20,897 INFO   , Thread-6, input.py :723, [trial: 0, gen: 9] Progress [15] cases left
2023-04-01 23:23:20,897 DEBUG  , Thread-6, test_case.py:51, [trial: 0, gen: 9] Precondition [empty_precondition] Result [True]
2023-04-01 23:23:20,897 INFO   , Thread-6, acto.py  :263, [trial: 0, gen: 9] Precondition of ['spec', 'nodes'] satisfies
2023-04-01 23:23:20,897 INFO   , Thread-6, acto.py  :323, [trial: 0, gen: 9] Running bundled testcases
2023-04-01 23:23:20,897 DEBUG  , Thread-6, test_case.py:51, [trial: 0, gen: 9] Precondition [empty_precondition] Result [True]
2023-04-01 23:23:20,898 INFO   , Thread-6, acto.py  :107, [trial: 0, gen: 9] JSON patch: [{"op": "replace", "path": "/spec/nodes", "value": 0}]
2023-04-01 23:23:20,898 DEBUG  , Thread-6, acto.py  :458, [trial: 0, gen: 9] Run and check
2023-04-01 23:23:23,145 INFO   , Thread-6, runner.py:291, [trial: 0, gen: 9] Waiting for system to converge... 
2023-04-01 23:23:26,694 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-13
2023-04-01 23:23:29,620 INFO   , Thread-1, common.py:629, Trial testrun-crdb-whitebox/trial-00-0000 completed without error
2023-04-01 23:23:30,090 INFO   , Thread-3, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:23:35,556 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-0
2023-04-01 23:23:35,690 INFO   , Thread-12, runner.py:360, [trial: 0, gen: 9] System took 00:01:00 to converge
2023-04-01 23:23:35,691 DEBUG  , Thread-12, runner.py:98, [trial: 0, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:23:35,691 DEBUG  , Thread-12, runner.py:99, [trial: 0, gen: 9] STDERR: 
2023-04-01 23:23:35,820 DEBUG  , Thread-12, runner.py:177, [trial: 0, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 11, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:21:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:sql': {'f:ingressClassName': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:22:35Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2167', 'uid': 'c57a7e9d-1d5e-4116-95f8-e4925213f4a8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:54Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:13:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:22:02Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:23:35,849 DEBUG  , Thread-12, runner.py:202, [trial: 0, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-zcq2q
2023-04-01 23:23:36,729 INFO   , Thread-12, acto.py  :321, [trial: 0, gen: 9] All setups failed
2023-04-01 23:23:36,736 INFO   , Thread-12, acto.py  :187, Trial 0 finished, completed in 00:14:43
2023-04-01 23:23:36,736 INFO   , Thread-12, acto.py  :188, ---------------------------------------

2023-04-01 23:23:36,763 DEBUG  , Thread-12, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-zcq2q
2023-04-01 23:23:46,786 INFO   , Thread-12, common.py:629, Trial testrun-crdb-whitebox/trial-11-0000 completed without error
2023-04-01 23:23:52,056 ERROR  , Thread-3, runner.py:363, [trial: 0, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:23:52,058 DEBUG  , Thread-3, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:23:52,059 DEBUG  , Thread-3, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:23:52,208 DEBUG  , Thread-3, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"fieldRef":{"apiVersion":"","fieldPath":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:45Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:13:51Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1310', 'uid': '3f32ec47-cba4-483a-b6c2-9d2bd57fe216'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'fieldRef': {'fieldPath': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:59Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:48Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:49Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:23:52,231 DEBUG  , Thread-3, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-5hssr
2023-04-01 23:23:52,393 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-11
2023-04-01 23:23:52,761 DEBUG  , Thread-3, checker.py:278, [trial: 0, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'fieldRef', 'fieldPath']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 1, 'value_from', 'field_ref', 'field_path']]
2023-04-01 23:23:52,762 ERROR  , Thread-3, checker.py:282, [trial: 0, gen: 1] Matched delta inconsistent with input delta
2023-04-01 23:23:52,762 ERROR  , Thread-3, checker.py:283, [trial: 0, gen: 1] Input delta: not present -> ACTOKEY
2023-04-01 23:23:52,762 ERROR  , Thread-3, checker.py:284, [trial: 0, gen: 1] Matched delta: metadata.name -> not present
2023-04-01 23:23:52,972 INFO   , Thread-3, checker.py:134, [trial: 0, gen: 1] Number of system state fields: [3039] Number of delta: [214]
2023-04-01 23:23:52,972 ERROR  , Thread-3, checker.py:561, [trial: 0, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:23:52,973 INFO   , Thread-3, acto.py  :332, [trial: 0, gen: 1] Error result, running recovery
2023-04-01 23:23:52,974 DEBUG  , Thread-3, acto.py  :489, [trial: 0, gen: 1] Running recovery
2023-04-01 23:23:55,277 INFO   , Thread-3, runner.py:291, [trial: 0, gen: 1] Waiting for system to converge... 
2023-04-01 23:24:04,299 INFO   , Thread-7, runner.py:360, [trial: 0, gen: 9] System took 00:01:00 to converge
2023-04-01 23:24:04,300 DEBUG  , Thread-7, runner.py:98, [trial: 0, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:24:04,301 DEBUG  , Thread-7, runner.py:99, [trial: 0, gen: 9] STDERR: 
2023-04-01 23:24:04,436 DEBUG  , Thread-7, runner.py:177, [trial: 0, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:15:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:34Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:22:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:23:03Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2169', 'uid': 'd76e8d37-0df1-4a3c-b0d3-df2f6a891807'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:36Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:22:30Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:24:04,463 DEBUG  , Thread-7, runner.py:202, [trial: 0, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-kf5f8
2023-04-01 23:24:05,310 INFO   , Thread-7, acto.py  :321, [trial: 0, gen: 9] All setups failed
2023-04-01 23:24:05,315 INFO   , Thread-7, acto.py  :187, Trial 0 finished, completed in 00:15:12
2023-04-01 23:24:05,315 INFO   , Thread-7, acto.py  :188, ---------------------------------------

2023-04-01 23:24:05,335 DEBUG  , Thread-7, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-kf5f8
2023-04-01 23:24:11,003 INFO   , Thread-8, runner.py:360, [trial: 0, gen: 1] System took 00:01:15 to converge
2023-04-01 23:24:11,004 DEBUG  , Thread-8, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:24:11,004 DEBUG  , Thread-8, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:24:11,173 DEBUG  , Thread-8, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:44Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:40Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:22:55Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2172', 'uid': '03682151-b6ff-4466-91e8-f9bd7397ff23'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:24:11,202 DEBUG  , Thread-8, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-jct8c
2023-04-01 23:24:11,868 INFO   , Thread-8, acto.py  :187, Trial 0 finished, completed in 00:15:18
2023-04-01 23:24:11,868 INFO   , Thread-8, acto.py  :188, ---------------------------------------

2023-04-01 23:24:11,889 DEBUG  , Thread-8, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-jct8c
2023-04-01 23:24:13,737 INFO   , Thread-2, runner.py:323, [trial: 0, gen: 8] Statefulset test-cluster is not ready yet
2023-04-01 23:24:14,148 INFO   , Thread-15, runner.py:360, [trial: 1, gen: 3] System took 00:01:00 to converge
2023-04-01 23:24:14,159 DEBUG  , Thread-15, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:24:14,159 DEBUG  , Thread-15, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:24:14,301 DEBUG  , Thread-15, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:20:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"hostPath":{"path":"/tmp/test","type":""},"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:19:37Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:21:55Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:hostPath': {'.': {}, 'f:path': {}, 'f:type': {}}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:23:14Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1424', 'uid': 'c8fe7c24-ff1f-459b-90ba-e5845cebfaaf'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'hostPath': {'path': '/tmp/test', 'type': ''}, 'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:21:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:20:42Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:20:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:19:39Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:21:09Z', 'message': 'failed to reconcile test-cluster: one of HostPath or VolumeClaim should be set', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T03:21:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:24:14,332 DEBUG  , Thread-15, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-gcs6c
2023-04-01 23:24:15,010 ERROR  , Thread-15, checker.py:301, [trial: 1, gen: 3] Found no matching fields for input delta
2023-04-01 23:24:15,010 ERROR  , Thread-15, checker.py:302, [trial: 1, gen: 3] Input delta [['spec', 'dataStore', 'hostPath', 'path']]
2023-04-01 23:24:15,298 INFO   , Thread-15, checker.py:134, [trial: 1, gen: 3] Number of system state fields: [3781] Number of delta: [2]
2023-04-01 23:24:15,301 INFO   , Thread-15, acto.py  :332, [trial: 1, gen: 3] Error result, running recovery
2023-04-01 23:24:15,301 DEBUG  , Thread-15, acto.py  :489, [trial: 1, gen: 3] Running recovery
2023-04-01 23:24:15,363 INFO   , Thread-7, common.py:629, Trial testrun-crdb-whitebox/trial-06-0000 completed without error
2023-04-01 23:24:15,662 INFO   , Thread-15, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:24:16,314 INFO   , Thread-5, base.py  :41, Created cluster
2023-04-01 23:24:16,329 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:24:18,689 INFO   , Thread-11, runner.py:360, [trial: 0, gen: 1] System took 00:01:03 to converge
2023-04-01 23:24:18,691 DEBUG  , Thread-11, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:24:18,691 DEBUG  , Thread-11, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:24:18,834 DEBUG  , Thread-11, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:23:14Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2205', 'uid': '36566158-1e42-4935-8b68-0ef97fe6f61e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:52Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:24:18,862 DEBUG  , Thread-11, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-2hgz7
2023-04-01 23:24:19,624 INFO   , Thread-11, acto.py  :187, Trial 0 finished, completed in 00:15:26
2023-04-01 23:24:19,624 INFO   , Thread-11, acto.py  :188, ---------------------------------------

2023-04-01 23:24:19,646 DEBUG  , Thread-11, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-2hgz7
2023-04-01 23:24:20,381 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-6
2023-04-01 23:24:21,860 INFO   , Thread-14, base.py  :41, Created cluster
2023-04-01 23:24:21,872 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:24:23,489 INFO   , Thread-1, base.py  :41, Created cluster
2023-04-01 23:24:23,501 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:24:27,460 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:24:27,572 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-7
2023-04-01 23:24:33,087 DEBUG  , Thread-5, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:24:34,391 INFO   , Thread-13, runner.py:323, [trial: 0, gen: 5] Statefulset test-cluster is not ready yet
2023-04-01 23:24:36,609 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-10
2023-04-01 23:24:38,287 INFO   , Thread-12, base.py  :41, Created cluster
2023-04-01 23:24:38,298 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:24:39,551 DEBUG  , Thread-14, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:24:40,079 DEBUG  , Thread-1, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:24:43,165 INFO   , Thread-5, deploy.py:91, Operator ready
2023-04-01 23:24:43,165 INFO   , Thread-5, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:24:45,496 DEBUG  , Thread-5, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:24:47,669 INFO   , Thread-6, runner.py:360, [trial: 0, gen: 9] System took 00:01:24 to converge
2023-04-01 23:24:47,671 DEBUG  , Thread-6, runner.py:98, [trial: 0, gen: 9] STDOUT: 
2023-04-01 23:24:47,671 DEBUG  , Thread-6, runner.py:99, [trial: 0, gen: 9] STDERR: The CrdbCluster "test-cluster" is invalid: spec.nodes: Invalid value: 0: spec.nodes in body should be greater than or equal to 3

2023-04-01 23:24:47,816 DEBUG  , Thread-6, runner.py:177, [trial: 0, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:12:54Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:16:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:17:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2125', 'uid': '601576aa-be1a-4d75-a857-b25b73752994'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:09Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:13:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:38Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:24:47,846 DEBUG  , Thread-6, runner.py:202, [trial: 0, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-8h4vc
2023-04-01 23:24:48,221 INFO   , Thread-6, common.py:560, [trial: 0, gen: 9] Recognized invalid input through regex: The CrdbCluster "test-cluster" is invalid: spec.nodes: Invalid value: 0: spec.nodes in body should be greater than or equal to 3

2023-04-01 23:24:48,221 INFO   , Thread-6, checker.py:213, [trial: 0, gen: 9] Invalid input, reject mutation
2023-04-01 23:24:48,222 INFO   , Thread-6, checker.py:214, [trial: 0, gen: 9] STDOUT: 
2023-04-01 23:24:48,222 INFO   , Thread-6, checker.py:215, [trial: 0, gen: 9] STDERR: The CrdbCluster "test-cluster" is invalid: spec.nodes: Invalid value: 0: spec.nodes in body should be greater than or equal to 3

2023-04-01 23:24:48,959 INFO   , Thread-6, checker.py:134, [trial: 0, gen: 9] Number of system state fields: [3581] Number of delta: [206]
2023-04-01 23:24:48,961 DEBUG  , Thread-6, acto.py  :374, [trial: 0, gen: 9] Invalid input, revert
2023-04-01 23:24:48,961 WARNING, Thread-6, schema.py:573, [trial: 0, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-01 23:24:48,962 DEBUG  , Thread-6, acto.py  :458, [trial: 0, gen: 9] Run and check
2023-04-01 23:24:49,295 INFO   , Thread-6, runner.py:291, [trial: 0, gen: 9] Waiting for system to converge... 
2023-04-01 23:24:49,645 INFO   , Thread-14, deploy.py:91, Operator ready
2023-04-01 23:24:49,646 INFO   , Thread-14, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:24:50,162 INFO   , Thread-1, deploy.py:91, Operator ready
2023-04-01 23:24:50,162 INFO   , Thread-1, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:24:52,798 DEBUG  , Thread-14, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:24:53,331 DEBUG  , Thread-1, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:24:55,235 DEBUG  , Thread-12, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:24:55,579 INFO   , Thread-5, deploy.py:91, Operator ready
2023-04-01 23:24:55,579 INFO   , Thread-5, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:25:02,875 INFO   , Thread-14, deploy.py:91, Operator ready
2023-04-01 23:25:02,875 INFO   , Thread-14, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:25:03,417 INFO   , Thread-1, deploy.py:91, Operator ready
2023-04-01 23:25:03,417 INFO   , Thread-1, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:25:05,414 INFO   , Thread-12, deploy.py:91, Operator ready
2023-04-01 23:25:05,414 INFO   , Thread-12, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:25:07,492 DEBUG  , Thread-12, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:25:10,496 INFO   , Thread-3, runner.py:360, [trial: 0, gen: 1] System took 00:01:15 to converge
2023-04-01 23:25:10,498 DEBUG  , Thread-3, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:25:10,499 DEBUG  , Thread-3, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:25:10,640 DEBUG  , Thread-3, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:45Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:23:55Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2255', 'uid': '3f32ec47-cba4-483a-b6c2-9d2bd57fe216'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:59Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:48Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:49Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:25:10,666 DEBUG  , Thread-3, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-5hssr
2023-04-01 23:25:11,322 INFO   , Thread-3, acto.py  :187, Trial 0 finished, completed in 00:16:18
2023-04-01 23:25:11,322 INFO   , Thread-3, acto.py  :188, ---------------------------------------

2023-04-01 23:25:11,348 DEBUG  , Thread-3, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-5hssr
2023-04-01 23:25:13,821 INFO   , Thread-2, runner.py:323, [trial: 0, gen: 8] Statefulset test-cluster is not ready yet
2023-04-01 23:25:15,472 INFO   , Thread-16, runner.py:360, [trial: 0, gen: 1] System took 00:02:10 to converge
2023-04-01 23:25:15,475 DEBUG  , Thread-16, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:25:15,475 DEBUG  , Thread-16, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:25:15,599 DEBUG  , Thread-16, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:12:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:23:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2198', 'uid': '787fd6b6-a785-48c1-95f8-e1c1acac1142'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:25:15,633 DEBUG  , Thread-16, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-hb7zf
2023-04-01 23:25:16,208 INFO   , Thread-15, runner.py:360, [trial: 1, gen: 3] System took 00:01:00 to converge
2023-04-01 23:25:16,219 DEBUG  , Thread-15, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:25:16,225 DEBUG  , Thread-15, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:25:16,454 INFO   , Thread-16, acto.py  :187, Trial 0 finished, completed in 00:16:23
2023-04-01 23:25:16,454 INFO   , Thread-16, acto.py  :188, ---------------------------------------

2023-04-01 23:25:16,484 DEBUG  , Thread-16, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-hb7zf
2023-04-01 23:25:16,548 DEBUG  , Thread-15, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:20:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:19:37Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:21:55Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:24:15Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1521', 'uid': 'c8fe7c24-ff1f-459b-90ba-e5845cebfaaf'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:21:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:20:42Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:20:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:19:39Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:21:09Z', 'message': 'failed to reconcile test-cluster: one of HostPath or VolumeClaim should be set', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T03:21:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:25:16,579 DEBUG  , Thread-15, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-gcs6c
2023-04-01 23:25:17,385 INFO   , Thread-15, acto.py  :187, Trial 1 finished, completed in 00:08:01
2023-04-01 23:25:17,385 INFO   , Thread-15, acto.py  :188, ---------------------------------------

2023-04-01 23:25:17,403 DEBUG  , Thread-15, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-gcs6c
2023-04-01 23:25:17,581 INFO   , Thread-12, deploy.py:91, Operator ready
2023-04-01 23:25:17,581 INFO   , Thread-12, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:25:18,491 INFO   , Thread-7, base.py  :41, Created cluster
2023-04-01 23:25:18,501 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:25:21,701 INFO   , Thread-8, base.py  :41, Created cluster
2023-04-01 23:25:21,711 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:25:22,662 INFO   , Thread-11, base.py  :41, Created cluster
2023-04-01 23:25:22,672 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:25:27,547 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:25:28,447 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-2
2023-04-01 23:25:31,183 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-15
2023-04-01 23:25:31,571 INFO   , Thread-10, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:25:34,471 INFO   , Thread-13, runner.py:323, [trial: 0, gen: 5] Statefulset test-cluster is not ready yet
2023-04-01 23:25:34,861 DEBUG  , Thread-7, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:25:35,699 WARNING, Thread-5, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:25:35,700 DEBUG  , Thread-5, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:25:38,006 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-14
2023-04-01 23:25:38,433 INFO   , Thread-5, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:25:38,684 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:25:39,172 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:25:43,001 WARNING, Thread-14, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:25:43,002 DEBUG  , Thread-14, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:25:43,531 WARNING, Thread-1, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:25:43,531 DEBUG  , Thread-1, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:25:43,672 INFO   , Thread-9, runner.py:360, [trial: 0, gen: 1] System took 00:02:39 to converge
2023-04-01 23:25:43,680 DEBUG  , Thread-9, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:25:43,680 DEBUG  , Thread-9, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:25:43,935 DEBUG  , Thread-9, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:50Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:23:03Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2189', 'uid': '7a6e0e13-b14c-415c-b62e-870f4e47589c'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:01Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:56Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:25:43,969 DEBUG  , Thread-9, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-b8llg
2023-04-01 23:25:44,692 INFO   , Thread-9, acto.py  :187, Trial 0 finished, completed in 00:16:51
2023-04-01 23:25:44,692 INFO   , Thread-9, acto.py  :188, ---------------------------------------

2023-04-01 23:25:44,717 DEBUG  , Thread-9, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-b8llg
2023-04-01 23:25:44,939 INFO   , Thread-7, deploy.py:91, Operator ready
2023-04-01 23:25:44,939 INFO   , Thread-7, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:25:47,333 INFO   , Thread-14, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:25:48,491 INFO   , Thread-1, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:25:48,776 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-01 23:25:48,776 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:25:48,949 DEBUG  , Thread-7, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:25:49,250 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-01 23:25:49,250 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:25:49,407 INFO   , Thread-6, runner.py:360, [trial: 0, gen: 9] System took 00:01:00 to converge
2023-04-01 23:25:49,408 DEBUG  , Thread-6, runner.py:98, [trial: 0, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:25:49,408 DEBUG  , Thread-6, runner.py:99, [trial: 0, gen: 9] STDERR: 
2023-04-01 23:25:49,547 DEBUG  , Thread-6, runner.py:177, [trial: 0, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:14:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:12:54Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:16:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:17:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2125', 'uid': '601576aa-be1a-4d75-a857-b25b73752994'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:13:09Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:13:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:38Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:25:49,573 DEBUG  , Thread-6, runner.py:202, [trial: 0, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-8h4vc
2023-04-01 23:25:50,436 DEBUG  , Thread-6, acto.py  :383, [trial: 0, gen: 9] Only one patch, no need to isolate
2023-04-01 23:25:50,443 INFO   , Thread-6, acto.py  :187, Trial 0 finished, completed in 00:16:57
2023-04-01 23:25:50,443 INFO   , Thread-6, acto.py  :188, ---------------------------------------

2023-04-01 23:25:50,465 DEBUG  , Thread-6, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-8h4vc
2023-04-01 23:25:52,053 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:25:52,522 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:25:57,712 WARNING, Thread-12, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:25:57,712 DEBUG  , Thread-12, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:25:59,105 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-8
2023-04-01 23:25:59,111 INFO   , Thread-7, deploy.py:91, Operator ready
2023-04-01 23:25:59,119 INFO   , Thread-7, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:26:00,353 INFO   , Thread-12, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:26:00,489 INFO   , Thread-6, common.py:629, Trial testrun-crdb-whitebox/trial-05-0000 completed without error
2023-04-01 23:26:02,140 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-01 23:26:02,140 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:26:02,604 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-01 23:26:02,604 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:26:06,581 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-5
2023-04-01 23:26:24,531 INFO   , Thread-15, base.py  :41, Created cluster
2023-04-01 23:26:24,542 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:26:27,111 INFO   , Thread-3, base.py  :41, Created cluster
2023-04-01 23:26:27,123 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:26:27,626 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:26:28,185 INFO   , Thread-16, base.py  :41, Created cluster
2023-04-01 23:26:28,193 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:26:31,654 INFO   , Thread-10, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:26:34,552 INFO   , Thread-13, runner.py:323, [trial: 0, gen: 5] Statefulset test-cluster is not ready yet
2023-04-01 23:26:38,549 INFO   , Thread-5, runner.py:360, [trial: 1, gen: 0] System took 00:01:00 to converge
2023-04-01 23:26:38,552 DEBUG  , Thread-5, runner.py:98, [trial: 1, gen: 0] STDOUT: 
2023-04-01 23:26:38,552 DEBUG  , Thread-5, runner.py:99, [trial: 1, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-04-0001/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.50.58:443: connect: connection refused

2023-04-01 23:26:38,654 DEBUG  , Thread-5, runner.py:177, [trial: 1, gen: 0] {}
2023-04-01 23:26:38,654 ERROR  , Thread-5, runner.py:107, [trial: 1, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:26:38,656 INFO   , Thread-5, checker.py:103, [trial: 1, gen: 0] Connection refused, reject mutation
2023-04-01 23:26:38,656 INFO   , Thread-5, acto.py  :472, [trial: 1, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-01 23:26:39,239 WARNING, Thread-7, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:26:39,239 DEBUG  , Thread-7, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:26:40,545 DEBUG  , Thread-15, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:26:41,861 INFO   , Thread-7, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:26:42,267 WARNING, Thread-8, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:26:42,268 DEBUG  , Thread-8, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:26:42,834 WARNING, Thread-11, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:26:42,839 DEBUG  , Thread-11, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:26:42,962 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:26:43,975 DEBUG  , Thread-16, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:26:46,354 INFO   , Thread-8, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:26:46,963 INFO   , Thread-11, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:26:47,358 INFO   , Thread-9, base.py  :41, Created cluster
2023-04-01 23:26:47,372 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:26:48,792 INFO   , Thread-14, runner.py:360, [trial: 1, gen: 0] System took 00:01:01 to converge
2023-04-01 23:26:48,793 DEBUG  , Thread-14, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:26:48,793 DEBUG  , Thread-14, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:26:48,893 DEBUG  , Thread-14, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:47Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:25:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:25:49Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '914', 'uid': 'de227de4-6863-4973-9ea2-5ad20fa43886'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:25:47Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:25:47Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:25:49Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:26:48,913 DEBUG  , Thread-14, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-8g8qs
2023-04-01 23:26:49,112 WARNING, Thread-14, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:26:49,113 INFO   , Thread-14, input.py :723, [trial: 1, gen: 1] Progress [5] cases left
2023-04-01 23:26:49,113 DEBUG  , Thread-14, test_case.py:51, [trial: 1, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:26:49,113 INFO   , Thread-14, acto.py  :267, [trial: 1, gen: 1] Precondition of ["spec", "httpPort"] fails, try setup first
2023-04-01 23:26:49,113 INFO   , Thread-14, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/httpPort", "value": 26257}]
2023-04-01 23:26:49,114 DEBUG  , Thread-14, test_case.py:51, [trial: 1, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:26:49,114 DEBUG  , Thread-14, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:26:49,430 INFO   , Thread-14, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:26:49,888 INFO   , Thread-1, runner.py:360, [trial: 1, gen: 0] System took 00:01:01 to converge
2023-04-01 23:26:49,889 DEBUG  , Thread-1, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:26:49,889 DEBUG  , Thread-1, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:26:49,993 DEBUG  , Thread-1, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:48Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:25:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:25:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '916', 'uid': '31dba658-5d26-4d81-8bdd-9155a5584890'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:25:48Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:25:48Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:25:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:26:50,018 DEBUG  , Thread-1, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-6f79h
2023-04-01 23:26:50,131 WARNING, Thread-1, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:26:50,131 INFO   , Thread-1, input.py :723, [trial: 1, gen: 1] Progress [16] cases left
2023-04-01 23:26:50,132 DEBUG  , Thread-1, test_case.py:51, [trial: 1, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:26:50,132 INFO   , Thread-1, acto.py  :267, [trial: 1, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "name"] fails, try setup first
2023-04-01 23:26:50,132 INFO   , Thread-1, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY"}]}]
2023-04-01 23:26:50,132 DEBUG  , Thread-1, test_case.py:51, [trial: 1, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:26:50,132 DEBUG  , Thread-1, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:26:50,446 INFO   , Thread-1, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:26:50,632 INFO   , Thread-15, deploy.py:91, Operator ready
2023-04-01 23:26:50,632 INFO   , Thread-15, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:26:52,851 DEBUG  , Thread-15, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:26:53,044 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-01 23:26:53,044 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:26:54,059 INFO   , Thread-16, deploy.py:91, Operator ready
2023-04-01 23:26:54,059 INFO   , Thread-16, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:26:56,204 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:26:57,212 DEBUG  , Thread-16, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:26:57,589 INFO   , Thread-2, runner.py:323, [trial: 0, gen: 8] Statefulset test-cluster is not ready yet
2023-04-01 23:26:59,055 INFO   , Thread-5, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:27:00,497 INFO   , Thread-12, runner.py:360, [trial: 1, gen: 0] System took 00:01:00 to converge
2023-04-01 23:27:00,498 DEBUG  , Thread-12, runner.py:98, [trial: 1, gen: 0] STDOUT: 
2023-04-01 23:27:00,498 DEBUG  , Thread-12, runner.py:99, [trial: 1, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-11-0001/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.113.225:443: connect: connection refused

2023-04-01 23:27:00,611 DEBUG  , Thread-12, runner.py:177, [trial: 1, gen: 0] {}
2023-04-01 23:27:00,611 ERROR  , Thread-12, runner.py:107, [trial: 1, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:27:00,613 INFO   , Thread-12, checker.py:103, [trial: 1, gen: 0] Connection refused, reject mutation
2023-04-01 23:27:00,613 INFO   , Thread-12, acto.py  :472, [trial: 1, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-01 23:27:00,969 INFO   , Thread-6, base.py  :41, Created cluster
2023-04-01 23:27:00,981 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:27:02,940 INFO   , Thread-15, deploy.py:91, Operator ready
2023-04-01 23:27:02,940 INFO   , Thread-15, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:27:04,364 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:27:06,287 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-01 23:27:06,288 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:27:07,300 INFO   , Thread-16, deploy.py:91, Operator ready
2023-04-01 23:27:07,300 INFO   , Thread-16, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:27:14,446 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-01 23:27:14,447 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:27:16,486 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:27:18,123 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:27:21,035 INFO   , Thread-12, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:27:26,584 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-01 23:27:26,584 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:27:27,717 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:27:28,207 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-01 23:27:28,207 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:27:30,297 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:27:31,741 INFO   , Thread-10, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:27:34,631 INFO   , Thread-13, runner.py:323, [trial: 0, gen: 5] Statefulset test-cluster is not ready yet
2023-04-01 23:27:40,460 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-01 23:27:40,460 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:27:43,064 WARNING, Thread-15, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:27:43,064 DEBUG  , Thread-15, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:27:45,680 INFO   , Thread-15, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:27:46,415 WARNING, Thread-3, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:27:46,415 DEBUG  , Thread-3, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:27:47,434 WARNING, Thread-16, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:27:47,435 DEBUG  , Thread-16, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:27:49,520 INFO   , Thread-3, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:27:50,657 INFO   , Thread-16, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:27:51,953 INFO   , Thread-1, runner.py:360, [trial: 1, gen: 1] System took 00:01:01 to converge
2023-04-01 23:27:51,954 DEBUG  , Thread-1, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:27:51,954 DEBUG  , Thread-1, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:27:52,077 DEBUG  , Thread-1, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY"}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:48Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:25:50Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:26:50Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:26:52Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1020', 'uid': '31dba658-5d26-4d81-8bdd-9155a5584890'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY'}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:25:48Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:25:48Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:52Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:27:52,086 INFO   , Thread-7, runner.py:360, [trial: 1, gen: 0] System took 00:01:10 to converge
2023-04-01 23:27:52,088 DEBUG  , Thread-7, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:27:52,089 DEBUG  , Thread-7, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:27:52,159 DEBUG  , Thread-1, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-6f79h
2023-04-01 23:27:52,423 DEBUG  , Thread-7, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:41Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:26:41Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:26:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:26:45Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1052', 'uid': '2252b008-f015-4569-89b0-7c8b4e909408'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:26:56Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:27:52,647 INFO   , Thread-1, common.py:569, [trial: 1, gen: 1] Recognized invalid input through field [name] in error message: User set image.name, using that field instead of cockroachDBVersion
2023-04-01 23:27:52,648 INFO   , Thread-1, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [1805] Number of delta: [148]
2023-04-01 23:27:52,650 INFO   , Thread-1, acto.py  :301, [trial: 1, gen: 1] Setup produced invalid input
2023-04-01 23:27:52,651 WARNING, Thread-1, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:27:52,651 DEBUG  , Thread-1, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:27:52,685 DEBUG  , Thread-7, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-pqp5r
2023-04-01 23:27:52,967 WARNING, Thread-7, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:27:52,968 INFO   , Thread-7, input.py :723, [trial: 1, gen: 1] Progress [15] cases left
2023-04-01 23:27:52,968 DEBUG  , Thread-7, test_case.py:51, [trial: 1, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:27:52,968 INFO   , Thread-7, acto.py  :263, [trial: 1, gen: 1] Precondition of ['spec', 'ingress', 'ui', 'annotations'] satisfies
2023-04-01 23:27:52,968 INFO   , Thread-7, acto.py  :323, [trial: 1, gen: 1] Running bundled testcases
2023-04-01 23:27:52,968 DEBUG  , Thread-7, test_case.py:51, [trial: 1, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:27:52,969 INFO   , Thread-7, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "annotations": {}}}}]
2023-04-01 23:27:52,969 DEBUG  , Thread-7, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:27:52,998 INFO   , Thread-14, runner.py:360, [trial: 1, gen: 1] System took 00:01:03 to converge
2023-04-01 23:27:53,000 DEBUG  , Thread-14, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:27:53,000 DEBUG  , Thread-14, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:27:53,002 INFO   , Thread-1, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:27:53,130 DEBUG  , Thread-14, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:53Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"httpPort":26257,"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:47Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:httpPort': {}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:26:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:26:53Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:26:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1085', 'uid': 'de227de4-6863-4973-9ea2-5ad20fa43886'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 26257, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:25:47Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:52Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:53Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:52Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:27:23Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: spec.ports[2]: Duplicate value: core.ServicePort{Name:"", Protocol:"TCP", AppProtocol:(*string)(nil), Port:26257, TargetPort:intstr.IntOrString{Type:0, IntVal:0, StrVal:""}, NodePort:0}', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-01 23:27:53,151 DEBUG  , Thread-14, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-8g8qs
2023-04-01 23:27:53,367 INFO   , Thread-7, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:27:53,557 INFO   , Thread-14, common.py:560, [trial: 1, gen: 1] Recognized invalid input through regex: failed to reconcile test-cluster: Service "test-cluster" is invalid: spec.ports[2]: Duplicate value: core.ServicePort{Name:"", Protocol:"TCP", AppProtocol:(*string)(nil), Port:26257, TargetPort:intstr.IntOrString{Type:0, IntVal:0, StrVal:""}, NodePort:0}
2023-04-01 23:27:53,558 INFO   , Thread-14, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [1898] Number of delta: [203]
2023-04-01 23:27:53,560 INFO   , Thread-14, acto.py  :301, [trial: 1, gen: 1] Setup produced invalid input
2023-04-01 23:27:53,560 WARNING, Thread-14, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:27:53,561 DEBUG  , Thread-14, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:27:53,895 INFO   , Thread-14, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:27:57,682 INFO   , Thread-2, runner.py:323, [trial: 0, gen: 8] Statefulset test-cluster is not ready yet
2023-04-01 23:28:01,896 INFO   , Thread-5, runner.py:360, [trial: 1, gen: 0] System took 00:01:02 to converge
2023-04-01 23:28:01,900 DEBUG  , Thread-5, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:28:01,900 DEBUG  , Thread-5, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:28:02,011 DEBUG  , Thread-5, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:59Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:26:58Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:27:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1044', 'uid': '87af8823-d9cc-4105-b72b-65e7262b8377'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:26:59Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:59Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:02Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:28:02,030 DEBUG  , Thread-5, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-xgp2n
2023-04-01 23:28:02,255 WARNING, Thread-5, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:28:02,256 INFO   , Thread-5, input.py :723, [trial: 1, gen: 1] Progress [14] cases left
2023-04-01 23:28:02,256 DEBUG  , Thread-5, test_case.py:51, [trial: 1, gen: 1] Precondition [toggle_off_precondition] Result [False]
2023-04-01 23:28:02,256 INFO   , Thread-5, acto.py  :267, [trial: 1, gen: 1] Precondition of ["spec", "dataStore", "supportsAutoResize"] fails, try setup first
2023-04-01 23:28:02,256 INFO   , Thread-5, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/dataStore/supportsAutoResize", "value": true}]
2023-04-01 23:28:02,256 DEBUG  , Thread-5, test_case.py:51, [trial: 1, gen: 1] Precondition [toggle_off_precondition] Result [True]
2023-04-01 23:28:02,256 DEBUG  , Thread-5, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:28:02,447 ERROR  , Thread-13, runner.py:363, [trial: 0, gen: 5] System failed to converge within 600 seconds
2023-04-01 23:28:02,449 DEBUG  , Thread-13, runner.py:98, [trial: 0, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:28:02,450 DEBUG  , Thread-13, runner.py:99, [trial: 0, gen: 5] STDERR: 
2023-04-01 23:28:02,580 DEBUG  , Thread-13, runner.py:177, [trial: 0, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":null,"optional":false},"fieldRef":{"apiVersion":"ACTOKEY","fieldPath":"ACTOKEY"},"resourceFieldRef":{"containerName":"ACTOKEY","divisor":3,"resource":"ACTOKEY"},"secretKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":false}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:15:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:18:02Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1713', 'uid': 'e79a3795-9224-49e4-8af8-d4ab758d8aeb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'optional': False}, 'fieldRef': {'apiVersion': 'ACTOKEY', 'fieldPath': 'ACTOKEY'}, 'resourceFieldRef': {'containerName': 'ACTOKEY', 'divisor': '3', 'resource': 'ACTOKEY'}, 'secretKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': False}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:26Z', 'message': 'updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: [spec.resources[storage]: Invalid value: "0": must be greater than zero, spec.resources.requests.storage: Forbidden: field can not be less than previous value]', 'status': 'Failed', 'type': 'ResizePVC'}], 'version': 'v21.2.10'}}}
2023-04-01 23:28:02,598 INFO   , Thread-5, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:28:02,607 DEBUG  , Thread-13, runner.py:202, [trial: 0, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-tshhh
2023-04-01 23:28:03,120 DEBUG  , Thread-13, checker.py:278, [trial: 0, gen: 5] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'fieldRef', 'apiVersion']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 1, 'value_from', 'field_ref', 'api_version']]
2023-04-01 23:28:03,120 ERROR  , Thread-13, checker.py:282, [trial: 0, gen: 5] Matched delta inconsistent with input delta
2023-04-01 23:28:03,120 ERROR  , Thread-13, checker.py:283, [trial: 0, gen: 5] Input delta: not present -> ACTOKEY
2023-04-01 23:28:03,120 ERROR  , Thread-13, checker.py:284, [trial: 0, gen: 5] Matched delta: v1 -> not present
2023-04-01 23:28:03,327 INFO   , Thread-13, common.py:569, [trial: 0, gen: 5] Recognized invalid input through field [resource] in error message: reconciling resources on deploy action
2023-04-01 23:28:03,327 INFO   , Thread-13, checker.py:134, [trial: 0, gen: 5] Number of system state fields: [3058] Number of delta: [240]
2023-04-01 23:28:03,327 ERROR  , Thread-13, checker.py:561, [trial: 0, gen: 5] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:28:03,328 DEBUG  , Thread-13, acto.py  :489, [trial: 0, gen: 5] Running recovery
2023-04-01 23:28:05,426 INFO   , Thread-13, runner.py:291, [trial: 0, gen: 5] Waiting for system to converge... 
2023-04-01 23:28:06,701 WARNING, Thread-9, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:28:06,702 DEBUG  , Thread-9, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:28:09,285 INFO   , Thread-9, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:28:10,678 INFO   , Thread-8, runner.py:360, [trial: 1, gen: 0] System took 00:01:24 to converge
2023-04-01 23:28:10,680 DEBUG  , Thread-8, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:28:10,680 DEBUG  , Thread-8, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:28:10,837 DEBUG  , Thread-8, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:50Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:46Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:26:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:27:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1077', 'uid': 'c8301b52-ddc3-4df4-b4e9-11b9f0573448'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:49Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:50Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:55Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:28:10,868 DEBUG  , Thread-8, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-54n8k
2023-04-01 23:28:11,167 WARNING, Thread-8, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:28:11,168 INFO   , Thread-8, input.py :723, [trial: 1, gen: 1] Progress [19] cases left
2023-04-01 23:28:11,168 DEBUG  , Thread-8, test_case.py:51, [trial: 1, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:28:11,168 INFO   , Thread-8, acto.py  :263, [trial: 1, gen: 1] Precondition of ['spec', 'nodeSelector', 'ACTOKEY'] satisfies
2023-04-01 23:28:11,168 INFO   , Thread-8, acto.py  :323, [trial: 1, gen: 1] Running bundled testcases
2023-04-01 23:28:11,168 DEBUG  , Thread-8, test_case.py:51, [trial: 1, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:28:11,169 INFO   , Thread-8, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/nodeSelector", "value": {"ACTOKEY": ""}}]
2023-04-01 23:28:11,169 DEBUG  , Thread-8, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:28:11,524 INFO   , Thread-8, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:28:20,590 WARNING, Thread-6, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:28:20,590 DEBUG  , Thread-6, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:28:23,271 INFO   , Thread-6, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:28:27,809 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:28:47,190 INFO   , Thread-15, runner.py:360, [trial: 2, gen: 0] System took 00:01:01 to converge
2023-04-01 23:28:47,191 DEBUG  , Thread-15, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:28:47,191 DEBUG  , Thread-15, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-01 23:28:47,289 DEBUG  , Thread-15, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:27:45Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:27:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:27:47Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '914', 'uid': '4e802b24-8da5-4c99-a76a-f371c0e82b6e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:45Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:45Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:47Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:28:47,307 DEBUG  , Thread-15, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-2zn9b
2023-04-01 23:28:47,432 WARNING, Thread-15, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:28:47,433 INFO   , Thread-15, input.py :723, [trial: 2, gen: 1] Progress [6] cases left
2023-04-01 23:28:47,433 DEBUG  , Thread-15, test_case.py:51, [trial: 2, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:28:47,433 INFO   , Thread-15, acto.py  :263, [trial: 2, gen: 1] Precondition of ['spec', 'resources'] satisfies
2023-04-01 23:28:47,433 INFO   , Thread-15, acto.py  :323, [trial: 2, gen: 1] Running bundled testcases
2023-04-01 23:28:47,433 DEBUG  , Thread-15, test_case.py:51, [trial: 2, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:28:47,433 INFO   , Thread-15, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "remove", "path": "/spec/resources/limits"}, {"op": "remove", "path": "/spec/resources/requests"}]
2023-04-01 23:28:47,434 DEBUG  , Thread-15, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:28:47,773 INFO   , Thread-15, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:28:49,650 INFO   , Thread-3, runner.py:360, [trial: 1, gen: 0] System took 00:01:00 to converge
2023-04-01 23:28:49,651 DEBUG  , Thread-3, runner.py:98, [trial: 1, gen: 0] STDOUT: 
2023-04-01 23:28:49,652 DEBUG  , Thread-3, runner.py:99, [trial: 1, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-02-0001/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.108.44:443: connect: connection refused

2023-04-01 23:28:49,746 DEBUG  , Thread-3, runner.py:177, [trial: 1, gen: 0] {}
2023-04-01 23:28:49,746 ERROR  , Thread-3, runner.py:107, [trial: 1, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:28:49,747 INFO   , Thread-3, checker.py:103, [trial: 1, gen: 0] Connection refused, reject mutation
2023-04-01 23:28:49,747 INFO   , Thread-3, acto.py  :472, [trial: 1, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-01 23:28:50,776 INFO   , Thread-16, runner.py:360, [trial: 1, gen: 0] System took 00:01:00 to converge
2023-04-01 23:28:50,778 DEBUG  , Thread-16, runner.py:98, [trial: 1, gen: 0] STDOUT: 
2023-04-01 23:28:50,778 DEBUG  , Thread-16, runner.py:99, [trial: 1, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-15-0001/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.103.117:443: connect: connection refused

2023-04-01 23:28:50,883 DEBUG  , Thread-16, runner.py:177, [trial: 1, gen: 0] {}
2023-04-01 23:28:50,883 ERROR  , Thread-16, runner.py:107, [trial: 1, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:28:50,884 INFO   , Thread-16, checker.py:103, [trial: 1, gen: 0] Connection refused, reject mutation
2023-04-01 23:28:50,884 INFO   , Thread-16, acto.py  :472, [trial: 1, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-01 23:28:52,986 INFO   , Thread-11, runner.py:360, [trial: 1, gen: 0] System took 00:02:06 to converge
2023-04-01 23:28:52,988 DEBUG  , Thread-11, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:28:52,988 DEBUG  , Thread-11, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:28:53,142 DEBUG  , Thread-11, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:50Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:46Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:26:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:26:50Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:26:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1084', 'uid': 'a339795d-81a2-4fc4-8c17-453d4ee71345'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:01Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:49Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:50Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:56Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:28:53,168 DEBUG  , Thread-11, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-4r8p6
2023-04-01 23:28:53,447 WARNING, Thread-11, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:28:53,447 INFO   , Thread-11, input.py :723, [trial: 1, gen: 1] Progress [19] cases left
2023-04-01 23:28:53,447 DEBUG  , Thread-11, test_case.py:51, [trial: 1, gen: 1] Precondition [change_precondition] Result [False]
2023-04-01 23:28:53,447 INFO   , Thread-11, acto.py  :267, [trial: 1, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "configMapKeyRef", "name"] fails, try setup first
2023-04-01 23:28:53,448 INFO   , Thread-11, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY"}}}]}]
2023-04-01 23:28:53,448 DEBUG  , Thread-11, test_case.py:51, [trial: 1, gen: 1] Precondition [change_precondition] Result [True]
2023-04-01 23:28:53,448 DEBUG  , Thread-11, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:28:53,666 INFO   , Thread-7, runner.py:360, [trial: 1, gen: 1] System took 00:01:00 to converge
2023-04-01 23:28:53,667 DEBUG  , Thread-7, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:28:53,667 DEBUG  , Thread-7, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:28:53,801 DEBUG  , Thread-7, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"annotations":{},"host":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:41Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:26:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:27:53Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:annotations': {}, 'f:host': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:27:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1212', 'uid': '2252b008-f015-4569-89b0-7c8b4e909408'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:26:56Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:28:23Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-01 23:28:53,817 INFO   , Thread-11, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:28:53,845 DEBUG  , Thread-7, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-pqp5r
2023-04-01 23:28:54,572 INFO   , Thread-7, common.py:560, [trial: 1, gen: 1] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:28:54,573 INFO   , Thread-7, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [3461] Number of delta: [5]
2023-04-01 23:28:54,573 DEBUG  , Thread-7, acto.py  :374, [trial: 1, gen: 1] Invalid input, revert
2023-04-01 23:28:54,574 WARNING, Thread-7, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:28:54,574 DEBUG  , Thread-7, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:28:54,904 INFO   , Thread-7, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:28:57,787 INFO   , Thread-2, runner.py:323, [trial: 0, gen: 8] Statefulset test-cluster is not ready yet
2023-04-01 23:29:03,683 INFO   , Thread-5, runner.py:360, [trial: 1, gen: 1] System took 00:01:01 to converge
2023-04-01 23:29:03,686 DEBUG  , Thread-5, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:29:03,686 DEBUG  , Thread-5, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:29:03,797 DEBUG  , Thread-5, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}},"supportsAutoResize":true},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:59Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:27:00Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}, 'f:supportsAutoResize': {}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:28:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:28:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1148', 'uid': '87af8823-d9cc-4105-b72b-65e7262b8377'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': True}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:26:59Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:59Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:29:03,818 DEBUG  , Thread-5, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-xgp2n
2023-04-01 23:29:04,342 INFO   , Thread-5, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [2108] Number of delta: [148]
2023-04-01 23:29:04,343 INFO   , Thread-5, acto.py  :323, [trial: 1, gen: 1] Running bundled testcases
2023-04-01 23:29:04,343 DEBUG  , Thread-5, test_case.py:51, [trial: 1, gen: 1] Precondition [toggle_off_precondition] Result [True]
2023-04-01 23:29:04,343 INFO   , Thread-5, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "replace", "path": "/spec/dataStore/supportsAutoResize", "value": false}]
2023-04-01 23:29:04,344 DEBUG  , Thread-5, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:29:04,692 INFO   , Thread-5, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:29:06,708 INFO   , Thread-13, runner.py:360, [trial: 0, gen: 5] System took 00:01:01 to converge
2023-04-01 23:29:06,710 DEBUG  , Thread-13, runner.py:98, [trial: 0, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:29:06,710 DEBUG  , Thread-13, runner.py:99, [trial: 0, gen: 5] STDERR: 
2023-04-01 23:29:06,848 DEBUG  , Thread-13, runner.py:177, [trial: 0, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:47Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:15:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:28:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2658', 'uid': 'e79a3795-9224-49e4-8af8-d4ab758d8aeb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:12:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:16:26Z', 'message': 'updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: [spec.resources[storage]: Invalid value: "0": must be greater than zero, spec.resources.requests.storage: Forbidden: field can not be less than previous value]', 'status': 'Failed', 'type': 'ResizePVC'}], 'version': 'v21.2.10'}}}
2023-04-01 23:29:06,874 DEBUG  , Thread-13, runner.py:202, [trial: 0, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-tshhh
2023-04-01 23:29:07,572 INFO   , Thread-13, acto.py  :187, Trial 0 finished, completed in 00:20:14
2023-04-01 23:29:07,572 INFO   , Thread-13, acto.py  :188, ---------------------------------------

2023-04-01 23:29:07,598 DEBUG  , Thread-13, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-tshhh
2023-04-01 23:29:07,679 INFO   , Thread-10, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:29:10,139 INFO   , Thread-3, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:29:11,357 INFO   , Thread-16, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:29:11,641 INFO   , Thread-8, runner.py:360, [trial: 1, gen: 1] System took 00:01:00 to converge
2023-04-01 23:29:11,642 DEBUG  , Thread-8, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:29:11,643 DEBUG  , Thread-8, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:29:11,796 DEBUG  , Thread-8, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:50Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodeSelector":{"ACTOKEY":""},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:46Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:27:00Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodeSelector': {'.': {}, 'f:ACTOKEY': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:28:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1208', 'uid': 'c8301b52-ddc3-4df4-b4e9-11b9f0573448'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodeSelector': {'ACTOKEY': ''}, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:49Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:50Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:55Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:29:11,829 DEBUG  , Thread-8, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-54n8k
2023-04-01 23:29:12,671 INFO   , Thread-8, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [3457] Number of delta: [1]
2023-04-01 23:29:12,674 WARNING, Thread-8, schema.py:573, [trial: 1, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-01 23:29:12,675 INFO   , Thread-8, input.py :723, [trial: 1, gen: 2] Progress [18] cases left
2023-04-01 23:29:12,675 DEBUG  , Thread-8, test_case.py:51, [trial: 1, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-01 23:29:12,675 INFO   , Thread-8, acto.py  :267, [trial: 1, gen: 2] Precondition of ["spec", "image", "pullPolicy"] fails, try setup first
2023-04-01 23:29:12,676 INFO   , Thread-8, acto.py  :107, [trial: 1, gen: 2] JSON patch: [{"op": "add", "path": "/spec/image/pullPolicy", "value": "ACTOKEY"}]
2023-04-01 23:29:12,676 DEBUG  , Thread-8, test_case.py:51, [trial: 1, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-01 23:29:12,676 DEBUG  , Thread-8, acto.py  :458, [trial: 1, gen: 2] Run and check
2023-04-01 23:29:13,009 INFO   , Thread-8, runner.py:291, [trial: 1, gen: 2] Waiting for system to converge... 
2023-04-01 23:29:21,375 INFO   , Thread-9, runner.py:360, [trial: 1, gen: 0] System took 00:01:12 to converge
2023-04-01 23:29:21,376 DEBUG  , Thread-9, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:29:21,376 DEBUG  , Thread-9, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:29:21,524 DEBUG  , Thread-9, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:28:13Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:28:09Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:28:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:28:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:28:13Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1060', 'uid': '4ecdb967-a920-4328-954b-486a5b7d4162'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:24Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:28:12Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:28:13Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:18Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:29:21,547 DEBUG  , Thread-9, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-nprqd
2023-04-01 23:29:21,827 WARNING, Thread-9, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:29:21,827 INFO   , Thread-9, input.py :723, [trial: 1, gen: 1] Progress [19] cases left
2023-04-01 23:29:21,828 DEBUG  , Thread-9, test_case.py:51, [trial: 1, gen: 1] Precondition [change_precondition] Result [False]
2023-04-01 23:29:21,828 INFO   , Thread-9, acto.py  :267, [trial: 1, gen: 1] Precondition of ["spec", "nodeTLSSecret"] fails, try setup first
2023-04-01 23:29:21,828 INFO   , Thread-9, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/nodeTLSSecret", "value": "ACTOKEY"}]
2023-04-01 23:29:21,828 DEBUG  , Thread-9, test_case.py:51, [trial: 1, gen: 1] Precondition [change_precondition] Result [True]
2023-04-01 23:29:21,828 DEBUG  , Thread-9, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:29:22,386 INFO   , Thread-14, runner.py:360, [trial: 1, gen: 1] System took 00:01:28 to converge
2023-04-01 23:29:22,387 DEBUG  , Thread-14, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:29:22,387 DEBUG  , Thread-14, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:29:22,517 INFO   , Thread-9, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:29:22,547 DEBUG  , Thread-14, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:53Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:47Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:27:53Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:28:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1292', 'uid': 'de227de4-6863-4973-9ea2-5ad20fa43886'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:04Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:52Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:53Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:52Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:27:23Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: spec.ports[2]: Duplicate value: core.ServicePort{Name:"", Protocol:"TCP", AppProtocol:(*string)(nil), Port:26257, TargetPort:intstr.IntOrString{Type:0, IntVal:0, StrVal:""}, NodePort:0}', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T03:27:59Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:29:22,577 DEBUG  , Thread-14, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-8g8qs
2023-04-01 23:29:23,095 INFO   , Thread-14, acto.py  :321, [trial: 1, gen: 1] All setups failed
2023-04-01 23:29:23,095 WARNING, Thread-14, schema.py:573, [trial: 1, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:29:23,096 INFO   , Thread-14, input.py :723, [trial: 1, gen: 3] Progress [4] cases left
2023-04-01 23:29:23,096 DEBUG  , Thread-14, test_case.py:51, [trial: 1, gen: 3] Precondition [increase_precondition] Result [False]
2023-04-01 23:29:23,096 INFO   , Thread-14, acto.py  :267, [trial: 1, gen: 3] Precondition of ["spec", "httpPort"] fails, try setup first
2023-04-01 23:29:23,096 INFO   , Thread-14, acto.py  :107, [trial: 1, gen: 3] JSON patch: [{"op": "add", "path": "/spec/httpPort", "value": 0}]
2023-04-01 23:29:23,096 DEBUG  , Thread-14, test_case.py:51, [trial: 1, gen: 3] Precondition [increase_precondition] Result [True]
2023-04-01 23:29:23,097 DEBUG  , Thread-14, acto.py  :458, [trial: 1, gen: 3] Run and check
2023-04-01 23:29:23,366 INFO   , Thread-1, runner.py:360, [trial: 1, gen: 1] System took 00:01:30 to converge
2023-04-01 23:29:23,367 DEBUG  , Thread-1, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:29:23,367 DEBUG  , Thread-1, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:29:23,431 INFO   , Thread-14, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:29:23,538 DEBUG  , Thread-1, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:27:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:48Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:27:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:27:56Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:27:56Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1289', 'uid': '31dba658-5d26-4d81-8bdd-9155a5584890'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:55Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:56Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:28:01Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:29:23,572 DEBUG  , Thread-1, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-6f79h
2023-04-01 23:29:24,126 INFO   , Thread-1, acto.py  :321, [trial: 1, gen: 1] All setups failed
2023-04-01 23:29:24,126 WARNING, Thread-1, schema.py:573, [trial: 1, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:29:24,126 INFO   , Thread-1, input.py :723, [trial: 1, gen: 3] Progress [15] cases left
2023-04-01 23:29:24,126 DEBUG  , Thread-1, test_case.py:51, [trial: 1, gen: 3] Precondition [change_precondition] Result [False]
2023-04-01 23:29:24,127 INFO   , Thread-1, acto.py  :267, [trial: 1, gen: 3] Precondition of ["spec", "podEnvVariables", 0, "name"] fails, try setup first
2023-04-01 23:29:24,127 INFO   , Thread-1, acto.py  :107, [trial: 1, gen: 3] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY"}]}]
2023-04-01 23:29:24,127 DEBUG  , Thread-1, test_case.py:51, [trial: 1, gen: 3] Precondition [change_precondition] Result [True]
2023-04-01 23:29:24,127 DEBUG  , Thread-1, acto.py  :458, [trial: 1, gen: 3] Run and check
2023-04-01 23:29:24,507 INFO   , Thread-1, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:29:24,552 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-12
2023-04-01 23:29:24,900 INFO   , Thread-6, runner.py:360, [trial: 1, gen: 0] System took 00:01:01 to converge
2023-04-01 23:29:24,902 DEBUG  , Thread-6, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:29:24,902 DEBUG  , Thread-6, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:29:25,008 DEBUG  , Thread-6, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:28:23Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:28:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:28:25Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '915', 'uid': '35b2968c-e68d-469a-a273-ca2bc7ba660f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:23Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:28:23Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:25Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:29:25,032 DEBUG  , Thread-6, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-sdj2j
2023-04-01 23:29:25,155 WARNING, Thread-6, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:29:25,155 INFO   , Thread-6, input.py :723, [trial: 1, gen: 1] Progress [14] cases left
2023-04-01 23:29:25,156 DEBUG  , Thread-6, test_case.py:51, [trial: 1, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:29:25,156 INFO   , Thread-6, acto.py  :267, [trial: 1, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "resourceFieldRef", "resource"] fails, try setup first
2023-04-01 23:29:25,156 INFO   , Thread-6, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {"resource": "ACTOKEY"}}}]}]
2023-04-01 23:29:25,156 DEBUG  , Thread-6, test_case.py:51, [trial: 1, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:29:25,157 DEBUG  , Thread-6, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:29:25,550 INFO   , Thread-6, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:29:26,831 INFO   , Thread-12, runner.py:360, [trial: 1, gen: 0] System took 00:02:05 to converge
2023-04-01 23:29:26,833 DEBUG  , Thread-12, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:29:26,833 DEBUG  , Thread-12, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:29:26,982 DEBUG  , Thread-12, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:27:24Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:27:21Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:27:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:27:35Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1207', 'uid': 'dbf76807-63b6-429f-a0a4-f88290d4f4d5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:35Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:25Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:23Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:27:30Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:29:27,010 DEBUG  , Thread-12, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-5944q
2023-04-01 23:29:27,315 WARNING, Thread-12, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:29:27,316 INFO   , Thread-12, input.py :723, [trial: 1, gen: 1] Progress [8] cases left
2023-04-01 23:29:27,316 DEBUG  , Thread-12, test_case.py:51, [trial: 1, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:29:27,316 INFO   , Thread-12, acto.py  :263, [trial: 1, gen: 1] Precondition of ['spec', 'ingress', 'ui', 'tls', 0, 'hosts', 0] satisfies
2023-04-01 23:29:27,316 INFO   , Thread-12, acto.py  :323, [trial: 1, gen: 1] Running bundled testcases
2023-04-01 23:29:27,316 DEBUG  , Thread-12, test_case.py:51, [trial: 1, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:29:27,317 INFO   , Thread-12, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": [{"hosts": [""]}]}}}]
2023-04-01 23:29:27,317 DEBUG  , Thread-12, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:29:28,014 INFO   , Thread-12, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:29:54,675 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:29:55,028 INFO   , Thread-7, runner.py:360, [trial: 1, gen: 1] System took 00:01:00 to converge
2023-04-01 23:29:55,029 DEBUG  , Thread-7, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:29:55,030 DEBUG  , Thread-7, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:29:55,170 DEBUG  , Thread-7, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:41Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:26:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:27:53Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:ui': {'f:annotations': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:28:54Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1261', 'uid': '2252b008-f015-4569-89b0-7c8b4e909408'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:26:56Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:28:23Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-01 23:29:55,197 DEBUG  , Thread-7, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-pqp5r
2023-04-01 23:29:55,904 DEBUG  , Thread-7, acto.py  :383, [trial: 1, gen: 1] Only one patch, no need to isolate
2023-04-01 23:29:55,905 WARNING, Thread-7, schema.py:573, [trial: 1, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:29:55,905 INFO   , Thread-7, input.py :723, [trial: 1, gen: 3] Progress [14] cases left
2023-04-01 23:29:55,905 DEBUG  , Thread-7, test_case.py:51, [trial: 1, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-01 23:29:55,905 INFO   , Thread-7, acto.py  :267, [trial: 1, gen: 3] Precondition of ["spec", "ingress", "ui", "host"] fails, try setup first
2023-04-01 23:29:55,906 INFO   , Thread-7, acto.py  :107, [trial: 1, gen: 3] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY"}}}]
2023-04-01 23:29:55,906 DEBUG  , Thread-7, test_case.py:51, [trial: 1, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-01 23:29:55,906 DEBUG  , Thread-7, acto.py  :458, [trial: 1, gen: 3] Run and check
2023-04-01 23:29:56,240 INFO   , Thread-7, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:29:57,871 INFO   , Thread-2, runner.py:323, [trial: 0, gen: 8] Statefulset test-cluster is not ready yet
2023-04-01 23:30:07,763 INFO   , Thread-10, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:30:11,502 INFO   , Thread-3, runner.py:360, [trial: 1, gen: 0] System took 00:01:01 to converge
2023-04-01 23:30:11,503 DEBUG  , Thread-3, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:30:11,503 DEBUG  , Thread-3, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:30:11,695 DEBUG  , Thread-3, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:29:10Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:29:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:29:12Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1021', 'uid': '3ef1b5e5-5ca4-455d-ab2e-d4e58157b9c6'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:29:10Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:10Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:29:12Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:30:11,713 DEBUG  , Thread-3, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-rmsf9
2023-04-01 23:30:11,828 WARNING, Thread-3, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:30:11,829 INFO   , Thread-3, input.py :723, [trial: 1, gen: 1] Progress [19] cases left
2023-04-01 23:30:11,829 DEBUG  , Thread-3, test_case.py:51, [trial: 1, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:30:11,829 INFO   , Thread-3, acto.py  :267, [trial: 1, gen: 1] Precondition of ["spec", "affinity", "podAntiAffinity"] fails, try setup first
2023-04-01 23:30:11,830 INFO   , Thread-3, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/affinity", "value": {"nodeAffinity": {"requiredDuringSchedulingIgnoredDuringExecution": {"nodeSelectorTerms": [{"matchExpressions": [{"key": "kubernetes.io/hostname", "operator": "In", "values": ["kind-worker", "kind-worker2", "kind-worker3kind-control-plane"]}]}]}}, "podAntiAffinity": {"requiredDuringSchedulingIgnoredDuringExecution": [{"labelSelector": {"matchExpressions": [{"key": "app.kubernetes.io/name", "operator": "In", "values": ["test-cluster"]}]}, "topologyKey": "kubernetes.io/hostname"}]}}}]
2023-04-01 23:30:11,830 DEBUG  , Thread-3, test_case.py:51, [trial: 1, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:30:11,830 DEBUG  , Thread-3, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:30:12,149 INFO   , Thread-3, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:30:18,754 INFO   , Thread-13, base.py  :41, Created cluster
2023-04-01 23:30:18,768 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:30:19,700 ERROR  , Thread-2, runner.py:363, [trial: 0, gen: 8] System failed to converge within 600 seconds
2023-04-01 23:30:19,704 DEBUG  , Thread-2, runner.py:98, [trial: 0, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:30:19,704 DEBUG  , Thread-2, runner.py:99, [trial: 0, gen: 8] STDERR: 
2023-04-01 23:30:19,859 DEBUG  , Thread-2, runner.py:177, [trial: 0, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:43Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem","volumeName":""}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"topologySpreadConstraints":[{"labelSelector":{"matchExpressions":[{"key":"ACTOKEY","operator":"ACTOKEY","values":[]},{"key":"ACTOKEY","operator":"ACTOKEY","values":["ACTOKEY","ACTOKEY","ACTOKEY","ACTOKEY"]},{"key":"ACTOKEY","operator":"ACTOKEY","values":null}],"matchLabels":{"ACTOKEY":"ACTOKEY"}},"maxSkew":0,"topologyKey":"ACTOKEY","whenUnsatisfiable":"ACTOKEY"},{"labelSelector":{"matchExpressions":null,"matchLabels":{"ACTOKEY":"ACTOKEY"}},"maxSkew":3,"topologyKey":"ACTOKEY","whenUnsatisfiable":"ACTOKEY"}]}}\n'}, 'creationTimestamp': '2023-04-02T03:11:39Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:17:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}, 'f:volumeName': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:topologySpreadConstraints': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:20:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1904', 'uid': 'e245d522-350e-44b5-82a4-9c9d41d021cb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'topologySpreadConstraints': [{'labelSelector': {'matchExpressions': [{'key': 'ACTOKEY', 'operator': 'ACTOKEY'}, {'key': 'ACTOKEY', 'operator': 'ACTOKEY', 'values': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY', 'ACTOKEY']}, {'key': 'ACTOKEY', 'operator': 'ACTOKEY'}], 'matchLabels': {'ACTOKEY': 'ACTOKEY'}}, 'maxSkew': 0, 'topologyKey': 'ACTOKEY', 'whenUnsatisfiable': 'ACTOKEY'}, {'labelSelector': {'matchLabels': {'ACTOKEY': 'ACTOKEY'}}, 'maxSkew': 3, 'topologyKey': 'ACTOKEY', 'whenUnsatisfiable': 'ACTOKEY'}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:42Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:17:45Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-01 23:30:19,885 DEBUG  , Thread-2, runner.py:202, [trial: 0, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-57pkm
2023-04-01 23:30:20,639 DEBUG  , Thread-2, checker.py:278, [trial: 0, gen: 8] Input delta [['spec', 'topologySpreadConstraints', 0, 'labelSelector', 'matchLabels', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 0, 'label_selector', 'match_labels', 'ACTOKEY']]
2023-04-01 23:30:20,640 DEBUG  , Thread-2, checker.py:278, [trial: 0, gen: 8] Input delta [['spec', 'topologySpreadConstraints', 0, 'topologyKey']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 0, 'topology_key']]
2023-04-01 23:30:20,640 DEBUG  , Thread-2, checker.py:278, [trial: 0, gen: 8] Input delta [['spec', 'topologySpreadConstraints', 0, 'whenUnsatisfiable']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 0, 'when_unsatisfiable']]
2023-04-01 23:30:20,641 DEBUG  , Thread-2, checker.py:278, [trial: 0, gen: 8] Input delta [['spec', 'topologySpreadConstraints', 1, 'labelSelector', 'matchLabels', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 1, 'label_selector', 'match_labels', 'ACTOKEY']]
2023-04-01 23:30:20,642 DEBUG  , Thread-2, checker.py:278, [trial: 0, gen: 8] Input delta [['spec', 'topologySpreadConstraints', 1, 'maxSkew']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 1, 'max_skew']]
2023-04-01 23:30:20,643 DEBUG  , Thread-2, checker.py:278, [trial: 0, gen: 8] Input delta [['spec', 'topologySpreadConstraints', 1, 'topologyKey']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 1, 'topology_key']]
2023-04-01 23:30:20,644 DEBUG  , Thread-2, checker.py:278, [trial: 0, gen: 8] Input delta [['spec', 'topologySpreadConstraints', 1, 'whenUnsatisfiable']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 1, 'when_unsatisfiable']]
2023-04-01 23:30:20,845 INFO   , Thread-2, common.py:569, [trial: 0, gen: 8] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-01 23:30:20,845 INFO   , Thread-2, checker.py:134, [trial: 0, gen: 8] Number of system state fields: [3055] Number of delta: [245]
2023-04-01 23:30:20,846 ERROR  , Thread-2, checker.py:561, [trial: 0, gen: 8] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:30:20,847 DEBUG  , Thread-2, acto.py  :489, [trial: 0, gen: 8] Running recovery
2023-04-01 23:30:22,925 INFO   , Thread-2, runner.py:291, [trial: 0, gen: 8] Waiting for system to converge... 
2023-04-01 23:30:23,566 INFO   , Thread-14, runner.py:360, [trial: 1, gen: 3] System took 00:01:00 to converge
2023-04-01 23:30:23,567 DEBUG  , Thread-14, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:30:23,567 DEBUG  , Thread-14, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:30:23,705 DEBUG  , Thread-14, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:53Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"httpPort":0,"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:47Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:28:04Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:29:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:httpPort': {}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:29:23Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1489', 'uid': 'de227de4-6863-4973-9ea2-5ad20fa43886'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 0, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:04Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:52Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:53Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:52Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:29:53Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[1].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[1].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T03:27:59Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:30:23,736 DEBUG  , Thread-14, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-8g8qs
2023-04-01 23:30:24,547 INFO   , Thread-14, common.py:560, [trial: 1, gen: 3] Recognized invalid input through regex: failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[1].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[1].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]
2023-04-01 23:30:24,547 INFO   , Thread-14, checker.py:134, [trial: 1, gen: 3] Number of system state fields: [3779] Number of delta: [3]
2023-04-01 23:30:24,548 INFO   , Thread-14, acto.py  :301, [trial: 1, gen: 3] Setup produced invalid input
2023-04-01 23:30:24,548 WARNING, Thread-14, schema.py:573, [trial: 1, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:30:24,549 DEBUG  , Thread-14, acto.py  :458, [trial: 1, gen: 3] Run and check
2023-04-01 23:30:24,850 INFO   , Thread-14, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:30:28,133 INFO   , Thread-12, runner.py:360, [trial: 1, gen: 1] System took 00:01:00 to converge
2023-04-01 23:30:28,133 DEBUG  , Thread-12, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:30:28,134 DEBUG  , Thread-12, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:30:28,402 DEBUG  , Thread-12, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:27:24Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","tls":[{"hosts":[""]}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:27:21Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:27:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:29:27Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:29:28Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1450', 'uid': 'dbf76807-63b6-429f-a0a4-f88290d4f4d5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY', 'tls': [{'hosts': ['']}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:35Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:25Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:23Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:27:30Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:29:56Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[0]: Invalid value: "": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-01 23:30:28,428 DEBUG  , Thread-12, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-5944q
2023-04-01 23:30:29,202 INFO   , Thread-12, common.py:560, [trial: 1, gen: 1] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].hosts[0]: Invalid value: "": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-01 23:30:29,203 INFO   , Thread-12, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [3466] Number of delta: [6]
2023-04-01 23:30:29,205 DEBUG  , Thread-12, acto.py  :374, [trial: 1, gen: 1] Invalid input, revert
2023-04-01 23:30:29,205 WARNING, Thread-12, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:30:29,206 DEBUG  , Thread-12, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:30:29,542 INFO   , Thread-12, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:30:35,383 INFO   , Thread-5, runner.py:360, [trial: 1, gen: 1] System took 00:01:30 to converge
2023-04-01 23:30:35,385 DEBUG  , Thread-5, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:30:35,385 DEBUG  , Thread-5, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:30:35,585 DEBUG  , Thread-5, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:29:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}},"supportsAutoResize":false},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:59Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}, 'f:supportsAutoResize': {}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:28:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:29:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1424', 'uid': '87af8823-d9cc-4105-b72b-65e7262b8377'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:29:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:29:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:29:13Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:30:35,627 DEBUG  , Thread-5, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-xgp2n
2023-04-01 23:30:36,732 DEBUG  , Thread-13, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:30:36,795 INFO   , Thread-5, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [4400] Number of delta: [1149]
2023-04-01 23:30:36,797 WARNING, Thread-5, schema.py:573, [trial: 1, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:30:36,798 INFO   , Thread-5, input.py :723, [trial: 1, gen: 3] Progress [13] cases left
2023-04-01 23:30:36,798 DEBUG  , Thread-5, test_case.py:51, [trial: 1, gen: 3] Precondition [toggle_on_precondition] Result [True]
2023-04-01 23:30:36,798 INFO   , Thread-5, acto.py  :263, [trial: 1, gen: 3] Precondition of ['spec', 'dataStore', 'supportsAutoResize'] satisfies
2023-04-01 23:30:36,798 INFO   , Thread-5, acto.py  :323, [trial: 1, gen: 3] Running bundled testcases
2023-04-01 23:30:36,798 DEBUG  , Thread-5, test_case.py:51, [trial: 1, gen: 3] Precondition [toggle_on_precondition] Result [True]
2023-04-01 23:30:36,798 INFO   , Thread-5, acto.py  :107, [trial: 1, gen: 3] JSON patch: [{"op": "replace", "path": "/spec/dataStore/supportsAutoResize", "value": true}]
2023-04-01 23:30:36,798 DEBUG  , Thread-5, acto.py  :458, [trial: 1, gen: 3] Run and check
2023-04-01 23:30:37,115 INFO   , Thread-5, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:30:45,634 INFO   , Thread-16, runner.py:360, [trial: 1, gen: 0] System took 00:01:34 to converge
2023-04-01 23:30:45,635 DEBUG  , Thread-16, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:30:45,635 DEBUG  , Thread-16, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:30:45,790 DEBUG  , Thread-16, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:29:14Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:29:11Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:29:11Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:29:25Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1197', 'uid': '72a9fa79-33c0-4e6c-87f2-2fefaec4e579'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:29:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:14Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:29:15Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:29:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:30:45,816 DEBUG  , Thread-16, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-gmbpz
2023-04-01 23:30:46,009 WARNING, Thread-16, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:30:46,010 INFO   , Thread-16, input.py :723, [trial: 1, gen: 1] Progress [9] cases left
2023-04-01 23:30:46,010 DEBUG  , Thread-16, test_case.py:51, [trial: 1, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:30:46,010 INFO   , Thread-16, acto.py  :263, [trial: 1, gen: 1] Precondition of ['spec', 'clientTLSSecret'] satisfies
2023-04-01 23:30:46,010 INFO   , Thread-16, acto.py  :323, [trial: 1, gen: 1] Running bundled testcases
2023-04-01 23:30:46,011 DEBUG  , Thread-16, test_case.py:51, [trial: 1, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:30:46,011 INFO   , Thread-16, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/clientTLSSecret", "value": ""}]
2023-04-01 23:30:46,011 DEBUG  , Thread-16, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:30:46,426 INFO   , Thread-16, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:30:46,908 INFO   , Thread-13, deploy.py:91, Operator ready
2023-04-01 23:30:46,909 INFO   , Thread-13, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:30:49,093 DEBUG  , Thread-13, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:30:54,764 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:30:56,357 INFO   , Thread-7, runner.py:360, [trial: 1, gen: 3] System took 00:01:00 to converge
2023-04-01 23:30:56,359 DEBUG  , Thread-7, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:30:56,359 DEBUG  , Thread-7, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:30:56,502 DEBUG  , Thread-7, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:41Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:29:56Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:annotations': {}, 'f:host': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:29:56Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1404', 'uid': '2252b008-f015-4569-89b0-7c8b4e909408'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:26:56Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:30:26Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-01 23:30:56,534 DEBUG  , Thread-7, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-pqp5r
2023-04-01 23:30:57,022 ERROR  , Thread-7, checker.py:301, [trial: 1, gen: 3] Found no matching fields for input delta
2023-04-01 23:30:57,022 ERROR  , Thread-7, checker.py:302, [trial: 1, gen: 3] Input delta [['spec', 'ingress', 'ui', 'host']]
2023-04-01 23:30:57,234 INFO   , Thread-7, common.py:560, [trial: 1, gen: 3] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:30:57,234 INFO   , Thread-7, checker.py:134, [trial: 1, gen: 3] Number of system state fields: [3461] Number of delta: [2]
2023-04-01 23:30:57,235 INFO   , Thread-7, acto.py  :301, [trial: 1, gen: 3] Setup produced invalid input
2023-04-01 23:30:57,236 WARNING, Thread-7, schema.py:573, [trial: 1, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:30:57,236 DEBUG  , Thread-7, acto.py  :458, [trial: 1, gen: 3] Run and check
2023-04-01 23:30:57,581 INFO   , Thread-7, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:30:59,187 INFO   , Thread-13, deploy.py:91, Operator ready
2023-04-01 23:30:59,188 INFO   , Thread-13, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:31:07,844 INFO   , Thread-10, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:31:12,396 INFO   , Thread-3, runner.py:360, [trial: 1, gen: 1] System took 00:01:00 to converge
2023-04-01 23:31:12,397 DEBUG  , Thread-3, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:31:12,397 DEBUG  , Thread-3, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:31:12,495 DEBUG  , Thread-3, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.io/hostname","operator":"In","values":["kind-worker","kind-worker2","kind-worker3kind-control-plane"]}]}]}},"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchExpressions":[{"key":"app.kubernetes.io/name","operator":"In","values":["test-cluster"]}]},"topologyKey":"kubernetes.io/hostname"}]}},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:29:10Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:29:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:affinity': {'.': {}, 'f:nodeAffinity': {'.': {}, 'f:requiredDuringSchedulingIgnoredDuringExecution': {'.': {}, 'f:nodeSelectorTerms': {}}}, 'f:podAntiAffinity': {'.': {}, 'f:requiredDuringSchedulingIgnoredDuringExecution': {}}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:30:12Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1112', 'uid': '3ef1b5e5-5ca4-455d-ab2e-d4e58157b9c6'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'affinity': {'nodeAffinity': {'requiredDuringSchedulingIgnoredDuringExecution': {'nodeSelectorTerms': [{'matchExpressions': [{'key': 'kubernetes.io/hostname', 'operator': 'In', 'values': ['kind-worker', 'kind-worker2', 'kind-worker3kind-control-plane']}]}]}}, 'podAntiAffinity': {'requiredDuringSchedulingIgnoredDuringExecution': [{'labelSelector': {'matchExpressions': [{'key': 'app.kubernetes.io/name', 'operator': 'In', 'values': ['test-cluster']}]}, 'topologyKey': 'kubernetes.io/hostname'}]}}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:29:10Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:10Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:29:12Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:31:12,513 DEBUG  , Thread-3, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-rmsf9
2023-04-01 23:31:13,011 DEBUG  , Thread-3, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'affinity', 'podAntiAffinity', 'requiredDuringSchedulingIgnoredDuringExecution', 0, 'topologyKey']] matched with [['test-cluster-vcheck-28006770--1-p427b', 'spec', 'affinity', 'pod_anti_affinity', 'required_during_scheduling_ignored_during_execution', 0, 'topology_key']]
2023-04-01 23:31:13,011 DEBUG  , Thread-3, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'affinity', 'podAntiAffinity', 'requiredDuringSchedulingIgnoredDuringExecution', 0, 'topologyKey']] matched with [['test-cluster-vcheck-28006770', 'spec', 'template', 'spec', 'affinity', 'pod_anti_affinity', 'required_during_scheduling_ignored_during_execution', 0, 'topology_key']]
2023-04-01 23:31:13,112 INFO   , Thread-3, common.py:569, [trial: 1, gen: 1] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-01 23:31:13,112 INFO   , Thread-3, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [1813] Number of delta: [153]
2023-04-01 23:31:13,112 ERROR  , Thread-3, checker.py:561, [trial: 1, gen: 1] Found pod: test-cluster-vcheck-28006770--1-p427b with unhealthy status
2023-04-01 23:31:13,112 DEBUG  , Thread-3, acto.py  :489, [trial: 1, gen: 1] Running recovery
2023-04-01 23:31:13,457 INFO   , Thread-3, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:31:20,610 INFO   , Thread-15, runner.py:360, [trial: 2, gen: 1] System took 00:02:32 to converge
2023-04-01 23:31:20,612 DEBUG  , Thread-15, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:31:20,612 DEBUG  , Thread-15, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:31:20,778 DEBUG  , Thread-15, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:28:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:27:45Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:28:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:28:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:28:51Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1185', 'uid': '4e802b24-8da5-4c99-a76a-f371c0e82b6e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:29:01Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:28:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:28:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:47Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:28:56Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:31:20,818 DEBUG  , Thread-15, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-2zn9b
2023-04-01 23:31:21,319 ERROR  , Thread-15, checker.py:301, [trial: 2, gen: 1] Found no matching fields for input delta
2023-04-01 23:31:21,319 ERROR  , Thread-15, checker.py:302, [trial: 2, gen: 1] Input delta [['spec', 'resources', 'requests', 'cpu']]
2023-04-01 23:31:21,433 INFO   , Thread-15, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [3763] Number of delta: [1098]
2023-04-01 23:31:21,435 INFO   , Thread-15, acto.py  :332, [trial: 2, gen: 1] Error result, running recovery
2023-04-01 23:31:21,435 DEBUG  , Thread-15, acto.py  :489, [trial: 2, gen: 1] Running recovery
2023-04-01 23:31:21,802 INFO   , Thread-15, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:31:24,901 INFO   , Thread-2, runner.py:360, [trial: 0, gen: 8] System took 00:01:01 to converge
2023-04-01 23:31:24,903 DEBUG  , Thread-2, runner.py:98, [trial: 0, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:31:24,903 DEBUG  , Thread-2, runner.py:99, [trial: 0, gen: 8] STDERR: 
2023-04-01 23:31:24,990 INFO   , Thread-14, runner.py:360, [trial: 1, gen: 3] System took 00:01:00 to converge
2023-04-01 23:31:24,991 DEBUG  , Thread-14, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:31:24,991 DEBUG  , Thread-14, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:31:25,136 DEBUG  , Thread-2, runner.py:177, [trial: 0, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:43Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem","volumeName":""}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:39Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:17:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}, 'f:volumeName': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:30:22Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2849', 'uid': 'e245d522-350e-44b5-82a4-9c9d41d021cb'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:54Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:42Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:17:45Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-01 23:31:25,188 DEBUG  , Thread-14, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:53Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:47Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:28:04Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:29:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:30:24Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1538', 'uid': 'de227de4-6863-4973-9ea2-5ad20fa43886'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:04Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:52Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:53Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:52Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:29:53Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[1].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[1].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T03:27:59Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:31:25,201 DEBUG  , Thread-2, runner.py:202, [trial: 0, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-57pkm
2023-04-01 23:31:25,235 DEBUG  , Thread-14, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-8g8qs
2023-04-01 23:31:25,955 INFO   , Thread-2, acto.py  :187, Trial 0 finished, completed in 00:22:32
2023-04-01 23:31:25,956 INFO   , Thread-2, acto.py  :188, ---------------------------------------

2023-04-01 23:31:25,997 INFO   , Thread-11, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:31:26,244 DEBUG  , Thread-2, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-57pkm
2023-04-01 23:31:26,828 INFO   , Thread-14, acto.py  :321, [trial: 1, gen: 3] All setups failed
2023-04-01 23:31:26,828 WARNING, Thread-14, schema.py:573, [trial: 1, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:31:26,828 INFO   , Thread-14, input.py :723, [trial: 1, gen: 5] Progress [3] cases left
2023-04-01 23:31:26,828 DEBUG  , Thread-14, test_case.py:51, [trial: 1, gen: 5] Precondition [decrease_precondition] Result [False]
2023-04-01 23:31:26,828 INFO   , Thread-14, acto.py  :267, [trial: 1, gen: 5] Precondition of ["spec", "httpPort"] fails, try setup first
2023-04-01 23:31:26,829 INFO   , Thread-14, acto.py  :107, [trial: 1, gen: 5] JSON patch: [{"op": "add", "path": "/spec/httpPort", "value": 5}]
2023-04-01 23:31:26,829 DEBUG  , Thread-14, test_case.py:51, [trial: 1, gen: 5] Precondition [decrease_precondition] Result [True]
2023-04-01 23:31:26,829 DEBUG  , Thread-14, acto.py  :458, [trial: 1, gen: 5] Run and check
2023-04-01 23:31:27,135 INFO   , Thread-14, runner.py:291, [trial: 1, gen: 5] Waiting for system to converge... 
2023-04-01 23:31:29,661 INFO   , Thread-12, runner.py:360, [trial: 1, gen: 1] System took 00:01:00 to converge
2023-04-01 23:31:29,662 DEBUG  , Thread-12, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:31:29,662 DEBUG  , Thread-12, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:31:29,804 DEBUG  , Thread-12, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:27:24Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:27:21Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:27:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:29:28Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:30:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1504', 'uid': 'dbf76807-63b6-429f-a0a4-f88290d4f4d5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:35Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:25Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:23Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:27:30Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:29:56Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[0]: Invalid value: "": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-01 23:31:29,833 DEBUG  , Thread-12, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-5944q
2023-04-01 23:31:30,650 DEBUG  , Thread-12, acto.py  :383, [trial: 1, gen: 1] Only one patch, no need to isolate
2023-04-01 23:31:30,651 WARNING, Thread-12, schema.py:573, [trial: 1, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:31:30,651 INFO   , Thread-12, input.py :723, [trial: 1, gen: 3] Progress [7] cases left
2023-04-01 23:31:30,652 DEBUG  , Thread-12, test_case.py:51, [trial: 1, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-01 23:31:30,652 INFO   , Thread-12, acto.py  :267, [trial: 1, gen: 3] Precondition of ["spec", "ingress", "sql", "tls"] fails, try setup first
2023-04-01 23:31:30,652 INFO   , Thread-12, acto.py  :107, [trial: 1, gen: 3] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": []}}}]
2023-04-01 23:31:30,652 DEBUG  , Thread-12, test_case.py:51, [trial: 1, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-01 23:31:30,652 ERROR  , Thread-12, acto.py  :277, [trial: 1, gen: 3] Setup does not work correctly
2023-04-01 23:31:30,652 INFO   , Thread-12, acto.py  :321, [trial: 1, gen: 3] All setups failed
2023-04-01 23:31:30,652 WARNING, Thread-12, schema.py:573, [trial: 1, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:31:30,653 INFO   , Thread-12, input.py :723, [trial: 1, gen: 3] Progress [6] cases left
2023-04-01 23:31:30,653 DEBUG  , Thread-12, test_case.py:51, [trial: 1, gen: 3] Precondition [push_precondition] Result [False]
2023-04-01 23:31:30,653 INFO   , Thread-12, acto.py  :267, [trial: 1, gen: 3] Precondition of ["spec", "ingress", "sql", "tls"] fails, try setup first
2023-04-01 23:31:30,654 INFO   , Thread-12, acto.py  :107, [trial: 1, gen: 3] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": [{"hosts": ["ACTOKEY"], "secretName": "ACTOKEY"}, {"hosts": ["ACTOKEY", "ACTOKEY"], "secretName": "ACTOKEY"}]}}}]
2023-04-01 23:31:30,654 DEBUG  , Thread-12, test_case.py:51, [trial: 1, gen: 3] Precondition [push_precondition] Result [True]
2023-04-01 23:31:30,654 DEBUG  , Thread-12, acto.py  :458, [trial: 1, gen: 3] Run and check
2023-04-01 23:31:31,004 INFO   , Thread-12, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:31:37,523 INFO   , Thread-5, runner.py:360, [trial: 1, gen: 3] System took 00:01:00 to converge
2023-04-01 23:31:37,524 DEBUG  , Thread-5, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:31:37,524 DEBUG  , Thread-5, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:31:37,674 DEBUG  , Thread-5, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:29:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}},"supportsAutoResize":true},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:59Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}, 'f:supportsAutoResize': {}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:28:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:29:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1578', 'uid': '87af8823-d9cc-4105-b72b-65e7262b8377'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': True}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:29:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:29:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:29:13Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:31:37,711 DEBUG  , Thread-5, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-xgp2n
2023-04-01 23:31:38,735 INFO   , Thread-5, checker.py:134, [trial: 1, gen: 3] Number of system state fields: [4405] Number of delta: [9]
2023-04-01 23:31:38,736 WARNING, Thread-5, schema.py:573, [trial: 1, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-01 23:31:38,737 INFO   , Thread-5, input.py :723, [trial: 1, gen: 4] Progress [12] cases left
2023-04-01 23:31:38,737 DEBUG  , Thread-5, test_case.py:51, [trial: 1, gen: 4] Precondition [delete_precondition] Result [False]
2023-04-01 23:31:38,737 INFO   , Thread-5, acto.py  :267, [trial: 1, gen: 4] Precondition of ["spec", "ingress", "sql", "tls", 0, "hosts"] fails, try setup first
2023-04-01 23:31:38,737 INFO   , Thread-5, acto.py  :107, [trial: 1, gen: 4] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": [{"hosts": ["ACTOKEY"]}]}}}]
2023-04-01 23:31:38,738 DEBUG  , Thread-5, test_case.py:51, [trial: 1, gen: 4] Precondition [delete_precondition] Result [True]
2023-04-01 23:31:38,738 DEBUG  , Thread-5, acto.py  :458, [trial: 1, gen: 4] Run and check
2023-04-01 23:31:39,095 INFO   , Thread-5, runner.py:291, [trial: 1, gen: 4] Waiting for system to converge... 
2023-04-01 23:31:39,314 WARNING, Thread-13, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:31:39,315 DEBUG  , Thread-13, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:31:41,912 INFO   , Thread-13, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:31:42,473 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-1
2023-04-01 23:31:45,182 INFO   , Thread-8, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:31:46,545 INFO   , Thread-16, runner.py:360, [trial: 1, gen: 1] System took 00:01:00 to converge
2023-04-01 23:31:46,546 DEBUG  , Thread-16, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:31:46,546 DEBUG  , Thread-16, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:31:46,704 DEBUG  , Thread-16, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:29:14Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"clientTLSSecret":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:29:11Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:29:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:clientTLSSecret': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:30:46Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1347', 'uid': '72a9fa79-33c0-4e6c-87f2-2fefaec4e579'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:29:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:14Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:29:15Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:29:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:31:46,732 DEBUG  , Thread-16, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-gmbpz
2023-04-01 23:31:47,578 INFO   , Thread-16, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [3456] Number of delta: [0]
2023-04-01 23:31:47,581 WARNING, Thread-16, schema.py:573, [trial: 1, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-01 23:31:47,582 INFO   , Thread-16, input.py :723, [trial: 1, gen: 2] Progress [8] cases left
2023-04-01 23:31:47,582 DEBUG  , Thread-16, test_case.py:51, [trial: 1, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-01 23:31:47,582 INFO   , Thread-16, acto.py  :267, [trial: 1, gen: 2] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "configMapKeyRef", "key"] fails, try setup first
2023-04-01 23:31:47,583 INFO   , Thread-16, acto.py  :107, [trial: 1, gen: 2] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY"}}}]}]
2023-04-01 23:31:47,583 DEBUG  , Thread-16, test_case.py:51, [trial: 1, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-01 23:31:47,583 DEBUG  , Thread-16, acto.py  :458, [trial: 1, gen: 2] Run and check
2023-04-01 23:31:47,951 INFO   , Thread-16, runner.py:291, [trial: 1, gen: 2] Waiting for system to converge... 
2023-04-01 23:31:54,859 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:31:57,708 INFO   , Thread-7, runner.py:360, [trial: 1, gen: 3] System took 00:01:00 to converge
2023-04-01 23:31:57,709 DEBUG  , Thread-7, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:31:57,709 DEBUG  , Thread-7, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:31:57,851 DEBUG  , Thread-7, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:41Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:29:56Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:ui': {'f:annotations': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:30:57Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1456', 'uid': '2252b008-f015-4569-89b0-7c8b4e909408'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:26:56Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:30:26Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-01 23:31:57,902 DEBUG  , Thread-7, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-pqp5r
2023-04-01 23:31:58,643 INFO   , Thread-7, acto.py  :321, [trial: 1, gen: 3] All setups failed
2023-04-01 23:31:58,643 WARNING, Thread-7, schema.py:573, [trial: 1, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:31:58,644 INFO   , Thread-7, input.py :723, [trial: 1, gen: 5] Progress [13] cases left
2023-04-01 23:31:58,644 DEBUG  , Thread-7, test_case.py:51, [trial: 1, gen: 5] Precondition [change_precondition] Result [False]
2023-04-01 23:31:58,644 INFO   , Thread-7, acto.py  :267, [trial: 1, gen: 5] Precondition of ["spec", "ingress", "ui", "host"] fails, try setup first
2023-04-01 23:31:58,645 INFO   , Thread-7, acto.py  :107, [trial: 1, gen: 5] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY"}}}]
2023-04-01 23:31:58,645 DEBUG  , Thread-7, test_case.py:51, [trial: 1, gen: 5] Precondition [change_precondition] Result [True]
2023-04-01 23:31:58,645 DEBUG  , Thread-7, acto.py  :458, [trial: 1, gen: 5] Run and check
2023-04-01 23:31:58,972 INFO   , Thread-7, runner.py:291, [trial: 1, gen: 5] Waiting for system to converge... 
2023-04-01 23:32:01,051 INFO   , Thread-1, runner.py:360, [trial: 1, gen: 3] System took 00:02:36 to converge
2023-04-01 23:32:01,053 DEBUG  , Thread-1, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:32:01,053 DEBUG  , Thread-1, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:32:01,205 DEBUG  , Thread-1, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:27:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY"}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:48Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:27:56Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:27:56Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:29:24Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1438', 'uid': '31dba658-5d26-4d81-8bdd-9155a5584890'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY'}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:55Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:56Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:28:01Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:32:01,326 DEBUG  , Thread-1, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-6f79h
2023-04-01 23:32:02,200 INFO   , Thread-1, checker.py:134, [trial: 1, gen: 3] Number of system state fields: [4109] Number of delta: [79]
2023-04-01 23:32:02,201 INFO   , Thread-1, acto.py  :323, [trial: 1, gen: 3] Running bundled testcases
2023-04-01 23:32:02,201 DEBUG  , Thread-1, test_case.py:51, [trial: 1, gen: 3] Precondition [change_precondition] Result [True]
2023-04-01 23:32:02,201 ERROR  , Thread-1, schema.py:183, [trial: 1, gen: 3] Failed to change, generated the same string with previous one
2023-04-01 23:32:02,201 INFO   , Thread-1, acto.py  :107, [trial: 1, gen: 3] JSON patch: []
2023-04-01 23:32:02,202 DEBUG  , Thread-1, acto.py  :458, [trial: 1, gen: 3] Run and check
2023-04-01 23:32:02,596 INFO   , Thread-1, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:32:07,933 INFO   , Thread-10, runner.py:323, [trial: 0, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:32:27,415 ERROR  , Thread-4, runner.py:363, [trial: 0, gen: 7] System failed to converge within 600 seconds
2023-04-01 23:32:27,416 DEBUG  , Thread-4, runner.py:98, [trial: 0, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:32:27,416 DEBUG  , Thread-4, runner.py:99, [trial: 0, gen: 7] STDERR: 
2023-04-01 23:32:27,641 DEBUG  , Thread-4, runner.py:177, [trial: 0, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:32Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","value":""}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"tolerations":[{}]}}\n'}, 'creationTimestamp': '2023-04-02T03:11:28Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:19:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2489', 'uid': 'fef30211-c4a2-4459-9db0-5c15f290fd0a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY'}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'tolerations': [{}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:31Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:32Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:37Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:32:27,668 DEBUG  , Thread-4, runner.py:202, [trial: 0, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-5kvd9
2023-04-01 23:32:28,400 INFO   , Thread-4, checker.py:134, [trial: 0, gen: 7] Number of system state fields: [3032] Number of delta: [193]
2023-04-01 23:32:28,400 ERROR  , Thread-4, checker.py:561, [trial: 0, gen: 7] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:32:28,401 INFO   , Thread-4, acto.py  :332, [trial: 0, gen: 7] Error result, running recovery
2023-04-01 23:32:28,401 DEBUG  , Thread-4, acto.py  :489, [trial: 0, gen: 7] Running recovery
2023-04-01 23:32:30,313 INFO   , Thread-4, runner.py:291, [trial: 0, gen: 7] Waiting for system to converge... 
2023-04-01 23:32:31,140 INFO   , Thread-12, runner.py:360, [trial: 1, gen: 3] System took 00:01:00 to converge
2023-04-01 23:32:31,141 DEBUG  , Thread-12, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:32:31,141 DEBUG  , Thread-12, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:32:31,293 DEBUG  , Thread-12, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:31:31Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[{"hosts":["ACTOKEY"],"secretName":"ACTOKEY"},{"hosts":["ACTOKEY","ACTOKEY"],"secretName":"ACTOKEY"}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:27:21Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:31:30Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:31Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}, 'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:31:31Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1650', 'uid': 'dbf76807-63b6-429f-a0a4-f88290d4f4d5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'tls': [{'hosts': ['ACTOKEY'], 'secretName': 'ACTOKEY'}, {'hosts': ['ACTOKEY', 'ACTOKEY'], 'secretName': 'ACTOKEY'}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:35Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:25Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:23Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:27:30Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:32:01Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:32:31,323 DEBUG  , Thread-12, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-5944q
2023-04-01 23:32:32,176 INFO   , Thread-12, common.py:560, [trial: 1, gen: 3] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:32:32,176 INFO   , Thread-12, checker.py:134, [trial: 1, gen: 3] Number of system state fields: [3471] Number of delta: [11]
2023-04-01 23:32:32,177 INFO   , Thread-12, acto.py  :301, [trial: 1, gen: 3] Setup produced invalid input
2023-04-01 23:32:32,177 WARNING, Thread-12, schema.py:573, [trial: 1, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:32:32,178 DEBUG  , Thread-12, acto.py  :458, [trial: 1, gen: 3] Run and check
2023-04-01 23:32:32,823 INFO   , Thread-12, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:32:36,056 INFO   , Thread-2, base.py  :41, Created cluster
2023-04-01 23:32:36,073 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:32:36,396 INFO   , Thread-9, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:32:39,213 INFO   , Thread-5, runner.py:360, [trial: 1, gen: 4] System took 00:01:00 to converge
2023-04-01 23:32:39,215 DEBUG  , Thread-5, runner.py:98, [trial: 1, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:32:39,215 DEBUG  , Thread-5, runner.py:99, [trial: 1, gen: 4] STDERR: 
2023-04-01 23:32:39,378 DEBUG  , Thread-5, runner.py:177, [trial: 1, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:31:39Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}},"supportsAutoResize":true},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[{"hosts":["ACTOKEY"]}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:59Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}, 'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:31:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}, 'f:supportsAutoResize': {}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:31:39Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1726', 'uid': '87af8823-d9cc-4105-b72b-65e7262b8377'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': True}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'tls': [{'hosts': ['ACTOKEY']}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:29:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:29:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:29:13Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:32:09Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:32:39,409 DEBUG  , Thread-5, runner.py:202, [trial: 1, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-xgp2n
2023-04-01 23:32:40,466 INFO   , Thread-5, common.py:560, [trial: 1, gen: 4] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:32:40,466 INFO   , Thread-5, checker.py:134, [trial: 1, gen: 4] Number of system state fields: [4412] Number of delta: [9]
2023-04-01 23:32:40,468 INFO   , Thread-5, acto.py  :301, [trial: 1, gen: 4] Setup produced invalid input
2023-04-01 23:32:40,468 WARNING, Thread-5, schema.py:573, [trial: 1, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-01 23:32:40,468 DEBUG  , Thread-5, acto.py  :458, [trial: 1, gen: 4] Run and check
2023-04-01 23:32:40,779 INFO   , Thread-5, runner.py:291, [trial: 1, gen: 4] Waiting for system to converge... 
2023-04-01 23:32:42,048 INFO   , Thread-13, runner.py:360, [trial: 1, gen: 0] System took 00:01:00 to converge
2023-04-01 23:32:42,050 DEBUG  , Thread-13, runner.py:98, [trial: 1, gen: 0] STDOUT: 
2023-04-01 23:32:42,050 DEBUG  , Thread-13, runner.py:99, [trial: 1, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-12-0001/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.73.162:443: connect: connection refused

2023-04-01 23:32:42,137 DEBUG  , Thread-13, runner.py:177, [trial: 1, gen: 0] {}
2023-04-01 23:32:42,137 ERROR  , Thread-13, runner.py:107, [trial: 1, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:32:42,138 INFO   , Thread-13, checker.py:103, [trial: 1, gen: 0] Connection refused, reject mutation
2023-04-01 23:32:42,138 INFO   , Thread-13, acto.py  :472, [trial: 1, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-01 23:32:47,420 INFO   , Thread-11, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:32:50,733 ERROR  , Thread-10, runner.py:363, [trial: 0, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:32:50,734 DEBUG  , Thread-10, runner.py:98, [trial: 0, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:32:50,734 DEBUG  , Thread-10, runner.py:99, [trial: 0, gen: 1] STDERR: 
2023-04-01 23:32:50,879 DEBUG  , Thread-10, runner.py:177, [trial: 0, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:12:50Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:11:45Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:22:50Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:22:51Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3447', 'uid': 'ff1bf25e-2052-4904-b681-09f01bb5fc14'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:45Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:12:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:12:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:47Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:32:49Z', 'message': 'pod has not completely started', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:32:50,915 DEBUG  , Thread-10, runner.py:202, [trial: 0, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-vlxk6
2023-04-01 23:32:51,353 DEBUG  , Thread-10, checker.py:728, [trial: 0, gen: 1] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [root['pod']['test-cluster-0'], root['pod']['test-cluster-1'], root['pod']['test-cluster-2'], root['stateful_set']['test-cluster'], root['service']['test-cluster'], root['service']['test-cluster-public'], root['pvc']['datadir-test-cluster-0'], root['pvc']['datadir-test-cluster-1'], root['pvc']['datadir-test-cluster-2'], root['pod_disruption_budget']['test-cluster'], root['secret']['test-cluster-ca'], root['secret']['test-cluster-node'], root['secret']['test-cluster-root']]}
2023-04-01 23:32:51,358 INFO   , Thread-10, acto.py  :187, Trial 0 finished, completed in 00:23:58
2023-04-01 23:32:51,358 INFO   , Thread-10, acto.py  :188, ---------------------------------------

2023-04-01 23:32:51,379 DEBUG  , Thread-10, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-vlxk6
2023-04-01 23:32:53,558 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:32:59,094 INFO   , Thread-7, runner.py:360, [trial: 1, gen: 5] System took 00:01:00 to converge
2023-04-01 23:32:59,094 DEBUG  , Thread-7, runner.py:98, [trial: 1, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:32:59,095 DEBUG  , Thread-7, runner.py:99, [trial: 1, gen: 5] STDERR: 
2023-04-01 23:32:59,230 DEBUG  , Thread-7, runner.py:177, [trial: 1, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:41Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:annotations': {}, 'f:host': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:31:58Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:31:59Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1597', 'uid': '2252b008-f015-4569-89b0-7c8b4e909408'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:26:56Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:32:27Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-01 23:32:59,256 DEBUG  , Thread-7, runner.py:202, [trial: 1, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-pqp5r
2023-04-01 23:32:59,749 ERROR  , Thread-7, checker.py:301, [trial: 1, gen: 5] Found no matching fields for input delta
2023-04-01 23:32:59,749 ERROR  , Thread-7, checker.py:302, [trial: 1, gen: 5] Input delta [['spec', 'ingress', 'ui', 'host']]
2023-04-01 23:32:59,959 INFO   , Thread-7, common.py:560, [trial: 1, gen: 5] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:32:59,959 INFO   , Thread-7, checker.py:134, [trial: 1, gen: 5] Number of system state fields: [3461] Number of delta: [2]
2023-04-01 23:32:59,960 INFO   , Thread-7, acto.py  :301, [trial: 1, gen: 5] Setup produced invalid input
2023-04-01 23:32:59,960 WARNING, Thread-7, schema.py:573, [trial: 1, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:32:59,961 DEBUG  , Thread-7, acto.py  :458, [trial: 1, gen: 5] Run and check
2023-04-01 23:33:00,301 INFO   , Thread-7, runner.py:291, [trial: 1, gen: 5] Waiting for system to converge... 
2023-04-01 23:33:02,583 INFO   , Thread-13, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:33:02,724 INFO   , Thread-1, runner.py:360, [trial: 1, gen: 3] System took 00:01:00 to converge
2023-04-01 23:33:02,726 DEBUG  , Thread-1, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:33:02,726 DEBUG  , Thread-1, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:33:02,882 DEBUG  , Thread-1, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:27:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY"}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:48Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:27:56Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:29:24Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1856', 'uid': '31dba658-5d26-4d81-8bdd-9155a5584890'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY'}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:55Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:56Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:28:01Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:33:02,916 DEBUG  , Thread-1, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-6f79h
2023-04-01 23:33:03,876 WARNING, Thread-1, schema.py:573, [trial: 1, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:33:03,876 INFO   , Thread-1, input.py :723, [trial: 1, gen: 5] Progress [14] cases left
2023-04-01 23:33:03,876 DEBUG  , Thread-1, test_case.py:51, [trial: 1, gen: 5] Precondition [empty_precondition] Result [True]
2023-04-01 23:33:03,876 INFO   , Thread-1, acto.py  :263, [trial: 1, gen: 5] Precondition of ['spec', 'podEnvVariables', 0, 'name'] satisfies
2023-04-01 23:33:03,876 INFO   , Thread-1, acto.py  :323, [trial: 1, gen: 5] Running bundled testcases
2023-04-01 23:33:03,877 DEBUG  , Thread-1, test_case.py:51, [trial: 1, gen: 5] Precondition [empty_precondition] Result [True]
2023-04-01 23:33:03,877 INFO   , Thread-1, acto.py  :107, [trial: 1, gen: 5] JSON patch: [{"op": "replace", "path": "/spec/podEnvVariables/0/name", "value": ""}]
2023-04-01 23:33:03,877 DEBUG  , Thread-1, acto.py  :458, [trial: 1, gen: 5] Run and check
2023-04-01 23:33:03,946 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-01 23:33:03,946 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:33:04,236 INFO   , Thread-1, runner.py:291, [trial: 1, gen: 5] Waiting for system to converge... 
2023-04-01 23:33:06,209 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:33:07,101 INFO   , Thread-8, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:33:07,600 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-9
2023-04-01 23:33:16,304 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-01 23:33:16,304 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:33:18,515 INFO   , Thread-15, runner.py:360, [trial: 2, gen: 1] System took 00:01:56 to converge
2023-04-01 23:33:18,517 DEBUG  , Thread-15, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:33:18,517 DEBUG  , Thread-15, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:33:18,660 DEBUG  , Thread-15, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:28:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:27:45Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:28:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:28:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:31:21Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1424', 'uid': '4e802b24-8da5-4c99-a76a-f371c0e82b6e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:29:01Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:28:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:28:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:47Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:28:56Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:33:18,813 DEBUG  , Thread-15, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-2zn9b
2023-04-01 23:33:19,190 DEBUG  , Thread-15, checker.py:728, [trial: 2, gen: 1] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [root['pod']['test-cluster-0'], root['pod']['test-cluster-1'], root['pod']['test-cluster-2'], root['stateful_set']['test-cluster'], root['service']['test-cluster'], root['service']['test-cluster-public'], root['pvc']['datadir-test-cluster-0'], root['pvc']['datadir-test-cluster-1'], root['pvc']['datadir-test-cluster-2'], root['pod_disruption_budget']['test-cluster'], root['secret']['test-cluster-ca'], root['secret']['test-cluster-node'], root['secret']['test-cluster-root']]}
2023-04-01 23:33:19,193 INFO   , Thread-15, acto.py  :187, Trial 2 finished, completed in 00:07:51
2023-04-01 23:33:19,193 INFO   , Thread-15, acto.py  :188, ---------------------------------------

2023-04-01 23:33:19,219 DEBUG  , Thread-15, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-2zn9b
2023-04-01 23:33:30,495 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:33:32,941 INFO   , Thread-12, runner.py:360, [trial: 1, gen: 3] System took 00:01:00 to converge
2023-04-01 23:33:32,942 DEBUG  , Thread-12, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:33:32,942 DEBUG  , Thread-12, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:33:33,069 DEBUG  , Thread-12, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:31:31Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:27:21Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:31Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}, 'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:31Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:32:32Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1698', 'uid': 'dbf76807-63b6-429f-a0a4-f88290d4f4d5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:35Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:25Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:23Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:27:30Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:32:01Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:33:33,093 DEBUG  , Thread-12, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-5944q
2023-04-01 23:33:33,805 INFO   , Thread-12, acto.py  :321, [trial: 1, gen: 3] All setups failed
2023-04-01 23:33:33,805 WARNING, Thread-12, schema.py:573, [trial: 1, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:33:33,805 INFO   , Thread-12, input.py :723, [trial: 1, gen: 5] Progress [5] cases left
2023-04-01 23:33:33,806 DEBUG  , Thread-12, test_case.py:51, [trial: 1, gen: 5] Precondition [pop_precondition] Result [False]
2023-04-01 23:33:33,806 INFO   , Thread-12, acto.py  :267, [trial: 1, gen: 5] Precondition of ["spec", "ingress", "sql", "tls"] fails, try setup first
2023-04-01 23:33:33,806 INFO   , Thread-12, acto.py  :107, [trial: 1, gen: 5] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": [{"hosts": ["ACTOKEY", "ACTOKEY"], "secretName": "ACTOKEY"}, {"hosts": ["ACTOKEY"], "secretName": "ACTOKEY"}, {"hosts": ["ACTOKEY", "ACTOKEY", "ACTOKEY", "ACTOKEY", "ACTOKEY"], "secretName": "ACTOKEY"}, {"hosts": null, "secretName": "ACTOKEY"}]}}}]
2023-04-01 23:33:33,807 DEBUG  , Thread-12, test_case.py:51, [trial: 1, gen: 5] Precondition [pop_precondition] Result [True]
2023-04-01 23:33:33,807 DEBUG  , Thread-12, acto.py  :458, [trial: 1, gen: 5] Run and check
2023-04-01 23:33:34,166 INFO   , Thread-12, runner.py:291, [trial: 1, gen: 5] Waiting for system to converge... 
2023-04-01 23:33:34,205 INFO   , Thread-3, runner.py:360, [trial: 1, gen: 1] System took 00:02:20 to converge
2023-04-01 23:33:34,208 DEBUG  , Thread-3, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:33:34,208 DEBUG  , Thread-3, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:33:34,361 DEBUG  , Thread-3, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:32:26Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:29:10Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:31:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:32:26Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:32:26Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1506', 'uid': '3ef1b5e5-5ca4-455d-ab2e-d4e58157b9c6'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:32:37Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:32:25Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:32:26Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:29:12Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:32:31Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:33:34,388 DEBUG  , Thread-3, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-rmsf9
2023-04-01 23:33:34,757 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-14
2023-04-01 23:33:34,877 DEBUG  , Thread-3, checker.py:728, [trial: 1, gen: 1] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [root['pod']['test-cluster-0'], root['pod']['test-cluster-1'], root['pod']['test-cluster-2'], root['stateful_set']['test-cluster'], root['service']['test-cluster'], root['service']['test-cluster-public'], root['pvc']['datadir-test-cluster-0'], root['pvc']['datadir-test-cluster-1'], root['pvc']['datadir-test-cluster-2'], root['pod_disruption_budget']['test-cluster'], root['secret']['test-cluster-ca'], root['secret']['test-cluster-node'], root['secret']['test-cluster-root']]}
2023-04-01 23:33:34,882 INFO   , Thread-3, acto.py  :187, Trial 1 finished, completed in 00:08:13
2023-04-01 23:33:34,882 INFO   , Thread-3, acto.py  :188, ---------------------------------------

2023-04-01 23:33:34,906 DEBUG  , Thread-3, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-rmsf9
2023-04-01 23:33:36,484 INFO   , Thread-9, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:33:40,896 INFO   , Thread-5, runner.py:360, [trial: 1, gen: 4] System took 00:01:00 to converge
2023-04-01 23:33:40,897 DEBUG  , Thread-5, runner.py:98, [trial: 1, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:33:40,897 DEBUG  , Thread-5, runner.py:99, [trial: 1, gen: 4] STDERR: 
2023-04-01 23:33:41,070 DEBUG  , Thread-5, runner.py:177, [trial: 1, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:31:39Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}},"supportsAutoResize":true},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:59Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}, 'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}, 'f:supportsAutoResize': {}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:32:40Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1774', 'uid': '87af8823-d9cc-4105-b72b-65e7262b8377'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': True}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:29:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:29:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:29:13Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:32:09Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:33:41,100 DEBUG  , Thread-5, runner.py:202, [trial: 1, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-xgp2n
2023-04-01 23:33:42,054 INFO   , Thread-5, acto.py  :321, [trial: 1, gen: 4] All setups failed
2023-04-01 23:33:42,054 WARNING, Thread-5, schema.py:573, [trial: 1, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-01 23:33:42,055 INFO   , Thread-5, input.py :723, [trial: 1, gen: 6] Progress [11] cases left
2023-04-01 23:33:42,055 DEBUG  , Thread-5, test_case.py:51, [trial: 1, gen: 6] Precondition [push_precondition] Result [False]
2023-04-01 23:33:42,055 INFO   , Thread-5, acto.py  :267, [trial: 1, gen: 6] Precondition of ["spec", "ingress", "sql", "tls", 0, "hosts"] fails, try setup first
2023-04-01 23:33:42,055 INFO   , Thread-5, acto.py  :107, [trial: 1, gen: 6] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": [{"hosts": []}]}}}]
2023-04-01 23:33:42,055 DEBUG  , Thread-5, test_case.py:51, [trial: 1, gen: 6] Precondition [push_precondition] Result [True]
2023-04-01 23:33:42,056 DEBUG  , Thread-5, acto.py  :458, [trial: 1, gen: 6] Run and check
2023-04-01 23:33:42,389 INFO   , Thread-5, runner.py:291, [trial: 1, gen: 6] Waiting for system to converge... 
2023-04-01 23:33:47,503 INFO   , Thread-11, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:33:49,462 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-2
2023-04-01 23:33:53,189 INFO   , Thread-10, base.py  :41, Created cluster
2023-04-01 23:33:53,204 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:33:56,426 WARNING, Thread-2, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:33:56,427 DEBUG  , Thread-2, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:33:56,500 INFO   , Thread-14, runner.py:323, [trial: 1, gen: 5] Statefulset test-cluster is not ready yet
2023-04-01 23:33:59,153 INFO   , Thread-2, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:34:00,417 INFO   , Thread-7, runner.py:360, [trial: 1, gen: 5] System took 00:01:00 to converge
2023-04-01 23:34:00,418 DEBUG  , Thread-7, runner.py:98, [trial: 1, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:34:00,419 DEBUG  , Thread-7, runner.py:99, [trial: 1, gen: 5] STDERR: 
2023-04-01 23:34:00,553 DEBUG  , Thread-7, runner.py:177, [trial: 1, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:41Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:ui': {'f:annotations': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:33:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1645', 'uid': '2252b008-f015-4569-89b0-7c8b4e909408'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:26:56Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:32:27Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-01 23:34:00,579 DEBUG  , Thread-7, runner.py:202, [trial: 1, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-pqp5r
2023-04-01 23:34:01,350 INFO   , Thread-7, acto.py  :321, [trial: 1, gen: 5] All setups failed
2023-04-01 23:34:01,350 WARNING, Thread-7, schema.py:573, [trial: 1, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:34:01,351 INFO   , Thread-7, input.py :723, [trial: 1, gen: 7] Progress [12] cases left
2023-04-01 23:34:01,351 DEBUG  , Thread-7, test_case.py:51, [trial: 1, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-01 23:34:01,351 INFO   , Thread-7, acto.py  :263, [trial: 1, gen: 7] Precondition of ['spec', 'ingress', 'ui', 'host'] satisfies
2023-04-01 23:34:01,351 INFO   , Thread-7, acto.py  :323, [trial: 1, gen: 7] Running bundled testcases
2023-04-01 23:34:01,351 DEBUG  , Thread-7, test_case.py:51, [trial: 1, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-01 23:34:01,352 INFO   , Thread-7, acto.py  :107, [trial: 1, gen: 7] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": ""}}}]
2023-04-01 23:34:01,352 DEBUG  , Thread-7, acto.py  :458, [trial: 1, gen: 7] Run and check
2023-04-01 23:34:01,971 INFO   , Thread-7, runner.py:291, [trial: 1, gen: 7] Waiting for system to converge... 
2023-04-01 23:34:04,358 INFO   , Thread-1, runner.py:360, [trial: 1, gen: 5] System took 00:01:00 to converge
2023-04-01 23:34:04,359 DEBUG  , Thread-1, runner.py:98, [trial: 1, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:34:04,359 DEBUG  , Thread-1, runner.py:99, [trial: 1, gen: 5] STDERR: 
2023-04-01 23:34:04,511 DEBUG  , Thread-1, runner.py:177, [trial: 1, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:27:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":""}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:48Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:27:56Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:29:24Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1947', 'uid': '31dba658-5d26-4d81-8bdd-9155a5584890'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': ''}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:55Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:56Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:28:01Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:34:04,540 DEBUG  , Thread-1, runner.py:202, [trial: 1, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-6f79h
2023-04-01 23:34:05,533 INFO   , Thread-1, checker.py:134, [trial: 1, gen: 5] Number of system state fields: [3794] Number of delta: [159]
2023-04-01 23:34:05,535 WARNING, Thread-1, schema.py:573, [trial: 1, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-01 23:34:05,535 INFO   , Thread-1, input.py :723, [trial: 1, gen: 6] Progress [13] cases left
2023-04-01 23:34:05,535 DEBUG  , Thread-1, test_case.py:51, [trial: 1, gen: 6] Precondition [delete_precondition] Result [True]
2023-04-01 23:34:05,535 INFO   , Thread-1, acto.py  :263, [trial: 1, gen: 6] Precondition of ['spec', 'dataStore', 'pvc'] satisfies
2023-04-01 23:34:05,535 INFO   , Thread-1, acto.py  :323, [trial: 1, gen: 6] Running bundled testcases
2023-04-01 23:34:05,535 DEBUG  , Thread-1, test_case.py:51, [trial: 1, gen: 6] Precondition [delete_precondition] Result [True]
2023-04-01 23:34:05,536 INFO   , Thread-1, acto.py  :107, [trial: 1, gen: 6] JSON patch: [{"op": "remove", "path": "/spec/dataStore/pvc/spec"}]
2023-04-01 23:34:05,536 DEBUG  , Thread-1, acto.py  :458, [trial: 1, gen: 6] Run and check
2023-04-01 23:34:05,853 INFO   , Thread-1, runner.py:291, [trial: 1, gen: 6] Waiting for system to converge... 
2023-04-01 23:34:07,191 INFO   , Thread-8, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:34:09,923 DEBUG  , Thread-10, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:34:15,222 INFO   , Thread-13, runner.py:360, [trial: 1, gen: 0] System took 00:01:12 to converge
2023-04-01 23:34:15,225 DEBUG  , Thread-13, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:34:15,225 DEBUG  , Thread-13, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:34:15,365 DEBUG  , Thread-13, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:33:07Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:33:02Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:33:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:33:07Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:33:08Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1207', 'uid': '9b047ef5-4448-4979-9c4d-6e7f644fe5ca'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:33:18Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:33:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:33:07Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:33:06Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:33:13Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:34:15,401 DEBUG  , Thread-13, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-wkgt5
2023-04-01 23:34:15,742 WARNING, Thread-13, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:34:15,742 INFO   , Thread-13, input.py :723, [trial: 1, gen: 1] Progress [7] cases left
2023-04-01 23:34:15,742 DEBUG  , Thread-13, test_case.py:51, [trial: 1, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:34:15,742 INFO   , Thread-13, acto.py  :263, [trial: 1, gen: 1] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom'] satisfies
2023-04-01 23:34:15,742 INFO   , Thread-13, acto.py  :323, [trial: 1, gen: 1] Running bundled testcases
2023-04-01 23:34:15,743 DEBUG  , Thread-13, test_case.py:51, [trial: 1, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:34:15,743 INFO   , Thread-13, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {}}]}]
2023-04-01 23:34:15,743 DEBUG  , Thread-13, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:34:16,072 INFO   , Thread-13, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:34:20,009 INFO   , Thread-10, deploy.py:91, Operator ready
2023-04-01 23:34:20,009 INFO   , Thread-10, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:34:20,207 INFO   , Thread-16, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:34:22,010 DEBUG  , Thread-10, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:34:27,882 INFO   , Thread-15, base.py  :41, Created cluster
2023-04-01 23:34:27,896 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:34:30,575 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:34:32,095 INFO   , Thread-10, deploy.py:91, Operator ready
2023-04-01 23:34:32,096 INFO   , Thread-10, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:34:34,304 INFO   , Thread-12, runner.py:360, [trial: 1, gen: 5] System took 00:01:00 to converge
2023-04-01 23:34:34,304 DEBUG  , Thread-12, runner.py:98, [trial: 1, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:34:34,305 DEBUG  , Thread-12, runner.py:99, [trial: 1, gen: 5] STDERR: 
2023-04-01 23:34:34,443 DEBUG  , Thread-12, runner.py:177, [trial: 1, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:31:31Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[{"hosts":["ACTOKEY","ACTOKEY"],"secretName":"ACTOKEY"},{"hosts":["ACTOKEY"],"secretName":"ACTOKEY"},{"hosts":["ACTOKEY","ACTOKEY","ACTOKEY","ACTOKEY","ACTOKEY"],"secretName":"ACTOKEY"},{"hosts":null,"secretName":"ACTOKEY"}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:27:21Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:31Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:33:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:33:34Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1869', 'uid': 'dbf76807-63b6-429f-a0a4-f88290d4f4d5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'tls': [{'hosts': ['ACTOKEY', 'ACTOKEY'], 'secretName': 'ACTOKEY'}, {'hosts': ['ACTOKEY'], 'secretName': 'ACTOKEY'}, {'hosts': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY', 'ACTOKEY', 'ACTOKEY'], 'secretName': 'ACTOKEY'}, {'secretName': 'ACTOKEY'}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:35Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:25Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:23Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:27:30Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:34:23Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:34:34,475 DEBUG  , Thread-12, runner.py:202, [trial: 1, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-5944q
2023-04-01 23:34:35,113 ERROR  , Thread-12, checker.py:301, [trial: 1, gen: 5] Found no matching fields for input delta
2023-04-01 23:34:35,113 ERROR  , Thread-12, checker.py:302, [trial: 1, gen: 5] Input delta [['spec', 'ingress', 'sql', 'host']]
2023-04-01 23:34:35,343 INFO   , Thread-12, common.py:560, [trial: 1, gen: 5] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:34:35,343 INFO   , Thread-12, checker.py:134, [trial: 1, gen: 5] Number of system state fields: [3478] Number of delta: [14]
2023-04-01 23:34:35,344 INFO   , Thread-12, acto.py  :301, [trial: 1, gen: 5] Setup produced invalid input
2023-04-01 23:34:35,344 WARNING, Thread-12, schema.py:573, [trial: 1, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:34:35,345 DEBUG  , Thread-12, acto.py  :458, [trial: 1, gen: 5] Run and check
2023-04-01 23:34:35,668 INFO   , Thread-12, runner.py:291, [trial: 1, gen: 5] Waiting for system to converge... 
2023-04-01 23:34:42,511 INFO   , Thread-5, runner.py:360, [trial: 1, gen: 6] System took 00:01:00 to converge
2023-04-01 23:34:42,512 DEBUG  , Thread-5, runner.py:98, [trial: 1, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:34:42,512 DEBUG  , Thread-5, runner.py:99, [trial: 1, gen: 6] STDERR: 
2023-04-01 23:34:42,659 DEBUG  , Thread-5, runner.py:177, [trial: 1, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:31:39Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}},"supportsAutoResize":true},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[{"hosts":[]}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:59Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:33:42Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}, 'f:supportsAutoResize': {}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:33:42Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1964', 'uid': '87af8823-d9cc-4105-b72b-65e7262b8377'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': True}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'tls': [{}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:29:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:29:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:29:13Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:34:35Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:34:42,689 DEBUG  , Thread-5, runner.py:202, [trial: 1, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-xgp2n
2023-04-01 23:34:43,118 INFO   , Thread-3, base.py  :41, Created cluster
2023-04-01 23:34:43,235 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:34:43,399 ERROR  , Thread-5, checker.py:301, [trial: 1, gen: 6] Found no matching fields for input delta
2023-04-01 23:34:43,399 ERROR  , Thread-5, checker.py:302, [trial: 1, gen: 6] Input delta [['spec', 'ingress', 'sql', 'host']]
2023-04-01 23:34:43,643 INFO   , Thread-5, common.py:560, [trial: 1, gen: 6] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:34:43,644 INFO   , Thread-5, checker.py:134, [trial: 1, gen: 6] Number of system state fields: [3781] Number of delta: [318]
2023-04-01 23:34:43,646 INFO   , Thread-5, acto.py  :301, [trial: 1, gen: 6] Setup produced invalid input
2023-04-01 23:34:43,646 WARNING, Thread-5, schema.py:573, [trial: 1, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-01 23:34:43,647 DEBUG  , Thread-5, acto.py  :458, [trial: 1, gen: 6] Run and check
2023-04-01 23:34:43,981 INFO   , Thread-5, runner.py:291, [trial: 1, gen: 6] Waiting for system to converge... 
2023-04-01 23:34:45,165 DEBUG  , Thread-15, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:34:48,974 INFO   , Thread-9, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:34:55,246 INFO   , Thread-15, deploy.py:91, Operator ready
2023-04-01 23:34:55,246 INFO   , Thread-15, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:34:56,581 INFO   , Thread-14, runner.py:323, [trial: 1, gen: 5] Statefulset test-cluster is not ready yet
2023-04-01 23:34:57,297 DEBUG  , Thread-15, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:35:00,650 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:35:02,084 INFO   , Thread-7, runner.py:360, [trial: 1, gen: 7] System took 00:01:00 to converge
2023-04-01 23:35:02,085 DEBUG  , Thread-7, runner.py:98, [trial: 1, gen: 7] STDOUT: 
2023-04-01 23:35:02,085 DEBUG  , Thread-7, runner.py:99, [trial: 1, gen: 7] STDERR: Error from server (host required for UI): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"ingress\":{\"ui\":{\"host\":\"\"}},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"ingress":{"ui":{"host":""}},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-06-0001/mutated-7.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: host required for UI

2023-04-01 23:35:02,229 DEBUG  , Thread-7, runner.py:177, [trial: 1, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:41Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:ui': {'f:annotations': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:33:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1645', 'uid': '2252b008-f015-4569-89b0-7c8b4e909408'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:26:56Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:32:27Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-01 23:35:02,256 DEBUG  , Thread-7, runner.py:202, [trial: 1, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-pqp5r
2023-04-01 23:35:02,542 INFO   , Thread-7, common.py:569, [trial: 1, gen: 7] Recognized invalid input through field [host] in error message: Error from server (host required for UI): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"ingress\":{\"ui\":{\"host\":\"\"}},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"ingress":{"ui":{"host":""}},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-06-0001/mutated-7.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: host required for UI

2023-04-01 23:35:02,542 INFO   , Thread-7, checker.py:213, [trial: 1, gen: 7] Invalid input, reject mutation
2023-04-01 23:35:02,542 INFO   , Thread-7, checker.py:214, [trial: 1, gen: 7] STDOUT: 
2023-04-01 23:35:02,542 INFO   , Thread-7, checker.py:215, [trial: 1, gen: 7] STDERR: Error from server (host required for UI): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"ingress\":{\"ui\":{\"host\":\"\"}},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"ingress":{"ui":{"host":""}},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-06-0001/mutated-7.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: host required for UI

2023-04-01 23:35:02,968 INFO   , Thread-7, checker.py:134, [trial: 1, gen: 7] Number of system state fields: [3460] Number of delta: [0]
2023-04-01 23:35:02,969 DEBUG  , Thread-7, acto.py  :374, [trial: 1, gen: 7] Invalid input, revert
2023-04-01 23:35:02,970 WARNING, Thread-7, schema.py:573, [trial: 1, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:35:02,970 DEBUG  , Thread-7, acto.py  :458, [trial: 1, gen: 7] Run and check
2023-04-01 23:35:03,318 INFO   , Thread-7, runner.py:291, [trial: 1, gen: 7] Waiting for system to converge... 
2023-04-01 23:35:05,989 INFO   , Thread-1, runner.py:360, [trial: 1, gen: 6] System took 00:01:00 to converge
2023-04-01 23:35:05,991 DEBUG  , Thread-1, runner.py:98, [trial: 1, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:35:05,991 DEBUG  , Thread-1, runner.py:99, [trial: 1, gen: 6] STDERR: 
2023-04-01 23:35:06,142 DEBUG  , Thread-1, runner.py:177, [trial: 1, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:27:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":""}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:48Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:27:56Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:34:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:34:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2145', 'uid': '31dba658-5d26-4d81-8bdd-9155a5584890'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'resources': {}}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': ''}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:55Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:56Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:28:01Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:35:02Z', 'message': 'updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: [spec.resources[storage]: Invalid value: "0": must be greater than zero, spec.resources.requests.storage: Forbidden: field can not be less than previous value]', 'status': 'Failed', 'type': 'ResizePVC'}], 'version': 'v21.2.10'}}}
2023-04-01 23:35:06,171 DEBUG  , Thread-1, runner.py:202, [trial: 1, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-6f79h
2023-04-01 23:35:06,817 WARNING, Thread-1, checker.py:347, [trial: 1, gen: 6] 'AccessModeSchema' object is not subscriptable happened when trying to fetch default value
2023-04-01 23:35:07,116 INFO   , Thread-1, common.py:560, [trial: 1, gen: 6] Recognized invalid input through regex: updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: [spec.resources[storage]: Invalid value: "0": must be greater than zero, spec.resources.requests.storage: Forbidden: field can not be less than previous value]
2023-04-01 23:35:07,117 INFO   , Thread-1, checker.py:134, [trial: 1, gen: 6] Number of system state fields: [3480] Number of delta: [165]
2023-04-01 23:35:07,121 DEBUG  , Thread-1, acto.py  :374, [trial: 1, gen: 6] Invalid input, revert
2023-04-01 23:35:07,122 WARNING, Thread-1, schema.py:573, [trial: 1, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-01 23:35:07,123 DEBUG  , Thread-1, acto.py  :458, [trial: 1, gen: 6] Run and check
2023-04-01 23:35:07,387 INFO   , Thread-15, deploy.py:91, Operator ready
2023-04-01 23:35:07,388 INFO   , Thread-15, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:35:07,484 INFO   , Thread-1, runner.py:291, [trial: 1, gen: 6] Waiting for system to converge... 
2023-04-01 23:35:10,217 INFO   , Thread-2, runner.py:360, [trial: 1, gen: 0] System took 00:01:11 to converge
2023-04-01 23:35:10,219 DEBUG  , Thread-2, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:35:10,219 DEBUG  , Thread-2, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:35:10,369 DEBUG  , Thread-2, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:34:02Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:33:59Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:33:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:34:13Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1079', 'uid': 'ad2ba097-afd8-493a-92bf-563fae4d7c6f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:34:13Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:34:01Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:34:03Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:34:08Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:35:10,396 DEBUG  , Thread-2, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-9kzwj
2023-04-01 23:35:10,689 WARNING, Thread-2, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:35:10,690 INFO   , Thread-2, input.py :723, [trial: 1, gen: 1] Progress [14] cases left
2023-04-01 23:35:10,690 DEBUG  , Thread-2, test_case.py:51, [trial: 1, gen: 1] Precondition [pop_precondition] Result [False]
2023-04-01 23:35:10,690 INFO   , Thread-2, acto.py  :267, [trial: 1, gen: 1] Precondition of ["spec", "topologySpreadConstraints"] fails, try setup first
2023-04-01 23:35:10,692 INFO   , Thread-2, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/topologySpreadConstraints", "value": [{"labelSelector": {"matchExpressions": [{"key": "ACTOKEY", "operator": "ACTOKEY", "values": []}, {"key": "ACTOKEY", "operator": "ACTOKEY", "values": ["ACTOKEY", "ACTOKEY"]}, {"key": "ACTOKEY", "operator": "ACTOKEY", "values": ["ACTOKEY", "ACTOKEY", "ACTOKEY", "ACTOKEY"]}], "matchLabels": {"ACTOKEY": "ACTOKEY"}}, "maxSkew": 1, "topologyKey": "ACTOKEY", "whenUnsatisfiable": "ACTOKEY"}, {"labelSelector": {"matchExpressions": [{"key": "ACTOKEY", "operator": "ACTOKEY", "values": []}], "matchLabels": {"ACTOKEY": "ACTOKEY"}}, "maxSkew": 4, "topologyKey": "ACTOKEY", "whenUnsatisfiable": "ACTOKEY"}, {"labelSelector": {"matchExpressions": [{"key": "ACTOKEY", "operator": "ACTOKEY", "values": null}, {"key": "ACTOKEY", "operator": "ACTOKEY", "values": null}, {"key": "ACTOKEY", "operator": "ACTOKEY", "values": ["ACTOKEY", "ACTOKEY", "ACTOKEY", "ACTOKEY"]}, {"key": "ACTOKEY", "operator": "ACTOKEY", "values": ["ACTOKEY", "ACTOKEY", "ACTOKEY", "ACTOKEY", "ACTOKEY"]}, {"key": "ACTOKEY", "operator": "ACTOKEY", "values": null}], "matchLabels": {"ACTOKEY": "ACTOKEY"}}, "maxSkew": 4, "topologyKey": "ACTOKEY", "whenUnsatisfiable": "ACTOKEY"}, {"labelSelector": null, "maxSkew": 3, "topologyKey": "ACTOKEY", "whenUnsatisfiable": "ACTOKEY"}]}]
2023-04-01 23:35:10,693 DEBUG  , Thread-2, test_case.py:51, [trial: 1, gen: 1] Precondition [pop_precondition] Result [True]
2023-04-01 23:35:10,693 DEBUG  , Thread-2, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:35:10,780 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-01 23:35:10,780 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:35:11,128 INFO   , Thread-2, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:35:12,231 WARNING, Thread-10, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:35:12,232 DEBUG  , Thread-10, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:35:12,951 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:35:15,090 INFO   , Thread-10, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:35:23,054 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-01 23:35:23,054 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:35:30,659 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:35:31,210 INFO   , Thread-11, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:35:35,783 INFO   , Thread-12, runner.py:360, [trial: 1, gen: 5] System took 00:01:00 to converge
2023-04-01 23:35:35,784 DEBUG  , Thread-12, runner.py:98, [trial: 1, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:35:35,784 DEBUG  , Thread-12, runner.py:99, [trial: 1, gen: 5] STDERR: 
2023-04-01 23:35:35,923 DEBUG  , Thread-12, runner.py:177, [trial: 1, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:31:31Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:27:21Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:31Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:33:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:34:35Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1889', 'uid': 'dbf76807-63b6-429f-a0a4-f88290d4f4d5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:35Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:25Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:23Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:27:30Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:34:23Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:35:35,950 DEBUG  , Thread-12, runner.py:202, [trial: 1, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-5944q
2023-04-01 23:35:36,789 INFO   , Thread-12, acto.py  :321, [trial: 1, gen: 5] All setups failed
2023-04-01 23:35:36,790 WARNING, Thread-12, schema.py:573, [trial: 1, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:35:36,790 INFO   , Thread-12, input.py :723, [trial: 1, gen: 7] Progress [4] cases left
2023-04-01 23:35:36,791 DEBUG  , Thread-12, test_case.py:51, [trial: 1, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-01 23:35:36,791 INFO   , Thread-12, acto.py  :263, [trial: 1, gen: 7] Precondition of ['spec', 'ingress', 'sql', 'tls'] satisfies
2023-04-01 23:35:36,791 INFO   , Thread-12, acto.py  :323, [trial: 1, gen: 7] Running bundled testcases
2023-04-01 23:35:36,791 DEBUG  , Thread-12, test_case.py:51, [trial: 1, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-01 23:35:36,791 INFO   , Thread-12, acto.py  :107, [trial: 1, gen: 7] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": []}}}]
2023-04-01 23:35:36,791 DEBUG  , Thread-12, acto.py  :458, [trial: 1, gen: 7] Run and check
2023-04-01 23:35:37,106 INFO   , Thread-12, runner.py:291, [trial: 1, gen: 7] Waiting for system to converge... 
2023-04-01 23:35:42,142 INFO   , Thread-16, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:35:44,094 INFO   , Thread-5, runner.py:360, [trial: 1, gen: 6] System took 00:01:00 to converge
2023-04-01 23:35:44,095 DEBUG  , Thread-5, runner.py:98, [trial: 1, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:35:44,095 DEBUG  , Thread-5, runner.py:99, [trial: 1, gen: 6] STDERR: 
2023-04-01 23:35:44,230 DEBUG  , Thread-5, runner.py:177, [trial: 1, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:31:39Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}},"supportsAutoResize":true},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:59Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:33:42Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}, 'f:supportsAutoResize': {}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:34:43Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1979', 'uid': '87af8823-d9cc-4105-b72b-65e7262b8377'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': True}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:29:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:29:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:29:13Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:34:35Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:35:44,262 DEBUG  , Thread-5, runner.py:202, [trial: 1, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-xgp2n
2023-04-01 23:35:45,121 INFO   , Thread-5, acto.py  :321, [trial: 1, gen: 6] All setups failed
2023-04-01 23:35:45,121 WARNING, Thread-5, schema.py:573, [trial: 1, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-01 23:35:45,122 INFO   , Thread-5, input.py :723, [trial: 1, gen: 8] Progress [10] cases left
2023-04-01 23:35:45,128 INFO   , Thread-5, acto.py  :187, Trial 1 finished, completed in 00:12:30
2023-04-01 23:35:45,128 INFO   , Thread-5, acto.py  :188, ---------------------------------------

2023-04-01 23:35:45,149 DEBUG  , Thread-5, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-xgp2n
2023-04-01 23:35:47,514 WARNING, Thread-15, schema.py:573, [trial: 3, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:35:47,514 DEBUG  , Thread-15, acto.py  :458, [trial: 3, gen: 0] Run and check
2023-04-01 23:35:49,994 INFO   , Thread-15, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-01 23:35:50,975 INFO   , Thread-8, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:35:55,176 INFO   , Thread-5, common.py:629, Trial testrun-crdb-whitebox/trial-04-0001 completed without error
2023-04-01 23:35:56,671 INFO   , Thread-14, runner.py:323, [trial: 1, gen: 5] Statefulset test-cluster is not ready yet
2023-04-01 23:36:00,242 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-4
2023-04-01 23:36:03,180 WARNING, Thread-3, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:36:03,180 DEBUG  , Thread-3, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:36:03,441 INFO   , Thread-7, runner.py:360, [trial: 1, gen: 7] System took 00:01:00 to converge
2023-04-01 23:36:03,443 DEBUG  , Thread-7, runner.py:98, [trial: 1, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:36:03,443 DEBUG  , Thread-7, runner.py:99, [trial: 1, gen: 7] STDERR: 
2023-04-01 23:36:03,591 DEBUG  , Thread-7, runner.py:177, [trial: 1, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:41Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:ui': {'f:annotations': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:33:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1645', 'uid': '2252b008-f015-4569-89b0-7c8b4e909408'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:26:56Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:32:27Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-01 23:36:03,620 DEBUG  , Thread-7, runner.py:202, [trial: 1, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-pqp5r
2023-04-01 23:36:04,404 DEBUG  , Thread-7, acto.py  :383, [trial: 1, gen: 7] Only one patch, no need to isolate
2023-04-01 23:36:04,404 WARNING, Thread-7, schema.py:573, [trial: 1, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-01 23:36:04,405 INFO   , Thread-7, input.py :723, [trial: 1, gen: 9] Progress [11] cases left
2023-04-01 23:36:04,405 DEBUG  , Thread-7, test_case.py:51, [trial: 1, gen: 9] Precondition [delete_precondition] Result [False]
2023-04-01 23:36:04,405 INFO   , Thread-7, acto.py  :267, [trial: 1, gen: 9] Precondition of ["spec", "nodeSelector", "ACTOKEY"] fails, try setup first
2023-04-01 23:36:04,405 INFO   , Thread-7, acto.py  :107, [trial: 1, gen: 9] JSON patch: [{"op": "add", "path": "/spec/nodeSelector", "value": {"ACTOKEY": "ACTOKEY"}}]
2023-04-01 23:36:04,405 DEBUG  , Thread-7, test_case.py:51, [trial: 1, gen: 9] Precondition [delete_precondition] Result [True]
2023-04-01 23:36:04,406 DEBUG  , Thread-7, acto.py  :458, [trial: 1, gen: 9] Run and check
2023-04-01 23:36:04,768 INFO   , Thread-7, runner.py:291, [trial: 1, gen: 9] Waiting for system to converge... 
2023-04-01 23:36:06,329 INFO   , Thread-3, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:36:07,602 INFO   , Thread-1, runner.py:360, [trial: 1, gen: 6] System took 00:01:00 to converge
2023-04-01 23:36:07,603 DEBUG  , Thread-1, runner.py:98, [trial: 1, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:36:07,603 DEBUG  , Thread-1, runner.py:99, [trial: 1, gen: 6] STDERR: 
2023-04-01 23:36:07,736 DEBUG  , Thread-1, runner.py:177, [trial: 1, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:27:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":""}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:48Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:27:56Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:34:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'f:accessModes': {}, 'f:resources': {'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:35:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2152', 'uid': '31dba658-5d26-4d81-8bdd-9155a5584890'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': ''}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:55Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:56Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:28:01Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:35:02Z', 'message': 'updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: [spec.resources[storage]: Invalid value: "0": must be greater than zero, spec.resources.requests.storage: Forbidden: field can not be less than previous value]', 'status': 'Failed', 'type': 'ResizePVC'}], 'version': 'v21.2.10'}}}
2023-04-01 23:36:07,766 DEBUG  , Thread-1, runner.py:202, [trial: 1, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-6f79h
2023-04-01 23:36:08,607 DEBUG  , Thread-1, acto.py  :383, [trial: 1, gen: 6] Only one patch, no need to isolate
2023-04-01 23:36:08,608 WARNING, Thread-1, schema.py:573, [trial: 1, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-01 23:36:08,608 INFO   , Thread-1, input.py :723, [trial: 1, gen: 8] Progress [12] cases left
2023-04-01 23:36:08,608 DEBUG  , Thread-1, test_case.py:51, [trial: 1, gen: 8] Precondition [empty_precondition] Result [True]
2023-04-01 23:36:08,608 INFO   , Thread-1, acto.py  :263, [trial: 1, gen: 8] Precondition of ['spec', 'dataStore', 'pvc'] satisfies
2023-04-01 23:36:08,608 INFO   , Thread-1, acto.py  :323, [trial: 1, gen: 8] Running bundled testcases
2023-04-01 23:36:08,609 DEBUG  , Thread-1, test_case.py:51, [trial: 1, gen: 8] Precondition [empty_precondition] Result [True]
2023-04-01 23:36:08,609 INFO   , Thread-1, acto.py  :107, [trial: 1, gen: 8] JSON patch: [{"op": "remove", "path": "/spec/dataStore/pvc/spec"}]
2023-04-01 23:36:08,609 DEBUG  , Thread-1, acto.py  :458, [trial: 1, gen: 8] Run and check
2023-04-01 23:36:10,458 INFO   , Thread-1, runner.py:291, [trial: 1, gen: 8] Waiting for system to converge... 
2023-04-01 23:36:16,503 INFO   , Thread-10, runner.py:360, [trial: 1, gen: 0] System took 00:01:01 to converge
2023-04-01 23:36:16,505 DEBUG  , Thread-10, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:36:16,505 DEBUG  , Thread-10, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:36:16,616 DEBUG  , Thread-10, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:35:15Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:35:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:35:16Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '907', 'uid': '85a29493-b14c-4b66-8941-f5de59767251'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:35:15Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:35:15Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:35:17Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:36:16,635 DEBUG  , Thread-10, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-ttvw5
2023-04-01 23:36:16,759 WARNING, Thread-10, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:36:16,760 INFO   , Thread-10, input.py :723, [trial: 1, gen: 1] Progress [19] cases left
2023-04-01 23:36:16,760 DEBUG  , Thread-10, test_case.py:51, [trial: 1, gen: 1] Precondition [change_precondition] Result [False]
2023-04-01 23:36:16,760 INFO   , Thread-10, acto.py  :267, [trial: 1, gen: 1] Precondition of ["spec", "maxSQLMemory"] fails, try setup first
2023-04-01 23:36:16,761 INFO   , Thread-10, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/maxSQLMemory", "value": "ACTOKEY"}]
2023-04-01 23:36:16,761 DEBUG  , Thread-10, test_case.py:51, [trial: 1, gen: 1] Precondition [change_precondition] Result [True]
2023-04-01 23:36:16,761 DEBUG  , Thread-10, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:36:17,106 INFO   , Thread-10, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:36:30,746 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:36:31,300 INFO   , Thread-11, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:36:37,218 INFO   , Thread-12, runner.py:360, [trial: 1, gen: 7] System took 00:01:00 to converge
2023-04-01 23:36:37,219 DEBUG  , Thread-12, runner.py:98, [trial: 1, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:36:37,219 DEBUG  , Thread-12, runner.py:99, [trial: 1, gen: 7] STDERR: 
2023-04-01 23:36:37,363 DEBUG  , Thread-12, runner.py:177, [trial: 1, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:31:31Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:27:21Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:35:37Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:35:37Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2032', 'uid': 'dbf76807-63b6-429f-a0a4-f88290d4f4d5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:35Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:25Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:23Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:27:30Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:36:05Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:36:37,400 DEBUG  , Thread-12, runner.py:202, [trial: 1, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-5944q
2023-04-01 23:36:38,010 ERROR  , Thread-12, checker.py:301, [trial: 1, gen: 7] Found no matching fields for input delta
2023-04-01 23:36:38,010 ERROR  , Thread-12, checker.py:302, [trial: 1, gen: 7] Input delta [['spec', 'ingress', 'sql', 'host']]
2023-04-01 23:36:38,223 INFO   , Thread-12, common.py:560, [trial: 1, gen: 7] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-01 23:36:38,223 INFO   , Thread-12, checker.py:134, [trial: 1, gen: 7] Number of system state fields: [3466] Number of delta: [2]
2023-04-01 23:36:38,224 DEBUG  , Thread-12, acto.py  :374, [trial: 1, gen: 7] Invalid input, revert
2023-04-01 23:36:38,224 WARNING, Thread-12, schema.py:573, [trial: 1, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:36:38,225 DEBUG  , Thread-12, acto.py  :458, [trial: 1, gen: 7] Run and check
2023-04-01 23:36:40,092 INFO   , Thread-12, runner.py:291, [trial: 1, gen: 7] Waiting for system to converge... 
2023-04-01 23:36:40,906 INFO   , Thread-6, runner.py:360, [trial: 1, gen: 1] System took 00:07:15 to converge
2023-04-01 23:36:40,908 DEBUG  , Thread-6, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:36:40,908 DEBUG  , Thread-6, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:36:41,029 DEBUG  , Thread-6, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:29:28Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"resourceFieldRef":{"resource":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:28:23Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:29:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:29:29Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:29:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1841', 'uid': '35b2968c-e68d-469a-a273-ca2bc7ba660f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'resourceFieldRef': {'divisor': '0', 'resource': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:23Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:28Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:29:29Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:25Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:36:38Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:36:41,051 DEBUG  , Thread-6, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-sdj2j
2023-04-01 23:36:41,503 DEBUG  , Thread-6, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'resource']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 2, 'value_from', 'resource_field_ref', 'resource']]
2023-04-01 23:36:41,504 ERROR  , Thread-6, checker.py:282, [trial: 1, gen: 1] Matched delta inconsistent with input delta
2023-04-01 23:36:41,504 ERROR  , Thread-6, checker.py:283, [trial: 1, gen: 1] Input delta: not present -> ACTOKEY
2023-04-01 23:36:41,504 ERROR  , Thread-6, checker.py:284, [trial: 1, gen: 1] Matched delta: not present -> limits.cpu
2023-04-01 23:36:41,594 INFO   , Thread-6, common.py:569, [trial: 1, gen: 1] Recognized invalid input through field [name] in error message: User set image.name, using that field instead of cockroachDBVersion
2023-04-01 23:36:41,595 INFO   , Thread-6, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [2022] Number of delta: [550]
2023-04-01 23:36:41,595 INFO   , Thread-6, acto.py  :301, [trial: 1, gen: 1] Setup produced invalid input
2023-04-01 23:36:41,595 WARNING, Thread-6, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:36:41,596 DEBUG  , Thread-6, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:36:42,001 INFO   , Thread-6, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:36:42,233 INFO   , Thread-16, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:36:44,120 INFO   , Thread-13, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:36:50,510 INFO   , Thread-15, runner.py:360, [trial: 3, gen: 0] System took 00:01:00 to converge
2023-04-01 23:36:50,511 DEBUG  , Thread-15, runner.py:98, [trial: 3, gen: 0] STDOUT: 
2023-04-01 23:36:50,511 DEBUG  , Thread-15, runner.py:99, [trial: 3, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-14-0003/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.195.195:443: connect: connection refused

2023-04-01 23:36:50,609 DEBUG  , Thread-15, runner.py:177, [trial: 3, gen: 0] {}
2023-04-01 23:36:50,609 ERROR  , Thread-15, runner.py:107, [trial: 3, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:36:50,610 INFO   , Thread-15, checker.py:103, [trial: 3, gen: 0] Connection refused, reject mutation
2023-04-01 23:36:50,610 INFO   , Thread-15, acto.py  :472, [trial: 3, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-01 23:36:51,061 INFO   , Thread-8, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:36:53,117 INFO   , Thread-5, base.py  :41, Created cluster
2023-04-01 23:36:53,133 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:37:05,978 INFO   , Thread-9, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:37:07,695 INFO   , Thread-3, runner.py:360, [trial: 2, gen: 0] System took 00:01:01 to converge
2023-04-01 23:37:07,696 DEBUG  , Thread-3, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:37:07,696 DEBUG  , Thread-3, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-01 23:37:07,796 DEBUG  , Thread-3, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:36:06Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:36:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:36:08Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '911', 'uid': '3556ff39-ba0d-4c44-9fdd-2d67a7c7bf8a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:36:06Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:36:06Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:36:08Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:37:07,815 DEBUG  , Thread-3, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-p5kfs
2023-04-01 23:37:07,933 WARNING, Thread-3, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:37:07,934 INFO   , Thread-3, input.py :723, [trial: 2, gen: 1] Progress [18] cases left
2023-04-01 23:37:07,934 DEBUG  , Thread-3, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:37:07,934 INFO   , Thread-3, acto.py  :263, [trial: 2, gen: 1] Precondition of ['spec', 'affinity', 'podAntiAffinity'] satisfies
2023-04-01 23:37:07,934 INFO   , Thread-3, acto.py  :323, [trial: 2, gen: 1] Running bundled testcases
2023-04-01 23:37:07,934 DEBUG  , Thread-3, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:37:07,935 INFO   , Thread-3, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "add", "path": "/spec/affinity", "value": {"nodeAffinity": {"requiredDuringSchedulingIgnoredDuringExecution": {"nodeSelectorTerms": [{"matchExpressions": [{"key": "kubernetes.io/hostname", "operator": "In", "values": ["kind-worker", "kind-worker2", "kind-worker3kind-control-plane"]}]}]}}, "podAntiAffinity": {}}}]
2023-04-01 23:37:07,935 DEBUG  , Thread-3, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:37:08,255 INFO   , Thread-3, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:37:10,607 DEBUG  , Thread-5, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:37:10,615 INFO   , Thread-1, runner.py:360, [trial: 1, gen: 8] System took 00:01:00 to converge
2023-04-01 23:37:10,617 DEBUG  , Thread-1, runner.py:98, [trial: 1, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:37:10,617 DEBUG  , Thread-1, runner.py:99, [trial: 1, gen: 8] STDERR: 
2023-04-01 23:37:10,784 DEBUG  , Thread-1, runner.py:177, [trial: 1, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:27:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":""}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:48Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:36:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:36:10Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2296', 'uid': '31dba658-5d26-4d81-8bdd-9155a5584890'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'resources': {}}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': ''}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:55Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:56Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:28:01Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:36:40Z', 'message': 'updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: [spec.resources[storage]: Invalid value: "0": must be greater than zero, spec.resources.requests.storage: Forbidden: field can not be less than previous value]', 'status': 'Failed', 'type': 'ResizePVC'}], 'version': 'v21.2.10'}}}
2023-04-01 23:37:10,814 DEBUG  , Thread-1, runner.py:202, [trial: 1, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-6f79h
2023-04-01 23:37:11,124 INFO   , Thread-15, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-01 23:37:11,516 WARNING, Thread-1, checker.py:347, [trial: 1, gen: 8] 'AccessModeSchema' object is not subscriptable happened when trying to fetch default value
2023-04-01 23:37:11,518 ERROR  , Thread-1, checker.py:301, [trial: 1, gen: 8] Found no matching fields for input delta
2023-04-01 23:37:11,518 ERROR  , Thread-1, checker.py:302, [trial: 1, gen: 8] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'accessModes', 0]]
2023-04-01 23:37:11,688 INFO   , Thread-7, runner.py:323, [trial: 1, gen: 9] Statefulset test-cluster is not ready yet
2023-04-01 23:37:11,775 INFO   , Thread-1, common.py:560, [trial: 1, gen: 8] Recognized invalid input through regex: updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: [spec.resources[storage]: Invalid value: "0": must be greater than zero, spec.resources.requests.storage: Forbidden: field can not be less than previous value]
2023-04-01 23:37:11,775 INFO   , Thread-1, checker.py:134, [trial: 1, gen: 8] Number of system state fields: [3480] Number of delta: [4]
2023-04-01 23:37:11,777 DEBUG  , Thread-1, acto.py  :374, [trial: 1, gen: 8] Invalid input, revert
2023-04-01 23:37:11,777 WARNING, Thread-1, schema.py:573, [trial: 1, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-01 23:37:11,778 DEBUG  , Thread-1, acto.py  :458, [trial: 1, gen: 8] Run and check
2023-04-01 23:37:12,111 INFO   , Thread-1, runner.py:291, [trial: 1, gen: 8] Waiting for system to converge... 
2023-04-01 23:37:20,703 INFO   , Thread-5, deploy.py:91, Operator ready
2023-04-01 23:37:20,703 INFO   , Thread-5, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:37:22,728 DEBUG  , Thread-5, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:37:30,833 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:37:31,382 INFO   , Thread-11, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:37:32,814 INFO   , Thread-5, deploy.py:91, Operator ready
2023-04-01 23:37:32,814 INFO   , Thread-5, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:37:40,206 INFO   , Thread-12, runner.py:360, [trial: 1, gen: 7] System took 00:01:00 to converge
2023-04-01 23:37:40,207 DEBUG  , Thread-12, runner.py:98, [trial: 1, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:37:40,207 DEBUG  , Thread-12, runner.py:99, [trial: 1, gen: 7] STDERR: 
2023-04-01 23:37:40,339 DEBUG  , Thread-12, runner.py:177, [trial: 1, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:31:31Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:27:21Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:35:37Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:sql': {'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:36:40Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2084', 'uid': 'dbf76807-63b6-429f-a0a4-f88290d4f4d5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:35Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:25Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:23Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:27:30Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:36:05Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-01 23:37:40,365 DEBUG  , Thread-12, runner.py:202, [trial: 1, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-5944q
2023-04-01 23:37:40,925 INFO   , Thread-14, runner.py:323, [trial: 1, gen: 5] Statefulset test-cluster is not ready yet
2023-04-01 23:37:41,262 DEBUG  , Thread-12, acto.py  :383, [trial: 1, gen: 7] Only one patch, no need to isolate
2023-04-01 23:37:41,263 WARNING, Thread-12, schema.py:573, [trial: 1, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-01 23:37:41,263 INFO   , Thread-12, input.py :723, [trial: 1, gen: 9] Progress [3] cases left
2023-04-01 23:37:41,267 INFO   , Thread-12, acto.py  :187, Trial 1 finished, completed in 00:13:54
2023-04-01 23:37:41,267 INFO   , Thread-12, acto.py  :188, ---------------------------------------

2023-04-01 23:37:41,288 DEBUG  , Thread-12, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-5944q
2023-04-01 23:37:43,096 INFO   , Thread-2, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:37:49,482 INFO   , Thread-6, runner.py:360, [trial: 1, gen: 1] System took 00:01:07 to converge
2023-04-01 23:37:49,483 DEBUG  , Thread-6, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:37:49,483 DEBUG  , Thread-6, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:37:49,629 DEBUG  , Thread-6, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:29:28Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:28:23Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:36:41Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:36:49Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1969', 'uid': '35b2968c-e68d-469a-a273-ca2bc7ba660f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:36:49Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:28Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:29:29Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:25Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:36:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:37:49,658 DEBUG  , Thread-6, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-sdj2j
2023-04-01 23:37:50,194 INFO   , Thread-6, acto.py  :321, [trial: 1, gen: 1] All setups failed
2023-04-01 23:37:50,194 WARNING, Thread-6, schema.py:573, [trial: 1, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:37:50,194 INFO   , Thread-6, input.py :723, [trial: 1, gen: 3] Progress [13] cases left
2023-04-01 23:37:50,195 DEBUG  , Thread-6, test_case.py:51, [trial: 1, gen: 3] Precondition [change_precondition] Result [False]
2023-04-01 23:37:50,195 INFO   , Thread-6, acto.py  :267, [trial: 1, gen: 3] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "resourceFieldRef", "resource"] fails, try setup first
2023-04-01 23:37:50,195 INFO   , Thread-6, acto.py  :107, [trial: 1, gen: 3] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {"resource": "ACTOKEY"}}}]}]
2023-04-01 23:37:50,195 DEBUG  , Thread-6, test_case.py:51, [trial: 1, gen: 3] Precondition [change_precondition] Result [True]
2023-04-01 23:37:50,195 DEBUG  , Thread-6, acto.py  :458, [trial: 1, gen: 3] Run and check
2023-04-01 23:37:50,525 INFO   , Thread-6, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:37:51,161 INFO   , Thread-8, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:37:51,315 INFO   , Thread-12, common.py:629, Trial testrun-crdb-whitebox/trial-11-0001 completed without error
2023-04-01 23:37:57,418 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-11
2023-04-01 23:38:06,062 INFO   , Thread-13, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:38:08,492 INFO   , Thread-3, runner.py:360, [trial: 2, gen: 1] System took 00:01:00 to converge
2023-04-01 23:38:08,494 DEBUG  , Thread-3, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:38:08,494 DEBUG  , Thread-3, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:38:08,597 DEBUG  , Thread-3, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.io/hostname","operator":"In","values":["kind-worker","kind-worker2","kind-worker3kind-control-plane"]}]}]}},"podAntiAffinity":{}},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:36:06Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:36:08Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:affinity': {'.': {}, 'f:nodeAffinity': {'.': {}, 'f:requiredDuringSchedulingIgnoredDuringExecution': {'.': {}, 'f:nodeSelectorTerms': {}}}, 'f:podAntiAffinity': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:37:08Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1002', 'uid': '3556ff39-ba0d-4c44-9fdd-2d67a7c7bf8a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'affinity': {'nodeAffinity': {'requiredDuringSchedulingIgnoredDuringExecution': {'nodeSelectorTerms': [{'matchExpressions': [{'key': 'kubernetes.io/hostname', 'operator': 'In', 'values': ['kind-worker', 'kind-worker2', 'kind-worker3kind-control-plane']}]}]}}, 'podAntiAffinity': {}}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:36:06Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:36:06Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:36:08Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:38:08,617 DEBUG  , Thread-3, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-p5kfs
2023-04-01 23:38:09,098 INFO   , Thread-3, common.py:569, [trial: 2, gen: 1] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-01 23:38:09,099 INFO   , Thread-3, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [1797] Number of delta: [141]
2023-04-01 23:38:09,099 ERROR  , Thread-3, checker.py:561, [trial: 2, gen: 1] Found pod: test-cluster-vcheck-28006777--1-v929x with unhealthy status
2023-04-01 23:38:09,099 DEBUG  , Thread-3, acto.py  :374, [trial: 2, gen: 1] Invalid input, revert
2023-04-01 23:38:09,099 WARNING, Thread-3, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:38:09,100 DEBUG  , Thread-3, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:38:09,428 INFO   , Thread-3, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:38:12,236 INFO   , Thread-1, runner.py:360, [trial: 1, gen: 8] System took 00:01:00 to converge
2023-04-01 23:38:12,238 DEBUG  , Thread-1, runner.py:98, [trial: 1, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:38:12,238 DEBUG  , Thread-1, runner.py:99, [trial: 1, gen: 8] STDERR: 
2023-04-01 23:38:12,372 DEBUG  , Thread-1, runner.py:177, [trial: 1, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:27:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":""}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:48Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:36:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'f:accessModes': {}, 'f:resources': {'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:37:12Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2346', 'uid': '31dba658-5d26-4d81-8bdd-9155a5584890'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': ''}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:27:55Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:27:56Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:27:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:28:01Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:36:40Z', 'message': 'updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: [spec.resources[storage]: Invalid value: "0": must be greater than zero, spec.resources.requests.storage: Forbidden: field can not be less than previous value]', 'status': 'Failed', 'type': 'ResizePVC'}], 'version': 'v21.2.10'}}}
2023-04-01 23:38:12,399 DEBUG  , Thread-1, runner.py:202, [trial: 1, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-6f79h
2023-04-01 23:38:13,030 INFO   , Thread-15, runner.py:360, [trial: 3, gen: 0] System took 00:01:01 to converge
2023-04-01 23:38:13,042 DEBUG  , Thread-15, runner.py:98, [trial: 3, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:38:13,047 DEBUG  , Thread-15, runner.py:99, [trial: 3, gen: 0] STDERR: 
2023-04-01 23:38:13,376 DEBUG  , Thread-1, acto.py  :383, [trial: 1, gen: 8] Only one patch, no need to isolate
2023-04-01 23:38:13,381 INFO   , Thread-1, acto.py  :187, Trial 1 finished, completed in 00:14:43
2023-04-01 23:38:13,381 INFO   , Thread-1, acto.py  :188, ---------------------------------------

2023-04-01 23:38:13,436 DEBUG  , Thread-1, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-6f79h
2023-04-01 23:38:13,443 DEBUG  , Thread-15, runner.py:177, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:37:11Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:37:11Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:37:12Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1037', 'uid': '9cf797be-904e-4b10-ac6a-c3171bbcc772'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:37:11Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:37:11Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:37:13Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:38:13,458 WARNING, Thread-5, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:38:13,460 DEBUG  , Thread-5, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:38:13,505 DEBUG  , Thread-15, runner.py:202, [trial: 3, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-m2trl
2023-04-01 23:38:13,608 WARNING, Thread-15, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:38:13,609 INFO   , Thread-15, input.py :723, [trial: 3, gen: 1] Progress [5] cases left
2023-04-01 23:38:13,609 DEBUG  , Thread-15, test_case.py:51, [trial: 3, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:38:13,609 INFO   , Thread-15, acto.py  :263, [trial: 3, gen: 1] Precondition of ['spec', 'resources'] satisfies
2023-04-01 23:38:13,609 INFO   , Thread-15, acto.py  :323, [trial: 3, gen: 1] Running bundled testcases
2023-04-01 23:38:13,609 DEBUG  , Thread-15, test_case.py:51, [trial: 3, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:38:13,610 INFO   , Thread-15, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "remove", "path": "/spec/resources/limits"}, {"op": "remove", "path": "/spec/resources/requests"}]
2023-04-01 23:38:13,610 DEBUG  , Thread-15, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-01 23:38:13,965 INFO   , Thread-15, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-01 23:38:16,036 INFO   , Thread-5, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:38:23,488 INFO   , Thread-1, common.py:629, Trial testrun-crdb-whitebox/trial-00-0001 completed without error
2023-04-01 23:38:26,007 INFO   , Thread-16, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:38:28,917 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-0
2023-04-01 23:38:30,921 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:38:31,466 INFO   , Thread-11, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:38:41,014 INFO   , Thread-14, runner.py:323, [trial: 1, gen: 5] Statefulset test-cluster is not ready yet
2023-04-01 23:38:49,975 INFO   , Thread-10, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:38:50,888 INFO   , Thread-12, base.py  :41, Created cluster
2023-04-01 23:38:50,901 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:38:51,252 INFO   , Thread-8, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:38:53,824 ERROR  , Thread-11, runner.py:363, [trial: 1, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:38:53,825 DEBUG  , Thread-11, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:38:53,826 DEBUG  , Thread-11, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:38:53,967 DEBUG  , Thread-11, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:50Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:46Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:26:50Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:26:50Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:28:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1280', 'uid': 'a339795d-81a2-4fc4-8c17-453d4ee71345'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:01Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:49Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:50Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:56Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:38:53,996 DEBUG  , Thread-11, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-4r8p6
2023-04-01 23:38:54,844 INFO   , Thread-11, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [3041] Number of delta: [215]
2023-04-01 23:38:54,844 ERROR  , Thread-11, checker.py:561, [trial: 1, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:38:54,846 DEBUG  , Thread-11, acto.py  :489, [trial: 1, gen: 1] Running recovery
2023-04-01 23:38:56,796 INFO   , Thread-11, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:38:58,463 INFO   , Thread-6, runner.py:323, [trial: 1, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:39:05,028 INFO   , Thread-2, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:39:06,149 INFO   , Thread-13, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:39:08,251 DEBUG  , Thread-12, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:39:13,018 ERROR  , Thread-8, runner.py:363, [trial: 1, gen: 2] System failed to converge within 600 seconds
2023-04-01 23:39:13,019 DEBUG  , Thread-8, runner.py:98, [trial: 1, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:39:13,019 DEBUG  , Thread-8, runner.py:99, [trial: 1, gen: 2] STDERR: 
2023-04-01 23:39:13,154 DEBUG  , Thread-8, runner.py:177, [trial: 1, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:50Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullPolicy":"ACTOKEY"},"nodeSelector":{"ACTOKEY":""},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:46Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:27:00Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullPolicy': {}}, 'f:nodeSelector': {'.': {}, 'f:ACTOKEY': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:29:12Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1301', 'uid': 'c8301b52-ddc3-4df4-b4e9-11b9f0573448'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'ACTOKEY'}, 'maxUnavailable': 1, 'nodeSelector': {'ACTOKEY': ''}, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:49Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:50Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:55Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:39:13,182 DEBUG  , Thread-8, runner.py:202, [trial: 1, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-54n8k
2023-04-01 23:39:13,951 INFO   , Thread-8, checker.py:134, [trial: 1, gen: 2] Number of system state fields: [3031] Number of delta: [222]
2023-04-01 23:39:13,951 ERROR  , Thread-8, checker.py:561, [trial: 1, gen: 2] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:39:13,952 DEBUG  , Thread-8, acto.py  :489, [trial: 1, gen: 2] Running recovery
2023-04-01 23:39:14,908 INFO   , Thread-15, runner.py:360, [trial: 3, gen: 1] System took 00:01:00 to converge
2023-04-01 23:39:14,909 DEBUG  , Thread-15, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:39:14,909 DEBUG  , Thread-15, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-01 23:39:15,022 DEBUG  , Thread-15, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:37:11Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:37:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:38:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:38:15Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1142', 'uid': '9cf797be-904e-4b10-ac6a-c3171bbcc772'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:37:11Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:37:11Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:38:15Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:39:15,042 DEBUG  , Thread-15, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-m2trl
2023-04-01 23:39:15,281 DEBUG  , Thread-15, checker.py:278, [trial: 3, gen: 1] Input delta [['spec', 'resources', 'requests', 'cpu']] matched with [['test-cluster-vcheck-28006778--1-qwb4v', 'spec', 'containers', 0, 'resources', 'requests', 'cpu']]
2023-04-01 23:39:15,281 ERROR  , Thread-15, checker.py:282, [trial: 3, gen: 1] Matched delta inconsistent with input delta
2023-04-01 23:39:15,282 ERROR  , Thread-15, checker.py:283, [trial: 3, gen: 1] Input delta: 100m -> not present
2023-04-01 23:39:15,282 ERROR  , Thread-15, checker.py:284, [trial: 3, gen: 1] Matched delta: not present -> 300m
2023-04-01 23:39:15,388 INFO   , Thread-15, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [1800] Number of delta: [151]
2023-04-01 23:39:15,389 INFO   , Thread-15, acto.py  :332, [trial: 3, gen: 1] Error result, running recovery
2023-04-01 23:39:15,389 DEBUG  , Thread-15, acto.py  :489, [trial: 3, gen: 1] Running recovery
2023-04-01 23:39:15,766 INFO   , Thread-15, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-01 23:39:16,095 INFO   , Thread-7, runner.py:323, [trial: 1, gen: 9] Statefulset test-cluster is not ready yet
2023-04-01 23:39:16,097 INFO   , Thread-8, runner.py:291, [trial: 1, gen: 2] Waiting for system to converge... 
2023-04-01 23:39:16,174 INFO   , Thread-5, runner.py:360, [trial: 2, gen: 0] System took 00:01:00 to converge
2023-04-01 23:39:16,175 DEBUG  , Thread-5, runner.py:98, [trial: 2, gen: 0] STDOUT: 
2023-04-01 23:39:16,175 DEBUG  , Thread-5, runner.py:99, [trial: 2, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-04-0002/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.131.86:443: connect: connection refused

2023-04-01 23:39:16,276 DEBUG  , Thread-5, runner.py:177, [trial: 2, gen: 0] {}
2023-04-01 23:39:16,277 ERROR  , Thread-5, runner.py:107, [trial: 2, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:39:16,278 INFO   , Thread-5, checker.py:103, [trial: 2, gen: 0] Connection refused, reject mutation
2023-04-01 23:39:16,278 INFO   , Thread-5, acto.py  :472, [trial: 2, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-01 23:39:18,335 INFO   , Thread-12, deploy.py:91, Operator ready
2023-04-01 23:39:18,335 INFO   , Thread-12, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:39:20,402 DEBUG  , Thread-12, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:39:20,994 INFO   , Thread-9, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:39:22,526 ERROR  , Thread-9, runner.py:363, [trial: 1, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:39:22,527 DEBUG  , Thread-9, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:39:22,527 DEBUG  , Thread-9, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:39:22,676 DEBUG  , Thread-9, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:28:13Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodeTLSSecret":"ACTOKEY","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:28:09Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:28:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:28:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodeTLSSecret': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:29:22Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1168', 'uid': '4ecdb967-a920-4328-954b-486a5b7d4162'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodeTLSSecret': 'ACTOKEY', 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:24Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:28:12Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:28:13Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:18Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:39:22,703 DEBUG  , Thread-9, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-nprqd
2023-04-01 23:39:23,141 INFO   , Thread-1, base.py  :41, Created cluster
2023-04-01 23:39:23,225 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:39:23,620 INFO   , Thread-9, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [3439] Number of delta: [77]
2023-04-01 23:39:23,620 ERROR  , Thread-9, checker.py:561, [trial: 1, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:39:23,620 ERROR  , Thread-9, checker.py:561, [trial: 1, gen: 1] Found pod: test-cluster-2 with unhealthy status
2023-04-01 23:39:23,622 DEBUG  , Thread-9, acto.py  :489, [trial: 1, gen: 1] Running recovery
2023-04-01 23:39:25,627 INFO   , Thread-9, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:39:26,101 INFO   , Thread-16, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:39:30,490 INFO   , Thread-12, deploy.py:91, Operator ready
2023-04-01 23:39:30,491 INFO   , Thread-12, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:39:31,002 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:39:36,660 INFO   , Thread-5, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:39:40,664 DEBUG  , Thread-1, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:39:41,105 INFO   , Thread-14, runner.py:323, [trial: 1, gen: 5] Statefulset test-cluster is not ready yet
2023-04-01 23:39:50,061 INFO   , Thread-10, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:39:50,742 INFO   , Thread-1, deploy.py:91, Operator ready
2023-04-01 23:39:50,742 INFO   , Thread-1, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:39:52,723 DEBUG  , Thread-1, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:39:58,550 INFO   , Thread-6, runner.py:323, [trial: 1, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:39:58,587 INFO   , Thread-11, runner.py:360, [trial: 1, gen: 1] System took 00:01:01 to converge
2023-04-01 23:39:58,587 DEBUG  , Thread-11, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:39:58,588 DEBUG  , Thread-11, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:39:58,719 DEBUG  , Thread-11, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:50Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:46Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:26:50Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:38:56Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2224', 'uid': 'a339795d-81a2-4fc4-8c17-453d4ee71345'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:01Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:49Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:50Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:56Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:39:58,751 DEBUG  , Thread-11, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-4r8p6
2023-04-01 23:39:59,500 INFO   , Thread-11, acto.py  :187, Trial 1 finished, completed in 00:15:29
2023-04-01 23:39:59,500 INFO   , Thread-11, acto.py  :188, ---------------------------------------

2023-04-01 23:39:59,519 DEBUG  , Thread-11, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-4r8p6
2023-04-01 23:40:02,808 INFO   , Thread-1, deploy.py:91, Operator ready
2023-04-01 23:40:02,808 INFO   , Thread-1, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:40:05,113 INFO   , Thread-2, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:40:10,612 WARNING, Thread-12, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:40:10,612 DEBUG  , Thread-12, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:40:13,924 INFO   , Thread-12, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:40:15,146 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-10
2023-04-01 23:40:16,284 INFO   , Thread-8, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:40:20,276 INFO   , Thread-3, runner.py:360, [trial: 2, gen: 1] System took 00:02:10 to converge
2023-04-01 23:40:20,278 DEBUG  , Thread-3, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:40:20,278 DEBUG  , Thread-3, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:40:20,395 DEBUG  , Thread-3, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:36:06Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:36:08Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:38:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:39:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1231', 'uid': '3556ff39-ba0d-4c44-9fdd-2d67a7c7bf8a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:36:06Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:36:06Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:39:20Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:40:20,422 DEBUG  , Thread-3, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-p5kfs
2023-04-01 23:40:20,793 DEBUG  , Thread-3, acto.py  :383, [trial: 2, gen: 1] Only one patch, no need to isolate
2023-04-01 23:40:20,793 INFO   , Thread-3, acto.py  :332, [trial: 2, gen: 1] Error result, running recovery
2023-04-01 23:40:20,793 DEBUG  , Thread-3, acto.py  :489, [trial: 2, gen: 1] Running recovery
2023-04-01 23:40:21,160 INFO   , Thread-3, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:40:26,194 INFO   , Thread-16, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:40:31,087 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:40:38,003 INFO   , Thread-5, runner.py:360, [trial: 2, gen: 0] System took 00:01:01 to converge
2023-04-01 23:40:38,004 DEBUG  , Thread-5, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:40:38,004 DEBUG  , Thread-5, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-01 23:40:38,128 DEBUG  , Thread-5, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:39:36Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:39:36Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:39:38Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1038', 'uid': '135d4ca8-cad1-49ff-9731-76abac2425e4'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:39:36Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:39:36Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:39:38Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:40:38,148 DEBUG  , Thread-5, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-w6crl
2023-04-01 23:40:38,278 WARNING, Thread-5, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:40:38,279 INFO   , Thread-5, input.py :723, [trial: 2, gen: 1] Progress [10] cases left
2023-04-01 23:40:38,279 DEBUG  , Thread-5, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:40:38,279 INFO   , Thread-5, acto.py  :263, [trial: 2, gen: 1] Precondition of ['spec', 'podEnvVariables'] satisfies
2023-04-01 23:40:38,279 INFO   , Thread-5, acto.py  :323, [trial: 2, gen: 1] Running bundled testcases
2023-04-01 23:40:38,279 DEBUG  , Thread-5, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:40:38,280 INFO   , Thread-5, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": []}]
2023-04-01 23:40:38,280 DEBUG  , Thread-5, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:40:38,635 INFO   , Thread-5, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:40:41,198 INFO   , Thread-14, runner.py:323, [trial: 1, gen: 5] Statefulset test-cluster is not ready yet
2023-04-01 23:40:42,943 WARNING, Thread-1, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:40:42,943 DEBUG  , Thread-1, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:40:45,700 INFO   , Thread-1, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:40:49,930 INFO   , Thread-13, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:40:50,275 INFO   , Thread-10, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:41:00,686 INFO   , Thread-11, base.py  :41, Created cluster
2023-04-01 23:41:00,700 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:41:14,056 INFO   , Thread-12, runner.py:360, [trial: 2, gen: 0] System took 00:01:00 to converge
2023-04-01 23:41:14,058 DEBUG  , Thread-12, runner.py:98, [trial: 2, gen: 0] STDOUT: 
2023-04-01 23:41:14,058 DEBUG  , Thread-12, runner.py:99, [trial: 2, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-11-0002/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.113.125:443: connect: connection refused

2023-04-01 23:41:14,159 DEBUG  , Thread-12, runner.py:177, [trial: 2, gen: 0] {}
2023-04-01 23:41:14,160 ERROR  , Thread-12, runner.py:107, [trial: 2, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:41:14,161 INFO   , Thread-12, checker.py:103, [trial: 2, gen: 0] Connection refused, reject mutation
2023-04-01 23:41:14,161 INFO   , Thread-12, acto.py  :472, [trial: 2, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-01 23:41:17,950 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:41:26,279 INFO   , Thread-16, runner.py:323, [trial: 1, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:41:27,142 ERROR  , Thread-14, runner.py:363, [trial: 1, gen: 5] System failed to converge within 600 seconds
2023-04-01 23:41:27,144 DEBUG  , Thread-14, runner.py:98, [trial: 1, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:41:27,144 DEBUG  , Thread-14, runner.py:99, [trial: 1, gen: 5] STDERR: 
2023-04-01 23:41:27,299 DEBUG  , Thread-14, runner.py:177, [trial: 1, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:53Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"httpPort":5,"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:47Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:29:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:httpPort': {}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:31:27Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1632', 'uid': 'de227de4-6863-4973-9ea2-5ad20fa43886'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 5, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:04Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:52Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:53Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:52Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:29:53Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[1].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[1].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T03:27:59Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:41:27,332 DEBUG  , Thread-14, runner.py:202, [trial: 1, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-8g8qs
2023-04-01 23:41:28,209 INFO   , Thread-14, checker.py:134, [trial: 1, gen: 5] Number of system state fields: [3476] Number of delta: [233]
2023-04-01 23:41:28,209 ERROR  , Thread-14, checker.py:561, [trial: 1, gen: 5] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:41:28,211 DEBUG  , Thread-14, acto.py  :489, [trial: 1, gen: 5] Running recovery
2023-04-01 23:41:28,280 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-01 23:41:28,280 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:41:31,183 INFO   , Thread-4, runner.py:323, [trial: 0, gen: 7] Statefulset test-cluster is not ready yet
2023-04-01 23:41:31,799 INFO   , Thread-14, runner.py:291, [trial: 1, gen: 5] Waiting for system to converge... 
2023-04-01 23:41:31,900 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:41:32,731 INFO   , Thread-3, runner.py:360, [trial: 2, gen: 1] System took 00:01:11 to converge
2023-04-01 23:41:32,732 DEBUG  , Thread-3, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:41:32,732 DEBUG  , Thread-3, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:41:32,883 DEBUG  , Thread-3, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:40:24Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:36:06Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:38:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:40:24Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:40:25Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1503', 'uid': '3556ff39-ba0d-4c44-9fdd-2d67a7c7bf8a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:40:35Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:40:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:40:24Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:39:20Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:40:30Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:41:32,918 DEBUG  , Thread-3, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-p5kfs
2023-04-01 23:41:33,285 DEBUG  , Thread-3, checker.py:728, [trial: 2, gen: 1] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [root['pod']['test-cluster-0'], root['pod']['test-cluster-1'], root['pod']['test-cluster-2'], root['stateful_set']['test-cluster'], root['service']['test-cluster'], root['service']['test-cluster-public'], root['pvc']['datadir-test-cluster-0'], root['pvc']['datadir-test-cluster-1'], root['pvc']['datadir-test-cluster-2'], root['pod_disruption_budget']['test-cluster'], root['secret']['test-cluster-ca'], root['secret']['test-cluster-node'], root['secret']['test-cluster-root']]}
2023-04-01 23:41:33,289 INFO   , Thread-3, acto.py  :187, Trial 2 finished, completed in 00:07:48
2023-04-01 23:41:33,289 INFO   , Thread-3, acto.py  :188, ---------------------------------------

2023-04-01 23:41:33,312 DEBUG  , Thread-3, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-p5kfs
2023-04-01 23:41:34,646 INFO   , Thread-12, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:41:40,783 INFO   , Thread-9, runner.py:360, [trial: 1, gen: 1] System took 00:02:15 to converge
2023-04-01 23:41:40,785 DEBUG  , Thread-9, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:41:40,785 DEBUG  , Thread-9, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:41:40,930 DEBUG  , Thread-9, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:28:13Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:28:09Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:28:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:39:25Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2118', 'uid': '4ecdb967-a920-4328-954b-486a5b7d4162'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:24Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:28:12Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:28:13Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:18Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:41:40,958 DEBUG  , Thread-9, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-nprqd
2023-04-01 23:41:41,634 INFO   , Thread-9, acto.py  :187, Trial 1 finished, completed in 00:15:46
2023-04-01 23:41:41,634 INFO   , Thread-9, acto.py  :188, ---------------------------------------

2023-04-01 23:41:41,657 DEBUG  , Thread-9, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-nprqd
2023-04-01 23:41:41,990 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-01 23:41:41,990 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:41:42,457 INFO   , Thread-6, runner.py:323, [trial: 1, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:41:47,108 INFO   , Thread-1, runner.py:360, [trial: 2, gen: 0] System took 00:01:01 to converge
2023-04-01 23:41:47,109 DEBUG  , Thread-1, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:41:47,109 DEBUG  , Thread-1, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-01 23:41:47,208 DEBUG  , Thread-1, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:40:45Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:40:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:40:48Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '912', 'uid': '36bb352c-75d7-4975-b8e9-745ea7b84838'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:40:45Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:40:45Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:40:48Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:41:47,231 DEBUG  , Thread-1, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-sf6wx
2023-04-01 23:41:47,472 WARNING, Thread-1, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:41:47,472 INFO   , Thread-1, input.py :723, [trial: 2, gen: 1] Progress [11] cases left
2023-04-01 23:41:47,472 DEBUG  , Thread-1, test_case.py:51, [trial: 2, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:41:47,472 INFO   , Thread-1, acto.py  :267, [trial: 2, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "configMapKeyRef"] fails, try setup first
2023-04-01 23:41:47,473 INFO   , Thread-1, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": true}}}]}]
2023-04-01 23:41:47,473 DEBUG  , Thread-1, test_case.py:51, [trial: 2, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:41:47,473 DEBUG  , Thread-1, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:41:47,810 INFO   , Thread-1, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:41:47,961 ERROR  , Thread-16, runner.py:363, [trial: 1, gen: 2] System failed to converge within 600 seconds
2023-04-01 23:41:47,965 DEBUG  , Thread-16, runner.py:98, [trial: 1, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:41:47,965 DEBUG  , Thread-16, runner.py:99, [trial: 1, gen: 2] STDERR: 
2023-04-01 23:41:48,108 DEBUG  , Thread-16, runner.py:177, [trial: 1, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:29:14Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"clientTLSSecret":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:29:11Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:29:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:clientTLSSecret': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:31:47Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1442', 'uid': '72a9fa79-33c0-4e6c-87f2-2fefaec4e579'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:29:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:14Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:29:15Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:29:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:41:48,134 DEBUG  , Thread-16, runner.py:202, [trial: 1, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-gmbpz
2023-04-01 23:41:48,764 INFO   , Thread-15, runner.py:360, [trial: 3, gen: 1] System took 00:02:32 to converge
2023-04-01 23:41:48,776 DEBUG  , Thread-15, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:41:48,781 DEBUG  , Thread-15, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-01 23:41:48,953 INFO   , Thread-16, checker.py:134, [trial: 1, gen: 2] Number of system state fields: [3040] Number of delta: [213]
2023-04-01 23:41:48,959 ERROR  , Thread-16, checker.py:561, [trial: 1, gen: 2] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:41:48,961 DEBUG  , Thread-16, acto.py  :489, [trial: 1, gen: 2] Running recovery
2023-04-01 23:41:49,052 INFO   , Thread-2, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:41:49,139 DEBUG  , Thread-15, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:39:18Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:37:11Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:39:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:39:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1416', 'uid': '9cf797be-904e-4b10-ac6a-c3171bbcc772'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:39:29Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:39:17Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:39:18Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:39:17Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:39:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:41:49,169 DEBUG  , Thread-15, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-m2trl
2023-04-01 23:41:49,353 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-2
2023-04-01 23:41:49,700 DEBUG  , Thread-15, checker.py:728, [trial: 3, gen: 1] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [root['pod']['test-cluster-0'], root['pod']['test-cluster-1'], root['pod']['test-cluster-2'], root['stateful_set']['test-cluster'], root['service']['test-cluster'], root['service']['test-cluster-public'], root['pvc']['datadir-test-cluster-0'], root['pvc']['datadir-test-cluster-1'], root['pvc']['datadir-test-cluster-2'], root['pod_disruption_budget']['test-cluster'], root['secret']['test-cluster-ca'], root['secret']['test-cluster-node'], root['secret']['test-cluster-root']]}
2023-04-01 23:41:49,704 INFO   , Thread-15, acto.py  :187, Trial 3 finished, completed in 00:08:20
2023-04-01 23:41:49,704 INFO   , Thread-15, acto.py  :188, ---------------------------------------

2023-04-01 23:41:49,729 DEBUG  , Thread-15, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-m2trl
2023-04-01 23:41:49,780 INFO   , Thread-5, runner.py:360, [trial: 2, gen: 1] System took 00:01:11 to converge
2023-04-01 23:41:49,782 DEBUG  , Thread-5, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:41:49,782 DEBUG  , Thread-5, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:41:49,924 DEBUG  , Thread-5, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:40:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:39:36Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:40:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:40:52Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1311', 'uid': '135d4ca8-cad1-49ff-9731-76abac2425e4'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:40:52Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:40:41Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:40:42Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:39:38Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:40:47Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:41:49,955 DEBUG  , Thread-5, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-w6crl
2023-04-01 23:41:50,140 INFO   , Thread-13, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:41:50,526 INFO   , Thread-5, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [3764] Number of delta: [1087]
2023-04-01 23:41:50,528 WARNING, Thread-5, schema.py:573, [trial: 2, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-01 23:41:50,528 INFO   , Thread-5, input.py :723, [trial: 2, gen: 2] Progress [9] cases left
2023-04-01 23:41:50,528 DEBUG  , Thread-5, test_case.py:51, [trial: 2, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-01 23:41:50,529 INFO   , Thread-5, acto.py  :267, [trial: 2, gen: 2] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "fieldRef", "fieldPath"] fails, try setup first
2023-04-01 23:41:50,529 INFO   , Thread-5, acto.py  :107, [trial: 2, gen: 2] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables/0", "value": {"name": "ACTOKEY", "valueFrom": {"fieldRef": {"fieldPath": "ACTOKEY"}}}}]
2023-04-01 23:41:50,529 DEBUG  , Thread-5, test_case.py:51, [trial: 2, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-01 23:41:50,529 DEBUG  , Thread-5, acto.py  :458, [trial: 2, gen: 2] Run and check
2023-04-01 23:41:50,910 INFO   , Thread-5, runner.py:291, [trial: 2, gen: 2] Waiting for system to converge... 
2023-04-01 23:41:51,077 INFO   , Thread-16, runner.py:291, [trial: 1, gen: 2] Waiting for system to converge... 
2023-04-01 23:41:58,134 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-8
2023-04-01 23:42:05,972 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-14
2023-04-01 23:42:22,122 WARNING, Thread-11, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:42:22,123 DEBUG  , Thread-11, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:42:24,737 INFO   , Thread-11, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:42:30,321 ERROR  , Thread-4, runner.py:363, [trial: 0, gen: 7] System failed to converge within 600 seconds
2023-04-01 23:42:30,323 DEBUG  , Thread-4, runner.py:98, [trial: 0, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:42:30,324 DEBUG  , Thread-4, runner.py:99, [trial: 0, gen: 7] STDERR: 
2023-04-01 23:42:30,455 DEBUG  , Thread-4, runner.py:177, [trial: 0, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:11:32Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","value":"ACTOKEY"}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"tolerations":[{}]}}\n'}, 'creationTimestamp': '2023-04-02T03:11:28Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:11:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:19:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3418', 'uid': 'fef30211-c4a2-4459-9db0-5c15f290fd0a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'value': 'ACTOKEY'}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'tolerations': [{}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:11:43Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:11:31Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:11:32Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:11:37Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:42:30,483 DEBUG  , Thread-4, runner.py:202, [trial: 0, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-5kvd9
2023-04-01 23:42:31,178 DEBUG  , Thread-4, checker.py:728, [trial: 0, gen: 7] failed attempt recovering to seed state - system state diff: {'dictionary_item_removed': [root['pod']['test-cluster-2']]}
2023-04-01 23:42:31,191 INFO   , Thread-4, acto.py  :187, Trial 0 finished, completed in 00:33:38
2023-04-01 23:42:31,191 INFO   , Thread-4, acto.py  :188, ---------------------------------------

2023-04-01 23:42:31,211 DEBUG  , Thread-4, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-5kvd9
2023-04-01 23:42:36,093 INFO   , Thread-12, runner.py:360, [trial: 2, gen: 0] System took 00:01:01 to converge
2023-04-01 23:42:36,095 DEBUG  , Thread-12, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:42:36,095 DEBUG  , Thread-12, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-01 23:42:36,201 DEBUG  , Thread-12, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:41:34Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:41:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:41:36Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1012', 'uid': '03ebf0f6-3f08-4e4c-89cd-a3f9e2bcbd90'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:41:34Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:41:34Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:41:36Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:42:36,223 DEBUG  , Thread-12, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-7zdkm
2023-04-01 23:42:36,322 WARNING, Thread-12, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:42:36,323 INFO   , Thread-12, input.py :723, [trial: 2, gen: 1] Progress [3] cases left
2023-04-01 23:42:36,324 DEBUG  , Thread-12, test_case.py:51, [trial: 2, gen: 1] Precondition [decrease_precondition] Result [True]
2023-04-01 23:42:36,324 INFO   , Thread-12, acto.py  :263, [trial: 2, gen: 1] Precondition of ['spec', 'resources', 'requests', 'cpu'] satisfies
2023-04-01 23:42:36,324 INFO   , Thread-12, acto.py  :323, [trial: 2, gen: 1] Running bundled testcases
2023-04-01 23:42:36,324 DEBUG  , Thread-12, test_case.py:51, [trial: 2, gen: 1] Precondition [decrease_precondition] Result [True]
2023-04-01 23:42:36,324 INFO   , Thread-12, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "replace", "path": "/spec/resources/requests/cpu", "value": "0.0500"}]
2023-04-01 23:42:36,324 DEBUG  , Thread-12, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:42:36,664 INFO   , Thread-12, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:42:36,817 INFO   , Thread-10, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:42:38,831 INFO   , Thread-3, base.py  :41, Created cluster
2023-04-01 23:42:38,846 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:42:42,545 INFO   , Thread-6, runner.py:323, [trial: 1, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:42:47,704 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-3
2023-04-01 23:42:48,911 INFO   , Thread-1, runner.py:360, [trial: 2, gen: 1] System took 00:01:01 to converge
2023-04-01 23:42:48,912 DEBUG  , Thread-1, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:42:48,912 DEBUG  , Thread-1, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:42:49,021 DEBUG  , Thread-1, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":true}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:40:45Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:40:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:41:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:41:49Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1015', 'uid': '36bb352c-75d7-4975-b8e9-745ea7b84838'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': True}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:40:45Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:40:45Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:41:49Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:42:49,044 DEBUG  , Thread-1, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-sf6wx
2023-04-01 23:42:49,247 INFO   , Thread-2, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:42:49,720 INFO   , Thread-1, common.py:569, [trial: 2, gen: 1] Recognized invalid input through field [name] in error message: User set image.name, using that field instead of cockroachDBVersion
2023-04-01 23:42:49,720 INFO   , Thread-1, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [1808] Number of delta: [151]
2023-04-01 23:42:49,721 INFO   , Thread-1, acto.py  :301, [trial: 2, gen: 1] Setup produced invalid input
2023-04-01 23:42:49,721 WARNING, Thread-1, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:42:49,721 DEBUG  , Thread-1, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:42:50,112 INFO   , Thread-1, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:42:50,234 INFO   , Thread-13, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:42:52,199 INFO   , Thread-9, base.py  :41, Created cluster
2023-04-01 23:42:52,212 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:42:52,338 INFO   , Thread-16, runner.py:360, [trial: 1, gen: 2] System took 00:01:01 to converge
2023-04-01 23:42:52,341 DEBUG  , Thread-16, runner.py:98, [trial: 1, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:42:52,341 DEBUG  , Thread-16, runner.py:99, [trial: 1, gen: 2] STDERR: 
2023-04-01 23:42:52,468 DEBUG  , Thread-16, runner.py:177, [trial: 1, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:29:14Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"clientTLSSecret":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:29:11Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:29:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:clientTLSSecret': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:41:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2389', 'uid': '72a9fa79-33c0-4e6c-87f2-2fefaec4e579'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:29:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:14Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:29:15Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:29:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:42:52,503 DEBUG  , Thread-16, runner.py:202, [trial: 1, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-gmbpz
2023-04-01 23:42:53,326 INFO   , Thread-16, acto.py  :187, Trial 1 finished, completed in 00:17:26
2023-04-01 23:42:53,326 INFO   , Thread-16, acto.py  :188, ---------------------------------------

2023-04-01 23:42:53,348 DEBUG  , Thread-16, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-gmbpz
2023-04-01 23:42:55,581 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:42:57,822 INFO   , Thread-14, runner.py:360, [trial: 1, gen: 5] System took 00:01:26 to converge
2023-04-01 23:42:57,824 DEBUG  , Thread-14, runner.py:98, [trial: 1, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:42:57,824 DEBUG  , Thread-14, runner.py:99, [trial: 1, gen: 5] STDERR: 
2023-04-01 23:42:57,971 DEBUG  , Thread-14, runner.py:177, [trial: 1, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:53Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:25:47Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:29:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:41:31Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2620', 'uid': 'de227de4-6863-4973-9ea2-5ad20fa43886'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:28:04Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:52Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:53Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:52Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:29:53Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[1].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[1].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T03:27:59Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:42:57,999 DEBUG  , Thread-14, runner.py:202, [trial: 1, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-8g8qs
2023-04-01 23:42:58,742 INFO   , Thread-14, acto.py  :187, Trial 1 finished, completed in 00:19:38
2023-04-01 23:42:58,743 INFO   , Thread-14, acto.py  :188, ---------------------------------------

2023-04-01 23:42:58,759 DEBUG  , Thread-14, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-8g8qs
2023-04-01 23:43:02,064 INFO   , Thread-15, base.py  :41, Created cluster
2023-04-01 23:43:02,075 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:43:05,774 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-01 23:43:05,774 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:43:07,930 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:43:08,459 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-15
2023-04-01 23:43:08,933 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:43:14,558 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-13
2023-04-01 23:43:18,016 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-01 23:43:18,016 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:43:18,449 DEBUG  , Thread-15, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:43:19,007 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-01 23:43:19,008 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:43:21,500 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:43:28,532 INFO   , Thread-15, deploy.py:91, Operator ready
2023-04-01 23:43:28,533 INFO   , Thread-15, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:43:30,479 DEBUG  , Thread-15, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:43:31,597 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-01 23:43:31,597 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:43:36,700 INFO   , Thread-11, runner.py:360, [trial: 2, gen: 0] System took 00:01:11 to converge
2023-04-01 23:43:36,702 DEBUG  , Thread-11, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:43:36,702 DEBUG  , Thread-11, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-01 23:43:36,937 INFO   , Thread-10, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:43:36,944 DEBUG  , Thread-11, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:42:28Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:42:24Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:42:24Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:42:39Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1078', 'uid': 'ae14b5ba-5df9-4abc-83f7-4b358a5c5c45'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:42:39Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:42:27Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:42:29Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:42:34Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:43:36,973 DEBUG  , Thread-11, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-7prrm
2023-04-01 23:43:37,173 WARNING, Thread-11, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:43:37,173 INFO   , Thread-11, input.py :723, [trial: 2, gen: 1] Progress [18] cases left
2023-04-01 23:43:37,173 DEBUG  , Thread-11, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:43:37,173 INFO   , Thread-11, acto.py  :263, [trial: 2, gen: 1] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom', 'configMapKeyRef', 'name'] satisfies
2023-04-01 23:43:37,174 INFO   , Thread-11, acto.py  :323, [trial: 2, gen: 1] Running bundled testcases
2023-04-01 23:43:37,174 DEBUG  , Thread-11, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:43:37,174 INFO   , Thread-11, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": ""}}}]}]
2023-04-01 23:43:37,174 DEBUG  , Thread-11, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:43:37,529 INFO   , Thread-11, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:43:40,571 INFO   , Thread-15, deploy.py:91, Operator ready
2023-04-01 23:43:40,571 INFO   , Thread-15, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:43:42,640 INFO   , Thread-6, runner.py:323, [trial: 1, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:43:42,980 INFO   , Thread-4, base.py  :41, Created cluster
2023-04-01 23:43:42,994 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:43:46,090 INFO   , Thread-7, runner.py:323, [trial: 1, gen: 9] Statefulset test-cluster is not ready yet
2023-04-01 23:43:49,333 INFO   , Thread-2, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:43:49,363 INFO   , Thread-12, runner.py:360, [trial: 2, gen: 1] System took 00:01:12 to converge
2023-04-01 23:43:49,364 DEBUG  , Thread-12, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:43:49,364 DEBUG  , Thread-12, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:43:49,506 DEBUG  , Thread-12, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:42:40Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"0.0500","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:41:34Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:41:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:42:40Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:42:40Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1283', 'uid': '03ebf0f6-3f08-4e4c-89cd-a3f9e2bcbd90'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '50m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:42:51Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:42:39Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:42:40Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:41:36Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:42:45Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:43:49,535 DEBUG  , Thread-12, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-7zdkm
2023-04-01 23:43:49,964 DEBUG  , Thread-12, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'resources', 'requests', 'cpu']] matched with [['test-cluster-0', 'spec', 'containers', 0, 'resources', 'requests', 'cpu']]
2023-04-01 23:43:49,965 DEBUG  , Thread-12, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'resources', 'requests', 'cpu']] matched with [['test-cluster-1', 'spec', 'containers', 0, 'resources', 'requests', 'cpu']]
2023-04-01 23:43:49,965 DEBUG  , Thread-12, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'resources', 'requests', 'cpu']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'resources', 'requests', 'cpu']]
2023-04-01 23:43:49,966 DEBUG  , Thread-12, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'resources', 'requests', 'cpu']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'requests', 'cpu']]
2023-04-01 23:43:50,098 INFO   , Thread-12, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [3764] Number of delta: [1088]
2023-04-01 23:43:50,100 WARNING, Thread-12, schema.py:573, [trial: 2, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-01 23:43:50,101 INFO   , Thread-12, input.py :723, [trial: 2, gen: 2] Progress [2] cases left
2023-04-01 23:43:50,101 DEBUG  , Thread-12, test_case.py:51, [trial: 2, gen: 2] Precondition [increase_precondition] Result [True]
2023-04-01 23:43:50,101 INFO   , Thread-12, acto.py  :263, [trial: 2, gen: 2] Precondition of ['spec', 'resources', 'limits', 'cpu'] satisfies
2023-04-01 23:43:50,101 INFO   , Thread-12, acto.py  :323, [trial: 2, gen: 2] Running bundled testcases
2023-04-01 23:43:50,101 DEBUG  , Thread-12, test_case.py:51, [trial: 2, gen: 2] Precondition [increase_precondition] Result [True]
2023-04-01 23:43:50,102 INFO   , Thread-12, acto.py  :107, [trial: 2, gen: 2] JSON patch: [{"op": "replace", "path": "/spec/resources/limits/cpu", "value": "4"}]
2023-04-01 23:43:50,102 DEBUG  , Thread-12, acto.py  :458, [trial: 2, gen: 2] Run and check
2023-04-01 23:43:50,315 INFO   , Thread-13, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:43:50,415 INFO   , Thread-12, runner.py:291, [trial: 2, gen: 2] Waiting for system to converge... 
2023-04-01 23:43:56,561 INFO   , Thread-16, base.py  :41, Created cluster
2023-04-01 23:43:56,578 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:43:58,133 WARNING, Thread-3, schema.py:573, [trial: 3, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:43:58,134 DEBUG  , Thread-3, acto.py  :458, [trial: 3, gen: 0] Run and check
2023-04-01 23:43:59,972 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:44:00,772 INFO   , Thread-3, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-01 23:44:08,307 INFO   , Thread-14, base.py  :41, Created cluster
2023-04-01 23:44:08,318 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:44:10,164 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-01 23:44:10,164 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:44:11,729 WARNING, Thread-9, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:44:11,729 DEBUG  , Thread-9, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:44:12,167 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:44:13,742 DEBUG  , Thread-16, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:44:14,422 INFO   , Thread-9, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:44:16,080 ERROR  , Thread-13, runner.py:363, [trial: 1, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:44:16,083 DEBUG  , Thread-13, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:44:16,083 DEBUG  , Thread-13, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:44:16,206 DEBUG  , Thread-13, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:33:07Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:33:02Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:33:07Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:33:08Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:34:16Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1317', 'uid': '9b047ef5-4448-4979-9c4d-6e7f644fe5ca'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:33:18Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:33:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:33:07Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:33:06Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:33:13Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:44:16,233 DEBUG  , Thread-13, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-wkgt5
2023-04-01 23:44:16,973 INFO   , Thread-13, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [3041] Number of delta: [211]
2023-04-01 23:44:16,974 ERROR  , Thread-13, checker.py:561, [trial: 1, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:44:16,975 INFO   , Thread-13, acto.py  :332, [trial: 1, gen: 1] Error result, running recovery
2023-04-01 23:44:16,975 DEBUG  , Thread-13, acto.py  :489, [trial: 1, gen: 1] Running recovery
2023-04-01 23:44:18,772 INFO   , Thread-5, runner.py:323, [trial: 2, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:44:19,000 INFO   , Thread-13, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:44:20,690 WARNING, Thread-15, schema.py:573, [trial: 4, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:44:20,691 DEBUG  , Thread-15, acto.py  :458, [trial: 4, gen: 0] Run and check
2023-04-01 23:44:22,368 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-01 23:44:22,368 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:44:23,223 INFO   , Thread-15, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-01 23:44:23,823 INFO   , Thread-16, deploy.py:91, Operator ready
2023-04-01 23:44:23,823 INFO   , Thread-16, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:44:25,230 DEBUG  , Thread-14, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:44:25,934 DEBUG  , Thread-16, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:44:35,310 INFO   , Thread-14, deploy.py:91, Operator ready
2023-04-01 23:44:35,310 INFO   , Thread-14, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:44:36,019 INFO   , Thread-16, deploy.py:91, Operator ready
2023-04-01 23:44:36,019 INFO   , Thread-16, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:44:37,023 INFO   , Thread-10, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:44:37,341 DEBUG  , Thread-14, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:44:42,723 INFO   , Thread-6, runner.py:323, [trial: 1, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:44:47,420 INFO   , Thread-14, deploy.py:91, Operator ready
2023-04-01 23:44:47,420 INFO   , Thread-14, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:44:49,418 INFO   , Thread-2, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:45:02,078 INFO   , Thread-3, runner.py:360, [trial: 3, gen: 0] System took 00:01:01 to converge
2023-04-01 23:45:02,079 DEBUG  , Thread-3, runner.py:98, [trial: 3, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:45:02,079 DEBUG  , Thread-3, runner.py:99, [trial: 3, gen: 0] STDERR: 
2023-04-01 23:45:02,178 DEBUG  , Thread-3, runner.py:177, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:00Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:44:00Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:44:02Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '895', 'uid': 'ce182198-dae0-4663-8b16-134e3eacc71d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:44:00Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:44:00Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:02Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:45:02,196 DEBUG  , Thread-3, runner.py:202, [trial: 3, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-zvcns
2023-04-01 23:45:02,312 WARNING, Thread-3, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:45:02,313 INFO   , Thread-3, input.py :723, [trial: 3, gen: 1] Progress [17] cases left
2023-04-01 23:45:02,318 DEBUG  , Thread-3, test_case.py:46, [trial: 3, gen: 1] Precondition [precondition] Result [False]
2023-04-01 23:45:02,318 DEBUG  , Thread-3, test_case.py:51, [trial: 3, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:45:02,318 INFO   , Thread-3, acto.py  :267, [trial: 3, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "resourceFieldRef", "divisor"] fails, try setup first
2023-04-01 23:45:02,319 INFO   , Thread-3, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {"resource": "ACTOKEY", "divisor": 4}}}]}]
2023-04-01 23:45:02,320 DEBUG  , Thread-3, test_case.py:46, [trial: 3, gen: 1] Precondition [precondition] Result [True]
2023-04-01 23:45:02,320 DEBUG  , Thread-3, test_case.py:51, [trial: 3, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:45:02,320 DEBUG  , Thread-3, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-01 23:45:02,575 WARNING, Thread-4, schema.py:573, [trial: 1, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:45:02,575 DEBUG  , Thread-4, acto.py  :458, [trial: 1, gen: 0] Run and check
2023-04-01 23:45:02,664 INFO   , Thread-3, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-01 23:45:05,108 INFO   , Thread-4, runner.py:291, [trial: 1, gen: 0] Waiting for system to converge... 
2023-04-01 23:45:11,137 ERROR  , Thread-2, runner.py:363, [trial: 1, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:45:11,140 DEBUG  , Thread-2, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:45:11,140 DEBUG  , Thread-2, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:45:11,273 DEBUG  , Thread-2, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:34:02Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"topologySpreadConstraints":[{"labelSelector":{"matchExpressions":[{"key":"ACTOKEY","operator":"ACTOKEY","values":[]},{"key":"ACTOKEY","operator":"ACTOKEY","values":["ACTOKEY","ACTOKEY"]},{"key":"ACTOKEY","operator":"ACTOKEY","values":["ACTOKEY","ACTOKEY","ACTOKEY","ACTOKEY"]}],"matchLabels":{"ACTOKEY":"ACTOKEY"}},"maxSkew":1,"topologyKey":"ACTOKEY","whenUnsatisfiable":"ACTOKEY"},{"labelSelector":{"matchExpressions":[{"key":"ACTOKEY","operator":"ACTOKEY","values":[]}],"matchLabels":{"ACTOKEY":"ACTOKEY"}},"maxSkew":4,"topologyKey":"ACTOKEY","whenUnsatisfiable":"ACTOKEY"},{"labelSelector":{"matchExpressions":[{"key":"ACTOKEY","operator":"ACTOKEY","values":null},{"key":"ACTOKEY","operator":"ACTOKEY","values":null},{"key":"ACTOKEY","operator":"ACTOKEY","values":["ACTOKEY","ACTOKEY","ACTOKEY","ACTOKEY"]},{"key":"ACTOKEY","operator":"ACTOKEY","values":["ACTOKEY","ACTOKEY","ACTOKEY","ACTOKEY","ACTOKEY"]},{"key":"ACTOKEY","operator":"ACTOKEY","values":null}],"matchLabels":{"ACTOKEY":"ACTOKEY"}},"maxSkew":4,"topologyKey":"ACTOKEY","whenUnsatisfiable":"ACTOKEY"},{"labelSelector":null,"maxSkew":3,"topologyKey":"ACTOKEY","whenUnsatisfiable":"ACTOKEY"}]}}\n'}, 'creationTimestamp': '2023-04-02T03:33:59Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:34:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:topologySpreadConstraints': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:35:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1192', 'uid': 'ad2ba097-afd8-493a-92bf-563fae4d7c6f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'topologySpreadConstraints': [{'labelSelector': {'matchExpressions': [{'key': 'ACTOKEY', 'operator': 'ACTOKEY'}, {'key': 'ACTOKEY', 'operator': 'ACTOKEY', 'values': ['ACTOKEY', 'ACTOKEY']}, {'key': 'ACTOKEY', 'operator': 'ACTOKEY', 'values': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY', 'ACTOKEY']}], 'matchLabels': {'ACTOKEY': 'ACTOKEY'}}, 'maxSkew': 1, 'topologyKey': 'ACTOKEY', 'whenUnsatisfiable': 'ACTOKEY'}, {'labelSelector': {'matchExpressions': [{'key': 'ACTOKEY', 'operator': 'ACTOKEY'}], 'matchLabels': {'ACTOKEY': 'ACTOKEY'}}, 'maxSkew': 4, 'topologyKey': 'ACTOKEY', 'whenUnsatisfiable': 'ACTOKEY'}, {'labelSelector': {'matchExpressions': [{'key': 'ACTOKEY', 'operator': 'ACTOKEY'}, {'key': 'ACTOKEY', 'operator': 'ACTOKEY'}, {'key': 'ACTOKEY', 'operator': 'ACTOKEY', 'values': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY', 'ACTOKEY']}, {'key': 'ACTOKEY', 'operator': 'ACTOKEY', 'values': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY', 'ACTOKEY', 'ACTOKEY']}, {'key': 'ACTOKEY', 'operator': 'ACTOKEY'}], 'matchLabels': {'ACTOKEY': 'ACTOKEY'}}, 'maxSkew': 4, 'topologyKey': 'ACTOKEY', 'whenUnsatisfiable': 'ACTOKEY'}, {'maxSkew': 3, 'topologyKey': 'ACTOKEY', 'whenUnsatisfiable': 'ACTOKEY'}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:34:13Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:34:01Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:34:03Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:34:08Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:45:11,300 DEBUG  , Thread-2, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-9kzwj
2023-04-01 23:45:11,988 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 0, 'labelSelector', 'matchLabels', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 0, 'label_selector', 'match_labels', 'ACTOKEY']]
2023-04-01 23:45:11,989 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 0, 'maxSkew']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 0, 'max_skew']]
2023-04-01 23:45:11,990 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 0, 'topologyKey']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 0, 'topology_key']]
2023-04-01 23:45:11,991 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 0, 'whenUnsatisfiable']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 0, 'when_unsatisfiable']]
2023-04-01 23:45:12,026 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 1, 'labelSelector', 'matchLabels', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 1, 'label_selector', 'match_labels', 'ACTOKEY']]
2023-04-01 23:45:12,027 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 1, 'maxSkew']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 1, 'max_skew']]
2023-04-01 23:45:12,028 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 1, 'topologyKey']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 1, 'topology_key']]
2023-04-01 23:45:12,030 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 1, 'whenUnsatisfiable']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 1, 'when_unsatisfiable']]
2023-04-01 23:45:12,364 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 2, 'labelSelector', 'matchLabels', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 2, 'label_selector', 'match_labels', 'ACTOKEY']]
2023-04-01 23:45:12,365 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 2, 'maxSkew']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 2, 'max_skew']]
2023-04-01 23:45:12,367 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 2, 'topologyKey']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 2, 'topology_key']]
2023-04-01 23:45:12,368 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 2, 'whenUnsatisfiable']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 2, 'when_unsatisfiable']]
2023-04-01 23:45:12,369 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 3, 'maxSkew']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 3, 'max_skew']]
2023-04-01 23:45:12,370 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 3, 'topologyKey']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 3, 'topology_key']]
2023-04-01 23:45:12,371 DEBUG  , Thread-2, checker.py:278, [trial: 1, gen: 1] Input delta [['spec', 'topologySpreadConstraints', 3, 'whenUnsatisfiable']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 3, 'when_unsatisfiable']]
2023-04-01 23:45:12,561 INFO   , Thread-2, common.py:569, [trial: 1, gen: 1] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-01 23:45:12,562 INFO   , Thread-2, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [3114] Number of delta: [451]
2023-04-01 23:45:12,562 ERROR  , Thread-2, checker.py:561, [trial: 1, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:45:12,564 DEBUG  , Thread-2, acto.py  :489, [trial: 1, gen: 1] Running recovery
2023-04-01 23:45:14,498 INFO   , Thread-2, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:45:16,147 WARNING, Thread-16, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:45:16,147 DEBUG  , Thread-16, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:45:16,198 INFO   , Thread-9, runner.py:360, [trial: 2, gen: 0] System took 00:01:01 to converge
2023-04-01 23:45:16,200 DEBUG  , Thread-9, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:45:16,200 DEBUG  , Thread-9, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-01 23:45:16,305 DEBUG  , Thread-9, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:14Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:44:14Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:44:16Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '918', 'uid': '5aa26381-a087-4f0d-88d6-fbe07e6d2d68'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:44:14Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:44:14Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:16Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:45:16,338 DEBUG  , Thread-9, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-jp7j2
2023-04-01 23:45:16,537 WARNING, Thread-9, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:45:16,538 INFO   , Thread-9, input.py :723, [trial: 2, gen: 1] Progress [18] cases left
2023-04-01 23:45:16,538 DEBUG  , Thread-9, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:45:16,538 INFO   , Thread-9, acto.py  :263, [trial: 2, gen: 1] Precondition of ['spec', 'nodeTLSSecret'] satisfies
2023-04-01 23:45:16,538 INFO   , Thread-9, acto.py  :323, [trial: 2, gen: 1] Running bundled testcases
2023-04-01 23:45:16,538 DEBUG  , Thread-9, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:45:16,538 INFO   , Thread-9, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "add", "path": "/spec/nodeTLSSecret", "value": ""}]
2023-04-01 23:45:16,539 DEBUG  , Thread-9, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:45:16,943 INFO   , Thread-9, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:45:18,748 INFO   , Thread-16, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:45:20,230 INFO   , Thread-13, runner.py:360, [trial: 1, gen: 1] System took 00:01:01 to converge
2023-04-01 23:45:20,231 DEBUG  , Thread-13, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:45:20,231 DEBUG  , Thread-13, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:45:20,371 DEBUG  , Thread-13, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:33:07Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:33:02Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:33:08Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:44:18Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2261', 'uid': '9b047ef5-4448-4979-9c4d-6e7f644fe5ca'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:33:18Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:33:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:33:07Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:33:06Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:33:13Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:45:20,397 DEBUG  , Thread-13, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-wkgt5
2023-04-01 23:45:21,091 INFO   , Thread-13, acto.py  :187, Trial 1 finished, completed in 00:16:03
2023-04-01 23:45:21,091 INFO   , Thread-13, acto.py  :188, ---------------------------------------

2023-04-01 23:45:21,115 DEBUG  , Thread-13, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-wkgt5
2023-04-01 23:45:22,322 INFO   , Thread-1, runner.py:360, [trial: 2, gen: 1] System took 00:02:32 to converge
2023-04-01 23:45:22,323 DEBUG  , Thread-1, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:45:22,323 DEBUG  , Thread-1, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:45:22,482 DEBUG  , Thread-1, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:42:53Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:40:45Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:42:50Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:42:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:42:54Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1287', 'uid': '36bb352c-75d7-4975-b8e9-745ea7b84838'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:43:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:42:52Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:42:54Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:41:49Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:42:59Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:45:22,511 DEBUG  , Thread-1, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-sf6wx
2023-04-01 23:45:23,040 INFO   , Thread-1, acto.py  :321, [trial: 2, gen: 1] All setups failed
2023-04-01 23:45:23,040 WARNING, Thread-1, schema.py:573, [trial: 2, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:45:23,040 INFO   , Thread-1, input.py :723, [trial: 2, gen: 3] Progress [10] cases left
2023-04-01 23:45:23,041 INFO   , Thread-1, acto.py  :187, Trial 2 finished, completed in 00:06:59
2023-04-01 23:45:23,041 INFO   , Thread-1, acto.py  :188, ---------------------------------------

2023-04-01 23:45:23,067 DEBUG  , Thread-1, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-sf6wx
2023-04-01 23:45:23,346 INFO   , Thread-15, runner.py:360, [trial: 4, gen: 0] System took 00:01:00 to converge
2023-04-01 23:45:23,347 DEBUG  , Thread-15, runner.py:98, [trial: 4, gen: 0] STDOUT: 
2023-04-01 23:45:23,347 DEBUG  , Thread-15, runner.py:99, [trial: 4, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-14-0004/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.130.12:443: connect: connection refused

2023-04-01 23:45:23,448 DEBUG  , Thread-15, runner.py:177, [trial: 4, gen: 0] {}
2023-04-01 23:45:23,448 ERROR  , Thread-15, runner.py:107, [trial: 4, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:45:23,449 INFO   , Thread-15, checker.py:103, [trial: 4, gen: 0] Connection refused, reject mutation
2023-04-01 23:45:23,449 INFO   , Thread-15, acto.py  :472, [trial: 4, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-01 23:45:27,548 WARNING, Thread-14, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:45:27,549 DEBUG  , Thread-14, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:45:30,149 INFO   , Thread-14, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:45:33,099 INFO   , Thread-1, common.py:629, Trial testrun-crdb-whitebox/trial-00-0002 completed without error
2023-04-01 23:45:36,514 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-12
2023-04-01 23:45:37,115 INFO   , Thread-10, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:45:40,677 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-0
2023-04-01 23:45:40,710 INFO   , Thread-5, runner.py:323, [trial: 2, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:45:42,033 INFO   , Thread-12, runner.py:360, [trial: 2, gen: 2] System took 00:01:51 to converge
2023-04-01 23:45:42,034 DEBUG  , Thread-12, runner.py:98, [trial: 2, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:45:42,035 DEBUG  , Thread-12, runner.py:99, [trial: 2, gen: 2] STDERR: 
2023-04-01 23:45:42,185 DEBUG  , Thread-12, runner.py:177, [trial: 2, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:42:40Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":"4","memory":"2Gi"},"requests":{"cpu":"0.0500","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:41:34Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:41:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:42:40Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:42:40Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1398', 'uid': '03ebf0f6-3f08-4e4c-89cd-a3f9e2bcbd90'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '4', 'memory': '2Gi'}, 'requests': {'cpu': '50m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:42:51Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:42:39Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:42:40Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:41:36Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:42:45Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:45:42,213 DEBUG  , Thread-12, runner.py:202, [trial: 2, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-7zdkm
2023-04-01 23:45:42,891 INFO   , Thread-6, runner.py:323, [trial: 1, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:45:42,947 DEBUG  , Thread-12, checker.py:278, [trial: 2, gen: 2] Input delta [['spec', 'resources', 'limits', 'cpu']] matched with [['test-cluster-1', 'spec', 'containers', 0, 'resources', 'limits', 'cpu']]
2023-04-01 23:45:42,948 DEBUG  , Thread-12, checker.py:278, [trial: 2, gen: 2] Input delta [['spec', 'resources', 'limits', 'cpu']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'resources', 'limits', 'cpu']]
2023-04-01 23:45:42,948 DEBUG  , Thread-12, checker.py:278, [trial: 2, gen: 2] Input delta [['spec', 'resources', 'limits', 'cpu']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'limits', 'cpu']]
2023-04-01 23:45:43,179 INFO   , Thread-12, checker.py:134, [trial: 2, gen: 2] Number of system state fields: [3771] Number of delta: [89]
2023-04-01 23:45:43,180 WARNING, Thread-12, schema.py:573, [trial: 2, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:45:43,181 INFO   , Thread-12, input.py :723, [trial: 2, gen: 3] Progress [1] cases left
2023-04-01 23:45:43,181 DEBUG  , Thread-12, test_case.py:51, [trial: 2, gen: 3] Precondition [decrease_precondition] Result [True]
2023-04-01 23:45:43,181 INFO   , Thread-12, acto.py  :263, [trial: 2, gen: 3] Precondition of ['spec', 'resources', 'limits', 'cpu'] satisfies
2023-04-01 23:45:43,181 INFO   , Thread-12, acto.py  :323, [trial: 2, gen: 3] Running bundled testcases
2023-04-01 23:45:43,182 DEBUG  , Thread-12, test_case.py:51, [trial: 2, gen: 3] Precondition [decrease_precondition] Result [True]
2023-04-01 23:45:43,182 INFO   , Thread-12, acto.py  :107, [trial: 2, gen: 3] JSON patch: [{"op": "replace", "path": "/spec/resources/limits/cpu", "value": "2.0"}]
2023-04-01 23:45:43,182 DEBUG  , Thread-12, acto.py  :458, [trial: 2, gen: 3] Run and check
2023-04-01 23:45:43,564 INFO   , Thread-12, runner.py:291, [trial: 2, gen: 3] Waiting for system to converge... 
2023-04-01 23:45:43,915 INFO   , Thread-15, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-01 23:46:04,777 ERROR  , Thread-7, runner.py:363, [trial: 1, gen: 9] System failed to converge within 600 seconds
2023-04-01 23:46:04,780 DEBUG  , Thread-7, runner.py:98, [trial: 1, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:46:04,781 DEBUG  , Thread-7, runner.py:99, [trial: 1, gen: 9] STDERR: 
2023-04-01 23:46:04,938 DEBUG  , Thread-7, runner.py:177, [trial: 1, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodeSelector":{"ACTOKEY":"ACTOKEY"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:41Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:ui': {'f:annotations': {}}}, 'f:nodeSelector': {'.': {}, 'f:ACTOKEY': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:36:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1924', 'uid': '2252b008-f015-4569-89b0-7c8b4e909408'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodeSelector': {'ACTOKEY': 'ACTOKEY'}, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:26:56Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:32:27Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-01 23:46:04,963 DEBUG  , Thread-7, runner.py:202, [trial: 1, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-pqp5r
2023-04-01 23:46:05,572 DEBUG  , Thread-7, checker.py:278, [trial: 1, gen: 9] Input delta [['spec', 'nodeSelector', 'ACTOKEY']] matched with [['test-cluster-2', 'spec', 'node_selector', 'ACTOKEY']]
2023-04-01 23:46:05,572 DEBUG  , Thread-7, checker.py:278, [trial: 1, gen: 9] Input delta [['spec', 'nodeSelector', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'template', 'spec', 'node_selector', 'ACTOKEY']]
2023-04-01 23:46:05,776 INFO   , Thread-7, checker.py:134, [trial: 1, gen: 9] Number of system state fields: [3399] Number of delta: [91]
2023-04-01 23:46:05,776 ERROR  , Thread-7, checker.py:561, [trial: 1, gen: 9] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:46:05,776 ERROR  , Thread-7, checker.py:561, [trial: 1, gen: 9] Found pod: test-cluster-2 with unhealthy status
2023-04-01 23:46:05,777 DEBUG  , Thread-7, acto.py  :489, [trial: 1, gen: 9] Running recovery
2023-04-01 23:46:07,695 INFO   , Thread-7, runner.py:291, [trial: 1, gen: 9] Waiting for system to converge... 
2023-04-01 23:46:09,465 INFO   , Thread-11, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:46:15,923 INFO   , Thread-4, runner.py:360, [trial: 1, gen: 0] System took 00:01:10 to converge
2023-04-01 23:46:15,925 DEBUG  , Thread-4, runner.py:98, [trial: 1, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:46:15,925 DEBUG  , Thread-4, runner.py:99, [trial: 1, gen: 0] STDERR: 
2023-04-01 23:46:16,079 DEBUG  , Thread-4, runner.py:177, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:45:05Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:45:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:45:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1069', 'uid': '05703de4-390e-4fa3-b90e-898cc20a876a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:46:16,108 DEBUG  , Thread-4, runner.py:202, [trial: 1, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-h9bj2
2023-04-01 23:46:16,312 WARNING, Thread-4, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:46:16,313 INFO   , Thread-4, input.py :723, [trial: 1, gen: 1] Progress [15] cases left
2023-04-01 23:46:16,314 DEBUG  , Thread-4, test_case.py:51, [trial: 1, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:46:16,314 INFO   , Thread-4, acto.py  :267, [trial: 1, gen: 1] Precondition of ["spec", "tolerations"] fails, try setup first
2023-04-01 23:46:16,314 INFO   , Thread-4, acto.py  :107, [trial: 1, gen: 1] JSON patch: [{"op": "add", "path": "/spec/tolerations", "value": [{"key": "test-key", "operator": "Equal", "value": "test-value", "effect": "NoSchedule"}, {"key": "node-role.kubernetes.io/control-plane", "operator": "Exists", "effect": "NoSchedule"}]}]
2023-04-01 23:46:16,314 DEBUG  , Thread-4, test_case.py:51, [trial: 1, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:46:16,315 DEBUG  , Thread-4, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:46:16,363 INFO   , Thread-2, runner.py:360, [trial: 1, gen: 1] System took 00:01:01 to converge
2023-04-01 23:46:16,366 DEBUG  , Thread-2, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:46:16,366 DEBUG  , Thread-2, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:46:16,598 DEBUG  , Thread-2, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:34:02Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:33:59Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:34:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:45:14Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2140', 'uid': 'ad2ba097-afd8-493a-92bf-563fae4d7c6f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:34:13Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:34:01Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:34:03Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:34:08Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:46:16,626 DEBUG  , Thread-2, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-9kzwj
2023-04-01 23:46:16,684 INFO   , Thread-4, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:46:17,166 ERROR  , Thread-10, runner.py:363, [trial: 1, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:46:17,195 DEBUG  , Thread-10, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:46:17,200 DEBUG  , Thread-10, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:46:17,396 INFO   , Thread-2, acto.py  :187, Trial 1 finished, completed in 00:14:40
2023-04-01 23:46:17,402 INFO   , Thread-2, acto.py  :188, ---------------------------------------

2023-04-01 23:46:17,441 DEBUG  , Thread-2, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-9kzwj
2023-04-01 23:46:17,522 DEBUG  , Thread-10, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:36:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxSQLMemory":"ACTOKEY","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:35:15Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxSQLMemory': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:36:17Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:36:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:36:21Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2288', 'uid': '85a29493-b14c-4b66-8941-f5de59767251'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxSQLMemory': 'ACTOKEY', 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:35:15Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:36:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:36:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:35:17Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:46:14Z', 'message': 'pod has not completely started', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:46:17,548 DEBUG  , Thread-10, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-ttvw5
2023-04-01 23:46:18,527 INFO   , Thread-10, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [3482] Number of delta: [1258]
2023-04-01 23:46:18,527 ERROR  , Thread-10, checker.py:561, [trial: 1, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [None] with unhealthy status
2023-04-01 23:46:18,527 DEBUG  , Thread-10, acto.py  :489, [trial: 1, gen: 1] Running recovery
2023-04-01 23:46:18,892 INFO   , Thread-16, runner.py:360, [trial: 2, gen: 0] System took 00:01:00 to converge
2023-04-01 23:46:18,892 DEBUG  , Thread-16, runner.py:98, [trial: 2, gen: 0] STDOUT: 
2023-04-01 23:46:18,892 DEBUG  , Thread-16, runner.py:99, [trial: 2, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-15-0002/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.149.246:443: connect: connection refused

2023-04-01 23:46:18,990 DEBUG  , Thread-16, runner.py:177, [trial: 2, gen: 0] {}
2023-04-01 23:46:18,990 ERROR  , Thread-16, runner.py:107, [trial: 2, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:46:18,991 INFO   , Thread-16, checker.py:103, [trial: 2, gen: 0] Connection refused, reject mutation
2023-04-01 23:46:18,991 INFO   , Thread-16, acto.py  :472, [trial: 2, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-01 23:46:20,549 INFO   , Thread-10, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:46:30,284 INFO   , Thread-14, runner.py:360, [trial: 2, gen: 0] System took 00:01:00 to converge
2023-04-01 23:46:30,285 DEBUG  , Thread-14, runner.py:98, [trial: 2, gen: 0] STDOUT: 
2023-04-01 23:46:30,285 DEBUG  , Thread-14, runner.py:99, [trial: 2, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-13-0002/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.114.36:443: connect: connection refused

2023-04-01 23:46:30,373 DEBUG  , Thread-14, runner.py:177, [trial: 2, gen: 0] {}
2023-04-01 23:46:30,374 ERROR  , Thread-14, runner.py:107, [trial: 2, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:46:30,375 INFO   , Thread-14, checker.py:103, [trial: 2, gen: 0] Connection refused, reject mutation
2023-04-01 23:46:30,375 INFO   , Thread-14, acto.py  :472, [trial: 2, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-01 23:46:32,056 INFO   , Thread-13, base.py  :41, Created cluster
2023-04-01 23:46:32,065 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:46:32,696 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-1
2023-04-01 23:46:34,204 INFO   , Thread-1, base.py  :41, Created cluster
2023-04-01 23:46:34,215 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:46:39,343 INFO   , Thread-16, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:46:40,799 INFO   , Thread-5, runner.py:323, [trial: 2, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:46:42,975 INFO   , Thread-6, runner.py:323, [trial: 1, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:46:45,297 INFO   , Thread-15, runner.py:360, [trial: 4, gen: 0] System took 00:01:01 to converge
2023-04-01 23:46:45,299 DEBUG  , Thread-15, runner.py:98, [trial: 4, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:46:45,299 DEBUG  , Thread-15, runner.py:99, [trial: 4, gen: 0] STDERR: 
2023-04-01 23:46:45,406 DEBUG  , Thread-15, runner.py:177, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:45:43Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:45:43Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:45:45Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1039', 'uid': '378bc157-bf44-4968-ae6f-35fab8c4d4be'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:43Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:43Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:45Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:46:45,429 DEBUG  , Thread-15, runner.py:202, [trial: 4, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-dtkfn
2023-04-01 23:46:45,539 WARNING, Thread-15, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:46:45,539 INFO   , Thread-15, input.py :723, [trial: 4, gen: 1] Progress [4] cases left
2023-04-01 23:46:45,540 DEBUG  , Thread-15, test_case.py:51, [trial: 4, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:46:45,540 INFO   , Thread-15, acto.py  :267, [trial: 4, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "configMapKeyRef", "optional"] fails, try setup first
2023-04-01 23:46:45,541 INFO   , Thread-15, acto.py  :107, [trial: 4, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "optional": true}}}]}]
2023-04-01 23:46:45,541 DEBUG  , Thread-15, test_case.py:51, [trial: 4, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:46:45,541 DEBUG  , Thread-15, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-01 23:46:46,183 INFO   , Thread-15, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-01 23:46:48,268 DEBUG  , Thread-13, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:46:50,296 DEBUG  , Thread-1, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:46:50,770 INFO   , Thread-14, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:46:58,442 INFO   , Thread-13, deploy.py:91, Operator ready
2023-04-01 23:46:58,442 INFO   , Thread-13, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:47:00,389 INFO   , Thread-1, deploy.py:91, Operator ready
2023-04-01 23:47:00,389 INFO   , Thread-1, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:47:00,527 DEBUG  , Thread-13, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:47:02,479 DEBUG  , Thread-1, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:47:09,602 INFO   , Thread-7, runner.py:360, [trial: 1, gen: 9] System took 00:01:01 to converge
2023-04-01 23:47:09,604 DEBUG  , Thread-7, runner.py:98, [trial: 1, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:47:09,604 DEBUG  , Thread-7, runner.py:99, [trial: 1, gen: 9] STDERR: 
2023-04-01 23:47:09,746 DEBUG  , Thread-7, runner.py:177, [trial: 1, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:41Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:31:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:ui': {'f:annotations': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:46:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2866', 'uid': '2252b008-f015-4569-89b0-7c8b4e909408'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:26:56Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:32:27Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-01 23:47:09,770 DEBUG  , Thread-7, runner.py:202, [trial: 1, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-pqp5r
2023-04-01 23:47:10,452 INFO   , Thread-7, acto.py  :187, Trial 1 finished, completed in 00:22:55
2023-04-01 23:47:10,452 INFO   , Thread-7, acto.py  :188, ---------------------------------------

2023-04-01 23:47:10,470 DEBUG  , Thread-7, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-pqp5r
2023-04-01 23:47:10,627 INFO   , Thread-13, deploy.py:91, Operator ready
2023-04-01 23:47:10,627 INFO   , Thread-13, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:47:12,579 INFO   , Thread-1, deploy.py:91, Operator ready
2023-04-01 23:47:12,579 INFO   , Thread-1, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:47:26,321 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-6
2023-04-01 23:47:26,597 INFO   , Thread-2, base.py  :41, Created cluster
2023-04-01 23:47:26,607 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:47:31,385 INFO   , Thread-11, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:47:43,060 INFO   , Thread-6, runner.py:323, [trial: 1, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:47:43,737 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:47:49,594 INFO   , Thread-9, runner.py:360, [trial: 2, gen: 1] System took 00:02:32 to converge
2023-04-01 23:47:49,595 DEBUG  , Thread-9, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:47:49,596 DEBUG  , Thread-9, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:47:49,747 DEBUG  , Thread-9, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodeTLSSecret":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:14Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodeTLSSecret': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:45:16Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:45:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1188', 'uid': '5aa26381-a087-4f0d-88d6-fbe07e6d2d68'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:31Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:16Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:45:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:47:49,777 DEBUG  , Thread-9, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-jp7j2
2023-04-01 23:47:50,216 INFO   , Thread-9, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [3775] Number of delta: [1110]
2023-04-01 23:47:50,218 WARNING, Thread-9, schema.py:573, [trial: 2, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-01 23:47:50,218 INFO   , Thread-9, input.py :723, [trial: 2, gen: 2] Progress [17] cases left
2023-04-01 23:47:50,218 DEBUG  , Thread-9, test_case.py:51, [trial: 2, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-01 23:47:50,218 INFO   , Thread-9, acto.py  :267, [trial: 2, gen: 2] Precondition of ["spec", "minAvailable"] fails, try setup first
2023-04-01 23:47:50,219 INFO   , Thread-9, acto.py  :107, [trial: 2, gen: 2] JSON patch: [{"op": "add", "path": "/spec/minAvailable", "value": 1}]
2023-04-01 23:47:50,219 DEBUG  , Thread-9, test_case.py:51, [trial: 2, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-01 23:47:50,219 DEBUG  , Thread-9, acto.py  :458, [trial: 2, gen: 2] Run and check
2023-04-01 23:47:50,533 ERROR  , Thread-6, runner.py:363, [trial: 1, gen: 3] System failed to converge within 600 seconds
2023-04-01 23:47:50,535 DEBUG  , Thread-6, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:47:50,536 DEBUG  , Thread-6, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:47:50,675 DEBUG  , Thread-6, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:29:28Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"resourceFieldRef":{"resource":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:28:23Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:36:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:37:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2096', 'uid': '35b2968c-e68d-469a-a273-ca2bc7ba660f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'resourceFieldRef': {'divisor': '0', 'resource': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:36:49Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:28Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:29:29Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:25Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:36:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:47:50,708 DEBUG  , Thread-6, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-sdj2j
2023-04-01 23:47:50,766 WARNING, Thread-13, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:47:50,767 DEBUG  , Thread-13, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:47:50,937 INFO   , Thread-9, runner.py:291, [trial: 2, gen: 2] Waiting for system to converge... 
2023-04-01 23:47:51,400 DEBUG  , Thread-6, checker.py:278, [trial: 1, gen: 3] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'resource']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 2, 'value_from', 'resource_field_ref', 'resource']]
2023-04-01 23:47:51,401 ERROR  , Thread-6, checker.py:282, [trial: 1, gen: 3] Matched delta inconsistent with input delta
2023-04-01 23:47:51,401 ERROR  , Thread-6, checker.py:283, [trial: 1, gen: 3] Input delta: not present -> ACTOKEY
2023-04-01 23:47:51,401 ERROR  , Thread-6, checker.py:284, [trial: 1, gen: 3] Matched delta: limits.cpu -> not present
2023-04-01 23:47:51,607 INFO   , Thread-6, common.py:569, [trial: 1, gen: 3] Recognized invalid input through field [resource] in error message: reconciling resources on deploy action
2023-04-01 23:47:51,608 INFO   , Thread-6, checker.py:134, [trial: 1, gen: 3] Number of system state fields: [3045] Number of delta: [206]
2023-04-01 23:47:51,608 ERROR  , Thread-6, checker.py:561, [trial: 1, gen: 3] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:47:51,610 DEBUG  , Thread-6, acto.py  :489, [trial: 1, gen: 3] Running recovery
2023-04-01 23:47:52,713 WARNING, Thread-1, schema.py:573, [trial: 3, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:47:52,713 DEBUG  , Thread-1, acto.py  :458, [trial: 3, gen: 0] Run and check
2023-04-01 23:47:53,817 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-01 23:47:53,818 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:47:55,595 INFO   , Thread-13, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:47:55,679 INFO   , Thread-6, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:47:57,600 INFO   , Thread-1, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-01 23:47:57,845 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:48:07,940 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-01 23:48:07,941 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:48:08,557 INFO   , Thread-16, runner.py:360, [trial: 2, gen: 0] System took 00:01:29 to converge
2023-04-01 23:48:08,559 DEBUG  , Thread-16, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:48:08,559 DEBUG  , Thread-16, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-01 23:48:08,792 DEBUG  , Thread-16, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:46:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:46:39Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:46:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:46:43Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:46:43Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1186', 'uid': 'baf5e017-3370-45b5-b4a1-3461fdb34b79'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:46:53Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:46:41Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:46:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:46:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:48:08,824 DEBUG  , Thread-16, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-m7m5z
2023-04-01 23:48:08,998 WARNING, Thread-16, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:48:08,999 INFO   , Thread-16, input.py :723, [trial: 2, gen: 1] Progress [7] cases left
2023-04-01 23:48:08,999 DEBUG  , Thread-16, test_case.py:51, [trial: 2, gen: 1] Precondition [change_precondition] Result [False]
2023-04-01 23:48:08,999 INFO   , Thread-16, acto.py  :267, [trial: 2, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "configMapKeyRef", "key"] fails, try setup first
2023-04-01 23:48:08,999 INFO   , Thread-16, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY"}}}]}]
2023-04-01 23:48:09,000 DEBUG  , Thread-16, test_case.py:51, [trial: 2, gen: 1] Precondition [change_precondition] Result [True]
2023-04-01 23:48:09,000 DEBUG  , Thread-16, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:48:09,346 INFO   , Thread-16, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:48:20,376 INFO   , Thread-7, base.py  :41, Created cluster
2023-04-01 23:48:20,393 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:48:24,067 INFO   , Thread-12, runner.py:360, [trial: 2, gen: 3] System took 00:02:40 to converge
2023-04-01 23:48:24,068 DEBUG  , Thread-12, runner.py:98, [trial: 2, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:48:24,068 DEBUG  , Thread-12, runner.py:99, [trial: 2, gen: 3] STDERR: 
2023-04-01 23:48:24,212 DEBUG  , Thread-12, runner.py:177, [trial: 2, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:42:40Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":"2.0","memory":"2Gi"},"requests":{"cpu":"0.0500","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:41:34Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:41:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:42:40Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1719', 'uid': '03ebf0f6-3f08-4e4c-89cd-a3f9e2bcbd90'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '50m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:42:51Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:42:39Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:42:40Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:41:36Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:42:45Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:48:24,240 DEBUG  , Thread-12, runner.py:202, [trial: 2, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-7zdkm
2023-04-01 23:48:24,859 INFO   , Thread-5, runner.py:323, [trial: 2, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:48:25,029 DEBUG  , Thread-12, checker.py:278, [trial: 2, gen: 3] Input delta [['spec', 'resources', 'limits', 'cpu']] matched with [['test-cluster-1', 'spec', 'containers', 0, 'resources', 'limits', 'cpu']]
2023-04-01 23:48:25,029 DEBUG  , Thread-12, checker.py:278, [trial: 2, gen: 3] Input delta [['spec', 'resources', 'limits', 'cpu']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'resources', 'limits', 'cpu']]
2023-04-01 23:48:25,030 DEBUG  , Thread-12, checker.py:278, [trial: 2, gen: 3] Input delta [['spec', 'resources', 'limits', 'cpu']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'limits', 'cpu']]
2023-04-01 23:48:25,274 INFO   , Thread-12, checker.py:134, [trial: 2, gen: 3] Number of system state fields: [3775] Number of delta: [81]
2023-04-01 23:48:25,275 INFO   , Thread-12, acto.py  :339, [trial: 2, gen: 3] Input model is empty, break
2023-04-01 23:48:25,278 INFO   , Thread-12, acto.py  :187, Trial 2 finished, completed in 00:10:33
2023-04-01 23:48:25,278 INFO   , Thread-12, acto.py  :188, ---------------------------------------

2023-04-01 23:48:25,302 DEBUG  , Thread-12, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-7zdkm
2023-04-01 23:48:31,465 INFO   , Thread-11, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:48:35,330 INFO   , Thread-12, common.py:629, Trial testrun-crdb-whitebox/trial-11-0002 completed without error
2023-04-01 23:48:35,331 INFO   , Thread-12, acto.py  :195, Test finished
2023-04-01 23:48:35,331 INFO   , Thread-12, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"sql\\\", \\\"ingressClassName\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"ui\\\", \\\"tls\\\", 0, \\\"hosts\\\", 0]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"sql\\\", \\\"tls\\\"]\"": [
        "array-deletion",
        "array-push",
        "array-pop"
    ]
}
2023-04-01 23:48:37,642 DEBUG  , Thread-7, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:48:38,856 INFO   , Thread-4, runner.py:360, [trial: 1, gen: 1] System took 00:02:22 to converge
2023-04-01 23:48:38,857 DEBUG  , Thread-4, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:48:38,857 DEBUG  , Thread-4, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:48:38,982 DEBUG  , Thread-4, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"tolerations":[{"effect":"NoSchedule","key":"test-key","operator":"Equal","value":"test-value"},{"effect":"NoSchedule","key":"node-role.kubernetes.io/control-plane","operator":"Exists"}]}}\n'}, 'creationTimestamp': '2023-04-02T03:45:05Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:46:16Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1183', 'uid': '05703de4-390e-4fa3-b90e-898cc20a876a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'tolerations': [{'effect': 'NoSchedule', 'key': 'test-key', 'operator': 'Equal', 'value': 'test-value'}, {'effect': 'NoSchedule', 'key': 'node-role.kubernetes.io/control-plane', 'operator': 'Exists'}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:48:39,010 DEBUG  , Thread-4, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-h9bj2
2023-04-01 23:48:39,904 INFO   , Thread-4, common.py:569, [trial: 1, gen: 1] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-01 23:48:39,904 INFO   , Thread-4, checker.py:134, [trial: 1, gen: 1] Number of system state fields: [3508] Number of delta: [128]
2023-04-01 23:48:39,905 INFO   , Thread-4, acto.py  :301, [trial: 1, gen: 1] Setup produced invalid input
2023-04-01 23:48:39,906 WARNING, Thread-4, schema.py:573, [trial: 1, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:48:39,906 DEBUG  , Thread-4, acto.py  :458, [trial: 1, gen: 1] Run and check
2023-04-01 23:48:40,276 INFO   , Thread-4, runner.py:291, [trial: 1, gen: 1] Waiting for system to converge... 
2023-04-01 23:48:47,726 INFO   , Thread-7, deploy.py:91, Operator ready
2023-04-01 23:48:47,726 INFO   , Thread-7, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:48:48,083 WARNING, Thread-2, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:48:48,084 DEBUG  , Thread-2, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:48:50,120 DEBUG  , Thread-7, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:48:51,234 INFO   , Thread-2, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:48:51,723 INFO   , Thread-9, runner.py:360, [trial: 2, gen: 2] System took 00:01:00 to converge
2023-04-01 23:48:51,724 DEBUG  , Thread-9, runner.py:98, [trial: 2, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:48:51,724 DEBUG  , Thread-9, runner.py:99, [trial: 2, gen: 2] STDERR: 
2023-04-01 23:48:51,869 DEBUG  , Thread-9, runner.py:177, [trial: 2, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"minAvailable":1,"nodeTLSSecret":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:14Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:minAvailable': {}, 'f:nodeTLSSecret': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:47:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1428', 'uid': '5aa26381-a087-4f0d-88d6-fbe07e6d2d68'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'minAvailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:31Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:16Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:45:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:48:51,897 DEBUG  , Thread-9, runner.py:202, [trial: 2, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-jp7j2
2023-04-01 23:48:52,530 DEBUG  , Thread-9, checker.py:278, [trial: 2, gen: 2] Input delta [['spec', 'minAvailable']] matched with [['test-cluster', 'spec', 'min_available']]
2023-04-01 23:48:52,757 INFO   , Thread-9, checker.py:134, [trial: 2, gen: 2] Number of system state fields: [3782] Number of delta: [7]
2023-04-01 23:48:52,758 INFO   , Thread-9, acto.py  :323, [trial: 2, gen: 2] Running bundled testcases
2023-04-01 23:48:52,759 DEBUG  , Thread-9, test_case.py:51, [trial: 2, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-01 23:48:52,759 INFO   , Thread-9, acto.py  :107, [trial: 2, gen: 2] JSON patch: [{"op": "replace", "path": "/spec/minAvailable", "value": 0}]
2023-04-01 23:48:52,759 DEBUG  , Thread-9, acto.py  :458, [trial: 2, gen: 2] Run and check
2023-04-01 23:48:53,140 INFO   , Thread-9, runner.py:291, [trial: 2, gen: 2] Waiting for system to converge... 
2023-04-01 23:48:56,632 INFO   , Thread-14, runner.py:360, [trial: 2, gen: 0] System took 00:02:05 to converge
2023-04-01 23:48:56,633 DEBUG  , Thread-14, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:48:56,634 DEBUG  , Thread-14, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-01 23:48:56,786 DEBUG  , Thread-14, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:46:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:46:50Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:46:50Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:46:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:46:55Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1187', 'uid': '2075c5d8-eeb6-4244-9d56-c9b538c1c3c0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:47:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:46:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:46:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:47:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:48:56,828 DEBUG  , Thread-14, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-ktxbw
2023-04-01 23:48:57,095 WARNING, Thread-14, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:48:57,095 INFO   , Thread-14, input.py :723, [trial: 2, gen: 1] Progress [2] cases left
2023-04-01 23:48:57,095 DEBUG  , Thread-14, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:48:57,095 INFO   , Thread-14, acto.py  :263, [trial: 2, gen: 1] Precondition of ['spec', 'httpPort'] satisfies
2023-04-01 23:48:57,096 INFO   , Thread-14, acto.py  :323, [trial: 2, gen: 1] Running bundled testcases
2023-04-01 23:48:57,096 DEBUG  , Thread-14, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:48:57,096 INFO   , Thread-14, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "add", "path": "/spec/httpPort", "value": 0}]
2023-04-01 23:48:57,096 DEBUG  , Thread-14, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:48:57,482 INFO   , Thread-14, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:48:57,731 INFO   , Thread-6, runner.py:360, [trial: 1, gen: 3] System took 00:01:02 to converge
2023-04-01 23:48:57,733 DEBUG  , Thread-6, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:48:57,733 DEBUG  , Thread-6, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:48:57,888 DEBUG  , Thread-6, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:29:28Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:28:23Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:36:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:47:55Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3034', 'uid': '35b2968c-e68d-469a-a273-ca2bc7ba660f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:36:49Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:29:28Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:29:29Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:28:25Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:36:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:48:57,924 DEBUG  , Thread-6, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-sdj2j
2023-04-01 23:48:58,612 INFO   , Thread-6, acto.py  :187, Trial 1 finished, completed in 00:22:58
2023-04-01 23:48:58,612 INFO   , Thread-6, acto.py  :188, ---------------------------------------

2023-04-01 23:48:58,640 DEBUG  , Thread-6, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-sdj2j
2023-04-01 23:49:00,208 INFO   , Thread-7, deploy.py:91, Operator ready
2023-04-01 23:49:00,208 INFO   , Thread-7, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:49:01,426 INFO   , Thread-10, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:49:06,821 INFO   , Thread-13, runner.py:360, [trial: 2, gen: 0] System took 00:01:11 to converge
2023-04-01 23:49:06,823 DEBUG  , Thread-13, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:49:06,823 DEBUG  , Thread-13, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-01 23:49:06,952 DEBUG  , Thread-13, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:47:59Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:47:55Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:47:55Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:47:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:47:59Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1080', 'uid': 'b2bc5851-eaaf-4b19-a7b6-9516f84974f7'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:48:10Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:47:58Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:47:59Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:49:06,979 DEBUG  , Thread-13, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-6wrtr
2023-04-01 23:49:07,225 WARNING, Thread-13, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:49:07,225 INFO   , Thread-13, input.py :723, [trial: 2, gen: 1] Progress [6] cases left
2023-04-01 23:49:07,225 DEBUG  , Thread-13, test_case.py:51, [trial: 2, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:49:07,225 INFO   , Thread-13, acto.py  :267, [trial: 2, gen: 1] Precondition of ["spec", "additionalAnnotations", "ACTOKEY"] fails, try setup first
2023-04-01 23:49:07,226 INFO   , Thread-13, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "add", "path": "/spec/additionalAnnotations", "value": {"ACTOKEY": "ACTOKEY"}}]
2023-04-01 23:49:07,226 DEBUG  , Thread-13, test_case.py:51, [trial: 2, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:49:07,226 DEBUG  , Thread-13, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:49:07,561 INFO   , Thread-13, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:49:08,891 INFO   , Thread-1, runner.py:360, [trial: 3, gen: 0] System took 00:01:11 to converge
2023-04-01 23:49:08,893 DEBUG  , Thread-1, runner.py:98, [trial: 3, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:49:08,893 DEBUG  , Thread-1, runner.py:99, [trial: 3, gen: 0] STDERR: 
2023-04-01 23:49:09,036 DEBUG  , Thread-1, runner.py:177, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:48:01Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:47:57Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:47:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:48:01Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:48:01Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1088', 'uid': '151fa815-5b2e-438d-86ed-7505e53945aa'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:48:12Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:48:00Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:48:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:06Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:49:09,060 DEBUG  , Thread-1, runner.py:202, [trial: 3, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-5fpc4
2023-04-01 23:49:09,249 WARNING, Thread-1, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:49:09,249 INFO   , Thread-1, input.py :723, [trial: 3, gen: 1] Progress [10] cases left
2023-04-01 23:49:09,250 DEBUG  , Thread-1, test_case.py:51, [trial: 3, gen: 1] Precondition [toggle_on_precondition] Result [True]
2023-04-01 23:49:09,250 INFO   , Thread-1, acto.py  :263, [trial: 3, gen: 1] Precondition of ['spec', 'dataStore', 'pvc', 'source', 'readOnly'] satisfies
2023-04-01 23:49:09,250 INFO   , Thread-1, acto.py  :323, [trial: 3, gen: 1] Running bundled testcases
2023-04-01 23:49:09,250 DEBUG  , Thread-1, test_case.py:51, [trial: 3, gen: 1] Precondition [toggle_on_precondition] Result [True]
2023-04-01 23:49:09,250 INFO   , Thread-1, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "add", "path": "/spec/dataStore/pvc/source", "value": {"claimName": "ACTOKEY", "readOnly": true}}]
2023-04-01 23:49:09,251 DEBUG  , Thread-1, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-01 23:49:09,617 INFO   , Thread-1, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-01 23:49:13,867 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-5
2023-04-01 23:49:16,105 ERROR  , Thread-8, runner.py:363, [trial: 1, gen: 2] System failed to converge within 600 seconds
2023-04-01 23:49:16,107 DEBUG  , Thread-8, runner.py:98, [trial: 1, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:49:16,108 DEBUG  , Thread-8, runner.py:99, [trial: 1, gen: 2] STDERR: 
2023-04-01 23:49:16,263 DEBUG  , Thread-8, runner.py:177, [trial: 1, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:26:50Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodeSelector":{"ACTOKEY":""},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:26:46Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:27:00Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodeSelector': {'.': {}, 'f:ACTOKEY': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:39:16Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2246', 'uid': 'c8301b52-ddc3-4df4-b4e9-11b9f0573448'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodeSelector': {'ACTOKEY': ''}, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:27:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:26:49Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:26:50Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:26:55Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:49:16,290 DEBUG  , Thread-8, runner.py:202, [trial: 1, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-54n8k
2023-04-01 23:49:17,120 DEBUG  , Thread-8, checker.py:728, [trial: 1, gen: 2] failed attempt recovering to seed state - system state diff: {'type_changes': {"root['pod']['test-cluster-2']['spec']['node_selector']": {'old_type': <class 'NoneType'>, 'new_type': <class 'dict'>, 'old_value': None, 'new_value': {'ACTOKEY': ''}}, "root['stateful_set']['test-cluster']['spec']['template']['spec']['node_selector']": {'old_type': <class 'NoneType'>, 'new_type': <class 'dict'>, 'old_value': None, 'new_value': {'ACTOKEY': ''}}}}
2023-04-01 23:49:17,125 INFO   , Thread-8, acto.py  :187, Trial 1 finished, completed in 00:24:55
2023-04-01 23:49:17,125 INFO   , Thread-8, acto.py  :188, ---------------------------------------

2023-04-01 23:49:17,146 DEBUG  , Thread-8, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-54n8k
2023-04-01 23:49:24,947 INFO   , Thread-5, runner.py:323, [trial: 2, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:49:32,459 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-7
2023-04-01 23:49:40,341 WARNING, Thread-7, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:49:40,342 DEBUG  , Thread-7, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:49:43,086 INFO   , Thread-7, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:49:53,265 INFO   , Thread-9, runner.py:360, [trial: 2, gen: 2] System took 00:01:00 to converge
2023-04-01 23:49:53,266 DEBUG  , Thread-9, runner.py:98, [trial: 2, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:49:53,267 DEBUG  , Thread-9, runner.py:99, [trial: 2, gen: 2] STDERR: 
2023-04-01 23:49:53,436 DEBUG  , Thread-9, runner.py:177, [trial: 2, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"minAvailable":0,"nodeTLSSecret":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:14Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:minAvailable': {}, 'f:nodeTLSSecret': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:47:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1527', 'uid': '5aa26381-a087-4f0d-88d6-fbe07e6d2d68'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'minAvailable': 0, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:31Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:16Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:45:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:49:53,473 DEBUG  , Thread-9, runner.py:202, [trial: 2, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-jp7j2
2023-04-01 23:49:54,134 DEBUG  , Thread-9, checker.py:278, [trial: 2, gen: 2] Input delta [['spec', 'minAvailable']] matched with [['test-cluster', 'spec', 'min_available']]
2023-04-01 23:49:54,372 INFO   , Thread-9, checker.py:134, [trial: 2, gen: 2] Number of system state fields: [3776] Number of delta: [6]
2023-04-01 23:49:54,373 WARNING, Thread-9, schema.py:573, [trial: 2, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-01 23:49:54,374 INFO   , Thread-9, input.py :723, [trial: 2, gen: 4] Progress [16] cases left
2023-04-01 23:49:54,374 DEBUG  , Thread-9, test_case.py:51, [trial: 2, gen: 4] Precondition [increase_precondition] Result [True]
2023-04-01 23:49:54,374 INFO   , Thread-9, acto.py  :263, [trial: 2, gen: 4] Precondition of ['spec', 'minAvailable'] satisfies
2023-04-01 23:49:54,374 INFO   , Thread-9, acto.py  :323, [trial: 2, gen: 4] Running bundled testcases
2023-04-01 23:49:54,374 DEBUG  , Thread-9, test_case.py:51, [trial: 2, gen: 4] Precondition [increase_precondition] Result [True]
2023-04-01 23:49:54,374 INFO   , Thread-9, acto.py  :107, [trial: 2, gen: 4] JSON patch: []
2023-04-01 23:49:54,374 DEBUG  , Thread-9, acto.py  :458, [trial: 2, gen: 4] Run and check
2023-04-01 23:49:54,716 INFO   , Thread-9, runner.py:291, [trial: 2, gen: 4] Waiting for system to converge... 
2023-04-01 23:49:57,604 INFO   , Thread-14, runner.py:360, [trial: 2, gen: 1] System took 00:01:00 to converge
2023-04-01 23:49:57,605 DEBUG  , Thread-14, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:49:57,606 DEBUG  , Thread-14, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:49:57,743 DEBUG  , Thread-14, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:46:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"httpPort":0,"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:46:50Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:46:55Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:48:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:httpPort': {}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:48:57Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1434', 'uid': '2075c5d8-eeb6-4244-9d56-c9b538c1c3c0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 0, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:47:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:46:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:46:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:47:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:49:27Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[1].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[1].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-01 23:49:57,772 DEBUG  , Thread-14, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-ktxbw
2023-04-01 23:49:58,561 INFO   , Thread-14, common.py:560, [trial: 2, gen: 1] Recognized invalid input through regex: failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[1].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[1].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]
2023-04-01 23:49:58,561 INFO   , Thread-14, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [3460] Number of delta: [5]
2023-04-01 23:49:58,562 DEBUG  , Thread-14, acto.py  :374, [trial: 2, gen: 1] Invalid input, revert
2023-04-01 23:49:58,563 WARNING, Thread-14, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:49:58,563 DEBUG  , Thread-14, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:49:58,911 INFO   , Thread-14, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:50:01,513 INFO   , Thread-10, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:50:02,680 INFO   , Thread-2, runner.py:360, [trial: 2, gen: 0] System took 00:01:11 to converge
2023-04-01 23:50:02,681 DEBUG  , Thread-2, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:50:02,681 DEBUG  , Thread-2, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-01 23:50:02,834 DEBUG  , Thread-2, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:48:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:48:51Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:48:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:49:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1062', 'uid': '09d4e0b8-ee55-4395-ae23-8f57299c0b11'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:49:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:48:54Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:48:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:53Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:49:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:50:02,862 DEBUG  , Thread-2, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-st9jw
2023-04-01 23:50:03,058 WARNING, Thread-2, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:50:03,059 INFO   , Thread-2, input.py :723, [trial: 2, gen: 1] Progress [13] cases left
2023-04-01 23:50:03,059 DEBUG  , Thread-2, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:50:03,059 INFO   , Thread-2, acto.py  :263, [trial: 2, gen: 1] Precondition of ['spec', 'topologySpreadConstraints'] satisfies
2023-04-01 23:50:03,059 INFO   , Thread-2, acto.py  :323, [trial: 2, gen: 1] Running bundled testcases
2023-04-01 23:50:03,059 DEBUG  , Thread-2, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:50:03,060 INFO   , Thread-2, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "add", "path": "/spec/topologySpreadConstraints", "value": []}]
2023-04-01 23:50:03,060 DEBUG  , Thread-2, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:50:03,406 INFO   , Thread-2, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:50:08,905 INFO   , Thread-6, base.py  :41, Created cluster
2023-04-01 23:50:08,916 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:50:15,269 INFO   , Thread-11, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:50:25,029 INFO   , Thread-5, runner.py:323, [trial: 2, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:50:25,835 INFO   , Thread-8, base.py  :41, Created cluster
2023-04-01 23:50:25,850 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:50:26,177 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:50:36,356 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-01 23:50:36,356 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:50:38,272 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:50:40,645 INFO   , Thread-16, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:50:43,058 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:50:44,699 INFO   , Thread-7, runner.py:360, [trial: 2, gen: 0] System took 00:01:01 to converge
2023-04-01 23:50:44,701 DEBUG  , Thread-7, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:50:44,702 DEBUG  , Thread-7, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-01 23:50:44,833 DEBUG  , Thread-7, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:49:43Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:49:43Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:49:45Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '901', 'uid': 'b5b2094d-2598-48b9-8ad6-9c77df1c96db'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:49:43Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:49:43Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:49:45Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:50:44,859 DEBUG  , Thread-7, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-ts5d4
2023-04-01 23:50:44,973 WARNING, Thread-7, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:50:44,974 INFO   , Thread-7, input.py :723, [trial: 2, gen: 1] Progress [10] cases left
2023-04-01 23:50:44,974 INFO   , Thread-7, acto.py  :187, Trial 2 finished, completed in 00:03:24
2023-04-01 23:50:44,974 INFO   , Thread-7, acto.py  :188, ---------------------------------------

2023-04-01 23:50:44,987 DEBUG  , Thread-7, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-ts5d4
2023-04-01 23:50:48,372 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-01 23:50:48,373 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:50:53,143 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-01 23:50:53,143 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:50:54,836 INFO   , Thread-9, runner.py:360, [trial: 2, gen: 4] System took 00:01:00 to converge
2023-04-01 23:50:54,837 DEBUG  , Thread-9, runner.py:98, [trial: 2, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:50:54,838 DEBUG  , Thread-9, runner.py:99, [trial: 2, gen: 4] STDERR: 
2023-04-01 23:50:54,981 DEBUG  , Thread-9, runner.py:177, [trial: 2, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"minAvailable":0,"nodeTLSSecret":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:14Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:minAvailable': {}, 'f:nodeTLSSecret': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:47:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1527', 'uid': '5aa26381-a087-4f0d-88d6-fbe07e6d2d68'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'minAvailable': 0, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:31Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:16Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:45:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:50:55,008 DEBUG  , Thread-9, runner.py:202, [trial: 2, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-jp7j2
2023-04-01 23:50:55,017 INFO   , Thread-7, common.py:629, Trial testrun-crdb-whitebox/trial-06-0002 completed without error
2023-04-01 23:50:55,253 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:50:55,941 WARNING, Thread-9, schema.py:573, [trial: 2, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:50:55,942 INFO   , Thread-9, input.py :723, [trial: 2, gen: 5] Progress [15] cases left
2023-04-01 23:50:55,942 DEBUG  , Thread-9, test_case.py:51, [trial: 2, gen: 5] Precondition [decrease_precondition] Result [False]
2023-04-01 23:50:55,942 INFO   , Thread-9, acto.py  :267, [trial: 2, gen: 5] Precondition of ["spec", "minAvailable"] fails, try setup first
2023-04-01 23:50:55,942 INFO   , Thread-9, acto.py  :107, [trial: 2, gen: 5] JSON patch: [{"op": "replace", "path": "/spec/minAvailable", "value": 5}]
2023-04-01 23:50:55,942 DEBUG  , Thread-9, test_case.py:51, [trial: 2, gen: 5] Precondition [decrease_precondition] Result [True]
2023-04-01 23:50:55,942 DEBUG  , Thread-9, acto.py  :458, [trial: 2, gen: 5] Run and check
2023-04-01 23:50:56,276 INFO   , Thread-9, runner.py:291, [trial: 2, gen: 5] Waiting for system to converge... 
2023-04-01 23:50:59,032 INFO   , Thread-14, runner.py:360, [trial: 2, gen: 1] System took 00:01:00 to converge
2023-04-01 23:50:59,033 DEBUG  , Thread-14, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:50:59,034 DEBUG  , Thread-14, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:50:59,178 DEBUG  , Thread-14, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:46:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:46:50Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:46:55Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:48:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:49:58Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1484', 'uid': '2075c5d8-eeb6-4244-9d56-c9b538c1c3c0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:47:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:46:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:46:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:47:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:49:27Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[1].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[1].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-01 23:50:59,207 DEBUG  , Thread-14, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-ktxbw
2023-04-01 23:50:59,815 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-6
2023-04-01 23:51:00,008 DEBUG  , Thread-14, acto.py  :383, [trial: 2, gen: 1] Only one patch, no need to isolate
2023-04-01 23:51:00,008 WARNING, Thread-14, schema.py:573, [trial: 2, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:51:00,009 INFO   , Thread-14, input.py :723, [trial: 2, gen: 3] Progress [1] cases left
2023-04-01 23:51:00,009 DEBUG  , Thread-14, test_case.py:51, [trial: 2, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-01 23:51:00,009 INFO   , Thread-14, acto.py  :267, [trial: 2, gen: 3] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "fieldRef"] fails, try setup first
2023-04-01 23:51:00,009 INFO   , Thread-14, acto.py  :107, [trial: 2, gen: 3] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"fieldRef": {"apiVersion": "ACTOKEY", "fieldPath": "ACTOKEY"}}}]}]
2023-04-01 23:51:00,009 DEBUG  , Thread-14, test_case.py:51, [trial: 2, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-01 23:51:00,010 DEBUG  , Thread-14, acto.py  :458, [trial: 2, gen: 3] Run and check
2023-04-01 23:51:00,345 INFO   , Thread-14, runner.py:291, [trial: 2, gen: 3] Waiting for system to converge... 
2023-04-01 23:51:01,605 INFO   , Thread-10, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:51:02,209 INFO   , Thread-4, runner.py:360, [trial: 1, gen: 1] System took 00:02:21 to converge
2023-04-01 23:51:02,210 DEBUG  , Thread-4, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:51:02,210 DEBUG  , Thread-4, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:51:02,352 DEBUG  , Thread-4, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:45:05Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:48:40Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1538', 'uid': '05703de4-390e-4fa3-b90e-898cc20a876a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:51:02,381 DEBUG  , Thread-4, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-h9bj2
2023-04-01 23:51:03,318 INFO   , Thread-4, acto.py  :321, [trial: 1, gen: 1] All setups failed
2023-04-01 23:51:03,318 WARNING, Thread-4, schema.py:573, [trial: 1, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:51:03,319 INFO   , Thread-4, input.py :723, [trial: 1, gen: 3] Progress [14] cases left
2023-04-01 23:51:03,319 DEBUG  , Thread-4, test_case.py:51, [trial: 1, gen: 3] Precondition [push_precondition] Result [False]
2023-04-01 23:51:03,319 INFO   , Thread-4, acto.py  :267, [trial: 1, gen: 3] Precondition of ["spec", "tolerations"] fails, try setup first
2023-04-01 23:51:03,320 INFO   , Thread-4, acto.py  :107, [trial: 1, gen: 3] JSON patch: [{"op": "add", "path": "/spec/tolerations", "value": [{"key": "test-key", "operator": "Equal", "value": "test-value", "effect": "NoSchedule"}, {"key": "node-role.kubernetes.io/control-plane", "operator": "Exists", "effect": "NoSchedule"}]}]
2023-04-01 23:51:03,320 DEBUG  , Thread-4, test_case.py:51, [trial: 1, gen: 3] Precondition [push_precondition] Result [True]
2023-04-01 23:51:03,320 DEBUG  , Thread-4, acto.py  :458, [trial: 1, gen: 3] Run and check
2023-04-01 23:51:03,522 INFO   , Thread-2, runner.py:360, [trial: 2, gen: 1] System took 00:01:00 to converge
2023-04-01 23:51:03,523 DEBUG  , Thread-2, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:51:03,523 DEBUG  , Thread-2, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:51:03,658 DEBUG  , Thread-2, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:48:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"topologySpreadConstraints":[]}}\n'}, 'creationTimestamp': '2023-04-02T03:48:51Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:49:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:topologySpreadConstraints': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:50:03Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1172', 'uid': '09d4e0b8-ee55-4395-ae23-8f57299c0b11'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:49:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:48:54Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:48:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:53Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:49:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:51:03,666 INFO   , Thread-4, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:51:03,702 DEBUG  , Thread-2, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-st9jw
2023-04-01 23:51:04,551 INFO   , Thread-2, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [3460] Number of delta: [0]
2023-04-01 23:51:04,552 WARNING, Thread-2, schema.py:573, [trial: 2, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-01 23:51:04,552 INFO   , Thread-2, input.py :723, [trial: 2, gen: 2] Progress [12] cases left
2023-04-01 23:51:04,552 DEBUG  , Thread-2, test_case.py:51, [trial: 2, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-01 23:51:04,552 INFO   , Thread-2, acto.py  :267, [trial: 2, gen: 2] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "fieldRef", "apiVersion"] fails, try setup first
2023-04-01 23:51:04,553 INFO   , Thread-2, acto.py  :107, [trial: 2, gen: 2] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"fieldRef": {"fieldPath": "ACTOKEY", "apiVersion": "ACTOKEY"}}}]}]
2023-04-01 23:51:04,553 DEBUG  , Thread-2, test_case.py:51, [trial: 2, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-01 23:51:04,553 DEBUG  , Thread-2, acto.py  :458, [trial: 2, gen: 2] Run and check
2023-04-01 23:51:04,900 INFO   , Thread-2, runner.py:291, [trial: 2, gen: 2] Waiting for system to converge... 
2023-04-01 23:51:05,356 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-01 23:51:05,356 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:51:15,355 INFO   , Thread-11, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:51:25,120 INFO   , Thread-5, runner.py:323, [trial: 2, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:51:28,497 WARNING, Thread-6, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:51:28,498 DEBUG  , Thread-6, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:51:31,107 INFO   , Thread-6, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:51:38,054 INFO   , Thread-1, runner.py:360, [trial: 3, gen: 1] System took 00:02:28 to converge
2023-04-01 23:51:38,055 DEBUG  , Thread-1, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:51:38,055 DEBUG  , Thread-1, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-01 23:51:38,196 DEBUG  , Thread-1, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:48:01Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":true},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:47:57Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:48:01Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:48:01Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:49:09Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1201', 'uid': '151fa815-5b2e-438d-86ed-7505e53945aa'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY', 'readOnly': True}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:48:12Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:48:00Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:48:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:06Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:51:38,223 DEBUG  , Thread-1, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-5fpc4
2023-04-01 23:51:38,881 DEBUG  , Thread-1, checker.py:278, [trial: 3, gen: 1] Input delta [['spec', 'dataStore', 'pvc', 'source', 'readOnly']] matched with [['test-cluster', 'spec', 'template', 'spec', 'volumes', 0, 'persistent_volume_claim', 'read_only']]
2023-04-01 23:51:39,139 INFO   , Thread-1, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [3778] Number of delta: [93]
2023-04-01 23:51:39,140 WARNING, Thread-1, schema.py:573, [trial: 3, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-01 23:51:39,141 INFO   , Thread-1, input.py :723, [trial: 3, gen: 2] Progress [9] cases left
2023-04-01 23:51:39,141 DEBUG  , Thread-1, test_case.py:51, [trial: 3, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-01 23:51:39,141 INFO   , Thread-1, acto.py  :267, [trial: 3, gen: 2] Precondition of ["spec", "cache"] fails, try setup first
2023-04-01 23:51:39,141 INFO   , Thread-1, acto.py  :107, [trial: 3, gen: 2] JSON patch: [{"op": "add", "path": "/spec/cache", "value": "ACTOKEY"}]
2023-04-01 23:51:39,141 DEBUG  , Thread-1, test_case.py:51, [trial: 3, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-01 23:51:39,141 DEBUG  , Thread-1, acto.py  :458, [trial: 3, gen: 2] Run and check
2023-04-01 23:51:39,496 INFO   , Thread-1, runner.py:291, [trial: 3, gen: 2] Waiting for system to converge... 
2023-04-01 23:51:45,065 INFO   , Thread-7, base.py  :41, Created cluster
2023-04-01 23:51:45,073 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:51:45,481 WARNING, Thread-8, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:51:45,482 DEBUG  , Thread-8, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:51:48,043 INFO   , Thread-8, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:51:50,920 ERROR  , Thread-5, runner.py:363, [trial: 2, gen: 2] System failed to converge within 600 seconds
2023-04-01 23:51:50,922 DEBUG  , Thread-5, runner.py:98, [trial: 2, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:51:50,923 DEBUG  , Thread-5, runner.py:99, [trial: 2, gen: 2] STDERR: 
2023-04-01 23:51:51,056 DEBUG  , Thread-5, runner.py:177, [trial: 2, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:40:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"fieldRef":{"fieldPath":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:39:36Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:40:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:40:52Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1420', 'uid': '135d4ca8-cad1-49ff-9731-76abac2425e4'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'fieldRef': {'fieldPath': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:40:52Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:40:41Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:40:42Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:39:38Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:40:47Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:51:51,081 DEBUG  , Thread-5, runner.py:202, [trial: 2, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-w6crl
2023-04-01 23:51:51,694 DEBUG  , Thread-5, checker.py:278, [trial: 2, gen: 2] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'fieldRef', 'fieldPath']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 1, 'value_from', 'field_ref', 'field_path']]
2023-04-01 23:51:51,694 ERROR  , Thread-5, checker.py:282, [trial: 2, gen: 2] Matched delta inconsistent with input delta
2023-04-01 23:51:51,694 ERROR  , Thread-5, checker.py:283, [trial: 2, gen: 2] Input delta: not present -> ACTOKEY
2023-04-01 23:51:51,694 ERROR  , Thread-5, checker.py:284, [trial: 2, gen: 2] Matched delta: metadata.name -> not present
2023-04-01 23:51:51,898 INFO   , Thread-5, checker.py:134, [trial: 2, gen: 2] Number of system state fields: [3043] Number of delta: [369]
2023-04-01 23:51:51,898 ERROR  , Thread-5, checker.py:561, [trial: 2, gen: 2] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:51:51,899 DEBUG  , Thread-5, acto.py  :489, [trial: 2, gen: 2] Running recovery
2023-04-01 23:51:53,800 INFO   , Thread-5, runner.py:291, [trial: 2, gen: 2] Waiting for system to converge... 
2023-04-01 23:51:56,395 INFO   , Thread-9, runner.py:360, [trial: 2, gen: 5] System took 00:01:00 to converge
2023-04-01 23:51:56,397 DEBUG  , Thread-9, runner.py:98, [trial: 2, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:51:56,397 DEBUG  , Thread-9, runner.py:99, [trial: 2, gen: 5] STDERR: 
2023-04-01 23:51:56,545 DEBUG  , Thread-9, runner.py:177, [trial: 2, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"minAvailable":5,"nodeTLSSecret":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:14Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:minAvailable': {}, 'f:nodeTLSSecret': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:47:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1714', 'uid': '5aa26381-a087-4f0d-88d6-fbe07e6d2d68'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'minAvailable': 5, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:31Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:16Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:45:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:51:56,572 DEBUG  , Thread-9, runner.py:202, [trial: 2, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-jp7j2
2023-04-01 23:51:57,246 DEBUG  , Thread-9, checker.py:278, [trial: 2, gen: 5] Input delta [['spec', 'minAvailable']] matched with [['test-cluster', 'spec', 'min_available']]
2023-04-01 23:51:57,511 INFO   , Thread-9, checker.py:134, [trial: 2, gen: 5] Number of system state fields: [3461] Number of delta: [166]
2023-04-01 23:51:57,512 INFO   , Thread-9, acto.py  :323, [trial: 2, gen: 5] Running bundled testcases
2023-04-01 23:51:57,512 DEBUG  , Thread-9, test_case.py:51, [trial: 2, gen: 5] Precondition [decrease_precondition] Result [True]
2023-04-01 23:51:57,513 INFO   , Thread-9, acto.py  :107, [trial: 2, gen: 5] JSON patch: [{"op": "replace", "path": "/spec/minAvailable", "value": 2}]
2023-04-01 23:51:57,513 DEBUG  , Thread-9, acto.py  :458, [trial: 2, gen: 5] Run and check
2023-04-01 23:51:57,841 INFO   , Thread-9, runner.py:291, [trial: 2, gen: 5] Waiting for system to converge... 
2023-04-01 23:52:00,306 INFO   , Thread-13, runner.py:360, [trial: 2, gen: 1] System took 00:02:52 to converge
2023-04-01 23:52:00,309 DEBUG  , Thread-13, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:52:00,309 DEBUG  , Thread-13, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:52:00,456 DEBUG  , Thread-13, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:47:59Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalAnnotations":{"ACTOKEY":"ACTOKEY"},"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:47:55Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:47:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:47:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalAnnotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:49:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1192', 'uid': 'b2bc5851-eaaf-4b19-a7b6-9516f84974f7'}, 'spec': {'additionalAnnotations': {'ACTOKEY': 'ACTOKEY'}, 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:48:10Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:47:58Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:47:59Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:52:00,484 DEBUG  , Thread-13, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-6wrtr
2023-04-01 23:52:01,100 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-0', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:52:01,100 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-1', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:52:01,100 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-2', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:52:01,100 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'template', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:52:01,101 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:52:01,101 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:52:01,101 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-public', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:52:01,101 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:52:01,316 INFO   , Thread-13, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [3473] Number of delta: [78]
2023-04-01 23:52:01,317 INFO   , Thread-13, acto.py  :323, [trial: 2, gen: 1] Running bundled testcases
2023-04-01 23:52:01,317 DEBUG  , Thread-13, test_case.py:51, [trial: 2, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:52:01,317 INFO   , Thread-13, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "replace", "path": "/spec/additionalAnnotations/ACTOKEY", "value": ""}]
2023-04-01 23:52:01,317 DEBUG  , Thread-13, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:52:01,694 INFO   , Thread-13, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:52:02,064 DEBUG  , Thread-7, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:52:02,577 INFO   , Thread-16, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:52:12,140 INFO   , Thread-7, deploy.py:91, Operator ready
2023-04-01 23:52:12,140 INFO   , Thread-7, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:52:12,189 INFO   , Thread-3, runner.py:360, [trial: 3, gen: 1] System took 00:07:09 to converge
2023-04-01 23:52:12,190 DEBUG  , Thread-3, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:52:12,190 DEBUG  , Thread-3, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-01 23:52:12,310 DEBUG  , Thread-3, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:05Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"resourceFieldRef":{"divisor":4,"resource":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:00Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:45:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:45:06Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1812', 'uid': 'ce182198-dae0-4663-8b16-134e3eacc71d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'resourceFieldRef': {'divisor': '4', 'resource': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:44:00Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:05Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:06Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:02Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:52:10Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:52:12,334 DEBUG  , Thread-3, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-zvcns
2023-04-01 23:52:12,797 DEBUG  , Thread-3, checker.py:278, [trial: 3, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'resource']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 2, 'value_from', 'resource_field_ref', 'resource']]
2023-04-01 23:52:12,798 ERROR  , Thread-3, checker.py:282, [trial: 3, gen: 1] Matched delta inconsistent with input delta
2023-04-01 23:52:12,798 ERROR  , Thread-3, checker.py:283, [trial: 3, gen: 1] Input delta: not present -> ACTOKEY
2023-04-01 23:52:12,798 ERROR  , Thread-3, checker.py:284, [trial: 3, gen: 1] Matched delta: not present -> limits.cpu
2023-04-01 23:52:12,888 INFO   , Thread-3, common.py:569, [trial: 3, gen: 1] Recognized invalid input through field [name] in error message: User set image.name, using that field instead of cockroachDBVersion
2023-04-01 23:52:12,888 INFO   , Thread-3, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [2022] Number of delta: [550]
2023-04-01 23:52:12,889 INFO   , Thread-3, acto.py  :301, [trial: 3, gen: 1] Setup produced invalid input
2023-04-01 23:52:12,890 WARNING, Thread-3, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:52:12,890 DEBUG  , Thread-3, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-01 23:52:13,309 INFO   , Thread-3, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-01 23:52:14,362 DEBUG  , Thread-7, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:52:15,444 INFO   , Thread-11, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:52:24,456 INFO   , Thread-7, deploy.py:91, Operator ready
2023-04-01 23:52:24,456 INFO   , Thread-7, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:52:27,808 INFO   , Thread-10, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:52:41,410 INFO   , Thread-6, runner.py:360, [trial: 2, gen: 0] System took 00:01:10 to converge
2023-04-01 23:52:41,411 DEBUG  , Thread-6, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:52:41,412 DEBUG  , Thread-6, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-01 23:52:41,557 DEBUG  , Thread-6, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:51:34Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:51:31Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:51:31Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:51:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:51:35Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1083', 'uid': '2ae74962-16de-40d9-a824-a172c3d7c4b6'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:51:45Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:51:33Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:51:34Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:51:33Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:51:40Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:52:41,586 DEBUG  , Thread-6, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-65fh2
2023-04-01 23:52:41,869 WARNING, Thread-6, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:52:41,870 INFO   , Thread-6, input.py :723, [trial: 2, gen: 1] Progress [12] cases left
2023-04-01 23:52:41,870 DEBUG  , Thread-6, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:52:41,870 INFO   , Thread-6, acto.py  :263, [trial: 2, gen: 1] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'resource'] satisfies
2023-04-01 23:52:41,870 INFO   , Thread-6, acto.py  :323, [trial: 2, gen: 1] Running bundled testcases
2023-04-01 23:52:41,870 DEBUG  , Thread-6, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-01 23:52:41,871 INFO   , Thread-6, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {"resource": ""}}}]}]
2023-04-01 23:52:41,871 DEBUG  , Thread-6, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:52:42,200 INFO   , Thread-6, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:52:57,957 INFO   , Thread-9, runner.py:360, [trial: 2, gen: 5] System took 00:01:00 to converge
2023-04-01 23:52:57,958 DEBUG  , Thread-9, runner.py:98, [trial: 2, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:52:57,958 DEBUG  , Thread-9, runner.py:99, [trial: 2, gen: 5] STDERR: 
2023-04-01 23:52:58,102 DEBUG  , Thread-9, runner.py:177, [trial: 2, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"minAvailable":2,"nodeTLSSecret":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:14Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:minAvailable': {}, 'f:nodeTLSSecret': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:47:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1815', 'uid': '5aa26381-a087-4f0d-88d6-fbe07e6d2d68'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'minAvailable': 2, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:31Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:16Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:45:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:52:58,130 DEBUG  , Thread-9, runner.py:202, [trial: 2, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-jp7j2
2023-04-01 23:52:58,615 DEBUG  , Thread-9, checker.py:278, [trial: 2, gen: 5] Input delta [['spec', 'minAvailable']] matched with [['test-cluster', 'spec', 'min_available']]
2023-04-01 23:52:58,822 INFO   , Thread-9, checker.py:134, [trial: 2, gen: 5] Number of system state fields: [3461] Number of delta: [8]
2023-04-01 23:52:58,823 WARNING, Thread-9, schema.py:573, [trial: 2, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:52:58,824 INFO   , Thread-9, input.py :723, [trial: 2, gen: 7] Progress [14] cases left
2023-04-01 23:52:58,824 DEBUG  , Thread-9, test_case.py:51, [trial: 2, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-01 23:52:58,824 INFO   , Thread-9, acto.py  :263, [trial: 2, gen: 7] Precondition of ['spec', 'minAvailable'] satisfies
2023-04-01 23:52:58,824 INFO   , Thread-9, acto.py  :323, [trial: 2, gen: 7] Running bundled testcases
2023-04-01 23:52:58,824 DEBUG  , Thread-9, test_case.py:51, [trial: 2, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-01 23:52:58,824 INFO   , Thread-9, acto.py  :107, [trial: 2, gen: 7] JSON patch: [{"op": "replace", "path": "/spec/minAvailable", "value": 0}]
2023-04-01 23:52:58,824 DEBUG  , Thread-9, acto.py  :458, [trial: 2, gen: 7] Run and check
2023-04-01 23:52:59,150 INFO   , Thread-9, runner.py:291, [trial: 2, gen: 7] Waiting for system to converge... 
2023-04-01 23:52:59,185 INFO   , Thread-8, runner.py:360, [trial: 2, gen: 0] System took 00:01:11 to converge
2023-04-01 23:52:59,187 DEBUG  , Thread-8, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:52:59,187 DEBUG  , Thread-8, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-01 23:52:59,357 DEBUG  , Thread-8, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:51:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:51:48Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:51:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:51:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:51:52Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1070', 'uid': '1aa29bf9-dfd9-4861-9548-10e93d1afb59'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:52:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:51:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:51:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:51:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:52:59,387 DEBUG  , Thread-8, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-j7hw7
2023-04-01 23:52:59,678 WARNING, Thread-8, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:52:59,678 INFO   , Thread-8, input.py :723, [trial: 2, gen: 1] Progress [17] cases left
2023-04-01 23:52:59,678 DEBUG  , Thread-8, test_case.py:51, [trial: 2, gen: 1] Precondition [change_precondition] Result [False]
2023-04-01 23:52:59,678 INFO   , Thread-8, acto.py  :267, [trial: 2, gen: 1] Precondition of ["spec", "image", "pullPolicy"] fails, try setup first
2023-04-01 23:52:59,679 INFO   , Thread-8, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "add", "path": "/spec/image/pullPolicy", "value": "ACTOKEY"}]
2023-04-01 23:52:59,679 DEBUG  , Thread-8, test_case.py:51, [trial: 2, gen: 1] Precondition [change_precondition] Result [True]
2023-04-01 23:52:59,679 DEBUG  , Thread-8, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-01 23:53:00,038 INFO   , Thread-8, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:53:02,672 INFO   , Thread-16, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:53:04,581 WARNING, Thread-7, schema.py:573, [trial: 3, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:53:04,581 DEBUG  , Thread-7, acto.py  :458, [trial: 3, gen: 0] Run and check
2023-04-01 23:53:07,169 INFO   , Thread-7, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-01 23:53:09,013 INFO   , Thread-5, runner.py:360, [trial: 2, gen: 2] System took 00:01:15 to converge
2023-04-01 23:53:09,015 DEBUG  , Thread-5, runner.py:98, [trial: 2, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:53:09,015 DEBUG  , Thread-5, runner.py:99, [trial: 2, gen: 2] STDERR: 
2023-04-01 23:53:09,171 DEBUG  , Thread-5, runner.py:177, [trial: 2, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:40:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:39:36Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:40:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:40:52Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2373', 'uid': '135d4ca8-cad1-49ff-9731-76abac2425e4'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:40:52Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:40:41Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:40:42Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:39:38Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:40:47Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:53:09,208 DEBUG  , Thread-5, runner.py:202, [trial: 2, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-w6crl
2023-04-01 23:53:09,874 INFO   , Thread-5, acto.py  :187, Trial 2 finished, completed in 00:17:14
2023-04-01 23:53:09,874 INFO   , Thread-5, acto.py  :188, ---------------------------------------

2023-04-01 23:53:09,899 DEBUG  , Thread-5, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-w6crl
2023-04-01 23:53:15,530 INFO   , Thread-11, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:53:20,470 INFO   , Thread-3, runner.py:360, [trial: 3, gen: 1] System took 00:01:07 to converge
2023-04-01 23:53:20,471 DEBUG  , Thread-3, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:53:20,472 DEBUG  , Thread-3, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-01 23:53:20,634 DEBUG  , Thread-3, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:05Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:00Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:52:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:52:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1946', 'uid': 'ce182198-dae0-4663-8b16-134e3eacc71d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:52:20Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:05Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:06Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:02Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:52:15Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:53:20,666 DEBUG  , Thread-3, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-zvcns
2023-04-01 23:53:21,174 INFO   , Thread-3, acto.py  :321, [trial: 3, gen: 1] All setups failed
2023-04-01 23:53:21,175 WARNING, Thread-3, schema.py:573, [trial: 3, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:53:21,175 INFO   , Thread-3, input.py :723, [trial: 3, gen: 3] Progress [16] cases left
2023-04-01 23:53:21,177 DEBUG  , Thread-3, test_case.py:46, [trial: 3, gen: 3] Precondition [precondition] Result [False]
2023-04-01 23:53:21,177 DEBUG  , Thread-3, test_case.py:51, [trial: 3, gen: 3] Precondition [increase_precondition] Result [False]
2023-04-01 23:53:21,177 INFO   , Thread-3, acto.py  :267, [trial: 3, gen: 3] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "resourceFieldRef", "divisor"] fails, try setup first
2023-04-01 23:53:21,177 INFO   , Thread-3, acto.py  :107, [trial: 3, gen: 3] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {"resource": "ACTOKEY", "divisor": 0}}}]}]
2023-04-01 23:53:21,178 DEBUG  , Thread-3, test_case.py:46, [trial: 3, gen: 3] Precondition [precondition] Result [True]
2023-04-01 23:53:21,179 DEBUG  , Thread-3, test_case.py:51, [trial: 3, gen: 3] Precondition [increase_precondition] Result [True]
2023-04-01 23:53:21,179 DEBUG  , Thread-3, acto.py  :458, [trial: 3, gen: 3] Run and check
2023-04-01 23:53:21,540 INFO   , Thread-3, runner.py:291, [trial: 3, gen: 3] Waiting for system to converge... 
2023-04-01 23:53:25,497 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-4
2023-04-01 23:53:25,557 INFO   , Thread-4, runner.py:360, [trial: 1, gen: 3] System took 00:02:21 to converge
2023-04-01 23:53:25,559 DEBUG  , Thread-4, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:53:25,559 DEBUG  , Thread-4, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:53:25,708 DEBUG  , Thread-4, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"tolerations":[{"effect":"NoSchedule","key":"test-key","operator":"Equal","value":"test-value"},{"effect":"NoSchedule","key":"node-role.kubernetes.io/control-plane","operator":"Exists"}]}}\n'}, 'creationTimestamp': '2023-04-02T03:45:05Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:51:03Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1927', 'uid': '05703de4-390e-4fa3-b90e-898cc20a876a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'tolerations': [{'effect': 'NoSchedule', 'key': 'test-key', 'operator': 'Equal', 'value': 'test-value'}, {'effect': 'NoSchedule', 'key': 'node-role.kubernetes.io/control-plane', 'operator': 'Exists'}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:53:25,741 DEBUG  , Thread-4, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-h9bj2
2023-04-01 23:53:26,745 INFO   , Thread-4, common.py:569, [trial: 1, gen: 3] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-01 23:53:26,745 INFO   , Thread-4, checker.py:134, [trial: 1, gen: 3] Number of system state fields: [3502] Number of delta: [128]
2023-04-01 23:53:26,746 INFO   , Thread-4, acto.py  :301, [trial: 1, gen: 3] Setup produced invalid input
2023-04-01 23:53:26,746 WARNING, Thread-4, schema.py:573, [trial: 1, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:53:26,747 DEBUG  , Thread-4, acto.py  :458, [trial: 1, gen: 3] Run and check
2023-04-01 23:53:27,109 INFO   , Thread-4, runner.py:291, [trial: 1, gen: 3] Waiting for system to converge... 
2023-04-01 23:53:27,899 INFO   , Thread-10, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:53:29,899 INFO   , Thread-2, runner.py:323, [trial: 2, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:53:31,709 INFO   , Thread-14, runner.py:323, [trial: 2, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:53:37,540 ERROR  , Thread-11, runner.py:363, [trial: 2, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:53:37,543 DEBUG  , Thread-11, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:53:37,543 DEBUG  , Thread-11, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:53:37,677 DEBUG  , Thread-11, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:42:28Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":""}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:42:24Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:42:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:43:37Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1193', 'uid': 'ae14b5ba-5df9-4abc-83f7-4b358a5c5c45'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:42:39Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:42:27Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:42:29Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:42:34Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:53:37,705 DEBUG  , Thread-11, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-7prrm
2023-04-01 23:53:38,476 INFO   , Thread-11, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [3040] Number of delta: [213]
2023-04-01 23:53:38,476 ERROR  , Thread-11, checker.py:561, [trial: 2, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:53:38,477 INFO   , Thread-11, acto.py  :332, [trial: 2, gen: 1] Error result, running recovery
2023-04-01 23:53:38,477 DEBUG  , Thread-11, acto.py  :489, [trial: 2, gen: 1] Running recovery
2023-04-01 23:53:40,398 INFO   , Thread-11, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:53:53,333 INFO   , Thread-15, runner.py:360, [trial: 4, gen: 1] System took 00:07:07 to converge
2023-04-01 23:53:53,335 DEBUG  , Thread-15, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:53:53,335 DEBUG  , Thread-15, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-01 23:53:53,455 DEBUG  , Thread-15, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:46:49Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","optional":true}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:45:43Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:46:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:46:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:46:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1951', 'uid': '378bc157-bf44-4968-ae6f-35fab8c4d4be'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'optional': True}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:43Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:46:48Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:46:50Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:45Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:53:49Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:53:53,484 DEBUG  , Thread-15, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-dtkfn
2023-04-01 23:53:53,932 DEBUG  , Thread-15, checker.py:278, [trial: 4, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'configMapKeyRef', 'optional']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 4, 'value_from', 'config_map_key_ref', 'optional']]
2023-04-01 23:53:54,023 INFO   , Thread-15, common.py:569, [trial: 4, gen: 1] Recognized invalid input through field [name] in error message: User set image.name, using that field instead of cockroachDBVersion
2023-04-01 23:53:54,023 INFO   , Thread-15, checker.py:134, [trial: 4, gen: 1] Number of system state fields: [2022] Number of delta: [550]
2023-04-01 23:53:54,024 INFO   , Thread-15, acto.py  :301, [trial: 4, gen: 1] Setup produced invalid input
2023-04-01 23:53:54,025 WARNING, Thread-15, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:53:54,025 DEBUG  , Thread-15, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-01 23:53:54,405 INFO   , Thread-15, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-01 23:53:59,289 INFO   , Thread-9, runner.py:360, [trial: 2, gen: 7] System took 00:01:00 to converge
2023-04-01 23:53:59,290 DEBUG  , Thread-9, runner.py:98, [trial: 2, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:53:59,290 DEBUG  , Thread-9, runner.py:99, [trial: 2, gen: 7] STDERR: 
2023-04-01 23:53:59,425 DEBUG  , Thread-9, runner.py:177, [trial: 2, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"minAvailable":0,"nodeTLSSecret":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:14Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:minAvailable': {}, 'f:nodeTLSSecret': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:47:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1908', 'uid': '5aa26381-a087-4f0d-88d6-fbe07e6d2d68'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'minAvailable': 0, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:31Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:16Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:45:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:53:59,456 DEBUG  , Thread-9, runner.py:202, [trial: 2, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-jp7j2
2023-04-01 23:54:00,118 DEBUG  , Thread-9, checker.py:278, [trial: 2, gen: 7] Input delta [['spec', 'minAvailable']] matched with [['test-cluster', 'spec', 'min_available']]
2023-04-01 23:54:00,357 INFO   , Thread-9, checker.py:134, [trial: 2, gen: 7] Number of system state fields: [3467] Number of delta: [6]
2023-04-01 23:54:00,359 WARNING, Thread-9, schema.py:573, [trial: 2, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-01 23:54:00,359 INFO   , Thread-9, input.py :723, [trial: 2, gen: 8] Progress [13] cases left
2023-04-01 23:54:00,359 DEBUG  , Thread-9, test_case.py:51, [trial: 2, gen: 8] Precondition [delete_precondition] Result [False]
2023-04-01 23:54:00,359 INFO   , Thread-9, acto.py  :267, [trial: 2, gen: 8] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "secretKeyRef", "optional"] fails, try setup first
2023-04-01 23:54:00,360 INFO   , Thread-9, acto.py  :107, [trial: 2, gen: 8] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"secretKeyRef": {"key": "ACTOKEY", "optional": true}}}]}]
2023-04-01 23:54:00,360 DEBUG  , Thread-9, test_case.py:51, [trial: 2, gen: 8] Precondition [delete_precondition] Result [True]
2023-04-01 23:54:00,360 DEBUG  , Thread-9, acto.py  :458, [trial: 2, gen: 8] Run and check
2023-04-01 23:54:00,710 INFO   , Thread-9, runner.py:291, [trial: 2, gen: 8] Waiting for system to converge... 
2023-04-01 23:54:02,491 INFO   , Thread-1, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:54:07,304 INFO   , Thread-7, runner.py:360, [trial: 3, gen: 0] System took 00:01:00 to converge
2023-04-01 23:54:07,306 DEBUG  , Thread-7, runner.py:98, [trial: 3, gen: 0] STDOUT: 
2023-04-01 23:54:07,306 DEBUG  , Thread-7, runner.py:99, [trial: 3, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-06-0003/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.75.145:443: connect: connection refused

2023-04-01 23:54:07,394 DEBUG  , Thread-7, runner.py:177, [trial: 3, gen: 0] {}
2023-04-01 23:54:07,394 ERROR  , Thread-7, runner.py:107, [trial: 3, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:54:07,395 INFO   , Thread-7, checker.py:103, [trial: 3, gen: 0] Connection refused, reject mutation
2023-04-01 23:54:07,396 INFO   , Thread-7, acto.py  :472, [trial: 3, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-01 23:54:10,927 INFO   , Thread-5, base.py  :41, Created cluster
2023-04-01 23:54:10,940 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:54:25,626 INFO   , Thread-13, runner.py:360, [trial: 2, gen: 1] System took 00:02:23 to converge
2023-04-01 23:54:25,627 DEBUG  , Thread-13, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:54:25,627 DEBUG  , Thread-13, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:54:25,785 DEBUG  , Thread-13, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:47:59Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalAnnotations":{"ACTOKEY":""},"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:47:55Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:47:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalAnnotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:49:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1616', 'uid': 'b2bc5851-eaaf-4b19-a7b6-9516f84974f7'}, 'spec': {'additionalAnnotations': {'ACTOKEY': ''}, 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:48:10Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:47:58Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:47:59Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:54:25,820 DEBUG  , Thread-13, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-6wrtr
2023-04-01 23:54:26,473 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-0', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:54:26,473 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-1', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:54:26,473 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-2', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:54:26,473 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:54:26,473 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'template', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:54:26,473 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:54:26,473 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-public', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:54:26,473 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 1] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:54:26,693 INFO   , Thread-13, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [3461] Number of delta: [78]
2023-04-01 23:54:26,695 WARNING, Thread-13, schema.py:573, [trial: 2, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:54:26,695 INFO   , Thread-13, input.py :723, [trial: 2, gen: 3] Progress [5] cases left
2023-04-01 23:54:26,695 DEBUG  , Thread-13, test_case.py:51, [trial: 2, gen: 3] Precondition [change_precondition] Result [True]
2023-04-01 23:54:26,695 INFO   , Thread-13, acto.py  :263, [trial: 2, gen: 3] Precondition of ['spec', 'additionalAnnotations', 'ACTOKEY'] satisfies
2023-04-01 23:54:26,695 INFO   , Thread-13, acto.py  :323, [trial: 2, gen: 3] Running bundled testcases
2023-04-01 23:54:26,695 DEBUG  , Thread-13, test_case.py:51, [trial: 2, gen: 3] Precondition [change_precondition] Result [True]
2023-04-01 23:54:26,696 INFO   , Thread-13, acto.py  :107, [trial: 2, gen: 3] JSON patch: [{"op": "replace", "path": "/spec/additionalAnnotations/ACTOKEY", "value": "ACTOKEY"}]
2023-04-01 23:54:26,696 DEBUG  , Thread-13, acto.py  :458, [trial: 2, gen: 3] Run and check
2023-04-01 23:54:27,062 INFO   , Thread-13, runner.py:291, [trial: 2, gen: 3] Waiting for system to converge... 
2023-04-01 23:54:27,813 INFO   , Thread-7, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-01 23:54:27,991 INFO   , Thread-10, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:54:28,188 DEBUG  , Thread-5, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:54:31,489 INFO   , Thread-3, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:54:38,267 INFO   , Thread-5, deploy.py:91, Operator ready
2023-04-01 23:54:38,267 INFO   , Thread-5, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:54:40,215 DEBUG  , Thread-5, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:54:41,823 INFO   , Thread-11, runner.py:360, [trial: 2, gen: 1] System took 00:01:01 to converge
2023-04-01 23:54:41,824 DEBUG  , Thread-11, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:54:41,824 DEBUG  , Thread-11, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:54:41,960 DEBUG  , Thread-11, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:42:28Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:42:24Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:42:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:53:40Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2137', 'uid': 'ae14b5ba-5df9-4abc-83f7-4b358a5c5c45'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:42:39Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:42:27Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:42:29Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:42:34Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:54:41,990 DEBUG  , Thread-11, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-7prrm
2023-04-01 23:54:42,650 INFO   , Thread-11, acto.py  :187, Trial 2 finished, completed in 00:14:33
2023-04-01 23:54:42,651 INFO   , Thread-11, acto.py  :188, ---------------------------------------

2023-04-01 23:54:42,676 DEBUG  , Thread-11, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-7prrm
2023-04-01 23:54:46,456 INFO   , Thread-16, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:54:50,304 INFO   , Thread-5, deploy.py:91, Operator ready
2023-04-01 23:54:50,304 INFO   , Thread-5, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:54:51,848 INFO   , Thread-2, runner.py:323, [trial: 2, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:54:53,652 INFO   , Thread-14, runner.py:323, [trial: 2, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:54:58,646 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-10
2023-04-01 23:55:01,634 INFO   , Thread-15, runner.py:360, [trial: 4, gen: 1] System took 00:01:07 to converge
2023-04-01 23:55:01,635 DEBUG  , Thread-15, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:55:01,636 DEBUG  , Thread-15, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-01 23:55:01,915 DEBUG  , Thread-15, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:46:49Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:45:43Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:53:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:54:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2100', 'uid': '378bc157-bf44-4968-ae6f-35fab8c4d4be'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:54:04Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:46:48Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:46:50Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:45Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:53:59Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:55:01,942 DEBUG  , Thread-15, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-dtkfn
2023-04-01 23:55:02,365 INFO   , Thread-15, acto.py  :321, [trial: 4, gen: 1] All setups failed
2023-04-01 23:55:02,365 WARNING, Thread-15, schema.py:573, [trial: 4, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-01 23:55:02,366 INFO   , Thread-15, input.py :723, [trial: 4, gen: 3] Progress [3] cases left
2023-04-01 23:55:02,366 DEBUG  , Thread-15, test_case.py:51, [trial: 4, gen: 3] Precondition [toggle_off_precondition] Result [False]
2023-04-01 23:55:02,366 INFO   , Thread-15, acto.py  :267, [trial: 4, gen: 3] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "configMapKeyRef", "optional"] fails, try setup first
2023-04-01 23:55:02,366 INFO   , Thread-15, acto.py  :107, [trial: 4, gen: 3] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "optional": true}}}]}]
2023-04-01 23:55:02,366 DEBUG  , Thread-15, test_case.py:51, [trial: 4, gen: 3] Precondition [toggle_off_precondition] Result [True]
2023-04-01 23:55:02,366 DEBUG  , Thread-15, acto.py  :458, [trial: 4, gen: 3] Run and check
2023-04-01 23:55:02,575 INFO   , Thread-1, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:55:04,448 INFO   , Thread-15, runner.py:291, [trial: 4, gen: 3] Waiting for system to converge... 
2023-04-01 23:55:09,709 INFO   , Thread-6, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:55:28,074 INFO   , Thread-10, runner.py:323, [trial: 1, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:55:29,286 INFO   , Thread-8, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:55:29,296 INFO   , Thread-7, runner.py:360, [trial: 3, gen: 0] System took 00:01:01 to converge
2023-04-01 23:55:29,297 DEBUG  , Thread-7, runner.py:98, [trial: 3, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:55:29,298 DEBUG  , Thread-7, runner.py:99, [trial: 3, gen: 0] STDERR: 
2023-04-01 23:55:29,397 DEBUG  , Thread-7, runner.py:177, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:54:27Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:54:27Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:54:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1023', 'uid': '86e89235-ea98-43f9-b5ae-bbec2ef4d5d3'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:54:27Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:54:27Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:54:29Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:55:29,418 DEBUG  , Thread-7, runner.py:202, [trial: 3, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-5f4dt
2023-04-01 23:55:29,620 WARNING, Thread-7, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:55:29,620 INFO   , Thread-7, input.py :723, [trial: 3, gen: 1] Progress [10] cases left
2023-04-01 23:55:29,620 DEBUG  , Thread-7, test_case.py:51, [trial: 3, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-01 23:55:29,620 INFO   , Thread-7, acto.py  :267, [trial: 3, gen: 1] Precondition of ["spec", "ingress", "ui"] fails, try setup first
2023-04-01 23:55:29,621 INFO   , Thread-7, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"annotations": {"ACTOKEY": "ACTOKEY"}, "host": "ACTOKEY", "ingressClassName": "ACTOKEY", "tls": [{"hosts": [], "secretName": "ACTOKEY"}, {"hosts": ["ACTOKEY", "ACTOKEY", "ACTOKEY"], "secretName": null}, {"hosts": null, "secretName": null}]}}}]
2023-04-01 23:55:29,621 DEBUG  , Thread-7, test_case.py:51, [trial: 3, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:55:29,621 DEBUG  , Thread-7, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-01 23:55:29,956 INFO   , Thread-7, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-01 23:55:30,441 WARNING, Thread-5, schema.py:573, [trial: 3, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:55:30,441 DEBUG  , Thread-5, acto.py  :458, [trial: 3, gen: 0] Run and check
2023-04-01 23:55:31,577 INFO   , Thread-3, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:55:32,958 INFO   , Thread-5, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-01 23:55:46,551 INFO   , Thread-16, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:55:51,930 INFO   , Thread-2, runner.py:323, [trial: 2, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:55:53,016 INFO   , Thread-11, base.py  :41, Created cluster
2023-04-01 23:55:53,032 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:55:53,734 INFO   , Thread-14, runner.py:323, [trial: 2, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:55:57,856 INFO   , Thread-4, runner.py:360, [trial: 1, gen: 3] System took 00:02:30 to converge
2023-04-01 23:55:57,857 DEBUG  , Thread-4, runner.py:98, [trial: 1, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:55:57,858 DEBUG  , Thread-4, runner.py:99, [trial: 1, gen: 3] STDERR: 
2023-04-01 23:55:57,992 DEBUG  , Thread-4, runner.py:177, [trial: 1, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:45:05Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:53:27Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2312', 'uid': '05703de4-390e-4fa3-b90e-898cc20a876a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:55:58,019 DEBUG  , Thread-4, runner.py:202, [trial: 1, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-h9bj2
2023-04-01 23:55:59,001 INFO   , Thread-4, acto.py  :321, [trial: 1, gen: 3] All setups failed
2023-04-01 23:55:59,001 WARNING, Thread-4, schema.py:573, [trial: 1, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:55:59,002 INFO   , Thread-4, input.py :723, [trial: 1, gen: 5] Progress [13] cases left
2023-04-01 23:55:59,002 DEBUG  , Thread-4, test_case.py:51, [trial: 1, gen: 5] Precondition [pop_precondition] Result [False]
2023-04-01 23:55:59,002 INFO   , Thread-4, acto.py  :267, [trial: 1, gen: 5] Precondition of ["spec", "tolerations"] fails, try setup first
2023-04-01 23:55:59,002 INFO   , Thread-4, acto.py  :107, [trial: 1, gen: 5] JSON patch: [{"op": "add", "path": "/spec/tolerations", "value": [{"key": "test-key", "operator": "Equal", "value": "test-value", "effect": "NoSchedule"}, {"key": "node-role.kubernetes.io/control-plane", "operator": "Exists", "effect": "NoSchedule"}]}]
2023-04-01 23:55:59,003 DEBUG  , Thread-4, test_case.py:51, [trial: 1, gen: 5] Precondition [pop_precondition] Result [True]
2023-04-01 23:55:59,003 DEBUG  , Thread-4, acto.py  :458, [trial: 1, gen: 5] Run and check
2023-04-01 23:56:00,929 INFO   , Thread-4, runner.py:291, [trial: 1, gen: 5] Waiting for system to converge... 
2023-04-01 23:56:02,664 INFO   , Thread-1, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:56:08,644 INFO   , Thread-15, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:56:10,435 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:56:20,514 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-01 23:56:20,515 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:56:20,555 ERROR  , Thread-10, runner.py:363, [trial: 1, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:56:20,558 DEBUG  , Thread-10, runner.py:98, [trial: 1, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:56:20,558 DEBUG  , Thread-10, runner.py:99, [trial: 1, gen: 1] STDERR: 
2023-04-01 23:56:20,713 DEBUG  , Thread-10, runner.py:177, [trial: 1, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:36:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:35:15Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:36:21Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:46:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:46:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3398', 'uid': '85a29493-b14c-4b66-8941-f5de59767251'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:35:15Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:36:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:36:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:35:17Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:56:18Z', 'message': 'pod has not completely started', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:56:20,742 DEBUG  , Thread-10, runner.py:202, [trial: 1, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-ttvw5
2023-04-01 23:56:21,181 DEBUG  , Thread-10, checker.py:728, [trial: 1, gen: 1] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [root['pod']['test-cluster-0'], root['pod']['test-cluster-1'], root['pod']['test-cluster-2'], root['stateful_set']['test-cluster'], root['service']['test-cluster'], root['service']['test-cluster-public'], root['pvc']['datadir-test-cluster-0'], root['pvc']['datadir-test-cluster-1'], root['pvc']['datadir-test-cluster-2'], root['pod_disruption_budget']['test-cluster'], root['secret']['test-cluster-ca'], root['secret']['test-cluster-node'], root['secret']['test-cluster-root']]}
2023-04-01 23:56:21,187 INFO   , Thread-10, acto.py  :187, Trial 1 finished, completed in 00:23:19
2023-04-01 23:56:21,188 INFO   , Thread-10, acto.py  :188, ---------------------------------------

2023-04-01 23:56:21,220 DEBUG  , Thread-10, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-ttvw5
2023-04-01 23:56:22,498 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:56:30,902 INFO   , Thread-7, runner.py:360, [trial: 3, gen: 1] System took 00:01:00 to converge
2023-04-01 23:56:30,903 DEBUG  , Thread-7, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:56:30,903 DEBUG  , Thread-7, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-01 23:56:31,009 DEBUG  , Thread-7, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"annotations":{"ACTOKEY":"ACTOKEY"},"host":"ACTOKEY","ingressClassName":"ACTOKEY","tls":[{"hosts":[],"secretName":"ACTOKEY"},{"hosts":["ACTOKEY","ACTOKEY","ACTOKEY"],"secretName":null},{"hosts":null,"secretName":null}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:54:27Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:54:29Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}, 'f:ingressClassName': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:55:29Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:55:31Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1126', 'uid': '86e89235-ea98-43f9-b5ae-bbec2ef4d5d3'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'annotations': {'ACTOKEY': 'ACTOKEY'}, 'host': 'ACTOKEY', 'ingressClassName': 'ACTOKEY', 'tls': [{'secretName': 'ACTOKEY'}, {'hosts': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY']}, {}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:54:27Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:54:27Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:55:31Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-01 23:56:31,028 DEBUG  , Thread-7, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-5f4dt
2023-04-01 23:56:31,700 INFO   , Thread-6, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:56:31,794 INFO   , Thread-7, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [1811] Number of delta: [154]
2023-04-01 23:56:31,794 INFO   , Thread-7, acto.py  :323, [trial: 3, gen: 1] Running bundled testcases
2023-04-01 23:56:31,795 DEBUG  , Thread-7, test_case.py:51, [trial: 3, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:56:31,795 INFO   , Thread-7, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "remove", "path": "/spec/ingress/ui/tls"}, {"op": "remove", "path": "/spec/ingress/ui/ingressClassName"}, {"op": "remove", "path": "/spec/ingress/ui/annotations"}, {"op": "remove", "path": "/spec/ingress/ui/host"}]
2023-04-01 23:56:31,795 DEBUG  , Thread-7, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-01 23:56:32,123 INFO   , Thread-7, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-01 23:56:32,591 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-01 23:56:32,591 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:56:33,173 INFO   , Thread-5, runner.py:360, [trial: 3, gen: 0] System took 00:01:00 to converge
2023-04-01 23:56:33,175 DEBUG  , Thread-5, runner.py:98, [trial: 3, gen: 0] STDOUT: 
2023-04-01 23:56:33,175 DEBUG  , Thread-5, runner.py:99, [trial: 3, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-04-0003/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.155.245:443: connect: connection refused

2023-04-01 23:56:33,271 DEBUG  , Thread-5, runner.py:177, [trial: 3, gen: 0] {}
2023-04-01 23:56:33,271 ERROR  , Thread-5, runner.py:107, [trial: 3, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:56:33,272 INFO   , Thread-5, checker.py:103, [trial: 3, gen: 0] Connection refused, reject mutation
2023-04-01 23:56:33,272 INFO   , Thread-5, acto.py  :472, [trial: 3, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-01 23:56:33,703 INFO   , Thread-9, runner.py:323, [trial: 2, gen: 8] Statefulset test-cluster is not ready yet
2023-04-01 23:56:37,372 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-9
2023-04-01 23:56:46,641 INFO   , Thread-16, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:56:48,895 INFO   , Thread-13, runner.py:360, [trial: 2, gen: 3] System took 00:02:21 to converge
2023-04-01 23:56:48,896 DEBUG  , Thread-13, runner.py:98, [trial: 2, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:56:48,897 DEBUG  , Thread-13, runner.py:99, [trial: 2, gen: 3] STDERR: 
2023-04-01 23:56:49,026 DEBUG  , Thread-13, runner.py:177, [trial: 2, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:47:59Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalAnnotations":{"ACTOKEY":"ACTOKEY"},"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:47:55Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:47:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalAnnotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:49:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2024', 'uid': 'b2bc5851-eaaf-4b19-a7b6-9516f84974f7'}, 'spec': {'additionalAnnotations': {'ACTOKEY': 'ACTOKEY'}, 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:48:10Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:47:58Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:47:59Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:56:49,053 DEBUG  , Thread-13, runner.py:202, [trial: 2, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-6wrtr
2023-04-01 23:56:49,698 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-0', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:56:49,698 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-1', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:56:49,699 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-2', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:56:49,699 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:56:49,699 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'template', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:56:49,699 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:56:49,699 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-public', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:56:49,699 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:56:49,915 INFO   , Thread-13, checker.py:134, [trial: 2, gen: 3] Number of system state fields: [3461] Number of delta: [78]
2023-04-01 23:56:49,916 WARNING, Thread-13, schema.py:573, [trial: 2, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-01 23:56:49,916 INFO   , Thread-13, input.py :723, [trial: 2, gen: 4] Progress [4] cases left
2023-04-01 23:56:49,916 DEBUG  , Thread-13, test_case.py:51, [trial: 2, gen: 4] Precondition [empty_precondition] Result [True]
2023-04-01 23:56:49,916 INFO   , Thread-13, acto.py  :263, [trial: 2, gen: 4] Precondition of ['spec', 'additionalAnnotations', 'ACTOKEY'] satisfies
2023-04-01 23:56:49,916 INFO   , Thread-13, acto.py  :323, [trial: 2, gen: 4] Running bundled testcases
2023-04-01 23:56:49,916 DEBUG  , Thread-13, test_case.py:51, [trial: 2, gen: 4] Precondition [empty_precondition] Result [True]
2023-04-01 23:56:49,917 INFO   , Thread-13, acto.py  :107, [trial: 2, gen: 4] JSON patch: [{"op": "replace", "path": "/spec/additionalAnnotations/ACTOKEY", "value": ""}]
2023-04-01 23:56:49,917 DEBUG  , Thread-13, acto.py  :458, [trial: 2, gen: 4] Run and check
2023-04-01 23:56:50,263 INFO   , Thread-13, runner.py:291, [trial: 2, gen: 4] Waiting for system to converge... 
2023-04-01 23:56:51,227 INFO   , Thread-8, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:56:53,693 INFO   , Thread-5, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-01 23:57:08,741 INFO   , Thread-15, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:57:12,726 WARNING, Thread-11, schema.py:573, [trial: 3, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:57:12,727 DEBUG  , Thread-11, acto.py  :458, [trial: 3, gen: 0] Run and check
2023-04-01 23:57:15,536 INFO   , Thread-3, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:57:15,986 INFO   , Thread-11, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-01 23:57:30,666 INFO   , Thread-10, base.py  :41, Created cluster
2023-04-01 23:57:30,679 INFO   , root, kind.py  :96, Loading preload images
2023-04-01 23:57:31,791 INFO   , Thread-6, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:57:35,715 INFO   , Thread-2, runner.py:323, [trial: 2, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:57:37,500 INFO   , Thread-14, runner.py:323, [trial: 2, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:57:46,728 INFO   , Thread-16, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:57:48,152 DEBUG  , Thread-10, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:57:51,307 INFO   , Thread-8, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:57:51,492 INFO   , Thread-1, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:57:55,651 INFO   , Thread-9, runner.py:323, [trial: 2, gen: 8] Statefulset test-cluster is not ready yet
2023-04-01 23:57:58,235 INFO   , Thread-10, deploy.py:91, Operator ready
2023-04-01 23:57:58,235 INFO   , Thread-10, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:58:00,262 DEBUG  , Thread-10, deploy.py:75, Waiting for all pods to be ready
2023-04-01 23:58:04,839 INFO   , Thread-5, runner.py:360, [trial: 3, gen: 0] System took 00:01:11 to converge
2023-04-01 23:58:04,840 DEBUG  , Thread-5, runner.py:98, [trial: 3, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:58:04,841 DEBUG  , Thread-5, runner.py:99, [trial: 3, gen: 0] STDERR: 
2023-04-01 23:58:04,986 DEBUG  , Thread-5, runner.py:177, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:56:57Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:56:53Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:56:53Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:56:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:56:57Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1189', 'uid': 'e32da623-eb0d-4bc3-aabb-3c3629eb3ff9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:08Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:56:56Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:56:57Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:02Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:58:05,020 DEBUG  , Thread-5, runner.py:202, [trial: 3, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-8kkn9
2023-04-01 23:58:05,303 WARNING, Thread-5, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:58:05,303 INFO   , Thread-5, input.py :723, [trial: 3, gen: 1] Progress [8] cases left
2023-04-01 23:58:05,303 DEBUG  , Thread-5, test_case.py:51, [trial: 3, gen: 1] Precondition [change_precondition] Result [False]
2023-04-01 23:58:05,304 INFO   , Thread-5, acto.py  :267, [trial: 3, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "fieldRef", "fieldPath"] fails, try setup first
2023-04-01 23:58:05,304 INFO   , Thread-5, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"fieldRef": {"fieldPath": "ACTOKEY"}}}]}]
2023-04-01 23:58:05,304 DEBUG  , Thread-5, test_case.py:51, [trial: 3, gen: 1] Precondition [change_precondition] Result [True]
2023-04-01 23:58:05,304 DEBUG  , Thread-5, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-01 23:58:05,638 INFO   , Thread-5, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-01 23:58:09,357 ERROR  , Thread-16, runner.py:363, [trial: 2, gen: 1] System failed to converge within 600 seconds
2023-04-01 23:58:09,361 DEBUG  , Thread-16, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:58:09,362 DEBUG  , Thread-16, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:58:09,503 DEBUG  , Thread-16, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:46:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:46:39Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:46:43Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:46:43Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:48:09Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1327', 'uid': 'baf5e017-3370-45b5-b4a1-3461fdb34b79'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:46:53Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:46:41Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:46:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:46:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:58:09,526 DEBUG  , Thread-16, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-m7m5z
2023-04-01 23:58:10,226 INFO   , Thread-16, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [3040] Number of delta: [222]
2023-04-01 23:58:10,226 ERROR  , Thread-16, checker.py:561, [trial: 2, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-01 23:58:10,227 DEBUG  , Thread-16, acto.py  :489, [trial: 2, gen: 1] Running recovery
2023-04-01 23:58:10,362 INFO   , Thread-10, deploy.py:91, Operator ready
2023-04-01 23:58:10,362 INFO   , Thread-10, deploy.py:96, All pods took 0 seconds to get ready
2023-04-01 23:58:12,197 INFO   , Thread-16, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-01 23:58:15,624 INFO   , Thread-3, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:58:27,035 INFO   , Thread-11, runner.py:360, [trial: 3, gen: 0] System took 00:01:11 to converge
2023-04-01 23:58:27,037 DEBUG  , Thread-11, runner.py:98, [trial: 3, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-01 23:58:27,037 DEBUG  , Thread-11, runner.py:99, [trial: 3, gen: 0] STDERR: 
2023-04-01 23:58:27,208 DEBUG  , Thread-11, runner.py:177, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:57:15Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:57:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:57:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:57:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1067', 'uid': 'eb971ed8-845c-4aad-b594-c383585c877f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:58:27,236 DEBUG  , Thread-11, runner.py:202, [trial: 3, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-r7p6w
2023-04-01 23:58:27,560 WARNING, Thread-11, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:58:27,561 INFO   , Thread-11, input.py :723, [trial: 3, gen: 1] Progress [17] cases left
2023-04-01 23:58:27,561 DEBUG  , Thread-11, test_case.py:51, [trial: 3, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:58:27,561 INFO   , Thread-11, acto.py  :263, [trial: 3, gen: 1] Precondition of ['spec', 'resources', 'requests'] satisfies
2023-04-01 23:58:27,561 INFO   , Thread-11, acto.py  :323, [trial: 3, gen: 1] Running bundled testcases
2023-04-01 23:58:27,561 DEBUG  , Thread-11, test_case.py:51, [trial: 3, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-01 23:58:27,562 INFO   , Thread-11, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "remove", "path": "/spec/resources/requests/cpu"}, {"op": "remove", "path": "/spec/resources/requests/memory"}]
2023-04-01 23:58:27,562 DEBUG  , Thread-11, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-01 23:58:27,936 INFO   , Thread-11, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-01 23:58:35,812 INFO   , Thread-2, runner.py:323, [trial: 2, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:58:37,585 INFO   , Thread-14, runner.py:323, [trial: 2, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:58:40,222 INFO   , Thread-4, runner.py:360, [trial: 1, gen: 5] System took 00:02:39 to converge
2023-04-01 23:58:40,224 DEBUG  , Thread-4, runner.py:98, [trial: 1, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:58:40,224 DEBUG  , Thread-4, runner.py:99, [trial: 1, gen: 5] STDERR: 
2023-04-01 23:58:40,356 DEBUG  , Thread-4, runner.py:177, [trial: 1, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"tolerations":[{"effect":"NoSchedule","key":"test-key","operator":"Equal","value":"test-value"},{"effect":"NoSchedule","key":"node-role.kubernetes.io/control-plane","operator":"Exists"}]}}\n'}, 'creationTimestamp': '2023-04-02T03:45:05Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:56:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2725', 'uid': '05703de4-390e-4fa3-b90e-898cc20a876a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'tolerations': [{'effect': 'NoSchedule', 'key': 'test-key', 'operator': 'Equal', 'value': 'test-value'}, {'effect': 'NoSchedule', 'key': 'node-role.kubernetes.io/control-plane', 'operator': 'Exists'}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:58:40,385 DEBUG  , Thread-4, runner.py:202, [trial: 1, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-h9bj2
2023-04-01 23:58:41,369 INFO   , Thread-4, common.py:569, [trial: 1, gen: 5] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-01 23:58:41,369 INFO   , Thread-4, checker.py:134, [trial: 1, gen: 5] Number of system state fields: [3502] Number of delta: [128]
2023-04-01 23:58:41,369 INFO   , Thread-4, acto.py  :301, [trial: 1, gen: 5] Setup produced invalid input
2023-04-01 23:58:41,369 WARNING, Thread-4, schema.py:573, [trial: 1, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:58:41,370 DEBUG  , Thread-4, acto.py  :458, [trial: 1, gen: 5] Run and check
2023-04-01 23:58:41,734 INFO   , Thread-4, runner.py:291, [trial: 1, gen: 5] Waiting for system to converge... 
2023-04-01 23:58:50,497 WARNING, Thread-10, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-01 23:58:50,498 DEBUG  , Thread-10, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-01 23:58:51,585 INFO   , Thread-1, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:58:52,688 INFO   , Thread-15, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:58:53,001 INFO   , Thread-10, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-01 23:58:55,740 INFO   , Thread-9, runner.py:323, [trial: 2, gen: 8] Statefulset test-cluster is not ready yet
2023-04-01 23:59:04,262 INFO   , Thread-7, runner.py:360, [trial: 3, gen: 1] System took 00:02:32 to converge
2023-04-01 23:59:04,263 DEBUG  , Thread-7, runner.py:98, [trial: 3, gen: 1] STDOUT: 
2023-04-01 23:59:04,263 DEBUG  , Thread-7, runner.py:99, [trial: 3, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-06-0003/mutated-2.yaml": error validating data: ValidationError(CrdbCluster.spec.ingress.ui): missing required field "host" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.ingress.ui; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:59:04,428 DEBUG  , Thread-7, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:05Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"annotations":{"ACTOKEY":"ACTOKEY"},"host":"ACTOKEY","ingressClassName":"ACTOKEY","tls":[{"hosts":[],"secretName":"ACTOKEY"},{"hosts":["ACTOKEY","ACTOKEY","ACTOKEY"],"secretName":null},{"hosts":null,"secretName":null}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:54:27Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}, 'f:ingressClassName': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:55:29Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:57:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:57:06Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1561', 'uid': '86e89235-ea98-43f9-b5ae-bbec2ef4d5d3'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'annotations': {'ACTOKEY': 'ACTOKEY'}, 'host': 'ACTOKEY', 'ingressClassName': 'ACTOKEY', 'tls': [{'secretName': 'ACTOKEY'}, {'hosts': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY']}, {}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:16Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:05Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:05Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:57:11Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:58:07Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-01 23:59:04,457 DEBUG  , Thread-7, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-5f4dt
2023-04-01 23:59:04,668 INFO   , Thread-7, common.py:569, [trial: 3, gen: 1] Recognized invalid input through field [host] in error message: error: error validating "testrun-crdb-whitebox/trial-06-0003/mutated-2.yaml": error validating data: ValidationError(CrdbCluster.spec.ingress.ui): missing required field "host" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.ingress.ui; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:59:04,668 INFO   , Thread-7, checker.py:213, [trial: 3, gen: 1] Invalid input, reject mutation
2023-04-01 23:59:04,668 INFO   , Thread-7, checker.py:214, [trial: 3, gen: 1] STDOUT: 
2023-04-01 23:59:04,668 INFO   , Thread-7, checker.py:215, [trial: 3, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-06-0003/mutated-2.yaml": error validating data: ValidationError(CrdbCluster.spec.ingress.ui): missing required field "host" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.ingress.ui; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-01 23:59:04,971 ERROR  , Thread-7, checker.py:301, [trial: 3, gen: 1] Found no matching fields for input delta
2023-04-01 23:59:04,971 ERROR  , Thread-7, checker.py:302, [trial: 3, gen: 1] Input delta [['spec', 'ingress', 'ui', 'annotations', 'ACTOKEY']]
2023-04-01 23:59:05,101 INFO   , Thread-7, common.py:560, [trial: 3, gen: 1] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-01 23:59:05,102 INFO   , Thread-7, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [4101] Number of delta: [1138]
2023-04-01 23:59:05,103 DEBUG  , Thread-7, acto.py  :374, [trial: 3, gen: 1] Invalid input, revert
2023-04-01 23:59:05,104 WARNING, Thread-7, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-01 23:59:05,104 DEBUG  , Thread-7, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-01 23:59:05,509 INFO   , Thread-7, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-01 23:59:09,047 INFO   , Thread-13, runner.py:360, [trial: 2, gen: 4] System took 00:02:18 to converge
2023-04-01 23:59:09,048 DEBUG  , Thread-13, runner.py:98, [trial: 2, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:59:09,049 DEBUG  , Thread-13, runner.py:99, [trial: 2, gen: 4] STDERR: 
2023-04-01 23:59:09,187 DEBUG  , Thread-13, runner.py:177, [trial: 2, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:47:59Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalAnnotations":{"ACTOKEY":""},"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:47:55Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:47:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalAnnotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:49:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2422', 'uid': 'b2bc5851-eaaf-4b19-a7b6-9516f84974f7'}, 'spec': {'additionalAnnotations': {'ACTOKEY': ''}, 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:48:10Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:47:58Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:47:59Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:59:09,219 DEBUG  , Thread-13, runner.py:202, [trial: 2, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-6wrtr
2023-04-01 23:59:09,867 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 4] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-1', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:59:09,868 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 4] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-2', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:59:09,868 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 4] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:59:09,868 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 4] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'template', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:59:09,868 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 4] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:59:09,868 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 4] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-public', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:59:09,868 DEBUG  , Thread-13, checker.py:278, [trial: 2, gen: 4] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-01 23:59:10,082 INFO   , Thread-13, checker.py:134, [trial: 2, gen: 4] Number of system state fields: [3457] Number of delta: [75]
2023-04-01 23:59:10,083 WARNING, Thread-13, schema.py:573, [trial: 2, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-01 23:59:10,083 INFO   , Thread-13, input.py :723, [trial: 2, gen: 5] Progress [3] cases left
2023-04-01 23:59:10,083 DEBUG  , Thread-13, test_case.py:51, [trial: 2, gen: 5] Precondition [delete_precondition] Result [False]
2023-04-01 23:59:10,084 INFO   , Thread-13, acto.py  :267, [trial: 2, gen: 5] Precondition of ["spec", "image", "pullSecret"] fails, try setup first
2023-04-01 23:59:10,084 INFO   , Thread-13, acto.py  :107, [trial: 2, gen: 5] JSON patch: [{"op": "add", "path": "/spec/image/pullSecret", "value": "ACTOKEY"}]
2023-04-01 23:59:10,084 DEBUG  , Thread-13, test_case.py:51, [trial: 2, gen: 5] Precondition [delete_precondition] Result [True]
2023-04-01 23:59:10,084 DEBUG  , Thread-13, acto.py  :458, [trial: 2, gen: 5] Run and check
2023-04-01 23:59:11,980 INFO   , Thread-13, runner.py:291, [trial: 2, gen: 5] Waiting for system to converge... 
2023-04-01 23:59:15,510 INFO   , Thread-6, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:59:15,710 INFO   , Thread-3, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:59:27,549 INFO   , Thread-16, runner.py:360, [trial: 2, gen: 1] System took 00:01:15 to converge
2023-04-01 23:59:27,550 DEBUG  , Thread-16, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:59:27,551 DEBUG  , Thread-16, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-01 23:59:27,709 DEBUG  , Thread-16, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:46:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:46:39Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:46:43Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:58:12Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2270', 'uid': 'baf5e017-3370-45b5-b4a1-3461fdb34b79'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:46:53Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:46:41Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:46:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:46:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:59:27,739 DEBUG  , Thread-16, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-m7m5z
2023-04-01 23:59:28,409 INFO   , Thread-16, acto.py  :187, Trial 2 finished, completed in 00:16:25
2023-04-01 23:59:28,409 INFO   , Thread-16, acto.py  :188, ---------------------------------------

2023-04-01 23:59:28,434 DEBUG  , Thread-16, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-m7m5z
2023-04-01 23:59:35,088 INFO   , Thread-8, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-01 23:59:35,898 INFO   , Thread-2, runner.py:323, [trial: 2, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:59:37,675 INFO   , Thread-14, runner.py:323, [trial: 2, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:59:41,917 INFO   , Thread-4, runner.py:360, [trial: 1, gen: 5] System took 00:01:00 to converge
2023-04-01 23:59:41,919 DEBUG  , Thread-4, runner.py:98, [trial: 1, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-01 23:59:41,919 DEBUG  , Thread-4, runner.py:99, [trial: 1, gen: 5] STDERR: 
2023-04-01 23:59:42,066 DEBUG  , Thread-4, runner.py:177, [trial: 1, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:45:05Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:58:41Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3139', 'uid': '05703de4-390e-4fa3-b90e-898cc20a876a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-01 23:59:42,101 DEBUG  , Thread-4, runner.py:202, [trial: 1, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-h9bj2
2023-04-01 23:59:43,040 INFO   , Thread-4, acto.py  :321, [trial: 1, gen: 5] All setups failed
2023-04-01 23:59:43,040 WARNING, Thread-4, schema.py:573, [trial: 1, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-01 23:59:43,041 INFO   , Thread-4, input.py :723, [trial: 1, gen: 7] Progress [12] cases left
2023-04-01 23:59:43,041 DEBUG  , Thread-4, test_case.py:51, [trial: 1, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-01 23:59:43,041 INFO   , Thread-4, acto.py  :263, [trial: 1, gen: 7] Precondition of ['spec', 'tolerations'] satisfies
2023-04-01 23:59:43,041 INFO   , Thread-4, acto.py  :323, [trial: 1, gen: 7] Running bundled testcases
2023-04-01 23:59:43,041 DEBUG  , Thread-4, test_case.py:51, [trial: 1, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-01 23:59:43,041 INFO   , Thread-4, acto.py  :107, [trial: 1, gen: 7] JSON patch: [{"op": "add", "path": "/spec/tolerations", "value": []}]
2023-04-01 23:59:43,041 DEBUG  , Thread-4, acto.py  :458, [trial: 1, gen: 7] Run and check
2023-04-01 23:59:43,685 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-15
2023-04-01 23:59:43,758 INFO   , Thread-4, runner.py:291, [trial: 1, gen: 7] Waiting for system to converge... 
2023-04-01 23:59:51,682 INFO   , Thread-1, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-01 23:59:52,789 INFO   , Thread-15, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-01 23:59:53,130 INFO   , Thread-10, runner.py:360, [trial: 2, gen: 0] System took 00:01:00 to converge
2023-04-01 23:59:53,132 DEBUG  , Thread-10, runner.py:98, [trial: 2, gen: 0] STDOUT: 
2023-04-01 23:59:53,132 DEBUG  , Thread-10, runner.py:99, [trial: 2, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-09-0002/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.106.224:443: connect: connection refused

2023-04-01 23:59:53,240 DEBUG  , Thread-10, runner.py:177, [trial: 2, gen: 0] {}
2023-04-01 23:59:53,241 ERROR  , Thread-10, runner.py:107, [trial: 2, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-01 23:59:53,242 INFO   , Thread-10, checker.py:103, [trial: 2, gen: 0] Connection refused, reject mutation
2023-04-01 23:59:53,242 INFO   , Thread-10, acto.py  :472, [trial: 2, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:00:05,622 INFO   , Thread-7, runner.py:360, [trial: 3, gen: 1] System took 00:01:00 to converge
2023-04-02 00:00:05,623 DEBUG  , Thread-7, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:00:05,623 DEBUG  , Thread-7, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:00:05,797 DEBUG  , Thread-7, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:05Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"annotations":{"ACTOKEY":"ACTOKEY"},"host":"ACTOKEY","ingressClassName":"ACTOKEY","tls":[{"hosts":[],"secretName":"ACTOKEY"},{"hosts":["ACTOKEY","ACTOKEY","ACTOKEY"],"secretName":null},{"hosts":null,"secretName":null}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:54:27Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}, 'f:ingressClassName': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:55:29Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:57:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:59:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1646', 'uid': '86e89235-ea98-43f9-b5ae-bbec2ef4d5d3'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'annotations': {'ACTOKEY': 'ACTOKEY'}, 'host': 'ACTOKEY', 'ingressClassName': 'ACTOKEY', 'tls': [{'secretName': 'ACTOKEY'}, {'hosts': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY']}, {}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:16Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:05Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:05Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:57:11Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:59:05Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:00:05,832 DEBUG  , Thread-7, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-5f4dt
2023-04-02 00:00:06,445 INFO   , Thread-7, common.py:560, [trial: 3, gen: 1] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-02 00:00:06,447 DEBUG  , Thread-7, acto.py  :383, [trial: 3, gen: 1] Only one patch, no need to isolate
2023-04-02 00:00:06,448 WARNING, Thread-7, schema.py:573, [trial: 3, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-02 00:00:06,448 INFO   , Thread-7, input.py :723, [trial: 3, gen: 4] Progress [9] cases left
2023-04-02 00:00:06,448 DEBUG  , Thread-7, test_case.py:51, [trial: 3, gen: 4] Precondition [empty_precondition] Result [True]
2023-04-02 00:00:06,448 INFO   , Thread-7, acto.py  :263, [trial: 3, gen: 4] Precondition of ['spec', 'ingress', 'ui'] satisfies
2023-04-02 00:00:06,448 INFO   , Thread-7, acto.py  :323, [trial: 3, gen: 4] Running bundled testcases
2023-04-02 00:00:06,448 DEBUG  , Thread-7, test_case.py:51, [trial: 3, gen: 4] Precondition [empty_precondition] Result [True]
2023-04-02 00:00:06,449 INFO   , Thread-7, acto.py  :107, [trial: 3, gen: 4] JSON patch: [{"op": "remove", "path": "/spec/ingress/ui/tls"}, {"op": "remove", "path": "/spec/ingress/ui/ingressClassName"}, {"op": "remove", "path": "/spec/ingress/ui/annotations"}, {"op": "remove", "path": "/spec/ingress/ui/host"}]
2023-04-02 00:00:06,449 DEBUG  , Thread-7, acto.py  :458, [trial: 3, gen: 4] Run and check
2023-04-02 00:00:06,781 INFO   , Thread-7, runner.py:291, [trial: 3, gen: 4] Waiting for system to converge... 
2023-04-02 00:00:12,183 INFO   , Thread-13, runner.py:360, [trial: 2, gen: 5] System took 00:01:00 to converge
2023-04-02 00:00:12,185 DEBUG  , Thread-13, runner.py:98, [trial: 2, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:00:12,185 DEBUG  , Thread-13, runner.py:99, [trial: 2, gen: 5] STDERR: 
2023-04-02 00:00:12,321 DEBUG  , Thread-13, runner.py:177, [trial: 2, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:47:59Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalAnnotations":{"ACTOKEY":""},"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullSecret":"ACTOKEY"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:47:55Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:47:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalAnnotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullSecret': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:59:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2732', 'uid': 'b2bc5851-eaaf-4b19-a7b6-9516f84974f7'}, 'spec': {'additionalAnnotations': {'ACTOKEY': ''}, 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent', 'pullSecret': 'ACTOKEY'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:48:10Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:47:58Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:47:59Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:00:12,350 DEBUG  , Thread-13, runner.py:202, [trial: 2, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-6wrtr
2023-04-02 00:00:13,228 INFO   , Thread-13, checker.py:134, [trial: 2, gen: 5] Number of system state fields: [3448] Number of delta: [16]
2023-04-02 00:00:13,229 INFO   , Thread-13, acto.py  :323, [trial: 2, gen: 5] Running bundled testcases
2023-04-02 00:00:13,229 DEBUG  , Thread-13, test_case.py:51, [trial: 2, gen: 5] Precondition [delete_precondition] Result [True]
2023-04-02 00:00:13,229 INFO   , Thread-13, acto.py  :107, [trial: 2, gen: 5] JSON patch: [{"op": "replace", "path": "/spec/image/pullSecret", "value": ""}]
2023-04-02 00:00:13,229 DEBUG  , Thread-13, acto.py  :458, [trial: 2, gen: 5] Run and check
2023-04-02 00:00:13,678 INFO   , Thread-13, runner.py:291, [trial: 2, gen: 5] Waiting for system to converge... 
2023-04-02 00:00:13,726 INFO   , Thread-10, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-02 00:00:15,605 INFO   , Thread-6, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:00:15,801 INFO   , Thread-3, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:00:35,174 INFO   , Thread-8, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:00:35,981 INFO   , Thread-2, runner.py:323, [trial: 2, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:00:36,916 INFO   , Thread-5, runner.py:323, [trial: 3, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:00:37,653 INFO   , Thread-16, base.py  :41, Created cluster
2023-04-02 00:00:37,668 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:00:37,758 INFO   , Thread-14, runner.py:323, [trial: 2, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:00:39,523 INFO   , Thread-9, runner.py:323, [trial: 2, gen: 8] Statefulset test-cluster is not ready yet
2023-04-02 00:00:43,883 INFO   , Thread-4, runner.py:360, [trial: 1, gen: 7] System took 00:01:00 to converge
2023-04-02 00:00:43,885 DEBUG  , Thread-4, runner.py:98, [trial: 1, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:00:43,886 DEBUG  , Thread-4, runner.py:99, [trial: 1, gen: 7] STDERR: 
2023-04-02 00:00:44,038 DEBUG  , Thread-4, runner.py:177, [trial: 1, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"tolerations":[]}}\n'}, 'creationTimestamp': '2023-04-02T03:45:05Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:59:43Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3246', 'uid': '05703de4-390e-4fa3-b90e-898cc20a876a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:00:44,066 DEBUG  , Thread-4, runner.py:202, [trial: 1, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-h9bj2
2023-04-02 00:00:45,034 INFO   , Thread-4, checker.py:134, [trial: 1, gen: 7] Number of system state fields: [3482] Number of delta: [0]
2023-04-02 00:00:45,035 WARNING, Thread-4, schema.py:573, [trial: 1, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-02 00:00:45,036 INFO   , Thread-4, input.py :723, [trial: 1, gen: 8] Progress [11] cases left
2023-04-02 00:00:45,036 DEBUG  , Thread-4, test_case.py:51, [trial: 1, gen: 8] Precondition [delete_precondition] Result [False]
2023-04-02 00:00:45,036 INFO   , Thread-4, acto.py  :267, [trial: 1, gen: 8] Precondition of ["spec", "dataStore", "hostPath"] fails, try setup first
2023-04-02 00:00:45,036 INFO   , Thread-4, acto.py  :107, [trial: 1, gen: 8] JSON patch: [{"op": "add", "path": "/spec/dataStore/hostPath", "value": {"path": "/tmp/test", "type": "DirectoryOrCreate"}}]
2023-04-02 00:00:45,036 DEBUG  , Thread-4, test_case.py:51, [trial: 1, gen: 8] Precondition [delete_precondition] Result [True]
2023-04-02 00:00:45,036 DEBUG  , Thread-4, acto.py  :458, [trial: 1, gen: 8] Run and check
2023-04-02 00:00:45,348 INFO   , Thread-4, runner.py:291, [trial: 1, gen: 8] Waiting for system to converge... 
2023-04-02 00:00:51,778 INFO   , Thread-1, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:00:52,875 INFO   , Thread-15, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:00:55,154 DEBUG  , Thread-16, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:01:00,352 ERROR  , Thread-14, runner.py:363, [trial: 2, gen: 3] System failed to converge within 600 seconds
2023-04-02 00:01:00,354 DEBUG  , Thread-14, runner.py:98, [trial: 2, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:01:00,354 DEBUG  , Thread-14, runner.py:99, [trial: 2, gen: 3] STDERR: 
2023-04-02 00:01:00,480 DEBUG  , Thread-14, runner.py:177, [trial: 2, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:46:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"fieldRef":{"apiVersion":"ACTOKEY","fieldPath":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:46:50Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:48:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:51:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1575', 'uid': '2075c5d8-eeb6-4244-9d56-c9b538c1c3c0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'fieldRef': {'apiVersion': 'ACTOKEY', 'fieldPath': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:47:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:46:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:46:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:47:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:49:27Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[1].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[1].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:01:00,507 DEBUG  , Thread-14, runner.py:202, [trial: 2, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-ktxbw
2023-04-02 00:01:01,084 DEBUG  , Thread-14, checker.py:278, [trial: 2, gen: 3] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'fieldRef', 'apiVersion']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 1, 'value_from', 'field_ref', 'api_version']]
2023-04-02 00:01:01,085 ERROR  , Thread-14, checker.py:282, [trial: 2, gen: 3] Matched delta inconsistent with input delta
2023-04-02 00:01:01,085 ERROR  , Thread-14, checker.py:283, [trial: 2, gen: 3] Input delta: not present -> ACTOKEY
2023-04-02 00:01:01,085 ERROR  , Thread-14, checker.py:284, [trial: 2, gen: 3] Matched delta: v1 -> not present
2023-04-02 00:01:01,274 INFO   , Thread-14, checker.py:134, [trial: 2, gen: 3] Number of system state fields: [3044] Number of delta: [215]
2023-04-02 00:01:01,275 ERROR  , Thread-14, checker.py:561, [trial: 2, gen: 3] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:01:01,275 DEBUG  , Thread-14, acto.py  :489, [trial: 2, gen: 3] Running recovery
2023-04-02 00:01:03,290 INFO   , Thread-14, runner.py:291, [trial: 2, gen: 3] Waiting for system to converge... 
2023-04-02 00:01:04,909 ERROR  , Thread-2, runner.py:363, [trial: 2, gen: 2] System failed to converge within 600 seconds
2023-04-02 00:01:04,915 DEBUG  , Thread-2, runner.py:98, [trial: 2, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:01:04,915 DEBUG  , Thread-2, runner.py:99, [trial: 2, gen: 2] STDERR: 
2023-04-02 00:01:05,059 DEBUG  , Thread-2, runner.py:177, [trial: 2, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:48:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"fieldRef":{"apiVersion":"ACTOKEY","fieldPath":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"topologySpreadConstraints":[]}}\n'}, 'creationTimestamp': '2023-04-02T03:48:51Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:49:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:topologySpreadConstraints': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:51:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1265', 'uid': '09d4e0b8-ee55-4395-ae23-8f57299c0b11'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'fieldRef': {'apiVersion': 'ACTOKEY', 'fieldPath': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:49:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:48:54Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:48:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:53Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:49:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:01:05,085 DEBUG  , Thread-2, runner.py:202, [trial: 2, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-st9jw
2023-04-02 00:01:05,599 DEBUG  , Thread-2, checker.py:278, [trial: 2, gen: 2] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'fieldRef', 'fieldPath']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 1, 'value_from', 'field_ref', 'field_path']]
2023-04-02 00:01:05,599 ERROR  , Thread-2, checker.py:282, [trial: 2, gen: 2] Matched delta inconsistent with input delta
2023-04-02 00:01:05,599 ERROR  , Thread-2, checker.py:283, [trial: 2, gen: 2] Input delta: not present -> ACTOKEY
2023-04-02 00:01:05,599 ERROR  , Thread-2, checker.py:284, [trial: 2, gen: 2] Matched delta: metadata.name -> not present
2023-04-02 00:01:05,970 INFO   , Thread-16, deploy.py:91, Operator ready
2023-04-02 00:01:05,975 INFO   , Thread-16, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:01:06,002 INFO   , Thread-2, checker.py:134, [trial: 2, gen: 2] Number of system state fields: [3044] Number of delta: [215]
2023-04-02 00:01:06,005 ERROR  , Thread-2, checker.py:561, [trial: 2, gen: 2] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:01:06,019 DEBUG  , Thread-2, acto.py  :489, [trial: 2, gen: 2] Running recovery
2023-04-02 00:01:06,912 INFO   , Thread-7, runner.py:360, [trial: 3, gen: 4] System took 00:01:00 to converge
2023-04-02 00:01:06,913 DEBUG  , Thread-7, runner.py:98, [trial: 3, gen: 4] STDOUT: 
2023-04-02 00:01:06,914 DEBUG  , Thread-7, runner.py:99, [trial: 3, gen: 4] STDERR: error: error validating "testrun-crdb-whitebox/trial-06-0003/mutated-4.yaml": error validating data: ValidationError(CrdbCluster.spec.ingress.ui): missing required field "host" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.ingress.ui; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 00:01:07,074 DEBUG  , Thread-7, runner.py:177, [trial: 3, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:05Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"annotations":{"ACTOKEY":"ACTOKEY"},"host":"ACTOKEY","ingressClassName":"ACTOKEY","tls":[{"hosts":[],"secretName":"ACTOKEY"},{"hosts":["ACTOKEY","ACTOKEY","ACTOKEY"],"secretName":null},{"hosts":null,"secretName":null}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:54:27Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}, 'f:ingressClassName': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:55:29Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:57:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T03:59:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1745', 'uid': '86e89235-ea98-43f9-b5ae-bbec2ef4d5d3'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'annotations': {'ACTOKEY': 'ACTOKEY'}, 'host': 'ACTOKEY', 'ingressClassName': 'ACTOKEY', 'tls': [{'secretName': 'ACTOKEY'}, {'hosts': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY']}, {}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:16Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:05Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:05Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:57:11Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:00:09Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:01:07,102 DEBUG  , Thread-7, runner.py:202, [trial: 3, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-5f4dt
2023-04-02 00:01:07,444 INFO   , Thread-7, common.py:569, [trial: 3, gen: 4] Recognized invalid input through field [host] in error message: error: error validating "testrun-crdb-whitebox/trial-06-0003/mutated-4.yaml": error validating data: ValidationError(CrdbCluster.spec.ingress.ui): missing required field "host" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.ingress.ui; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 00:01:07,444 INFO   , Thread-7, checker.py:213, [trial: 3, gen: 4] Invalid input, reject mutation
2023-04-02 00:01:07,444 INFO   , Thread-7, checker.py:214, [trial: 3, gen: 4] STDOUT: 
2023-04-02 00:01:07,445 INFO   , Thread-7, checker.py:215, [trial: 3, gen: 4] STDERR: error: error validating "testrun-crdb-whitebox/trial-06-0003/mutated-4.yaml": error validating data: ValidationError(CrdbCluster.spec.ingress.ui): missing required field "host" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.ingress.ui; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 00:01:07,691 ERROR  , Thread-7, checker.py:301, [trial: 3, gen: 4] Found no matching fields for input delta
2023-04-02 00:01:07,691 ERROR  , Thread-7, checker.py:302, [trial: 3, gen: 4] Input delta [['spec', 'ingress', 'ui', 'annotations', 'ACTOKEY']]
2023-04-02 00:01:07,932 INFO   , Thread-7, common.py:560, [trial: 3, gen: 4] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-02 00:01:07,932 INFO   , Thread-7, checker.py:134, [trial: 3, gen: 4] Number of system state fields: [4101] Number of delta: [1]
2023-04-02 00:01:07,936 DEBUG  , Thread-7, acto.py  :374, [trial: 3, gen: 4] Invalid input, revert
2023-04-02 00:01:07,936 WARNING, Thread-7, schema.py:573, [trial: 3, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-02 00:01:07,938 DEBUG  , Thread-7, acto.py  :458, [trial: 3, gen: 4] Run and check
2023-04-02 00:01:08,369 INFO   , Thread-7, runner.py:291, [trial: 3, gen: 4] Waiting for system to converge... 
2023-04-02 00:01:09,740 INFO   , Thread-2, runner.py:291, [trial: 2, gen: 2] Waiting for system to converge... 
2023-04-02 00:01:09,844 DEBUG  , Thread-16, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:01:13,808 INFO   , Thread-13, runner.py:360, [trial: 2, gen: 5] System took 00:01:00 to converge
2023-04-02 00:01:13,809 DEBUG  , Thread-13, runner.py:98, [trial: 2, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:01:13,809 DEBUG  , Thread-13, runner.py:99, [trial: 2, gen: 5] STDERR: 
2023-04-02 00:01:13,962 DEBUG  , Thread-13, runner.py:177, [trial: 2, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:47:59Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalAnnotations":{"ACTOKEY":""},"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullSecret":""},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:47:55Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:47:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalAnnotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullSecret': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:59:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2834', 'uid': 'b2bc5851-eaaf-4b19-a7b6-9516f84974f7'}, 'spec': {'additionalAnnotations': {'ACTOKEY': ''}, 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent', 'pullSecret': ''}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:48:10Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:47:58Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:47:59Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:01:13,998 DEBUG  , Thread-13, runner.py:202, [trial: 2, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-6wrtr
2023-04-02 00:01:14,678 ERROR  , Thread-13, checker.py:301, [trial: 2, gen: 5] Found no matching fields for input delta
2023-04-02 00:01:14,678 ERROR  , Thread-13, checker.py:302, [trial: 2, gen: 5] Input delta [['spec', 'image', 'pullSecret']]
2023-04-02 00:01:14,888 INFO   , Thread-13, checker.py:134, [trial: 2, gen: 5] Number of system state fields: [3448] Number of delta: [1]
2023-04-02 00:01:14,889 INFO   , Thread-13, acto.py  :332, [trial: 2, gen: 5] Error result, running recovery
2023-04-02 00:01:14,890 DEBUG  , Thread-13, acto.py  :489, [trial: 2, gen: 5] Running recovery
2023-04-02 00:01:15,200 INFO   , Thread-10, runner.py:360, [trial: 2, gen: 0] System took 00:01:01 to converge
2023-04-02 00:01:15,201 DEBUG  , Thread-10, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:01:15,202 DEBUG  , Thread-10, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-02 00:01:15,227 INFO   , Thread-13, runner.py:291, [trial: 2, gen: 5] Waiting for system to converge... 
2023-04-02 00:01:15,321 DEBUG  , Thread-10, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:00:13Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:00:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:00:15Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1025', 'uid': 'ac01b02b-4f7c-48e0-85b5-f7b11006b40d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:00:13Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:00:13Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:00:15Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:01:15,342 DEBUG  , Thread-10, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-gj2gp
2023-04-02 00:01:15,434 WARNING, Thread-10, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:01:15,435 INFO   , Thread-10, input.py :723, [trial: 2, gen: 1] Progress [18] cases left
2023-04-02 00:01:15,435 DEBUG  , Thread-10, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:01:15,435 INFO   , Thread-10, acto.py  :263, [trial: 2, gen: 1] Precondition of ['spec', 'maxSQLMemory'] satisfies
2023-04-02 00:01:15,435 INFO   , Thread-10, acto.py  :323, [trial: 2, gen: 1] Running bundled testcases
2023-04-02 00:01:15,435 DEBUG  , Thread-10, test_case.py:51, [trial: 2, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:01:15,436 INFO   , Thread-10, acto.py  :107, [trial: 2, gen: 1] JSON patch: [{"op": "add", "path": "/spec/maxSQLMemory", "value": ""}]
2023-04-02 00:01:15,436 DEBUG  , Thread-10, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-02 00:01:15,695 INFO   , Thread-6, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:01:15,836 INFO   , Thread-10, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-02 00:01:15,890 INFO   , Thread-3, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:01:20,050 INFO   , Thread-16, deploy.py:91, Operator ready
2023-04-02 00:01:20,050 INFO   , Thread-16, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:01:33,470 INFO   , Thread-11, runner.py:360, [trial: 3, gen: 1] System took 00:03:05 to converge
2023-04-02 00:01:33,471 DEBUG  , Thread-11, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:01:33,471 DEBUG  , Thread-11, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:01:33,632 DEBUG  , Thread-11, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:57:15Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:57:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:57:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:58:27Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1176', 'uid': 'eb971ed8-845c-4aad-b594-c383585c877f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:01:33,671 DEBUG  , Thread-11, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-r7p6w
2023-04-02 00:01:34,196 DEBUG  , Thread-11, checker.py:278, [trial: 3, gen: 1] Input delta [['spec', 'resources', 'requests', 'cpu']] matched with [['test-cluster-0', 'spec', 'containers', 0, 'resources', 'requests', 'cpu']]
2023-04-02 00:01:34,198 DEBUG  , Thread-11, checker.py:278, [trial: 3, gen: 1] Input delta [['spec', 'resources', 'requests', 'cpu']] matched with [['test-cluster-1', 'spec', 'containers', 0, 'resources', 'requests', 'cpu']]
2023-04-02 00:01:34,198 DEBUG  , Thread-11, checker.py:278, [trial: 3, gen: 1] Input delta [['spec', 'resources', 'requests', 'cpu']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'resources', 'requests', 'cpu']]
2023-04-02 00:01:34,198 DEBUG  , Thread-11, checker.py:278, [trial: 3, gen: 1] Input delta [['spec', 'resources', 'requests', 'cpu']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'requests', 'cpu']]
2023-04-02 00:01:34,198 DEBUG  , Thread-11, checker.py:278, [trial: 3, gen: 1] Input delta [['spec', 'resources', 'requests', 'memory']] matched with [['test-cluster-0', 'spec', 'containers', 0, 'resources', 'requests', 'memory']]
2023-04-02 00:01:34,199 DEBUG  , Thread-11, checker.py:278, [trial: 3, gen: 1] Input delta [['spec', 'resources', 'requests', 'memory']] matched with [['test-cluster-1', 'spec', 'containers', 0, 'resources', 'requests', 'memory']]
2023-04-02 00:01:34,199 DEBUG  , Thread-11, checker.py:278, [trial: 3, gen: 1] Input delta [['spec', 'resources', 'requests', 'memory']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'resources', 'requests', 'memory']]
2023-04-02 00:01:34,199 DEBUG  , Thread-11, checker.py:278, [trial: 3, gen: 1] Input delta [['spec', 'resources', 'requests', 'memory']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'requests', 'memory']]
2023-04-02 00:01:34,415 INFO   , Thread-11, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [3459] Number of delta: [76]
2023-04-02 00:01:34,417 WARNING, Thread-11, schema.py:573, [trial: 3, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 00:01:34,417 INFO   , Thread-11, input.py :723, [trial: 3, gen: 2] Progress [16] cases left
2023-04-02 00:01:34,417 DEBUG  , Thread-11, test_case.py:51, [trial: 3, gen: 2] Precondition [empty_precondition] Result [False]
2023-04-02 00:01:34,417 INFO   , Thread-11, acto.py  :267, [trial: 3, gen: 2] Precondition of ["spec", "resources", "requests"] fails, try setup first
2023-04-02 00:01:34,418 INFO   , Thread-11, acto.py  :107, [trial: 3, gen: 2] JSON patch: []
2023-04-02 00:01:34,418 DEBUG  , Thread-11, test_case.py:51, [trial: 3, gen: 2] Precondition [empty_precondition] Result [False]
2023-04-02 00:01:34,418 ERROR  , Thread-11, acto.py  :277, [trial: 3, gen: 2] Setup does not work correctly
2023-04-02 00:01:34,418 INFO   , Thread-11, acto.py  :321, [trial: 3, gen: 2] All setups failed
2023-04-02 00:01:34,418 WARNING, Thread-11, schema.py:573, [trial: 3, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 00:01:34,418 INFO   , Thread-11, input.py :723, [trial: 3, gen: 2] Progress [15] cases left
2023-04-02 00:01:34,418 DEBUG  , Thread-11, test_case.py:51, [trial: 3, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-02 00:01:34,418 INFO   , Thread-11, acto.py  :267, [trial: 3, gen: 2] Precondition of ["spec", "ingress", "ui", "annotations", "ACTOKEY"] fails, try setup first
2023-04-02 00:01:34,419 INFO   , Thread-11, acto.py  :107, [trial: 3, gen: 2] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "annotations": {"ACTOKEY": "ACTOKEY"}}}}]
2023-04-02 00:01:34,419 DEBUG  , Thread-11, test_case.py:51, [trial: 3, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-02 00:01:34,419 DEBUG  , Thread-11, acto.py  :458, [trial: 3, gen: 2] Run and check
2023-04-02 00:01:34,802 INFO   , Thread-11, runner.py:291, [trial: 3, gen: 2] Waiting for system to converge... 
2023-04-02 00:01:35,267 INFO   , Thread-8, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:01:39,503 ERROR  , Thread-1, runner.py:363, [trial: 3, gen: 2] System failed to converge within 600 seconds
2023-04-02 00:01:39,507 DEBUG  , Thread-1, runner.py:98, [trial: 3, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:01:39,507 DEBUG  , Thread-1, runner.py:99, [trial: 3, gen: 2] STDERR: 
2023-04-02 00:01:39,616 INFO   , Thread-9, runner.py:323, [trial: 2, gen: 8] Statefulset test-cluster is not ready yet
2023-04-02 00:01:39,679 DEBUG  , Thread-1, runner.py:177, [trial: 3, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:48:01Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cache":"ACTOKEY","dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":true},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:47:57Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:48:01Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cache': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:51:39Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1617', 'uid': '151fa815-5b2e-438d-86ed-7505e53945aa'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'cache': 'ACTOKEY', 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY', 'readOnly': True}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:48:12Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:48:00Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:48:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:06Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:01:39,709 DEBUG  , Thread-1, runner.py:202, [trial: 3, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-5fpc4
2023-04-02 00:01:40,637 INFO   , Thread-1, checker.py:134, [trial: 3, gen: 2] Number of system state fields: [3470] Number of delta: [222]
2023-04-02 00:01:40,638 ERROR  , Thread-1, checker.py:561, [trial: 3, gen: 2] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:01:40,639 DEBUG  , Thread-1, acto.py  :489, [trial: 3, gen: 2] Running recovery
2023-04-02 00:01:42,602 INFO   , Thread-1, runner.py:291, [trial: 3, gen: 2] Waiting for system to converge... 
2023-04-02 00:01:45,480 INFO   , Thread-4, runner.py:360, [trial: 1, gen: 8] System took 00:01:00 to converge
2023-04-02 00:01:45,481 DEBUG  , Thread-4, runner.py:98, [trial: 1, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:01:45,482 DEBUG  , Thread-4, runner.py:99, [trial: 1, gen: 8] STDERR: 
2023-04-02 00:01:45,628 DEBUG  , Thread-4, runner.py:177, [trial: 1, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"hostPath":{"path":"/tmp/test","type":"DirectoryOrCreate"},"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"tolerations":[]}}\n'}, 'creationTimestamp': '2023-04-02T03:45:05Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:hostPath': {'.': {}, 'f:path': {}, 'f:type': {}}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:00:45Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3339', 'uid': '05703de4-390e-4fa3-b90e-898cc20a876a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'hostPath': {'path': '/tmp/test', 'type': 'DirectoryOrCreate'}, 'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:01:45,658 DEBUG  , Thread-4, runner.py:202, [trial: 1, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-h9bj2
2023-04-02 00:01:46,347 ERROR  , Thread-4, checker.py:301, [trial: 1, gen: 8] Found no matching fields for input delta
2023-04-02 00:01:46,348 ERROR  , Thread-4, checker.py:302, [trial: 1, gen: 8] Input delta [['spec', 'dataStore', 'hostPath', 'path']]
2023-04-02 00:01:46,557 INFO   , Thread-4, checker.py:134, [trial: 1, gen: 8] Number of system state fields: [3484] Number of delta: [2]
2023-04-02 00:01:46,558 DEBUG  , Thread-4, acto.py  :489, [trial: 1, gen: 8] Running recovery
2023-04-02 00:01:46,920 INFO   , Thread-4, runner.py:291, [trial: 1, gen: 8] Waiting for system to converge... 
2023-04-02 00:01:52,971 INFO   , Thread-15, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:01:58,845 INFO   , Thread-5, runner.py:323, [trial: 3, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:02:00,180 WARNING, Thread-16, schema.py:573, [trial: 3, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:02:00,180 DEBUG  , Thread-16, acto.py  :458, [trial: 3, gen: 0] Run and check
2023-04-02 00:02:02,757 INFO   , Thread-16, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-02 00:02:08,500 INFO   , Thread-7, runner.py:360, [trial: 3, gen: 4] System took 00:01:00 to converge
2023-04-02 00:02:08,502 DEBUG  , Thread-7, runner.py:98, [trial: 3, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:02:08,502 DEBUG  , Thread-7, runner.py:99, [trial: 3, gen: 4] STDERR: 
2023-04-02 00:02:08,657 DEBUG  , Thread-7, runner.py:177, [trial: 3, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:05Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"annotations":{"ACTOKEY":"ACTOKEY"},"host":"ACTOKEY","ingressClassName":"ACTOKEY","tls":[{"hosts":[],"secretName":"ACTOKEY"},{"hosts":["ACTOKEY","ACTOKEY","ACTOKEY"],"secretName":null},{"hosts":null,"secretName":null}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:54:27Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}, 'f:ingressClassName': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:55:29Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:01:08Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1920', 'uid': '86e89235-ea98-43f9-b5ae-bbec2ef4d5d3'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'annotations': {'ACTOKEY': 'ACTOKEY'}, 'host': 'ACTOKEY', 'ingressClassName': 'ACTOKEY', 'tls': [{'secretName': 'ACTOKEY'}, {'hosts': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY']}, {}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:16Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:05Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:05Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:57:11Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:02:02Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:02:08,685 DEBUG  , Thread-7, runner.py:202, [trial: 3, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-5f4dt
2023-04-02 00:02:09,578 INFO   , Thread-7, common.py:560, [trial: 3, gen: 4] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-02 00:02:09,579 DEBUG  , Thread-7, acto.py  :383, [trial: 3, gen: 4] Only one patch, no need to isolate
2023-04-02 00:02:09,580 WARNING, Thread-7, schema.py:573, [trial: 3, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-02 00:02:09,580 INFO   , Thread-7, input.py :723, [trial: 3, gen: 6] Progress [8] cases left
2023-04-02 00:02:09,580 DEBUG  , Thread-7, test_case.py:51, [trial: 3, gen: 6] Precondition [delete_precondition] Result [False]
2023-04-02 00:02:09,580 INFO   , Thread-7, acto.py  :267, [trial: 3, gen: 6] Precondition of ["spec", "additionalArgs", 0] fails, try setup first
2023-04-02 00:02:09,581 INFO   , Thread-7, acto.py  :107, [trial: 3, gen: 6] JSON patch: [{"op": "add", "path": "/spec/additionalArgs", "value": ["ACTOKEY"]}]
2023-04-02 00:02:09,581 DEBUG  , Thread-7, test_case.py:51, [trial: 3, gen: 6] Precondition [delete_precondition] Result [True]
2023-04-02 00:02:09,581 DEBUG  , Thread-7, acto.py  :458, [trial: 3, gen: 6] Run and check
2023-04-02 00:02:09,918 INFO   , Thread-7, runner.py:291, [trial: 3, gen: 6] Waiting for system to converge... 
2023-04-02 00:02:11,133 INFO   , Thread-2, runner.py:360, [trial: 2, gen: 2] System took 00:01:01 to converge
2023-04-02 00:02:11,134 DEBUG  , Thread-2, runner.py:98, [trial: 2, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:02:11,134 DEBUG  , Thread-2, runner.py:99, [trial: 2, gen: 2] STDERR: 
2023-04-02 00:02:11,271 DEBUG  , Thread-2, runner.py:177, [trial: 2, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:48:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"topologySpreadConstraints":[]}}\n'}, 'creationTimestamp': '2023-04-02T03:48:51Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:49:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:topologySpreadConstraints': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:01:09Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2213', 'uid': '09d4e0b8-ee55-4395-ae23-8f57299c0b11'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:49:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:48:54Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:48:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:53Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:49:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:02:11,305 DEBUG  , Thread-2, runner.py:202, [trial: 2, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-st9jw
2023-04-02 00:02:11,980 INFO   , Thread-2, acto.py  :187, Trial 2 finished, completed in 00:15:44
2023-04-02 00:02:11,980 INFO   , Thread-2, acto.py  :188, ---------------------------------------

2023-04-02 00:02:12,016 DEBUG  , Thread-2, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-st9jw
2023-04-02 00:02:15,350 INFO   , Thread-13, runner.py:360, [trial: 2, gen: 5] System took 00:01:00 to converge
2023-04-02 00:02:15,352 DEBUG  , Thread-13, runner.py:98, [trial: 2, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:02:15,352 DEBUG  , Thread-13, runner.py:99, [trial: 2, gen: 5] STDERR: 
2023-04-02 00:02:15,490 DEBUG  , Thread-13, runner.py:177, [trial: 2, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:47:59Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalAnnotations":{"ACTOKEY":""},"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullSecret":"ACTOKEY"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:47:55Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:47:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalAnnotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullSecret': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:59:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2928', 'uid': 'b2bc5851-eaaf-4b19-a7b6-9516f84974f7'}, 'spec': {'additionalAnnotations': {'ACTOKEY': ''}, 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent', 'pullSecret': 'ACTOKEY'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:48:10Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:47:58Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:47:59Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:04Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:02:15,517 DEBUG  , Thread-13, runner.py:202, [trial: 2, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-6wrtr
2023-04-02 00:02:15,847 INFO   , Thread-6, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:02:16,036 INFO   , Thread-3, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:02:16,305 INFO   , Thread-13, acto.py  :187, Trial 2 finished, completed in 00:16:45
2023-04-02 00:02:16,305 INFO   , Thread-13, acto.py  :188, ---------------------------------------

2023-04-02 00:02:16,328 DEBUG  , Thread-13, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-6wrtr
2023-04-02 00:02:18,493 INFO   , Thread-14, runner.py:360, [trial: 2, gen: 3] System took 00:01:15 to converge
2023-04-02 00:02:18,494 DEBUG  , Thread-14, runner.py:98, [trial: 2, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:02:18,494 DEBUG  , Thread-14, runner.py:99, [trial: 2, gen: 3] STDERR: 
2023-04-02 00:02:18,651 DEBUG  , Thread-14, runner.py:177, [trial: 2, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:46:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:46:50Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:48:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:01:03Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2525', 'uid': '2075c5d8-eeb6-4244-9d56-c9b538c1c3c0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:47:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:46:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:46:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:47:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T03:49:27Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[1].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[1].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:02:18,685 DEBUG  , Thread-14, runner.py:202, [trial: 2, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-ktxbw
2023-04-02 00:02:19,472 INFO   , Thread-14, acto.py  :187, Trial 2 finished, completed in 00:19:10
2023-04-02 00:02:19,472 INFO   , Thread-14, acto.py  :188, ---------------------------------------

2023-04-02 00:02:19,489 DEBUG  , Thread-14, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-ktxbw
2023-04-02 00:02:26,700 INFO   , Thread-10, runner.py:360, [trial: 2, gen: 1] System took 00:01:10 to converge
2023-04-02 00:02:26,702 DEBUG  , Thread-10, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:02:26,702 DEBUG  , Thread-10, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-02 00:02:26,838 DEBUG  , Thread-10, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:01:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxSQLMemory":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:00:13Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxSQLMemory': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:01:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:01:30Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1298', 'uid': 'ac01b02b-4f7c-48e0-85b5-f7b11006b40d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:01:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:01:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:01:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:00:15Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:01:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:02:26,868 DEBUG  , Thread-10, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-gj2gp
2023-04-02 00:02:27,289 INFO   , Thread-10, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [3764] Number of delta: [1087]
2023-04-02 00:02:27,291 WARNING, Thread-10, schema.py:573, [trial: 2, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 00:02:27,292 INFO   , Thread-10, input.py :723, [trial: 2, gen: 2] Progress [17] cases left
2023-04-02 00:02:27,292 DEBUG  , Thread-10, test_case.py:51, [trial: 2, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-02 00:02:27,292 INFO   , Thread-10, acto.py  :267, [trial: 2, gen: 2] Precondition of ["spec", "ingress", "ui", "tls", 0] fails, try setup first
2023-04-02 00:02:27,293 INFO   , Thread-10, acto.py  :107, [trial: 2, gen: 2] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": [{"hosts": [], "secretName": "ACTOKEY"}]}}}]
2023-04-02 00:02:27,293 DEBUG  , Thread-10, test_case.py:51, [trial: 2, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-02 00:02:27,293 DEBUG  , Thread-10, acto.py  :458, [trial: 2, gen: 2] Run and check
2023-04-02 00:02:27,652 INFO   , Thread-10, runner.py:291, [trial: 2, gen: 2] Waiting for system to converge... 
2023-04-02 00:02:28,498 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-1
2023-04-02 00:02:29,517 INFO   , Thread-14, acto.py  :195, Test finished
2023-04-02 00:02:29,517 INFO   , Thread-14, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"sql\\\", \\\"annotations\\\", \\\"ACTOKEY\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\"]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"httpPort\\\"]\"": [
        "number-deletion",
        "number-increase",
        "number-decrease"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"fieldRef\\\"]\"": [
        "object-deletion"
    ]
}
2023-04-02 00:02:32,640 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-12
2023-04-02 00:02:34,922 INFO   , Thread-11, runner.py:360, [trial: 3, gen: 2] System took 00:01:00 to converge
2023-04-02 00:02:34,924 DEBUG  , Thread-11, runner.py:98, [trial: 3, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:02:34,924 DEBUG  , Thread-11, runner.py:99, [trial: 3, gen: 2] STDERR: 
2023-04-02 00:02:35,081 DEBUG  , Thread-11, runner.py:177, [trial: 3, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"annotations":{"ACTOKEY":"ACTOKEY"},"host":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:57:15Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:57:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:01:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:01:34Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1665', 'uid': 'eb971ed8-845c-4aad-b594-c383585c877f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'annotations': {'ACTOKEY': 'ACTOKEY'}, 'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:02:03Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:02:35,105 DEBUG  , Thread-11, runner.py:202, [trial: 3, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-r7p6w
2023-04-02 00:02:35,459 INFO   , Thread-8, runner.py:323, [trial: 2, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:02:36,041 INFO   , Thread-11, common.py:560, [trial: 3, gen: 2] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 00:02:36,042 INFO   , Thread-11, checker.py:134, [trial: 3, gen: 2] Number of system state fields: [3465] Number of delta: [6]
2023-04-02 00:02:36,043 INFO   , Thread-11, acto.py  :301, [trial: 3, gen: 2] Setup produced invalid input
2023-04-02 00:02:36,044 WARNING, Thread-11, schema.py:573, [trial: 3, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 00:02:36,044 DEBUG  , Thread-11, acto.py  :458, [trial: 3, gen: 2] Run and check
2023-04-02 00:02:36,395 INFO   , Thread-11, runner.py:291, [trial: 3, gen: 2] Waiting for system to converge... 
2023-04-02 00:02:39,710 INFO   , Thread-9, runner.py:323, [trial: 2, gen: 8] Statefulset test-cluster is not ready yet
2023-04-02 00:02:42,208 ERROR  , Thread-6, runner.py:363, [trial: 2, gen: 1] System failed to converge within 600 seconds
2023-04-02 00:02:42,209 DEBUG  , Thread-6, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:02:42,210 DEBUG  , Thread-6, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-02 00:02:42,344 DEBUG  , Thread-6, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:51:34Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"resourceFieldRef":{"resource":""}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:51:31Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:51:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:51:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:52:42Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1188', 'uid': '2ae74962-16de-40d9-a824-a172c3d7c4b6'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'resourceFieldRef': {'divisor': '0', 'resource': ''}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:51:45Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:51:33Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:51:34Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:51:33Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:51:40Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:02:42,369 DEBUG  , Thread-6, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-65fh2
2023-04-02 00:02:43,170 INFO   , Thread-6, common.py:569, [trial: 2, gen: 1] Recognized invalid input through field [resource] in error message: reconciling resources on deploy action
2023-04-02 00:02:43,170 INFO   , Thread-6, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [3045] Number of delta: [224]
2023-04-02 00:02:43,170 ERROR  , Thread-6, checker.py:561, [trial: 2, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:02:43,171 DEBUG  , Thread-6, acto.py  :374, [trial: 2, gen: 1] Invalid input, revert
2023-04-02 00:02:43,171 WARNING, Thread-6, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:02:43,172 DEBUG  , Thread-6, acto.py  :458, [trial: 2, gen: 1] Run and check
2023-04-02 00:02:45,137 INFO   , Thread-6, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-02 00:02:47,045 INFO   , Thread-4, runner.py:360, [trial: 1, gen: 8] System took 00:01:00 to converge
2023-04-02 00:02:47,047 DEBUG  , Thread-4, runner.py:98, [trial: 1, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:02:47,047 DEBUG  , Thread-4, runner.py:99, [trial: 1, gen: 8] STDERR: 
2023-04-02 00:02:47,195 DEBUG  , Thread-4, runner.py:177, [trial: 1, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"tolerations":[]}}\n'}, 'creationTimestamp': '2023-04-02T03:45:05Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:01:46Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3431', 'uid': '05703de4-390e-4fa3-b90e-898cc20a876a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:02:47,226 DEBUG  , Thread-4, runner.py:202, [trial: 1, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-h9bj2
2023-04-02 00:02:47,990 INFO   , Thread-4, acto.py  :187, Trial 1 finished, completed in 00:20:06
2023-04-02 00:02:47,990 INFO   , Thread-4, acto.py  :188, ---------------------------------------

2023-04-02 00:02:48,021 DEBUG  , Thread-4, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-h9bj2
2023-04-02 00:02:53,059 INFO   , Thread-15, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:02:58,933 INFO   , Thread-5, runner.py:323, [trial: 3, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:03:00,045 ERROR  , Thread-8, runner.py:363, [trial: 2, gen: 1] System failed to converge within 600 seconds
2023-04-02 00:03:00,047 DEBUG  , Thread-8, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:03:00,047 DEBUG  , Thread-8, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-02 00:03:00,176 DEBUG  , Thread-8, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:51:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullPolicy":"ACTOKEY"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:51:48Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:51:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:51:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullPolicy': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:53:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1175', 'uid': '1aa29bf9-dfd9-4861-9548-10e93d1afb59'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'ACTOKEY'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:52:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:51:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:51:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:51:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:03:00,203 DEBUG  , Thread-8, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-j7hw7
2023-04-02 00:03:01,057 INFO   , Thread-8, checker.py:134, [trial: 2, gen: 1] Number of system state fields: [3030] Number of delta: [212]
2023-04-02 00:03:01,057 ERROR  , Thread-8, checker.py:561, [trial: 2, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:03:01,059 DEBUG  , Thread-8, acto.py  :489, [trial: 2, gen: 1] Running recovery
2023-04-02 00:03:02,893 INFO   , Thread-16, runner.py:360, [trial: 3, gen: 0] System took 00:01:00 to converge
2023-04-02 00:03:02,894 DEBUG  , Thread-16, runner.py:98, [trial: 3, gen: 0] STDOUT: 
2023-04-02 00:03:02,894 DEBUG  , Thread-16, runner.py:99, [trial: 3, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-15-0003/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.176.253:443: connect: connection refused

2023-04-02 00:03:02,996 DEBUG  , Thread-16, runner.py:177, [trial: 3, gen: 0] {}
2023-04-02 00:03:02,996 ERROR  , Thread-16, runner.py:107, [trial: 3, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:03:02,997 INFO   , Thread-16, checker.py:103, [trial: 3, gen: 0] Connection refused, reject mutation
2023-04-02 00:03:02,997 INFO   , Thread-16, acto.py  :472, [trial: 3, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:03:03,085 INFO   , Thread-8, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-02 00:03:03,447 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-3
2023-04-02 00:03:08,558 INFO   , Thread-1, runner.py:360, [trial: 3, gen: 2] System took 00:01:25 to converge
2023-04-02 00:03:08,583 DEBUG  , Thread-1, runner.py:98, [trial: 3, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:03:08,583 DEBUG  , Thread-1, runner.py:99, [trial: 3, gen: 2] STDERR: 
2023-04-02 00:03:08,731 DEBUG  , Thread-1, runner.py:177, [trial: 3, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:48:01Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":true},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:47:57Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:48:01Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:01:42Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2604', 'uid': '151fa815-5b2e-438d-86ed-7505e53945aa'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY', 'readOnly': True}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:48:12Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:48:00Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:48:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:48:06Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:03:08,763 DEBUG  , Thread-1, runner.py:202, [trial: 3, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-5fpc4
2023-04-02 00:03:09,470 INFO   , Thread-1, acto.py  :187, Trial 3 finished, completed in 00:17:36
2023-04-02 00:03:09,471 INFO   , Thread-1, acto.py  :188, ---------------------------------------

2023-04-02 00:03:09,499 DEBUG  , Thread-1, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-5fpc4
2023-04-02 00:03:16,126 INFO   , Thread-3, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:03:21,549 ERROR  , Thread-3, runner.py:363, [trial: 3, gen: 3] System failed to converge within 600 seconds
2023-04-02 00:03:21,550 DEBUG  , Thread-3, runner.py:98, [trial: 3, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:03:21,550 DEBUG  , Thread-3, runner.py:99, [trial: 3, gen: 3] STDERR: 
2023-04-02 00:03:21,761 DEBUG  , Thread-3, runner.py:177, [trial: 3, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:05Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"resourceFieldRef":{"divisor":0,"resource":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:00Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:52:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:53:21Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2064', 'uid': 'ce182198-dae0-4663-8b16-134e3eacc71d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'resourceFieldRef': {'divisor': '0', 'resource': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:52:20Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:05Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:06Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:02Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:52:15Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:03:21,787 DEBUG  , Thread-3, runner.py:202, [trial: 3, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-zvcns
2023-04-02 00:03:22,294 DEBUG  , Thread-3, checker.py:278, [trial: 3, gen: 3] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'resource']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 2, 'value_from', 'resource_field_ref', 'resource']]
2023-04-02 00:03:22,294 ERROR  , Thread-3, checker.py:282, [trial: 3, gen: 3] Matched delta inconsistent with input delta
2023-04-02 00:03:22,294 ERROR  , Thread-3, checker.py:283, [trial: 3, gen: 3] Input delta: not present -> ACTOKEY
2023-04-02 00:03:22,294 ERROR  , Thread-3, checker.py:284, [trial: 3, gen: 3] Matched delta: limits.cpu -> not present
2023-04-02 00:03:22,526 INFO   , Thread-3, common.py:569, [trial: 3, gen: 3] Recognized invalid input through field [resource] in error message: reconciling resources on deploy action
2023-04-02 00:03:22,526 INFO   , Thread-3, checker.py:134, [trial: 3, gen: 3] Number of system state fields: [3045] Number of delta: [206]
2023-04-02 00:03:22,526 ERROR  , Thread-3, checker.py:561, [trial: 3, gen: 3] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:03:22,527 DEBUG  , Thread-3, acto.py  :489, [trial: 3, gen: 3] Running recovery
2023-04-02 00:03:23,406 INFO   , Thread-16, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-02 00:03:24,334 INFO   , Thread-2, base.py  :41, Created cluster
2023-04-02 00:03:24,352 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:03:24,758 INFO   , Thread-3, runner.py:291, [trial: 3, gen: 3] Waiting for system to converge... 
2023-04-02 00:03:26,132 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-0
2023-04-02 00:03:27,199 INFO   , Thread-13, base.py  :41, Created cluster
2023-04-02 00:03:27,210 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:03:36,519 INFO   , Thread-11, runner.py:360, [trial: 3, gen: 2] System took 00:01:00 to converge
2023-04-02 00:03:36,520 DEBUG  , Thread-11, runner.py:98, [trial: 3, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:03:36,520 DEBUG  , Thread-11, runner.py:99, [trial: 3, gen: 2] STDERR: 
2023-04-02 00:03:36,660 DEBUG  , Thread-11, runner.py:177, [trial: 3, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:57:15Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:57:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:01:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:02:36Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1715', 'uid': 'eb971ed8-845c-4aad-b594-c383585c877f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:02:03Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:03:36,685 DEBUG  , Thread-11, runner.py:202, [trial: 3, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-r7p6w
2023-04-02 00:03:37,651 INFO   , Thread-11, acto.py  :321, [trial: 3, gen: 2] All setups failed
2023-04-02 00:03:37,652 WARNING, Thread-11, schema.py:573, [trial: 3, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-02 00:03:37,652 INFO   , Thread-11, input.py :723, [trial: 3, gen: 4] Progress [14] cases left
2023-04-02 00:03:37,652 DEBUG  , Thread-11, test_case.py:51, [trial: 3, gen: 4] Precondition [change_precondition] Result [False]
2023-04-02 00:03:37,652 INFO   , Thread-11, acto.py  :267, [trial: 3, gen: 4] Precondition of ["spec", "ingress", "ui", "annotations", "ACTOKEY"] fails, try setup first
2023-04-02 00:03:37,653 INFO   , Thread-11, acto.py  :107, [trial: 3, gen: 4] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "annotations": {"ACTOKEY": "ACTOKEY"}}}}]
2023-04-02 00:03:37,653 DEBUG  , Thread-11, test_case.py:51, [trial: 3, gen: 4] Precondition [change_precondition] Result [True]
2023-04-02 00:03:37,653 DEBUG  , Thread-11, acto.py  :458, [trial: 3, gen: 4] Run and check
2023-04-02 00:03:37,994 INFO   , Thread-11, runner.py:291, [trial: 3, gen: 4] Waiting for system to converge... 
2023-04-02 00:03:39,804 INFO   , Thread-9, runner.py:323, [trial: 2, gen: 8] Statefulset test-cluster is not ready yet
2023-04-02 00:03:40,622 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:03:43,158 DEBUG  , Thread-13, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:03:48,910 INFO   , Thread-10, runner.py:360, [trial: 2, gen: 2] System took 00:01:21 to converge
2023-04-02 00:03:48,911 DEBUG  , Thread-10, runner.py:98, [trial: 2, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:03:48,912 DEBUG  , Thread-10, runner.py:99, [trial: 2, gen: 2] STDERR: 
2023-04-02 00:03:49,062 DEBUG  , Thread-10, runner.py:177, [trial: 2, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:01:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","tls":[{"hosts":[],"secretName":"ACTOKEY"}]}},"maxSQLMemory":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:00:13Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:01:30Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:02:27Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:maxSQLMemory': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:02:27Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1512', 'uid': 'ac01b02b-4f7c-48e0-85b5-f7b11006b40d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY', 'tls': [{'secretName': 'ACTOKEY'}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:01:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:01:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:01:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:00:15Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:01:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:03:23Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:03:49,088 DEBUG  , Thread-10, runner.py:202, [trial: 2, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-gj2gp
2023-04-02 00:03:49,840 INFO   , Thread-10, common.py:560, [trial: 2, gen: 2] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-02 00:03:49,840 INFO   , Thread-10, checker.py:134, [trial: 2, gen: 2] Number of system state fields: [3781] Number of delta: [29]
2023-04-02 00:03:49,841 INFO   , Thread-10, acto.py  :301, [trial: 2, gen: 2] Setup produced invalid input
2023-04-02 00:03:49,842 WARNING, Thread-10, schema.py:573, [trial: 2, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 00:03:49,842 DEBUG  , Thread-10, acto.py  :458, [trial: 2, gen: 2] Run and check
2023-04-02 00:03:50,166 INFO   , Thread-10, runner.py:291, [trial: 2, gen: 2] Waiting for system to converge... 
2023-04-02 00:03:50,732 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-02 00:03:50,732 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:03:52,788 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:03:53,150 INFO   , Thread-15, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:03:53,330 INFO   , Thread-13, deploy.py:91, Operator ready
2023-04-02 00:03:53,330 INFO   , Thread-13, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:03:55,348 DEBUG  , Thread-13, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:03:57,537 INFO   , Thread-4, base.py  :41, Created cluster
2023-04-02 00:03:57,550 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:04:00,377 INFO   , Thread-6, runner.py:360, [trial: 2, gen: 1] System took 00:01:15 to converge
2023-04-02 00:04:00,378 DEBUG  , Thread-6, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:04:00,379 DEBUG  , Thread-6, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-02 00:04:00,540 DEBUG  , Thread-6, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:51:34Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:51:31Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:51:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:02:45Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2137', 'uid': '2ae74962-16de-40d9-a824-a172c3d7c4b6'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:51:45Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:51:33Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:51:34Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:51:33Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:51:40Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:04:00,575 DEBUG  , Thread-6, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-65fh2
2023-04-02 00:04:00,789 ERROR  , Thread-9, runner.py:363, [trial: 2, gen: 8] System failed to converge within 600 seconds
2023-04-02 00:04:00,803 DEBUG  , Thread-9, runner.py:98, [trial: 2, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:04:00,803 DEBUG  , Thread-9, runner.py:99, [trial: 2, gen: 8] STDERR: 
2023-04-02 00:04:01,684 DEBUG  , Thread-9, runner.py:177, [trial: 2, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"minAvailable":0,"nodeTLSSecret":"","nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"secretKeyRef":{"key":"ACTOKEY","optional":true}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:14Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:minAvailable': {}, 'f:nodeTLSSecret': {}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:54:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2007', 'uid': '5aa26381-a087-4f0d-88d6-fbe07e6d2d68'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'minAvailable': 0, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'secretKeyRef': {'key': 'ACTOKEY', 'optional': True}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:31Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:16Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:45:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:04:01,686 DEBUG  , Thread-6, acto.py  :383, [trial: 2, gen: 1] Only one patch, no need to isolate
2023-04-02 00:04:01,687 INFO   , Thread-6, acto.py  :332, [trial: 2, gen: 1] Error result, running recovery
2023-04-02 00:04:01,688 DEBUG  , Thread-6, acto.py  :489, [trial: 2, gen: 1] Running recovery
2023-04-02 00:04:01,738 DEBUG  , Thread-9, runner.py:202, [trial: 2, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-jp7j2
2023-04-02 00:04:02,054 INFO   , Thread-6, runner.py:291, [trial: 2, gen: 1] Waiting for system to converge... 
2023-04-02 00:04:02,320 DEBUG  , Thread-9, checker.py:278, [trial: 2, gen: 8] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'secretKeyRef', 'optional']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 4, 'value_from', 'secret_key_ref', 'optional']]
2023-04-02 00:04:02,552 INFO   , Thread-9, checker.py:134, [trial: 2, gen: 8] Number of system state fields: [3052] Number of delta: [214]
2023-04-02 00:04:02,552 ERROR  , Thread-9, checker.py:561, [trial: 2, gen: 8] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:04:02,555 DEBUG  , Thread-9, acto.py  :489, [trial: 2, gen: 8] Running recovery
2023-04-02 00:04:03,008 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-02 00:04:03,008 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:04:04,481 INFO   , Thread-9, runner.py:291, [trial: 2, gen: 8] Waiting for system to converge... 
2023-04-02 00:04:05,445 INFO   , Thread-13, deploy.py:91, Operator ready
2023-04-02 00:04:05,446 INFO   , Thread-13, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:04:14,673 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:04:18,299 INFO   , Thread-8, runner.py:360, [trial: 2, gen: 1] System took 00:01:15 to converge
2023-04-02 00:04:18,301 DEBUG  , Thread-8, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:04:18,301 DEBUG  , Thread-8, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-02 00:04:18,438 DEBUG  , Thread-8, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:51:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:51:48Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:51:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:03:03Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2123', 'uid': '1aa29bf9-dfd9-4861-9548-10e93d1afb59'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:52:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:51:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:51:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:51:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:04:18,467 DEBUG  , Thread-8, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-j7hw7
2023-04-02 00:04:19,126 INFO   , Thread-1, base.py  :41, Created cluster
2023-04-02 00:04:19,146 INFO   , Thread-8, acto.py  :187, Trial 2 finished, completed in 00:14:51
2023-04-02 00:04:19,148 INFO   , Thread-8, acto.py  :188, ---------------------------------------

2023-04-02 00:04:19,151 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:04:19,184 DEBUG  , Thread-8, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-j7hw7
2023-04-02 00:04:24,757 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-02 00:04:24,757 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:04:24,995 INFO   , Thread-16, runner.py:360, [trial: 3, gen: 0] System took 00:01:01 to converge
2023-04-02 00:04:24,996 DEBUG  , Thread-16, runner.py:98, [trial: 3, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:04:24,997 DEBUG  , Thread-16, runner.py:99, [trial: 3, gen: 0] STDERR: 
2023-04-02 00:04:25,092 DEBUG  , Thread-16, runner.py:177, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:03:23Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:03:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:03:25Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1041', 'uid': 'a25cd870-96b9-478e-8412-eca2cb161c2e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:03:23Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:03:23Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:03:25Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:04:25,112 DEBUG  , Thread-16, runner.py:202, [trial: 3, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-lfxzj
2023-04-02 00:04:25,330 WARNING, Thread-16, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:04:25,330 INFO   , Thread-16, input.py :723, [trial: 3, gen: 1] Progress [6] cases left
2023-04-02 00:04:25,331 DEBUG  , Thread-16, test_case.py:51, [trial: 3, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:04:25,331 INFO   , Thread-16, acto.py  :263, [trial: 3, gen: 1] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom', 'configMapKeyRef', 'key'] satisfies
2023-04-02 00:04:25,331 INFO   , Thread-16, acto.py  :323, [trial: 3, gen: 1] Running bundled testcases
2023-04-02 00:04:25,331 DEBUG  , Thread-16, test_case.py:51, [trial: 3, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:04:25,331 INFO   , Thread-16, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": ""}}}]}]
2023-04-02 00:04:25,331 DEBUG  , Thread-16, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-02 00:04:25,667 INFO   , Thread-16, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:04:26,908 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:04:35,380 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-7
2023-04-02 00:04:36,345 DEBUG  , Thread-1, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:04:36,996 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-02 00:04:36,996 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:04:37,507 INFO   , Thread-7, runner.py:323, [trial: 3, gen: 6] Statefulset test-cluster is not ready yet
2023-04-02 00:04:38,103 INFO   , Thread-11, runner.py:360, [trial: 3, gen: 4] System took 00:01:00 to converge
2023-04-02 00:04:38,110 DEBUG  , Thread-11, runner.py:98, [trial: 3, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:04:38,111 DEBUG  , Thread-11, runner.py:99, [trial: 3, gen: 4] STDERR: 
2023-04-02 00:04:38,260 DEBUG  , Thread-11, runner.py:177, [trial: 3, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"annotations":{"ACTOKEY":"ACTOKEY"},"host":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:57:15Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:03:37Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:03:38Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1856', 'uid': 'eb971ed8-845c-4aad-b594-c383585c877f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'annotations': {'ACTOKEY': 'ACTOKEY'}, 'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:04:06Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:04:38,284 DEBUG  , Thread-11, runner.py:202, [trial: 3, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-r7p6w
2023-04-02 00:04:38,838 ERROR  , Thread-11, checker.py:301, [trial: 3, gen: 4] Found no matching fields for input delta
2023-04-02 00:04:38,838 ERROR  , Thread-11, checker.py:302, [trial: 3, gen: 4] Input delta [['spec', 'ingress', 'ui', 'host']]
2023-04-02 00:04:39,154 INFO   , Thread-11, common.py:560, [trial: 3, gen: 4] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 00:04:39,154 INFO   , Thread-11, checker.py:134, [trial: 3, gen: 4] Number of system state fields: [3465] Number of delta: [3]
2023-04-02 00:04:39,155 INFO   , Thread-11, acto.py  :301, [trial: 3, gen: 4] Setup produced invalid input
2023-04-02 00:04:39,155 WARNING, Thread-11, schema.py:573, [trial: 3, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-02 00:04:39,156 DEBUG  , Thread-11, acto.py  :458, [trial: 3, gen: 4] Run and check
2023-04-02 00:04:39,500 INFO   , Thread-11, runner.py:291, [trial: 3, gen: 4] Waiting for system to converge... 
2023-04-02 00:04:39,981 INFO   , Thread-3, runner.py:360, [trial: 3, gen: 3] System took 00:01:15 to converge
2023-04-02 00:04:39,982 DEBUG  , Thread-3, runner.py:98, [trial: 3, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:04:39,983 DEBUG  , Thread-3, runner.py:99, [trial: 3, gen: 3] STDERR: 
2023-04-02 00:04:40,125 DEBUG  , Thread-3, runner.py:177, [trial: 3, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:05Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:00Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:52:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:03:24Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2991', 'uid': 'ce182198-dae0-4663-8b16-134e3eacc71d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:52:20Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:05Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:06Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:02Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:52:15Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:04:40,154 DEBUG  , Thread-3, runner.py:202, [trial: 3, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-zvcns
2023-04-02 00:04:40,880 INFO   , Thread-3, acto.py  :187, Trial 3 finished, completed in 00:22:57
2023-04-02 00:04:40,881 INFO   , Thread-3, acto.py  :188, ---------------------------------------

2023-04-02 00:04:40,897 DEBUG  , Thread-3, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-zvcns
2023-04-02 00:04:42,712 INFO   , Thread-5, runner.py:323, [trial: 3, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:04:43,123 WARNING, Thread-2, schema.py:573, [trial: 3, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:04:43,124 DEBUG  , Thread-2, acto.py  :458, [trial: 3, gen: 0] Run and check
2023-04-02 00:04:45,589 WARNING, Thread-13, schema.py:573, [trial: 3, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:04:45,590 DEBUG  , Thread-13, acto.py  :458, [trial: 3, gen: 0] Run and check
2023-04-02 00:04:45,629 INFO   , Thread-2, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-02 00:04:46,427 INFO   , Thread-1, deploy.py:91, Operator ready
2023-04-02 00:04:46,427 INFO   , Thread-1, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:04:49,709 INFO   , Thread-13, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-02 00:04:49,954 DEBUG  , Thread-1, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:04:50,285 INFO   , Thread-10, runner.py:360, [trial: 2, gen: 2] System took 00:01:00 to converge
2023-04-02 00:04:50,287 DEBUG  , Thread-10, runner.py:98, [trial: 2, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:04:50,287 DEBUG  , Thread-10, runner.py:99, [trial: 2, gen: 2] STDERR: 
2023-04-02 00:04:50,430 DEBUG  , Thread-10, runner.py:177, [trial: 2, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:01:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxSQLMemory":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:00:13Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:01:30Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:02:27Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxSQLMemory': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:03:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1551', 'uid': 'ac01b02b-4f7c-48e0-85b5-f7b11006b40d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:01:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:01:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:01:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:00:15Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:01:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:03:23Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:04:50,456 DEBUG  , Thread-10, runner.py:202, [trial: 2, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-gj2gp
2023-04-02 00:04:51,374 INFO   , Thread-10, acto.py  :321, [trial: 2, gen: 2] All setups failed
2023-04-02 00:04:51,375 WARNING, Thread-10, schema.py:573, [trial: 2, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-02 00:04:51,375 INFO   , Thread-10, input.py :723, [trial: 2, gen: 4] Progress [16] cases left
2023-04-02 00:04:51,375 DEBUG  , Thread-10, test_case.py:51, [trial: 2, gen: 4] Precondition [empty_precondition] Result [True]
2023-04-02 00:04:51,375 INFO   , Thread-10, acto.py  :263, [trial: 2, gen: 4] Precondition of ['spec', 'ingress', 'ui', 'tls', 0] satisfies
2023-04-02 00:04:51,375 INFO   , Thread-10, acto.py  :323, [trial: 2, gen: 4] Running bundled testcases
2023-04-02 00:04:51,376 DEBUG  , Thread-10, test_case.py:51, [trial: 2, gen: 4] Precondition [empty_precondition] Result [True]
2023-04-02 00:04:51,376 INFO   , Thread-10, acto.py  :107, [trial: 2, gen: 4] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": [{}]}}}]
2023-04-02 00:04:51,376 DEBUG  , Thread-10, acto.py  :458, [trial: 2, gen: 4] Run and check
2023-04-02 00:04:51,738 INFO   , Thread-10, runner.py:291, [trial: 2, gen: 4] Waiting for system to converge... 
2023-04-02 00:04:53,240 INFO   , Thread-15, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:04:57,043 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-2
2023-04-02 00:05:00,048 INFO   , Thread-1, deploy.py:91, Operator ready
2023-04-02 00:05:00,048 INFO   , Thread-1, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:05:02,660 INFO   , Thread-6, runner.py:360, [trial: 2, gen: 1] System took 00:01:00 to converge
2023-04-02 00:05:02,662 DEBUG  , Thread-6, runner.py:98, [trial: 2, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:05:02,662 DEBUG  , Thread-6, runner.py:99, [trial: 2, gen: 1] STDERR: 
2023-04-02 00:05:02,786 DEBUG  , Thread-6, runner.py:177, [trial: 2, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:51:34Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:51:31Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:51:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:02:45Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2137', 'uid': '2ae74962-16de-40d9-a824-a172c3d7c4b6'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:51:45Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:51:33Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:51:34Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:51:33Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:51:40Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:05:02,814 DEBUG  , Thread-6, runner.py:202, [trial: 2, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-65fh2
2023-04-02 00:05:03,466 INFO   , Thread-6, acto.py  :187, Trial 2 finished, completed in 00:15:54
2023-04-02 00:05:03,466 INFO   , Thread-6, acto.py  :188, ---------------------------------------

2023-04-02 00:05:03,504 DEBUG  , Thread-6, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-65fh2
2023-04-02 00:05:04,456 ERROR  , Thread-15, runner.py:363, [trial: 4, gen: 3] System failed to converge within 600 seconds
2023-04-02 00:05:04,457 DEBUG  , Thread-15, runner.py:98, [trial: 4, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:05:04,458 DEBUG  , Thread-15, runner.py:99, [trial: 4, gen: 3] STDERR: 
2023-04-02 00:05:04,672 DEBUG  , Thread-15, runner.py:177, [trial: 4, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:46:49Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","optional":true}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:45:43Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:54:04Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:55:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2209', 'uid': '378bc157-bf44-4968-ae6f-35fab8c4d4be'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'optional': True}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:54:04Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:46:48Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:46:50Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:45Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:53:59Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:05:04,694 DEBUG  , Thread-15, runner.py:202, [trial: 4, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-dtkfn
2023-04-02 00:05:05,206 DEBUG  , Thread-15, checker.py:278, [trial: 4, gen: 3] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'configMapKeyRef', 'optional']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 4, 'value_from', 'config_map_key_ref', 'optional']]
2023-04-02 00:05:05,390 INFO   , Thread-15, checker.py:134, [trial: 4, gen: 3] Number of system state fields: [3045] Number of delta: [206]
2023-04-02 00:05:05,390 ERROR  , Thread-15, checker.py:561, [trial: 4, gen: 3] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:05:05,391 DEBUG  , Thread-15, acto.py  :489, [trial: 4, gen: 3] Running recovery
2023-04-02 00:05:05,933 INFO   , Thread-9, runner.py:360, [trial: 2, gen: 8] System took 00:01:01 to converge
2023-04-02 00:05:05,935 DEBUG  , Thread-9, runner.py:98, [trial: 2, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:05:05,935 DEBUG  , Thread-9, runner.py:99, [trial: 2, gen: 8] STDERR: 
2023-04-02 00:05:06,066 DEBUG  , Thread-9, runner.py:177, [trial: 2, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:45:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"minAvailable":0,"nodeTLSSecret":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:44:14Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:45:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:minAvailable': {}, 'f:nodeTLSSecret': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:04:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2954', 'uid': '5aa26381-a087-4f0d-88d6-fbe07e6d2d68'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'minAvailable': 0, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:45:31Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:45:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:45:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:44:16Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:45:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:05:06,095 DEBUG  , Thread-9, runner.py:202, [trial: 2, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-jp7j2
2023-04-02 00:05:06,828 INFO   , Thread-9, acto.py  :187, Trial 2 finished, completed in 00:23:15
2023-04-02 00:05:06,828 INFO   , Thread-9, acto.py  :188, ---------------------------------------

2023-04-02 00:05:06,851 DEBUG  , Thread-9, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-jp7j2
2023-04-02 00:05:07,763 INFO   , Thread-15, runner.py:291, [trial: 4, gen: 3] Waiting for system to converge... 
2023-04-02 00:05:17,112 WARNING, Thread-4, schema.py:573, [trial: 2, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:05:17,112 DEBUG  , Thread-4, acto.py  :458, [trial: 2, gen: 0] Run and check
2023-04-02 00:05:19,815 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-5
2023-04-02 00:05:19,854 INFO   , Thread-4, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-02 00:05:22,123 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-8
2023-04-02 00:05:29,485 INFO   , Thread-8, base.py  :41, Created cluster
2023-04-02 00:05:29,502 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:05:37,594 INFO   , Thread-7, runner.py:323, [trial: 3, gen: 6] Statefulset test-cluster is not ready yet
2023-04-02 00:05:39,619 INFO   , Thread-11, runner.py:360, [trial: 3, gen: 4] System took 00:01:00 to converge
2023-04-02 00:05:39,621 DEBUG  , Thread-11, runner.py:98, [trial: 3, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:05:39,621 DEBUG  , Thread-11, runner.py:99, [trial: 3, gen: 4] STDERR: 
2023-04-02 00:05:39,769 DEBUG  , Thread-11, runner.py:177, [trial: 3, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:57:15Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:03:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:04:39Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1907', 'uid': 'eb971ed8-845c-4aad-b594-c383585c877f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:04:06Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:05:39,795 DEBUG  , Thread-11, runner.py:202, [trial: 3, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-r7p6w
2023-04-02 00:05:40,706 WARNING, Thread-1, schema.py:573, [trial: 4, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:05:40,713 DEBUG  , Thread-1, acto.py  :458, [trial: 4, gen: 0] Run and check
2023-04-02 00:05:40,890 INFO   , Thread-11, acto.py  :321, [trial: 3, gen: 4] All setups failed
2023-04-02 00:05:40,891 WARNING, Thread-11, schema.py:573, [trial: 3, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-02 00:05:40,891 INFO   , Thread-11, input.py :723, [trial: 3, gen: 6] Progress [13] cases left
2023-04-02 00:05:40,892 DEBUG  , Thread-11, test_case.py:51, [trial: 3, gen: 6] Precondition [empty_precondition] Result [True]
2023-04-02 00:05:40,892 INFO   , Thread-11, acto.py  :263, [trial: 3, gen: 6] Precondition of ['spec', 'ingress', 'ui', 'annotations', 'ACTOKEY'] satisfies
2023-04-02 00:05:40,892 INFO   , Thread-11, acto.py  :323, [trial: 3, gen: 6] Running bundled testcases
2023-04-02 00:05:40,892 DEBUG  , Thread-11, test_case.py:51, [trial: 3, gen: 6] Precondition [empty_precondition] Result [True]
2023-04-02 00:05:40,893 INFO   , Thread-11, acto.py  :107, [trial: 3, gen: 6] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "annotations": {"ACTOKEY": ""}}}}]
2023-04-02 00:05:40,893 DEBUG  , Thread-11, acto.py  :458, [trial: 3, gen: 6] Run and check
2023-04-02 00:05:41,229 INFO   , Thread-11, runner.py:291, [trial: 3, gen: 6] Waiting for system to converge... 
2023-04-02 00:05:42,804 INFO   , Thread-5, runner.py:323, [trial: 3, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:05:43,498 INFO   , Thread-1, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:05:46,164 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:05:46,246 INFO   , Thread-2, runner.py:360, [trial: 3, gen: 0] System took 00:01:00 to converge
2023-04-02 00:05:46,247 DEBUG  , Thread-2, runner.py:98, [trial: 3, gen: 0] STDOUT: 
2023-04-02 00:05:46,247 DEBUG  , Thread-2, runner.py:99, [trial: 3, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-01-0003/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.74.130:443: connect: connection refused

2023-04-02 00:05:46,343 DEBUG  , Thread-2, runner.py:177, [trial: 3, gen: 0] {}
2023-04-02 00:05:46,343 ERROR  , Thread-2, runner.py:107, [trial: 3, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:05:46,344 INFO   , Thread-2, checker.py:103, [trial: 3, gen: 0] Connection refused, reject mutation
2023-04-02 00:05:46,344 INFO   , Thread-2, acto.py  :472, [trial: 3, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:05:49,834 INFO   , Thread-13, runner.py:360, [trial: 3, gen: 0] System took 00:01:00 to converge
2023-04-02 00:05:49,834 DEBUG  , Thread-13, runner.py:98, [trial: 3, gen: 0] STDOUT: 
2023-04-02 00:05:49,835 DEBUG  , Thread-13, runner.py:99, [trial: 3, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-12-0003/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.236.117:443: connect: connection refused

2023-04-02 00:05:49,926 DEBUG  , Thread-13, runner.py:177, [trial: 3, gen: 0] {}
2023-04-02 00:05:49,926 ERROR  , Thread-13, runner.py:107, [trial: 3, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:05:49,926 INFO   , Thread-13, checker.py:103, [trial: 3, gen: 0] Connection refused, reject mutation
2023-04-02 00:05:49,926 INFO   , Thread-13, acto.py  :472, [trial: 3, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:05:51,854 INFO   , Thread-3, base.py  :41, Created cluster
2023-04-02 00:05:51,859 INFO   , Thread-10, runner.py:360, [trial: 2, gen: 4] System took 00:01:00 to converge
2023-04-02 00:05:51,872 DEBUG  , Thread-10, runner.py:98, [trial: 2, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:05:51,873 DEBUG  , Thread-10, runner.py:99, [trial: 2, gen: 4] STDERR: 
2023-04-02 00:05:51,876 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:05:52,028 DEBUG  , Thread-10, runner.py:177, [trial: 2, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:01:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","tls":[{}]}},"maxSQLMemory":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:00:13Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:04:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:maxSQLMemory': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:04:51Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1736', 'uid': 'ac01b02b-4f7c-48e0-85b5-f7b11006b40d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY', 'tls': [{}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:01:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:01:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:01:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:00:15Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:01:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:05:47Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:05:52,052 DEBUG  , Thread-10, runner.py:202, [trial: 2, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-gj2gp
2023-04-02 00:05:52,921 INFO   , Thread-10, common.py:560, [trial: 2, gen: 4] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 00:05:52,921 INFO   , Thread-10, checker.py:134, [trial: 2, gen: 4] Number of system state fields: [3780] Number of delta: [3]
2023-04-02 00:05:52,922 DEBUG  , Thread-10, acto.py  :374, [trial: 2, gen: 4] Invalid input, revert
2023-04-02 00:05:52,922 WARNING, Thread-10, schema.py:573, [trial: 2, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-02 00:05:52,923 DEBUG  , Thread-10, acto.py  :458, [trial: 2, gen: 4] Run and check
2023-04-02 00:05:53,259 INFO   , Thread-10, runner.py:291, [trial: 2, gen: 4] Waiting for system to converge... 
2023-04-02 00:05:56,259 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-02 00:05:56,260 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:05:58,377 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:06:06,719 INFO   , Thread-2, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-02 00:06:08,482 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-02 00:06:08,483 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:06:09,213 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:06:09,873 INFO   , Thread-15, runner.py:360, [trial: 4, gen: 3] System took 00:01:02 to converge
2023-04-02 00:06:09,874 DEBUG  , Thread-15, runner.py:98, [trial: 4, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:06:09,874 DEBUG  , Thread-15, runner.py:99, [trial: 4, gen: 3] STDERR: 
2023-04-02 00:06:10,020 DEBUG  , Thread-15, runner.py:177, [trial: 4, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:46:49Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:45:43Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:54:04Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:05:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3141', 'uid': '378bc157-bf44-4968-ae6f-35fab8c4d4be'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:54:04Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:46:48Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:46:50Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:45:45Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:53:59Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:06:10,048 DEBUG  , Thread-15, runner.py:202, [trial: 4, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-dtkfn
2023-04-02 00:06:10,426 INFO   , Thread-13, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-02 00:06:10,924 INFO   , Thread-15, acto.py  :187, Trial 4 finished, completed in 00:24:11
2023-04-02 00:06:10,924 INFO   , Thread-15, acto.py  :188, ---------------------------------------

2023-04-02 00:06:10,946 DEBUG  , Thread-15, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-dtkfn
2023-04-02 00:06:12,819 INFO   , Thread-6, base.py  :41, Created cluster
2023-04-02 00:06:12,829 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:06:17,131 INFO   , Thread-9, base.py  :41, Created cluster
2023-04-02 00:06:17,141 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:06:19,298 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-02 00:06:19,298 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:06:19,975 INFO   , Thread-4, runner.py:360, [trial: 2, gen: 0] System took 00:01:00 to converge
2023-04-02 00:06:19,976 DEBUG  , Thread-4, runner.py:98, [trial: 2, gen: 0] STDOUT: 
2023-04-02 00:06:19,977 DEBUG  , Thread-4, runner.py:99, [trial: 2, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-03-0002/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.61.121:443: connect: connection refused

2023-04-02 00:06:20,071 DEBUG  , Thread-4, runner.py:177, [trial: 2, gen: 0] {}
2023-04-02 00:06:20,071 ERROR  , Thread-4, runner.py:107, [trial: 2, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:06:20,072 INFO   , Thread-4, checker.py:103, [trial: 2, gen: 0] Connection refused, reject mutation
2023-04-02 00:06:20,072 INFO   , Thread-4, acto.py  :472, [trial: 2, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:06:21,255 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:06:27,399 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-14
2023-04-02 00:06:29,234 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:06:31,347 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-02 00:06:31,347 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:06:33,229 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:06:37,678 INFO   , Thread-7, runner.py:323, [trial: 3, gen: 6] Statefulset test-cluster is not ready yet
2023-04-02 00:06:39,402 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 00:06:39,402 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:06:40,518 INFO   , Thread-4, runner.py:291, [trial: 2, gen: 0] Waiting for system to converge... 
2023-04-02 00:06:41,353 INFO   , Thread-11, runner.py:360, [trial: 3, gen: 6] System took 00:01:00 to converge
2023-04-02 00:06:41,355 DEBUG  , Thread-11, runner.py:98, [trial: 3, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:06:41,355 DEBUG  , Thread-11, runner.py:99, [trial: 3, gen: 6] STDERR: 
2023-04-02 00:06:41,509 DEBUG  , Thread-11, runner.py:177, [trial: 3, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"annotations":{"ACTOKEY":""},"host":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:57:15Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:05:41Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:05:41Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2082', 'uid': 'eb971ed8-845c-4aad-b594-c383585c877f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'annotations': {'ACTOKEY': ''}, 'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:06:30Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:06:41,536 DEBUG  , Thread-11, runner.py:202, [trial: 3, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-r7p6w
2023-04-02 00:06:41,631 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:06:42,085 ERROR  , Thread-11, checker.py:301, [trial: 3, gen: 6] Found no matching fields for input delta
2023-04-02 00:06:42,085 ERROR  , Thread-11, checker.py:302, [trial: 3, gen: 6] Input delta [['spec', 'ingress', 'ui', 'host']]
2023-04-02 00:06:42,301 INFO   , Thread-11, common.py:560, [trial: 3, gen: 6] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 00:06:42,301 INFO   , Thread-11, checker.py:134, [trial: 3, gen: 6] Number of system state fields: [3465] Number of delta: [3]
2023-04-02 00:06:42,302 DEBUG  , Thread-11, acto.py  :374, [trial: 3, gen: 6] Invalid input, revert
2023-04-02 00:06:42,303 WARNING, Thread-11, schema.py:573, [trial: 3, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-02 00:06:42,303 DEBUG  , Thread-11, acto.py  :458, [trial: 3, gen: 6] Run and check
2023-04-02 00:06:42,660 INFO   , Thread-11, runner.py:291, [trial: 3, gen: 6] Waiting for system to converge... 
2023-04-02 00:06:42,892 INFO   , Thread-5, runner.py:323, [trial: 3, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:06:43,412 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-02 00:06:43,412 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:06:43,627 INFO   , Thread-1, runner.py:360, [trial: 4, gen: 0] System took 00:01:00 to converge
2023-04-02 00:06:43,629 DEBUG  , Thread-1, runner.py:98, [trial: 4, gen: 0] STDOUT: 
2023-04-02 00:06:43,629 DEBUG  , Thread-1, runner.py:99, [trial: 4, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-00-0004/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.37.166:443: connect: connection refused

2023-04-02 00:06:43,734 DEBUG  , Thread-1, runner.py:177, [trial: 4, gen: 0] {}
2023-04-02 00:06:43,735 ERROR  , Thread-1, runner.py:107, [trial: 4, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:06:43,735 INFO   , Thread-1, checker.py:103, [trial: 4, gen: 0] Connection refused, reject mutation
2023-04-02 00:06:43,735 INFO   , Thread-1, acto.py  :472, [trial: 4, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:06:45,389 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:06:48,602 WARNING, Thread-8, schema.py:573, [trial: 3, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:06:48,603 DEBUG  , Thread-8, acto.py  :458, [trial: 3, gen: 0] Run and check
2023-04-02 00:06:51,184 INFO   , Thread-8, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-02 00:06:51,723 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 00:06:51,723 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:06:53,368 INFO   , Thread-10, runner.py:360, [trial: 2, gen: 4] System took 00:01:00 to converge
2023-04-02 00:06:53,370 DEBUG  , Thread-10, runner.py:98, [trial: 2, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:06:53,370 DEBUG  , Thread-10, runner.py:99, [trial: 2, gen: 4] STDERR: 
2023-04-02 00:06:53,519 DEBUG  , Thread-10, runner.py:177, [trial: 2, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:01:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxSQLMemory":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:00:13Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:04:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxSQLMemory': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:05:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1741', 'uid': 'ac01b02b-4f7c-48e0-85b5-f7b11006b40d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:01:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:01:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:01:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:00:15Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:01:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:05:47Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:06:53,545 DEBUG  , Thread-10, runner.py:202, [trial: 2, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-gj2gp
2023-04-02 00:06:54,362 DEBUG  , Thread-10, acto.py  :383, [trial: 2, gen: 4] Only one patch, no need to isolate
2023-04-02 00:06:54,363 WARNING, Thread-10, schema.py:573, [trial: 2, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-02 00:06:54,363 INFO   , Thread-10, input.py :723, [trial: 2, gen: 6] Progress [15] cases left
2023-04-02 00:06:54,363 DEBUG  , Thread-10, test_case.py:51, [trial: 2, gen: 6] Precondition [delete_precondition] Result [False]
2023-04-02 00:06:54,363 INFO   , Thread-10, acto.py  :267, [trial: 2, gen: 6] Precondition of ["spec", "cockroachDBVersion"] fails, try setup first
2023-04-02 00:06:54,364 INFO   , Thread-10, acto.py  :107, [trial: 2, gen: 6] JSON patch: [{"op": "add", "path": "/spec/cockroachDBVersion", "value": "ACTOKEY"}]
2023-04-02 00:06:54,364 DEBUG  , Thread-10, test_case.py:51, [trial: 2, gen: 6] Precondition [delete_precondition] Result [True]
2023-04-02 00:06:54,364 DEBUG  , Thread-10, acto.py  :458, [trial: 2, gen: 6] Run and check
2023-04-02 00:06:54,721 INFO   , Thread-10, runner.py:291, [trial: 2, gen: 6] Waiting for system to converge... 
2023-04-02 00:06:55,498 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-02 00:06:55,498 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:07:04,131 INFO   , Thread-1, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:07:08,106 INFO   , Thread-2, runner.py:360, [trial: 3, gen: 0] System took 00:01:01 to converge
2023-04-02 00:07:08,107 DEBUG  , Thread-2, runner.py:98, [trial: 3, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:07:08,107 DEBUG  , Thread-2, runner.py:99, [trial: 3, gen: 0] STDERR: 
2023-04-02 00:07:08,202 DEBUG  , Thread-2, runner.py:177, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:06:06Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:06:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:06:08Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1055', 'uid': '9fa671e8-8e86-49cf-a62f-8644b4a646ce'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:06:06Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:06:06Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:06:08Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:07:08,219 DEBUG  , Thread-2, runner.py:202, [trial: 3, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-5lfc7
2023-04-02 00:07:08,327 WARNING, Thread-2, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:07:08,327 INFO   , Thread-2, input.py :723, [trial: 3, gen: 1] Progress [11] cases left
2023-04-02 00:07:08,328 DEBUG  , Thread-2, test_case.py:51, [trial: 3, gen: 1] Precondition [change_precondition] Result [False]
2023-04-02 00:07:08,328 INFO   , Thread-2, acto.py  :267, [trial: 3, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "fieldRef", "apiVersion"] fails, try setup first
2023-04-02 00:07:08,328 INFO   , Thread-2, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"fieldRef": {"fieldPath": "ACTOKEY", "apiVersion": "ACTOKEY"}}}]}]
2023-04-02 00:07:08,328 DEBUG  , Thread-2, test_case.py:51, [trial: 3, gen: 1] Precondition [change_precondition] Result [True]
2023-04-02 00:07:08,329 DEBUG  , Thread-2, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-02 00:07:08,656 INFO   , Thread-2, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:07:11,484 WARNING, Thread-3, schema.py:573, [trial: 4, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:07:11,484 DEBUG  , Thread-3, acto.py  :458, [trial: 4, gen: 0] Run and check
2023-04-02 00:07:11,810 INFO   , Thread-13, runner.py:360, [trial: 3, gen: 0] System took 00:01:01 to converge
2023-04-02 00:07:11,812 DEBUG  , Thread-13, runner.py:98, [trial: 3, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:07:11,812 DEBUG  , Thread-13, runner.py:99, [trial: 3, gen: 0] STDERR: 
2023-04-02 00:07:11,912 DEBUG  , Thread-13, runner.py:177, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:06:10Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:06:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:06:12Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1019', 'uid': '550d1d63-4b03-49a5-ad4b-5f76c3e235b7'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:06:10Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:06:10Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:06:12Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:07:11,929 DEBUG  , Thread-13, runner.py:202, [trial: 3, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-rc45m
2023-04-02 00:07:12,080 WARNING, Thread-13, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:07:12,081 INFO   , Thread-13, input.py :723, [trial: 3, gen: 1] Progress [2] cases left
2023-04-02 00:07:12,082 DEBUG  , Thread-13, test_case.py:51, [trial: 3, gen: 1] Precondition [change_precondition] Result [False]
2023-04-02 00:07:12,082 INFO   , Thread-13, acto.py  :267, [trial: 3, gen: 1] Precondition of ["spec", "image", "pullSecret"] fails, try setup first
2023-04-02 00:07:12,082 INFO   , Thread-13, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "add", "path": "/spec/image/pullSecret", "value": "ACTOKEY"}]
2023-04-02 00:07:12,083 DEBUG  , Thread-13, test_case.py:51, [trial: 3, gen: 1] Precondition [change_precondition] Result [True]
2023-04-02 00:07:12,083 DEBUG  , Thread-13, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-02 00:07:12,304 INFO   , Thread-15, base.py  :41, Created cluster
2023-04-02 00:07:12,321 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:07:12,473 INFO   , Thread-13, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:07:14,254 INFO   , Thread-3, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:07:29,584 DEBUG  , Thread-15, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:07:31,837 WARNING, Thread-6, schema.py:573, [trial: 3, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:07:31,838 DEBUG  , Thread-6, acto.py  :458, [trial: 3, gen: 0] Run and check
2023-04-02 00:07:34,358 INFO   , Thread-6, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-02 00:07:35,636 WARNING, Thread-9, schema.py:573, [trial: 3, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:07:35,637 DEBUG  , Thread-9, acto.py  :458, [trial: 3, gen: 0] Run and check
2023-04-02 00:07:38,223 INFO   , Thread-9, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-02 00:07:39,675 INFO   , Thread-15, deploy.py:91, Operator ready
2023-04-02 00:07:39,676 INFO   , Thread-15, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:07:41,668 DEBUG  , Thread-15, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:07:42,786 INFO   , Thread-11, runner.py:360, [trial: 3, gen: 6] System took 00:01:00 to converge
2023-04-02 00:07:42,788 DEBUG  , Thread-11, runner.py:98, [trial: 3, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:07:42,788 DEBUG  , Thread-11, runner.py:99, [trial: 3, gen: 6] STDERR: 
2023-04-02 00:07:42,922 DEBUG  , Thread-11, runner.py:177, [trial: 3, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:57:15Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:05:41Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:06:42Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2103', 'uid': 'eb971ed8-845c-4aad-b594-c383585c877f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:06:30Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:07:42,963 DEBUG  , Thread-11, runner.py:202, [trial: 3, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-r7p6w
2023-04-02 00:07:42,985 INFO   , Thread-5, runner.py:323, [trial: 3, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:07:43,758 DEBUG  , Thread-11, acto.py  :383, [trial: 3, gen: 6] Only one patch, no need to isolate
2023-04-02 00:07:43,758 WARNING, Thread-11, schema.py:573, [trial: 3, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-02 00:07:43,758 INFO   , Thread-11, input.py :723, [trial: 3, gen: 8] Progress [12] cases left
2023-04-02 00:07:43,759 DEBUG  , Thread-11, test_case.py:51, [trial: 3, gen: 8] Precondition [delete_precondition] Result [False]
2023-04-02 00:07:43,759 INFO   , Thread-11, acto.py  :267, [trial: 3, gen: 8] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "secretKeyRef"] fails, try setup first
2023-04-02 00:07:43,759 INFO   , Thread-11, acto.py  :107, [trial: 3, gen: 8] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"secretKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": false}}}]}]
2023-04-02 00:07:43,759 DEBUG  , Thread-11, test_case.py:51, [trial: 3, gen: 8] Precondition [delete_precondition] Result [True]
2023-04-02 00:07:43,759 DEBUG  , Thread-11, acto.py  :458, [trial: 3, gen: 8] Run and check
2023-04-02 00:07:45,854 INFO   , Thread-11, runner.py:291, [trial: 3, gen: 8] Waiting for system to converge... 
2023-04-02 00:07:51,317 INFO   , Thread-8, runner.py:360, [trial: 3, gen: 0] System took 00:01:00 to converge
2023-04-02 00:07:51,318 DEBUG  , Thread-8, runner.py:98, [trial: 3, gen: 0] STDOUT: 
2023-04-02 00:07:51,319 DEBUG  , Thread-8, runner.py:99, [trial: 3, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-07-0003/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.115.215:443: connect: connection refused

2023-04-02 00:07:51,407 DEBUG  , Thread-8, runner.py:177, [trial: 3, gen: 0] {}
2023-04-02 00:07:51,407 ERROR  , Thread-8, runner.py:107, [trial: 3, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:07:51,408 INFO   , Thread-8, checker.py:103, [trial: 3, gen: 0] Connection refused, reject mutation
2023-04-02 00:07:51,409 INFO   , Thread-8, acto.py  :472, [trial: 3, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:07:51,762 INFO   , Thread-15, deploy.py:91, Operator ready
2023-04-02 00:07:51,762 INFO   , Thread-15, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:07:54,837 INFO   , Thread-10, runner.py:360, [trial: 2, gen: 6] System took 00:01:00 to converge
2023-04-02 00:07:54,838 DEBUG  , Thread-10, runner.py:98, [trial: 2, gen: 6] STDOUT: 
2023-04-02 00:07:54,838 DEBUG  , Thread-10, runner.py:99, [trial: 2, gen: 6] STDERR: Error from server (you have provided both cockroachDBVersion and cockroach image, please provide only one): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"cockroachDBVersion\":\"ACTOKEY\",\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"maxSQLMemory\":\"\",\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"cockroachDBVersion":"ACTOKEY","maxSQLMemory":"","resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-09-0002/mutated-6.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: you have provided both cockroachDBVersion and cockroach image, please provide only one

2023-04-02 00:07:54,973 DEBUG  , Thread-10, runner.py:177, [trial: 2, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:01:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxSQLMemory":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:00:13Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:04:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxSQLMemory': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:05:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1741', 'uid': 'ac01b02b-4f7c-48e0-85b5-f7b11006b40d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:01:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:01:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:01:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:00:15Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:01:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:05:47Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:07:54,996 DEBUG  , Thread-10, runner.py:202, [trial: 2, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-gj2gp
2023-04-02 00:07:55,279 INFO   , Thread-10, common.py:569, [trial: 2, gen: 6] Recognized invalid input through field [cockroachDBVersion] in error message: Error from server (you have provided both cockroachDBVersion and cockroach image, please provide only one): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"cockroachDBVersion\":\"ACTOKEY\",\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"maxSQLMemory\":\"\",\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"cockroachDBVersion":"ACTOKEY","maxSQLMemory":"","resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-09-0002/mutated-6.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: you have provided both cockroachDBVersion and cockroach image, please provide only one

2023-04-02 00:07:55,279 INFO   , Thread-10, checker.py:213, [trial: 2, gen: 6] Invalid input, reject mutation
2023-04-02 00:07:55,279 INFO   , Thread-10, checker.py:214, [trial: 2, gen: 6] STDOUT: 
2023-04-02 00:07:55,279 INFO   , Thread-10, checker.py:215, [trial: 2, gen: 6] STDERR: Error from server (you have provided both cockroachDBVersion and cockroach image, please provide only one): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"cockroachDBVersion\":\"ACTOKEY\",\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"maxSQLMemory\":\"\",\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"cockroachDBVersion":"ACTOKEY","maxSQLMemory":"","resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-09-0002/mutated-6.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: you have provided both cockroachDBVersion and cockroach image, please provide only one

2023-04-02 00:07:55,566 ERROR  , Thread-10, checker.py:301, [trial: 2, gen: 6] Found no matching fields for input delta
2023-04-02 00:07:55,566 ERROR  , Thread-10, checker.py:302, [trial: 2, gen: 6] Input delta [['spec', 'cockroachDBVersion']]
2023-04-02 00:07:55,771 INFO   , Thread-10, checker.py:134, [trial: 2, gen: 6] Number of system state fields: [3464] Number of delta: [158]
2023-04-02 00:07:55,772 INFO   , Thread-10, acto.py  :301, [trial: 2, gen: 6] Setup produced invalid input
2023-04-02 00:07:55,773 WARNING, Thread-10, schema.py:573, [trial: 2, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-02 00:07:55,773 DEBUG  , Thread-10, acto.py  :458, [trial: 2, gen: 6] Run and check
2023-04-02 00:07:56,106 INFO   , Thread-10, runner.py:291, [trial: 2, gen: 6] Waiting for system to converge... 
2023-04-02 00:08:05,595 INFO   , Thread-1, runner.py:360, [trial: 4, gen: 0] System took 00:01:01 to converge
2023-04-02 00:08:05,596 DEBUG  , Thread-1, runner.py:98, [trial: 4, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:08:05,596 DEBUG  , Thread-1, runner.py:99, [trial: 4, gen: 0] STDERR: 
2023-04-02 00:08:05,649 ERROR  , Thread-5, runner.py:363, [trial: 3, gen: 1] System failed to converge within 600 seconds
2023-04-02 00:08:05,651 DEBUG  , Thread-5, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:08:05,651 DEBUG  , Thread-5, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:08:05,745 DEBUG  , Thread-1, runner.py:177, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:07:04Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:07:04Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:07:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1030', 'uid': 'be81b463-86bf-4231-b6cc-5ba518dc8c4c'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:07:04Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:07:04Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:07:06Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:08:05,786 DEBUG  , Thread-1, runner.py:202, [trial: 4, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-rdh5z
2023-04-02 00:08:05,847 DEBUG  , Thread-5, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:56:57Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"fieldRef":{"fieldPath":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:56:53Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:56:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:56:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T03:58:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1296', 'uid': 'e32da623-eb0d-4bc3-aabb-3c3629eb3ff9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'fieldRef': {'fieldPath': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:08Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:56:56Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:56:57Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:02Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:08:05,912 WARNING, Thread-1, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:08:05,913 INFO   , Thread-1, input.py :723, [trial: 4, gen: 1] Progress [8] cases left
2023-04-02 00:08:05,913 DEBUG  , Thread-1, test_case.py:51, [trial: 4, gen: 1] Precondition [change_precondition] Result [False]
2023-04-02 00:08:05,913 INFO   , Thread-1, acto.py  :267, [trial: 4, gen: 1] Precondition of ["spec", "cache"] fails, try setup first
2023-04-02 00:08:05,914 INFO   , Thread-1, acto.py  :107, [trial: 4, gen: 1] JSON patch: [{"op": "add", "path": "/spec/cache", "value": "ACTOKEY"}]
2023-04-02 00:08:05,914 DEBUG  , Thread-1, test_case.py:51, [trial: 4, gen: 1] Precondition [change_precondition] Result [True]
2023-04-02 00:08:05,915 DEBUG  , Thread-1, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:08:05,952 DEBUG  , Thread-5, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-8kkn9
2023-04-02 00:08:06,351 INFO   , Thread-1, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:08:06,563 DEBUG  , Thread-5, checker.py:278, [trial: 3, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'fieldRef', 'fieldPath']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 1, 'value_from', 'field_ref', 'field_path']]
2023-04-02 00:08:06,564 ERROR  , Thread-5, checker.py:282, [trial: 3, gen: 1] Matched delta inconsistent with input delta
2023-04-02 00:08:06,564 ERROR  , Thread-5, checker.py:283, [trial: 3, gen: 1] Input delta: not present -> ACTOKEY
2023-04-02 00:08:06,564 ERROR  , Thread-5, checker.py:284, [trial: 3, gen: 1] Matched delta: metadata.name -> not present
2023-04-02 00:08:06,764 INFO   , Thread-5, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [3039] Number of delta: [223]
2023-04-02 00:08:06,764 ERROR  , Thread-5, checker.py:561, [trial: 3, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:08:06,766 DEBUG  , Thread-5, acto.py  :489, [trial: 3, gen: 1] Running recovery
2023-04-02 00:08:08,645 INFO   , Thread-5, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:08:09,604 INFO   , Thread-2, runner.py:360, [trial: 3, gen: 1] System took 00:01:00 to converge
2023-04-02 00:08:09,605 DEBUG  , Thread-2, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:08:09,605 DEBUG  , Thread-2, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:08:09,731 DEBUG  , Thread-2, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"fieldRef":{"apiVersion":"ACTOKEY","fieldPath":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:06:06Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:06:08Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:07:08Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:07:09Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1159', 'uid': '9fa671e8-8e86-49cf-a62f-8644b4a646ce'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'fieldRef': {'apiVersion': 'ACTOKEY', 'fieldPath': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:06:06Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:06:06Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:07:10Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:08:09,751 DEBUG  , Thread-2, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-5lfc7
2023-04-02 00:08:10,059 DEBUG  , Thread-2, checker.py:278, [trial: 3, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'fieldRef', 'apiVersion']] matched with [['test-cluster-vcheck-28006807--1-59n2d', 'metadata', 'managed_fields', 0, 'api_version']]
2023-04-02 00:08:10,059 ERROR  , Thread-2, checker.py:282, [trial: 3, gen: 1] Matched delta inconsistent with input delta
2023-04-02 00:08:10,059 ERROR  , Thread-2, checker.py:283, [trial: 3, gen: 1] Input delta: not present -> ACTOKEY
2023-04-02 00:08:10,059 ERROR  , Thread-2, checker.py:284, [trial: 3, gen: 1] Matched delta: not present -> v1
2023-04-02 00:08:10,160 INFO   , Thread-2, common.py:569, [trial: 3, gen: 1] Recognized invalid input through field [name] in error message: User set image.name, using that field instead of cockroachDBVersion
2023-04-02 00:08:10,160 INFO   , Thread-2, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [1807] Number of delta: [150]
2023-04-02 00:08:10,161 INFO   , Thread-2, acto.py  :301, [trial: 3, gen: 1] Setup produced invalid input
2023-04-02 00:08:10,161 WARNING, Thread-2, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:08:10,161 DEBUG  , Thread-2, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-02 00:08:10,516 INFO   , Thread-2, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:08:11,810 INFO   , Thread-8, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-02 00:08:14,390 INFO   , Thread-3, runner.py:360, [trial: 4, gen: 0] System took 00:01:00 to converge
2023-04-02 00:08:14,392 DEBUG  , Thread-3, runner.py:98, [trial: 4, gen: 0] STDOUT: 
2023-04-02 00:08:14,392 DEBUG  , Thread-3, runner.py:99, [trial: 4, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-02-0004/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.255.84:443: connect: connection refused

2023-04-02 00:08:14,496 DEBUG  , Thread-3, runner.py:177, [trial: 4, gen: 0] {}
2023-04-02 00:08:14,496 ERROR  , Thread-3, runner.py:107, [trial: 4, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:08:14,498 INFO   , Thread-3, checker.py:103, [trial: 4, gen: 0] Connection refused, reject mutation
2023-04-02 00:08:14,498 INFO   , Thread-3, acto.py  :472, [trial: 4, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:08:23,487 INFO   , Thread-13, runner.py:360, [trial: 3, gen: 1] System took 00:01:11 to converge
2023-04-02 00:08:23,488 DEBUG  , Thread-13, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:08:23,489 DEBUG  , Thread-13, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:08:23,721 DEBUG  , Thread-13, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:07:15Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullSecret":"ACTOKEY"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:06:10Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullSecret': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:07:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:07:16Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:07:16Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1286', 'uid': '550d1d63-4b03-49a5-ad4b-5f76c3e235b7'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent', 'pullSecret': 'ACTOKEY'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:07:26Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:07:15Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:07:16Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:06:12Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:07:21Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:08:23,752 DEBUG  , Thread-13, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-rc45m
2023-04-02 00:08:24,400 INFO   , Thread-13, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [3765] Number of delta: [1092]
2023-04-02 00:08:24,401 INFO   , Thread-13, acto.py  :323, [trial: 3, gen: 1] Running bundled testcases
2023-04-02 00:08:24,401 DEBUG  , Thread-13, test_case.py:51, [trial: 3, gen: 1] Precondition [change_precondition] Result [True]
2023-04-02 00:08:24,401 ERROR  , Thread-13, schema.py:183, [trial: 3, gen: 1] Failed to change, generated the same string with previous one
2023-04-02 00:08:24,401 INFO   , Thread-13, acto.py  :107, [trial: 3, gen: 1] JSON patch: []
2023-04-02 00:08:24,401 DEBUG  , Thread-13, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-02 00:08:24,738 INFO   , Thread-13, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:08:31,895 WARNING, Thread-15, schema.py:573, [trial: 5, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:08:31,895 DEBUG  , Thread-15, acto.py  :458, [trial: 5, gen: 0] Run and check
2023-04-02 00:08:32,500 INFO   , Thread-7, runner.py:323, [trial: 3, gen: 6] Statefulset test-cluster is not ready yet
2023-04-02 00:08:34,484 INFO   , Thread-6, runner.py:360, [trial: 3, gen: 0] System took 00:01:00 to converge
2023-04-02 00:08:34,485 DEBUG  , Thread-6, runner.py:98, [trial: 3, gen: 0] STDOUT: 
2023-04-02 00:08:34,485 DEBUG  , Thread-6, runner.py:99, [trial: 3, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-05-0003/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.106.209:443: connect: connection refused

2023-04-02 00:08:34,587 DEBUG  , Thread-6, runner.py:177, [trial: 3, gen: 0] {}
2023-04-02 00:08:34,587 ERROR  , Thread-6, runner.py:107, [trial: 3, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:08:34,588 INFO   , Thread-6, checker.py:103, [trial: 3, gen: 0] Connection refused, reject mutation
2023-04-02 00:08:34,589 INFO   , Thread-6, acto.py  :472, [trial: 3, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:08:34,605 INFO   , Thread-15, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:08:34,937 INFO   , Thread-3, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:08:38,979 INFO   , Thread-9, runner.py:360, [trial: 3, gen: 0] System took 00:01:00 to converge
2023-04-02 00:08:38,981 DEBUG  , Thread-9, runner.py:98, [trial: 3, gen: 0] STDOUT: 
2023-04-02 00:08:38,981 DEBUG  , Thread-9, runner.py:99, [trial: 3, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-08-0003/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.48.249:443: connect: connection refused

2023-04-02 00:08:39,075 DEBUG  , Thread-9, runner.py:177, [trial: 3, gen: 0] {}
2023-04-02 00:08:39,076 ERROR  , Thread-9, runner.py:107, [trial: 3, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:08:39,077 INFO   , Thread-9, checker.py:103, [trial: 3, gen: 0] Connection refused, reject mutation
2023-04-02 00:08:39,078 INFO   , Thread-9, acto.py  :472, [trial: 3, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:08:46,096 INFO   , Thread-4, runner.py:360, [trial: 2, gen: 0] System took 00:02:05 to converge
2023-04-02 00:08:46,097 DEBUG  , Thread-4, runner.py:98, [trial: 2, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:08:46,097 DEBUG  , Thread-4, runner.py:99, [trial: 2, gen: 0] STDERR: 
2023-04-02 00:08:46,252 DEBUG  , Thread-4, runner.py:177, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:06:43Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:06:40Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:06:40Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:06:44Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:06:44Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1194', 'uid': '3c379a03-5b50-4305-b0b3-cd47b92114f1'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:06:54Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:06:43Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:06:44Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:06:49Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:08:46,280 DEBUG  , Thread-4, runner.py:202, [trial: 2, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-hc9h4
2023-04-02 00:08:46,481 WARNING, Thread-4, schema.py:573, [trial: 2, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:08:46,482 INFO   , Thread-4, input.py :723, [trial: 2, gen: 1] Progress [10] cases left
2023-04-02 00:08:46,483 INFO   , Thread-4, acto.py  :187, Trial 2 finished, completed in 00:05:48
2023-04-02 00:08:46,483 INFO   , Thread-4, acto.py  :188, ---------------------------------------

2023-04-02 00:08:46,516 DEBUG  , Thread-4, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-hc9h4
2023-04-02 00:08:54,991 INFO   , Thread-6, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-02 00:08:56,232 INFO   , Thread-10, runner.py:360, [trial: 2, gen: 6] System took 00:01:00 to converge
2023-04-02 00:08:56,233 DEBUG  , Thread-10, runner.py:98, [trial: 2, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:08:56,234 DEBUG  , Thread-10, runner.py:99, [trial: 2, gen: 6] STDERR: 
2023-04-02 00:08:56,364 DEBUG  , Thread-10, runner.py:177, [trial: 2, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:01:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxSQLMemory":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:00:13Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:04:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxSQLMemory': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:05:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1741', 'uid': 'ac01b02b-4f7c-48e0-85b5-f7b11006b40d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:01:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:01:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:01:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:00:15Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:01:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:05:47Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:08:56,394 DEBUG  , Thread-10, runner.py:202, [trial: 2, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-gj2gp
2023-04-02 00:08:56,583 INFO   , Thread-4, common.py:629, Trial testrun-crdb-whitebox/trial-03-0002 completed without error
2023-04-02 00:08:57,222 INFO   , Thread-10, acto.py  :321, [trial: 2, gen: 6] All setups failed
2023-04-02 00:08:57,222 WARNING, Thread-10, schema.py:573, [trial: 2, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-02 00:08:57,222 INFO   , Thread-10, input.py :723, [trial: 2, gen: 8] Progress [14] cases left
2023-04-02 00:08:57,223 DEBUG  , Thread-10, test_case.py:51, [trial: 2, gen: 8] Precondition [change_precondition] Result [False]
2023-04-02 00:08:57,223 INFO   , Thread-10, acto.py  :267, [trial: 2, gen: 8] Precondition of ["spec", "cockroachDBVersion"] fails, try setup first
2023-04-02 00:08:57,223 INFO   , Thread-10, acto.py  :107, [trial: 2, gen: 8] JSON patch: [{"op": "add", "path": "/spec/cockroachDBVersion", "value": "ACTOKEY"}]
2023-04-02 00:08:57,223 DEBUG  , Thread-10, test_case.py:51, [trial: 2, gen: 8] Precondition [change_precondition] Result [True]
2023-04-02 00:08:57,223 DEBUG  , Thread-10, acto.py  :458, [trial: 2, gen: 8] Run and check
2023-04-02 00:08:59,243 INFO   , Thread-10, runner.py:291, [trial: 2, gen: 8] Waiting for system to converge... 
2023-04-02 00:08:59,467 INFO   , Thread-9, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-02 00:09:02,526 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-3
2023-04-02 00:09:07,308 INFO   , Thread-1, runner.py:360, [trial: 4, gen: 1] System took 00:01:00 to converge
2023-04-02 00:09:07,309 DEBUG  , Thread-1, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:09:07,309 DEBUG  , Thread-1, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:09:07,437 DEBUG  , Thread-1, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cache":"ACTOKEY","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:07:04Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:07:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cache': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:08:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:08:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1134', 'uid': 'be81b463-86bf-4231-b6cc-5ba518dc8c4c'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'cache': 'ACTOKEY', 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:07:04Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:07:04Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:08:07Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:09:07,456 DEBUG  , Thread-1, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-rdh5z
2023-04-02 00:09:07,938 INFO   , Thread-1, checker.py:134, [trial: 4, gen: 1] Number of system state fields: [1805] Number of delta: [148]
2023-04-02 00:09:07,938 INFO   , Thread-1, acto.py  :323, [trial: 4, gen: 1] Running bundled testcases
2023-04-02 00:09:07,939 DEBUG  , Thread-1, test_case.py:51, [trial: 4, gen: 1] Precondition [change_precondition] Result [True]
2023-04-02 00:09:07,939 ERROR  , Thread-1, schema.py:183, [trial: 4, gen: 1] Failed to change, generated the same string with previous one
2023-04-02 00:09:07,939 INFO   , Thread-1, acto.py  :107, [trial: 4, gen: 1] JSON patch: []
2023-04-02 00:09:07,939 DEBUG  , Thread-1, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:09:08,371 INFO   , Thread-1, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:09:13,205 INFO   , Thread-8, runner.py:360, [trial: 3, gen: 0] System took 00:01:01 to converge
2023-04-02 00:09:13,207 DEBUG  , Thread-8, runner.py:98, [trial: 3, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:09:13,207 DEBUG  , Thread-8, runner.py:99, [trial: 3, gen: 0] STDERR: 
2023-04-02 00:09:13,311 DEBUG  , Thread-8, runner.py:177, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:11Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:08:11Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:08:13Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1021', 'uid': '19cd4c85-8709-4a7d-ad41-cb58b84b5682'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:08:11Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:08:11Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:08:13Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:09:13,335 DEBUG  , Thread-8, runner.py:202, [trial: 3, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-cw49q
2023-04-02 00:09:13,441 WARNING, Thread-8, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:09:13,441 INFO   , Thread-8, input.py :723, [trial: 3, gen: 1] Progress [16] cases left
2023-04-02 00:09:13,442 DEBUG  , Thread-8, test_case.py:51, [trial: 3, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:09:13,442 INFO   , Thread-8, acto.py  :263, [trial: 3, gen: 1] Precondition of ['spec', 'image', 'pullPolicy'] satisfies
2023-04-02 00:09:13,442 INFO   , Thread-8, acto.py  :323, [trial: 3, gen: 1] Running bundled testcases
2023-04-02 00:09:13,442 DEBUG  , Thread-8, test_case.py:51, [trial: 3, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:09:13,442 INFO   , Thread-8, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "add", "path": "/spec/image/pullPolicy", "value": ""}]
2023-04-02 00:09:13,442 DEBUG  , Thread-8, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-02 00:09:13,756 INFO   , Thread-8, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:09:32,592 INFO   , Thread-7, runner.py:323, [trial: 3, gen: 6] Statefulset test-cluster is not ready yet
2023-04-02 00:09:33,876 INFO   , Thread-5, runner.py:360, [trial: 3, gen: 1] System took 00:01:25 to converge
2023-04-02 00:09:33,877 DEBUG  , Thread-5, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:09:33,877 DEBUG  , Thread-5, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:09:34,021 DEBUG  , Thread-5, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:56:57Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:56:53Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T03:56:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:08:08Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2240', 'uid': 'e32da623-eb0d-4bc3-aabb-3c3629eb3ff9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:08Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:56:56Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:56:57Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:02Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:09:34,046 DEBUG  , Thread-5, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-8kkn9
2023-04-02 00:09:34,721 INFO   , Thread-5, acto.py  :187, Trial 3 finished, completed in 00:16:14
2023-04-02 00:09:34,722 INFO   , Thread-5, acto.py  :188, ---------------------------------------

2023-04-02 00:09:34,751 INFO   , Thread-11, runner.py:323, [trial: 3, gen: 8] Statefulset test-cluster is not ready yet
2023-04-02 00:09:34,763 DEBUG  , Thread-5, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-8kkn9
2023-04-02 00:09:36,294 INFO   , Thread-3, runner.py:360, [trial: 4, gen: 0] System took 00:01:01 to converge
2023-04-02 00:09:36,295 DEBUG  , Thread-3, runner.py:98, [trial: 4, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:09:36,295 DEBUG  , Thread-3, runner.py:99, [trial: 4, gen: 0] STDERR: 
2023-04-02 00:09:36,394 DEBUG  , Thread-3, runner.py:177, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:34Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:08:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:08:36Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1031', 'uid': 'e3388b33-e0bb-4435-a924-2f8456c82696'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:08:34Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:08:34Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:08:37Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:09:36,414 DEBUG  , Thread-3, runner.py:202, [trial: 4, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-cf2fq
2023-04-02 00:09:36,608 WARNING, Thread-3, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:09:36,609 INFO   , Thread-3, input.py :723, [trial: 4, gen: 1] Progress [15] cases left
2023-04-02 00:09:36,611 DEBUG  , Thread-3, test_case.py:46, [trial: 4, gen: 1] Precondition [precondition] Result [False]
2023-04-02 00:09:36,611 DEBUG  , Thread-3, test_case.py:51, [trial: 4, gen: 1] Precondition [decrease_precondition] Result [False]
2023-04-02 00:09:36,611 INFO   , Thread-3, acto.py  :267, [trial: 4, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "resourceFieldRef", "divisor"] fails, try setup first
2023-04-02 00:09:36,611 INFO   , Thread-3, acto.py  :107, [trial: 4, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {"resource": "ACTOKEY", "divisor": 5}}}]}]
2023-04-02 00:09:36,612 DEBUG  , Thread-3, test_case.py:46, [trial: 4, gen: 1] Precondition [precondition] Result [True]
2023-04-02 00:09:36,612 DEBUG  , Thread-3, test_case.py:51, [trial: 4, gen: 1] Precondition [decrease_precondition] Result [True]
2023-04-02 00:09:36,613 DEBUG  , Thread-3, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:09:36,940 INFO   , Thread-3, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:09:45,512 INFO   , Thread-13, runner.py:360, [trial: 3, gen: 1] System took 00:01:20 to converge
2023-04-02 00:09:45,514 DEBUG  , Thread-13, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:09:45,514 DEBUG  , Thread-13, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:09:45,665 DEBUG  , Thread-13, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:07:15Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullSecret":"ACTOKEY"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:06:10Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullSecret': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:07:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:07:16Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:07:16Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1402', 'uid': '550d1d63-4b03-49a5-ad4b-5f76c3e235b7'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent', 'pullSecret': 'ACTOKEY'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:07:26Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:07:15Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:07:16Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:06:12Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:07:21Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:09:45,696 DEBUG  , Thread-13, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-rc45m
2023-04-02 00:09:46,538 WARNING, Thread-13, schema.py:573, [trial: 3, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:09:46,539 INFO   , Thread-13, input.py :723, [trial: 3, gen: 3] Progress [1] cases left
2023-04-02 00:09:46,540 DEBUG  , Thread-13, test_case.py:51, [trial: 3, gen: 3] Precondition [empty_precondition] Result [True]
2023-04-02 00:09:46,540 INFO   , Thread-13, acto.py  :263, [trial: 3, gen: 3] Precondition of ['spec', 'image', 'pullSecret'] satisfies
2023-04-02 00:09:46,540 INFO   , Thread-13, acto.py  :323, [trial: 3, gen: 3] Running bundled testcases
2023-04-02 00:09:46,540 DEBUG  , Thread-13, test_case.py:51, [trial: 3, gen: 3] Precondition [empty_precondition] Result [True]
2023-04-02 00:09:46,540 INFO   , Thread-13, acto.py  :107, [trial: 3, gen: 3] JSON patch: [{"op": "replace", "path": "/spec/image/pullSecret", "value": ""}]
2023-04-02 00:09:46,540 DEBUG  , Thread-13, acto.py  :458, [trial: 3, gen: 3] Run and check
2023-04-02 00:09:46,863 INFO   , Thread-13, runner.py:291, [trial: 3, gen: 3] Waiting for system to converge... 
2023-04-02 00:09:48,253 INFO   , Thread-4, base.py  :41, Created cluster
2023-04-02 00:09:48,265 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:09:49,886 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-4
2023-04-02 00:09:57,414 INFO   , Thread-15, runner.py:360, [trial: 5, gen: 0] System took 00:01:22 to converge
2023-04-02 00:09:57,415 DEBUG  , Thread-15, runner.py:98, [trial: 5, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:09:57,416 DEBUG  , Thread-15, runner.py:99, [trial: 5, gen: 0] STDERR: 
2023-04-02 00:09:57,567 DEBUG  , Thread-15, runner.py:177, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:08:37Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:34Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:08:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:08:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:08:38Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1065', 'uid': '498ac576-8e2e-454e-b82c-730f27bf48da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:08:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:08:37Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:08:38Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:08:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:09:57,603 DEBUG  , Thread-15, runner.py:202, [trial: 5, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-4nq4z
2023-04-02 00:09:57,871 WARNING, Thread-15, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:09:57,871 INFO   , Thread-15, input.py :723, [trial: 5, gen: 1] Progress [2] cases left
2023-04-02 00:09:57,871 DEBUG  , Thread-15, test_case.py:51, [trial: 5, gen: 1] Precondition [toggle_on_precondition] Result [True]
2023-04-02 00:09:57,871 INFO   , Thread-15, acto.py  :263, [trial: 5, gen: 1] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom', 'configMapKeyRef', 'optional'] satisfies
2023-04-02 00:09:57,871 INFO   , Thread-15, acto.py  :323, [trial: 5, gen: 1] Running bundled testcases
2023-04-02 00:09:57,871 DEBUG  , Thread-15, test_case.py:51, [trial: 5, gen: 1] Precondition [toggle_on_precondition] Result [True]
2023-04-02 00:09:57,872 INFO   , Thread-15, acto.py  :107, [trial: 5, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "optional": true}}}]}]
2023-04-02 00:09:57,872 DEBUG  , Thread-15, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:09:58,250 INFO   , Thread-15, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:09:59,364 INFO   , Thread-10, runner.py:360, [trial: 2, gen: 8] System took 00:01:00 to converge
2023-04-02 00:09:59,374 DEBUG  , Thread-10, runner.py:98, [trial: 2, gen: 8] STDOUT: 
2023-04-02 00:09:59,375 DEBUG  , Thread-10, runner.py:99, [trial: 2, gen: 8] STDERR: Error from server (you have provided both cockroachDBVersion and cockroach image, please provide only one): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"cockroachDBVersion\":\"ACTOKEY\",\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"maxSQLMemory\":\"\",\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"cockroachDBVersion":"ACTOKEY","maxSQLMemory":"","resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-09-0002/mutated-8.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: you have provided both cockroachDBVersion and cockroach image, please provide only one

2023-04-02 00:09:59,514 DEBUG  , Thread-10, runner.py:177, [trial: 2, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:01:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxSQLMemory":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:00:13Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:04:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxSQLMemory': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:05:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1741', 'uid': 'ac01b02b-4f7c-48e0-85b5-f7b11006b40d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:01:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:01:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:01:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:00:15Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:01:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:05:47Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:09:59,547 DEBUG  , Thread-10, runner.py:202, [trial: 2, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-gj2gp
2023-04-02 00:09:59,900 INFO   , Thread-10, common.py:569, [trial: 2, gen: 8] Recognized invalid input through field [cockroachDBVersion] in error message: Error from server (you have provided both cockroachDBVersion and cockroach image, please provide only one): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"cockroachDBVersion\":\"ACTOKEY\",\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"maxSQLMemory\":\"\",\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"cockroachDBVersion":"ACTOKEY","maxSQLMemory":"","resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-09-0002/mutated-8.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: you have provided both cockroachDBVersion and cockroach image, please provide only one

2023-04-02 00:09:59,900 INFO   , Thread-10, checker.py:213, [trial: 2, gen: 8] Invalid input, reject mutation
2023-04-02 00:09:59,900 INFO   , Thread-10, checker.py:214, [trial: 2, gen: 8] STDOUT: 
2023-04-02 00:09:59,900 INFO   , Thread-10, checker.py:215, [trial: 2, gen: 8] STDERR: Error from server (you have provided both cockroachDBVersion and cockroach image, please provide only one): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"cockroachDBVersion\":\"ACTOKEY\",\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"maxSQLMemory\":\"\",\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"cockroachDBVersion":"ACTOKEY","maxSQLMemory":"","resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-09-0002/mutated-8.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: you have provided both cockroachDBVersion and cockroach image, please provide only one

2023-04-02 00:10:00,229 ERROR  , Thread-10, checker.py:301, [trial: 2, gen: 8] Found no matching fields for input delta
2023-04-02 00:10:00,229 ERROR  , Thread-10, checker.py:302, [trial: 2, gen: 8] Input delta [['spec', 'cockroachDBVersion']]
2023-04-02 00:10:00,471 INFO   , Thread-10, checker.py:134, [trial: 2, gen: 8] Number of system state fields: [3464] Number of delta: [0]
2023-04-02 00:10:00,472 INFO   , Thread-10, acto.py  :301, [trial: 2, gen: 8] Setup produced invalid input
2023-04-02 00:10:00,472 WARNING, Thread-10, schema.py:573, [trial: 2, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-02 00:10:00,473 DEBUG  , Thread-10, acto.py  :458, [trial: 2, gen: 8] Run and check
2023-04-02 00:10:00,790 INFO   , Thread-10, runner.py:291, [trial: 2, gen: 8] Waiting for system to converge... 
2023-04-02 00:10:01,776 INFO   , Thread-9, runner.py:360, [trial: 3, gen: 0] System took 00:01:02 to converge
2023-04-02 00:10:01,777 DEBUG  , Thread-9, runner.py:98, [trial: 3, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:10:01,777 DEBUG  , Thread-9, runner.py:99, [trial: 3, gen: 0] STDERR: 
2023-04-02 00:10:01,901 DEBUG  , Thread-9, runner.py:177, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:59Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:08:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:09:02Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1052', 'uid': 'fd984d9e-2fc4-4733-b18c-6d50801fdec9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:08:59Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:08:59Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:09:02Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:10:01,929 DEBUG  , Thread-9, runner.py:202, [trial: 3, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-jc6qt
2023-04-02 00:10:02,052 WARNING, Thread-9, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:10:02,052 INFO   , Thread-9, input.py :723, [trial: 3, gen: 1] Progress [12] cases left
2023-04-02 00:10:02,053 DEBUG  , Thread-9, test_case.py:51, [trial: 3, gen: 1] Precondition [toggle_off_precondition] Result [False]
2023-04-02 00:10:02,053 INFO   , Thread-9, acto.py  :267, [trial: 3, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "secretKeyRef", "optional"] fails, try setup first
2023-04-02 00:10:02,053 INFO   , Thread-9, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"secretKeyRef": {"key": "ACTOKEY", "optional": true}}}]}]
2023-04-02 00:10:02,053 DEBUG  , Thread-9, test_case.py:51, [trial: 3, gen: 1] Precondition [toggle_off_precondition] Result [True]
2023-04-02 00:10:02,054 DEBUG  , Thread-9, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-02 00:10:02,390 INFO   , Thread-9, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:10:05,307 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:10:07,346 INFO   , Thread-6, runner.py:360, [trial: 3, gen: 0] System took 00:01:12 to converge
2023-04-02 00:10:07,347 DEBUG  , Thread-6, runner.py:98, [trial: 3, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:10:07,347 DEBUG  , Thread-6, runner.py:99, [trial: 3, gen: 0] STDERR: 
2023-04-02 00:10:07,481 DEBUG  , Thread-6, runner.py:177, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:08:58Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:54Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:08:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:08:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:08:59Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1192', 'uid': '58280fe3-a3fd-4a93-8eff-82643da48cae'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:09:10Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:08:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:08:59Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:09:05Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:10:07,522 DEBUG  , Thread-6, runner.py:202, [trial: 3, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-9lrzk
2023-04-02 00:10:07,797 WARNING, Thread-6, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:10:07,798 INFO   , Thread-6, input.py :723, [trial: 3, gen: 1] Progress [11] cases left
2023-04-02 00:10:07,798 DEBUG  , Thread-6, test_case.py:51, [trial: 3, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-02 00:10:07,798 INFO   , Thread-6, acto.py  :267, [trial: 3, gen: 1] Precondition of ["spec", "ingress", "sql"] fails, try setup first
2023-04-02 00:10:07,799 INFO   , Thread-6, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"annotations": null, "host": "ACTOKEY", "ingressClassName": "ACTOKEY", "tls": [{"hosts": null, "secretName": "ACTOKEY"}, {"hosts": [], "secretName": "ACTOKEY"}]}}}]
2023-04-02 00:10:07,799 DEBUG  , Thread-6, test_case.py:51, [trial: 3, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-02 00:10:07,799 DEBUG  , Thread-6, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-02 00:10:08,148 INFO   , Thread-6, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:10:15,399 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-02 00:10:15,399 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:10:17,470 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:10:25,781 INFO   , Thread-8, runner.py:360, [trial: 3, gen: 1] System took 00:01:12 to converge
2023-04-02 00:10:25,782 DEBUG  , Thread-8, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:10:25,782 DEBUG  , Thread-8, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:10:25,924 DEBUG  , Thread-8, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:09:17Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullPolicy":""},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:11Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullPolicy': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:09:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:09:28Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1293', 'uid': '19cd4c85-8709-4a7d-ad41-cb58b84b5682'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': ''}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:09:28Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:09:16Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:09:17Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:08:13Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:09:23Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:10:25,962 DEBUG  , Thread-8, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-cw49q
2023-04-02 00:10:26,498 INFO   , Thread-8, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [3764] Number of delta: [1088]
2023-04-02 00:10:26,502 WARNING, Thread-8, schema.py:573, [trial: 3, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 00:10:26,503 INFO   , Thread-8, input.py :723, [trial: 3, gen: 2] Progress [15] cases left
2023-04-02 00:10:26,503 DEBUG  , Thread-8, test_case.py:51, [trial: 3, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-02 00:10:26,503 INFO   , Thread-8, acto.py  :267, [trial: 3, gen: 2] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "resourceFieldRef"] fails, try setup first
2023-04-02 00:10:26,504 INFO   , Thread-8, acto.py  :107, [trial: 3, gen: 2] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {"containerName": "ACTOKEY", "divisor": 1, "resource": "ACTOKEY"}}}]}]
2023-04-02 00:10:26,504 DEBUG  , Thread-8, test_case.py:51, [trial: 3, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-02 00:10:26,504 DEBUG  , Thread-8, acto.py  :458, [trial: 3, gen: 2] Run and check
2023-04-02 00:10:26,827 INFO   , Thread-8, runner.py:291, [trial: 3, gen: 2] Waiting for system to converge... 
2023-04-02 00:10:27,561 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-02 00:10:27,561 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:10:32,676 INFO   , Thread-7, runner.py:323, [trial: 3, gen: 6] Statefulset test-cluster is not ready yet
2023-04-02 00:10:34,623 INFO   , Thread-5, base.py  :41, Created cluster
2023-04-02 00:10:34,637 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:10:34,837 INFO   , Thread-11, runner.py:323, [trial: 3, gen: 8] Statefulset test-cluster is not ready yet
2023-04-02 00:10:43,077 INFO   , Thread-2, runner.py:360, [trial: 3, gen: 1] System took 00:02:32 to converge
2023-04-02 00:10:43,078 DEBUG  , Thread-2, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:10:43,079 DEBUG  , Thread-2, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:10:43,231 DEBUG  , Thread-2, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:08:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:06:06Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:08:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:08:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1489', 'uid': '9fa671e8-8e86-49cf-a62f-8644b4a646ce'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:08:53Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:08:41Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:08:43Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:08:12Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:08:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:10:43,260 DEBUG  , Thread-2, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-5lfc7
2023-04-02 00:10:43,830 INFO   , Thread-2, acto.py  :321, [trial: 3, gen: 1] All setups failed
2023-04-02 00:10:43,830 WARNING, Thread-2, schema.py:573, [trial: 3, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:10:43,831 INFO   , Thread-2, input.py :723, [trial: 3, gen: 3] Progress [10] cases left
2023-04-02 00:10:43,832 INFO   , Thread-2, acto.py  :187, Trial 3 finished, completed in 00:08:21
2023-04-02 00:10:43,832 INFO   , Thread-2, acto.py  :188, ---------------------------------------

2023-04-02 00:10:43,850 DEBUG  , Thread-2, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-5lfc7
2023-04-02 00:10:46,989 INFO   , Thread-13, runner.py:360, [trial: 3, gen: 3] System took 00:01:00 to converge
2023-04-02 00:10:46,990 DEBUG  , Thread-13, runner.py:98, [trial: 3, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:10:46,991 DEBUG  , Thread-13, runner.py:99, [trial: 3, gen: 3] STDERR: 
2023-04-02 00:10:47,143 DEBUG  , Thread-13, runner.py:177, [trial: 3, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:07:15Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullSecret":""},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:06:10Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullSecret': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:07:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:07:16Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1531', 'uid': '550d1d63-4b03-49a5-ad4b-5f76c3e235b7'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent', 'pullSecret': ''}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:07:26Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:07:15Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:07:16Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:06:12Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:07:21Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:10:47,175 DEBUG  , Thread-13, runner.py:202, [trial: 3, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-rc45m
2023-04-02 00:10:47,847 ERROR  , Thread-13, checker.py:301, [trial: 3, gen: 3] Found no matching fields for input delta
2023-04-02 00:10:47,847 ERROR  , Thread-13, checker.py:302, [trial: 3, gen: 3] Input delta [['spec', 'image', 'pullSecret']]
2023-04-02 00:10:48,079 INFO   , Thread-13, checker.py:134, [trial: 3, gen: 3] Number of system state fields: [3776] Number of delta: [1]
2023-04-02 00:10:48,081 INFO   , Thread-13, acto.py  :332, [trial: 3, gen: 3] Error result, running recovery
2023-04-02 00:10:48,081 DEBUG  , Thread-13, acto.py  :489, [trial: 3, gen: 3] Running recovery
2023-04-02 00:10:48,587 INFO   , Thread-13, runner.py:291, [trial: 3, gen: 3] Waiting for system to converge... 
2023-04-02 00:10:51,790 DEBUG  , Thread-5, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:10:53,878 INFO   , Thread-2, common.py:629, Trial testrun-crdb-whitebox/trial-01-0003 completed without error
2023-04-02 00:10:59,441 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-1
2023-04-02 00:11:00,906 INFO   , Thread-10, runner.py:360, [trial: 2, gen: 8] System took 00:01:00 to converge
2023-04-02 00:11:00,908 DEBUG  , Thread-10, runner.py:98, [trial: 2, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:11:00,908 DEBUG  , Thread-10, runner.py:99, [trial: 2, gen: 8] STDERR: 
2023-04-02 00:11:01,054 DEBUG  , Thread-10, runner.py:177, [trial: 2, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:01:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"maxSQLMemory":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:00:13Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:04:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:maxSQLMemory': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:05:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1741', 'uid': 'ac01b02b-4f7c-48e0-85b5-f7b11006b40d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:01:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:01:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:01:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:00:15Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:01:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:05:47Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:11:01,087 DEBUG  , Thread-10, runner.py:202, [trial: 2, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-gj2gp
2023-04-02 00:11:01,965 INFO   , Thread-10, acto.py  :321, [trial: 2, gen: 8] All setups failed
2023-04-02 00:11:01,970 INFO   , Thread-10, acto.py  :187, Trial 2 finished, completed in 00:14:30
2023-04-02 00:11:01,970 INFO   , Thread-10, acto.py  :188, ---------------------------------------

2023-04-02 00:11:02,049 INFO   , Thread-5, deploy.py:91, Operator ready
2023-04-02 00:11:02,054 INFO   , Thread-5, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:11:02,055 DEBUG  , Thread-10, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-gj2gp
2023-04-02 00:11:04,308 DEBUG  , Thread-5, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:11:07,683 WARNING, Thread-4, schema.py:573, [trial: 3, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:11:07,683 DEBUG  , Thread-4, acto.py  :458, [trial: 3, gen: 0] Run and check
2023-04-02 00:11:08,272 INFO   , Thread-6, runner.py:360, [trial: 3, gen: 1] System took 00:01:00 to converge
2023-04-02 00:11:08,272 DEBUG  , Thread-6, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:11:08,272 DEBUG  , Thread-6, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:11:08,401 DEBUG  , Thread-6, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:10:09Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"annotations":null,"host":"ACTOKEY","ingressClassName":"ACTOKEY","tls":[{"hosts":null,"secretName":"ACTOKEY"},{"hosts":[],"secretName":"ACTOKEY"}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:54Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:ingressClassName': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:10:08Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:10:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:10:09Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1357', 'uid': '58280fe3-a3fd-4a93-8eff-82643da48cae'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'ingressClassName': 'ACTOKEY', 'tls': [{'secretName': 'ACTOKEY'}, {'secretName': 'ACTOKEY'}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:09:10Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:08:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:08:59Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:09:05Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:10:37Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:11:08,427 DEBUG  , Thread-6, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-9lrzk
2023-04-02 00:11:09,264 INFO   , Thread-6, common.py:560, [trial: 3, gen: 1] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-02 00:11:09,265 INFO   , Thread-6, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [3465] Number of delta: [11]
2023-04-02 00:11:09,266 INFO   , Thread-6, acto.py  :301, [trial: 3, gen: 1] Setup produced invalid input
2023-04-02 00:11:09,266 WARNING, Thread-6, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:11:09,266 DEBUG  , Thread-6, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-02 00:11:09,780 INFO   , Thread-6, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:11:10,613 INFO   , Thread-4, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-02 00:11:12,094 INFO   , Thread-10, common.py:629, Trial testrun-crdb-whitebox/trial-09-0002 completed without error
2023-04-02 00:11:14,401 INFO   , Thread-5, deploy.py:91, Operator ready
2023-04-02 00:11:14,401 INFO   , Thread-5, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:11:17,362 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-9
2023-04-02 00:11:32,680 INFO   , Thread-16, runner.py:360, [trial: 3, gen: 1] System took 00:07:07 to converge
2023-04-02 00:11:32,681 DEBUG  , Thread-16, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:11:32,682 DEBUG  , Thread-16, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:11:32,758 INFO   , Thread-7, runner.py:323, [trial: 3, gen: 6] Statefulset test-cluster is not ready yet
2023-04-02 00:11:32,792 DEBUG  , Thread-16, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:04:29Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":""}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:03:23Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:04:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:04:29Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:04:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1956', 'uid': 'a25cd870-96b9-478e-8412-eca2cb161c2e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': ''}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:03:23Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:04:28Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:04:29Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:03:25Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:11:28Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:11:32,819 DEBUG  , Thread-16, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-lfxzj
2023-04-02 00:11:33,356 INFO   , Thread-16, common.py:569, [trial: 3, gen: 1] Recognized invalid input through field [name] in error message: User set image.name, using that field instead of cockroachDBVersion
2023-04-02 00:11:33,356 INFO   , Thread-16, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [2021] Number of delta: [548]
2023-04-02 00:11:33,357 DEBUG  , Thread-16, acto.py  :374, [trial: 3, gen: 1] Invalid input, revert
2023-04-02 00:11:33,358 WARNING, Thread-16, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:11:33,358 DEBUG  , Thread-16, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-02 00:11:33,727 INFO   , Thread-16, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:11:34,931 INFO   , Thread-11, runner.py:323, [trial: 3, gen: 8] Statefulset test-cluster is not ready yet
2023-04-02 00:11:48,704 INFO   , Thread-13, runner.py:360, [trial: 3, gen: 3] System took 00:01:00 to converge
2023-04-02 00:11:48,706 DEBUG  , Thread-13, runner.py:98, [trial: 3, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:11:48,706 DEBUG  , Thread-13, runner.py:99, [trial: 3, gen: 3] STDERR: 
2023-04-02 00:11:48,854 DEBUG  , Thread-13, runner.py:177, [trial: 3, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:07:15Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullSecret":"ACTOKEY"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:06:10Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullSecret': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:07:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:07:16Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1624', 'uid': '550d1d63-4b03-49a5-ad4b-5f76c3e235b7'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent', 'pullSecret': 'ACTOKEY'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:07:26Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:07:15Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:07:16Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:06:12Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:07:21Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:11:48,882 DEBUG  , Thread-13, runner.py:202, [trial: 3, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-rc45m
2023-04-02 00:11:49,557 INFO   , Thread-13, acto.py  :187, Trial 3 finished, completed in 00:09:23
2023-04-02 00:11:49,557 INFO   , Thread-13, acto.py  :188, ---------------------------------------

2023-04-02 00:11:49,584 DEBUG  , Thread-13, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-rc45m
2023-04-02 00:11:52,779 INFO   , Thread-2, base.py  :41, Created cluster
2023-04-02 00:11:52,793 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:11:54,520 WARNING, Thread-5, schema.py:573, [trial: 4, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:11:54,521 DEBUG  , Thread-5, acto.py  :458, [trial: 4, gen: 0] Run and check
2023-04-02 00:11:57,174 INFO   , Thread-5, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:11:59,617 INFO   , Thread-13, acto.py  :195, Test finished
2023-04-02 00:11:59,617 INFO   , Thread-13, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\"]\"": [
        "object-deletion"
    ]
}
2023-04-02 00:12:09,838 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:12:09,901 INFO   , Thread-6, runner.py:360, [trial: 3, gen: 1] System took 00:01:00 to converge
2023-04-02 00:12:09,902 DEBUG  , Thread-6, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:12:09,903 DEBUG  , Thread-6, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:12:09,930 ERROR  , Thread-7, runner.py:363, [trial: 3, gen: 6] System failed to converge within 600 seconds
2023-04-02 00:12:09,933 DEBUG  , Thread-7, runner.py:98, [trial: 3, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:12:09,933 DEBUG  , Thread-7, runner.py:99, [trial: 3, gen: 6] STDERR: 
2023-04-02 00:12:10,147 DEBUG  , Thread-6, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:10:09Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:54Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:10:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:10:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:11:09Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1405', 'uid': '58280fe3-a3fd-4a93-8eff-82643da48cae'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:09:10Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:08:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:08:59Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:09:05Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:10:37Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:12:10,152 DEBUG  , Thread-7, runner.py:177, [trial: 3, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:05Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":["ACTOKEY"],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"annotations":{"ACTOKEY":"ACTOKEY"},"host":"ACTOKEY","ingressClassName":"ACTOKEY","tls":[{"hosts":[],"secretName":"ACTOKEY"},{"hosts":["ACTOKEY","ACTOKEY","ACTOKEY"],"secretName":null},{"hosts":null,"secretName":null}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:54:27Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}, 'f:ingressClassName': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:02:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:02:10Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2087', 'uid': '86e89235-ea98-43f9-b5ae-bbec2ef4d5d3'}, 'spec': {'additionalArgs': ['ACTOKEY'], 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'annotations': {'ACTOKEY': 'ACTOKEY'}, 'host': 'ACTOKEY', 'ingressClassName': 'ACTOKEY', 'tls': [{'secretName': 'ACTOKEY'}, {'hosts': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY']}, {}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:16Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:05Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:05Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:57:11Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:03:04Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:12:10,197 DEBUG  , Thread-6, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-9lrzk
2023-04-02 00:12:10,205 DEBUG  , Thread-7, runner.py:202, [trial: 3, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-5f4dt
2023-04-02 00:12:10,447 INFO   , Thread-10, base.py  :41, Created cluster
2023-04-02 00:12:10,659 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:12:11,056 INFO   , Thread-6, acto.py  :321, [trial: 3, gen: 1] All setups failed
2023-04-02 00:12:11,056 WARNING, Thread-6, schema.py:573, [trial: 3, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:12:11,057 INFO   , Thread-6, input.py :723, [trial: 3, gen: 3] Progress [10] cases left
2023-04-02 00:12:11,058 INFO   , Thread-6, acto.py  :187, Trial 3 finished, completed in 00:06:57
2023-04-02 00:12:11,058 INFO   , Thread-6, acto.py  :188, ---------------------------------------

2023-04-02 00:12:11,150 DEBUG  , Thread-6, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-9lrzk
2023-04-02 00:12:12,039 INFO   , Thread-7, common.py:560, [trial: 3, gen: 6] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[1].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-02 00:12:12,039 INFO   , Thread-7, checker.py:134, [trial: 3, gen: 6] Number of system state fields: [3484] Number of delta: [223]
2023-04-02 00:12:12,039 ERROR  , Thread-7, checker.py:561, [trial: 3, gen: 6] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:12:12,041 DEBUG  , Thread-7, acto.py  :489, [trial: 3, gen: 6] Running recovery
2023-04-02 00:12:13,925 INFO   , Thread-7, runner.py:291, [trial: 3, gen: 6] Waiting for system to converge... 
2023-04-02 00:12:14,286 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:12:19,919 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-02 00:12:19,919 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:12:21,221 INFO   , Thread-6, common.py:629, Trial testrun-crdb-whitebox/trial-05-0003 completed without error
2023-04-02 00:12:22,007 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:12:25,481 INFO   , Thread-15, runner.py:323, [trial: 5, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:12:27,092 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-5
2023-04-02 00:12:28,038 DEBUG  , Thread-10, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:12:32,090 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-02 00:12:32,090 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:12:35,014 INFO   , Thread-11, runner.py:323, [trial: 3, gen: 8] Statefulset test-cluster is not ready yet
2023-04-02 00:12:38,126 INFO   , Thread-10, deploy.py:91, Operator ready
2023-04-02 00:12:38,127 INFO   , Thread-10, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:12:40,186 DEBUG  , Thread-10, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:12:40,621 INFO   , Thread-16, runner.py:360, [trial: 3, gen: 1] System took 00:01:06 to converge
2023-04-02 00:12:40,623 DEBUG  , Thread-16, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:12:40,623 DEBUG  , Thread-16, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:12:40,765 DEBUG  , Thread-16, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:04:29Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:03:23Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:11:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:11:44Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2103', 'uid': 'a25cd870-96b9-478e-8412-eca2cb161c2e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:11:44Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:04:28Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:04:29Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:03:25Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:11:38Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:12:40,802 DEBUG  , Thread-16, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-lfxzj
2023-04-02 00:12:41,266 DEBUG  , Thread-16, acto.py  :383, [trial: 3, gen: 1] Only one patch, no need to isolate
2023-04-02 00:12:41,266 WARNING, Thread-16, schema.py:573, [trial: 3, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:12:41,267 INFO   , Thread-16, input.py :723, [trial: 3, gen: 3] Progress [5] cases left
2023-04-02 00:12:41,267 DEBUG  , Thread-16, test_case.py:51, [trial: 3, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-02 00:12:41,267 INFO   , Thread-16, acto.py  :267, [trial: 3, gen: 3] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "resourceFieldRef", "containerName"] fails, try setup first
2023-04-02 00:12:41,268 INFO   , Thread-16, acto.py  :107, [trial: 3, gen: 3] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {"resource": "ACTOKEY", "containerName": "ACTOKEY"}}}]}]
2023-04-02 00:12:41,268 DEBUG  , Thread-16, test_case.py:51, [trial: 3, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-02 00:12:41,268 DEBUG  , Thread-16, acto.py  :458, [trial: 3, gen: 3] Run and check
2023-04-02 00:12:43,197 INFO   , Thread-16, runner.py:291, [trial: 3, gen: 3] Waiting for system to converge... 
2023-04-02 00:12:50,266 INFO   , Thread-10, deploy.py:91, Operator ready
2023-04-02 00:12:50,266 INFO   , Thread-10, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:12:54,845 INFO   , Thread-8, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:12:57,291 INFO   , Thread-5, runner.py:360, [trial: 4, gen: 0] System took 00:01:00 to converge
2023-04-02 00:12:57,292 DEBUG  , Thread-5, runner.py:98, [trial: 4, gen: 0] STDOUT: 
2023-04-02 00:12:57,292 DEBUG  , Thread-5, runner.py:99, [trial: 4, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-04-0004/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.230.46:443: connect: connection refused

2023-04-02 00:12:57,380 DEBUG  , Thread-5, runner.py:177, [trial: 4, gen: 0] {}
2023-04-02 00:12:57,380 ERROR  , Thread-5, runner.py:107, [trial: 4, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:12:57,381 INFO   , Thread-5, checker.py:103, [trial: 4, gen: 0] Connection refused, reject mutation
2023-04-02 00:12:57,381 INFO   , Thread-5, acto.py  :472, [trial: 4, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:13:12,220 WARNING, Thread-2, schema.py:573, [trial: 4, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:13:12,221 DEBUG  , Thread-2, acto.py  :458, [trial: 4, gen: 0] Run and check
2023-04-02 00:13:14,371 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:13:14,740 INFO   , Thread-2, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:13:16,453 INFO   , Thread-4, runner.py:360, [trial: 3, gen: 0] System took 00:02:05 to converge
2023-04-02 00:13:16,454 DEBUG  , Thread-4, runner.py:98, [trial: 3, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:13:16,454 DEBUG  , Thread-4, runner.py:99, [trial: 3, gen: 0] STDERR: 
2023-04-02 00:13:16,610 DEBUG  , Thread-4, runner.py:177, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:11:14Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:11:10Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:11:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:11:14Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:11:14Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1072', 'uid': '3d8a9d5b-680f-4d98-8dc0-a4bc1ffea625'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:11:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:11:13Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:11:14Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:11:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:13:16,644 DEBUG  , Thread-4, runner.py:202, [trial: 3, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-hhntb
2023-04-02 00:13:16,897 WARNING, Thread-4, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:13:16,898 INFO   , Thread-4, input.py :723, [trial: 3, gen: 1] Progress [10] cases left
2023-04-02 00:13:16,898 DEBUG  , Thread-4, test_case.py:51, [trial: 3, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-02 00:13:16,898 INFO   , Thread-4, acto.py  :267, [trial: 3, gen: 1] Precondition of ["spec", "ingress", "sql", "tls", 0, "hosts", 0] fails, try setup first
2023-04-02 00:13:16,898 INFO   , Thread-4, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": [{"hosts": ["ACTOKEY"]}]}}}]
2023-04-02 00:13:16,898 DEBUG  , Thread-4, test_case.py:51, [trial: 3, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-02 00:13:16,898 DEBUG  , Thread-4, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-02 00:13:17,280 INFO   , Thread-4, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:13:17,801 INFO   , Thread-5, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:13:21,000 INFO   , Thread-6, base.py  :41, Created cluster
2023-04-02 00:13:21,012 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:13:30,387 WARNING, Thread-10, schema.py:573, [trial: 3, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:13:30,388 DEBUG  , Thread-10, acto.py  :458, [trial: 3, gen: 0] Run and check
2023-04-02 00:13:32,905 INFO   , Thread-10, runner.py:291, [trial: 3, gen: 0] Waiting for system to converge... 
2023-04-02 00:13:35,086 INFO   , Thread-7, runner.py:360, [trial: 3, gen: 6] System took 00:01:21 to converge
2023-04-02 00:13:35,088 DEBUG  , Thread-7, runner.py:98, [trial: 3, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:13:35,088 DEBUG  , Thread-7, runner.py:99, [trial: 3, gen: 6] STDERR: 
2023-04-02 00:13:35,233 DEBUG  , Thread-7, runner.py:177, [trial: 3, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:05Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"annotations":{"ACTOKEY":"ACTOKEY"},"host":"ACTOKEY","ingressClassName":"ACTOKEY","tls":[{"hosts":[],"secretName":"ACTOKEY"},{"hosts":["ACTOKEY","ACTOKEY","ACTOKEY"],"secretName":null},{"hosts":null,"secretName":null}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:54:27Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}, 'f:ingressClassName': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:12:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:12:14Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3070', 'uid': '86e89235-ea98-43f9-b5ae-bbec2ef4d5d3'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'annotations': {'ACTOKEY': 'ACTOKEY'}, 'host': 'ACTOKEY', 'ingressClassName': 'ACTOKEY', 'tls': [{'secretName': 'ACTOKEY'}, {'hosts': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY']}, {}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:16Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:05Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:05Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T03:57:11Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:13:11Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[1].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:13:35,263 DEBUG  , Thread-7, runner.py:202, [trial: 3, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-5f4dt
2023-04-02 00:13:35,964 INFO   , Thread-7, acto.py  :187, Trial 3 finished, completed in 00:22:40
2023-04-02 00:13:35,965 INFO   , Thread-7, acto.py  :188, ---------------------------------------

2023-04-02 00:13:35,984 DEBUG  , Thread-7, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-5f4dt
2023-04-02 00:13:38,494 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:13:47,414 INFO   , Thread-15, runner.py:323, [trial: 5, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:13:48,444 INFO   , Thread-16, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:13:48,659 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 00:13:48,659 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:13:50,656 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:13:51,149 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-6
2023-04-02 00:14:00,746 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 00:14:00,746 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:14:14,466 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:14:14,862 INFO   , Thread-2, runner.py:360, [trial: 4, gen: 0] System took 00:01:00 to converge
2023-04-02 00:14:14,863 DEBUG  , Thread-2, runner.py:98, [trial: 4, gen: 0] STDOUT: 
2023-04-02 00:14:14,863 DEBUG  , Thread-2, runner.py:99, [trial: 4, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-01-0004/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.227.21:443: connect: connection refused

2023-04-02 00:14:14,961 DEBUG  , Thread-2, runner.py:177, [trial: 4, gen: 0] {}
2023-04-02 00:14:14,961 ERROR  , Thread-2, runner.py:107, [trial: 4, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:14:14,962 INFO   , Thread-2, checker.py:103, [trial: 4, gen: 0] Connection refused, reject mutation
2023-04-02 00:14:14,962 INFO   , Thread-2, acto.py  :472, [trial: 4, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:14:16,795 INFO   , Thread-8, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:14:17,396 INFO   , Thread-4, runner.py:360, [trial: 3, gen: 1] System took 00:01:00 to converge
2023-04-02 00:14:17,398 DEBUG  , Thread-4, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:14:17,398 DEBUG  , Thread-4, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:14:17,548 DEBUG  , Thread-4, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:13:17Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[{"hosts":["ACTOKEY"]}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:11:10Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:13:17Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}, 'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:13:17Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:13:17Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1355', 'uid': '3d8a9d5b-680f-4d98-8dc0-a4bc1ffea625'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'tls': [{'hosts': ['ACTOKEY']}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:11:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:11:13Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:11:14Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:11:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:14:14Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:14:17,573 DEBUG  , Thread-4, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-hhntb
2023-04-02 00:14:18,365 INFO   , Thread-4, common.py:560, [trial: 3, gen: 1] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 00:14:18,365 INFO   , Thread-4, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [3463] Number of delta: [9]
2023-04-02 00:14:18,366 INFO   , Thread-4, acto.py  :301, [trial: 3, gen: 1] Setup produced invalid input
2023-04-02 00:14:18,366 WARNING, Thread-4, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:14:18,367 DEBUG  , Thread-4, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-02 00:14:18,708 INFO   , Thread-4, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:14:19,188 INFO   , Thread-5, runner.py:360, [trial: 4, gen: 0] System took 00:01:01 to converge
2023-04-02 00:14:19,188 DEBUG  , Thread-5, runner.py:98, [trial: 4, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:14:19,189 DEBUG  , Thread-5, runner.py:99, [trial: 4, gen: 0] STDERR: 
2023-04-02 00:14:19,290 DEBUG  , Thread-5, runner.py:177, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:13:17Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:13:17Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:13:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1028', 'uid': 'af79e867-c6e1-4bee-8773-bbbeb290ad5e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:13:17Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:13:17Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:13:19Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:14:19,316 DEBUG  , Thread-5, runner.py:202, [trial: 4, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-x56rl
2023-04-02 00:14:19,426 WARNING, Thread-5, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:14:19,427 INFO   , Thread-5, input.py :723, [trial: 4, gen: 1] Progress [7] cases left
2023-04-02 00:14:19,427 DEBUG  , Thread-5, test_case.py:51, [trial: 4, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:14:19,427 INFO   , Thread-5, acto.py  :263, [trial: 4, gen: 1] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom', 'fieldRef', 'fieldPath'] satisfies
2023-04-02 00:14:19,427 INFO   , Thread-5, acto.py  :323, [trial: 4, gen: 1] Running bundled testcases
2023-04-02 00:14:19,427 DEBUG  , Thread-5, test_case.py:51, [trial: 4, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:14:19,427 INFO   , Thread-5, acto.py  :107, [trial: 4, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"fieldRef": {"fieldPath": ""}}}]}]
2023-04-02 00:14:19,428 DEBUG  , Thread-5, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:14:19,766 INFO   , Thread-5, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:14:21,292 INFO   , Thread-11, runner.py:323, [trial: 3, gen: 8] Statefulset test-cluster is not ready yet
2023-04-02 00:14:35,395 INFO   , Thread-2, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:14:35,934 INFO   , Thread-7, base.py  :41, Created cluster
2023-04-02 00:14:35,949 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:14:40,869 WARNING, Thread-6, schema.py:573, [trial: 4, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:14:40,869 DEBUG  , Thread-6, acto.py  :458, [trial: 4, gen: 0] Run and check
2023-04-02 00:14:43,449 INFO   , Thread-6, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:14:47,502 INFO   , Thread-15, runner.py:323, [trial: 5, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:14:48,525 INFO   , Thread-16, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:14:53,073 DEBUG  , Thread-7, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:15:03,162 INFO   , Thread-7, deploy.py:91, Operator ready
2023-04-02 00:15:03,162 INFO   , Thread-7, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:15:05,337 DEBUG  , Thread-7, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:15:15,506 INFO   , Thread-7, deploy.py:91, Operator ready
2023-04-02 00:15:15,506 INFO   , Thread-7, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:15:16,881 INFO   , Thread-8, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:15:18,828 INFO   , Thread-4, runner.py:360, [trial: 3, gen: 1] System took 00:01:00 to converge
2023-04-02 00:15:18,829 DEBUG  , Thread-4, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:15:18,829 DEBUG  , Thread-4, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:15:18,962 DEBUG  , Thread-4, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:13:17Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:11:10Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:13:17Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}, 'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:13:17Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:14:18Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1365', 'uid': '3d8a9d5b-680f-4d98-8dc0-a4bc1ffea625'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:11:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:11:13Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:11:14Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:11:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:14:14Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:15:18,990 DEBUG  , Thread-4, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-hhntb
2023-04-02 00:15:19,690 INFO   , Thread-4, acto.py  :321, [trial: 3, gen: 1] All setups failed
2023-04-02 00:15:19,690 WARNING, Thread-4, schema.py:573, [trial: 3, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:15:19,691 INFO   , Thread-4, input.py :723, [trial: 3, gen: 3] Progress [9] cases left
2023-04-02 00:15:19,691 DEBUG  , Thread-4, test_case.py:51, [trial: 3, gen: 3] Precondition [change_precondition] Result [False]
2023-04-02 00:15:19,691 INFO   , Thread-4, acto.py  :267, [trial: 3, gen: 3] Precondition of ["spec", "ingress", "sql", "tls", 0, "hosts", 0] fails, try setup first
2023-04-02 00:15:19,691 INFO   , Thread-4, acto.py  :107, [trial: 3, gen: 3] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": [{"hosts": ["ACTOKEY"]}]}}}]
2023-04-02 00:15:19,691 DEBUG  , Thread-4, test_case.py:51, [trial: 3, gen: 3] Precondition [change_precondition] Result [True]
2023-04-02 00:15:19,691 DEBUG  , Thread-4, acto.py  :458, [trial: 3, gen: 3] Run and check
2023-04-02 00:15:20,021 INFO   , Thread-4, runner.py:291, [trial: 3, gen: 3] Waiting for system to converge... 
2023-04-02 00:15:21,381 INFO   , Thread-11, runner.py:323, [trial: 3, gen: 8] Statefulset test-cluster is not ready yet
2023-04-02 00:15:39,032 INFO   , Thread-10, runner.py:360, [trial: 3, gen: 0] System took 00:02:06 to converge
2023-04-02 00:15:39,033 DEBUG  , Thread-10, runner.py:98, [trial: 3, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:15:39,034 DEBUG  , Thread-10, runner.py:99, [trial: 3, gen: 0] STDERR: 
2023-04-02 00:15:39,190 DEBUG  , Thread-10, runner.py:177, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:13:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:13:32Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:13:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:13:37Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:13:37Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1085', 'uid': '6e94bc2b-3e70-4d85-a2bf-a0153d21134b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:13:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:13:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:13:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:13:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:15:39,218 DEBUG  , Thread-10, runner.py:202, [trial: 3, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-855nj
2023-04-02 00:15:39,494 WARNING, Thread-10, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:15:39,495 INFO   , Thread-10, input.py :723, [trial: 3, gen: 1] Progress [13] cases left
2023-04-02 00:15:39,495 DEBUG  , Thread-10, test_case.py:51, [trial: 3, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:15:39,495 INFO   , Thread-10, acto.py  :263, [trial: 3, gen: 1] Precondition of ['spec', 'cockroachDBVersion'] satisfies
2023-04-02 00:15:39,495 INFO   , Thread-10, acto.py  :323, [trial: 3, gen: 1] Running bundled testcases
2023-04-02 00:15:39,495 DEBUG  , Thread-10, test_case.py:51, [trial: 3, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:15:39,496 INFO   , Thread-10, acto.py  :107, [trial: 3, gen: 1] JSON patch: [{"op": "add", "path": "/spec/cockroachDBVersion", "value": ""}]
2023-04-02 00:15:39,496 DEBUG  , Thread-10, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-02 00:15:39,870 INFO   , Thread-10, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:15:43,581 INFO   , Thread-6, runner.py:360, [trial: 4, gen: 0] System took 00:01:00 to converge
2023-04-02 00:15:43,583 DEBUG  , Thread-6, runner.py:98, [trial: 4, gen: 0] STDOUT: 
2023-04-02 00:15:43,583 DEBUG  , Thread-6, runner.py:99, [trial: 4, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-05-0004/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.206.205:443: connect: connection refused

2023-04-02 00:15:43,683 DEBUG  , Thread-6, runner.py:177, [trial: 4, gen: 0] {}
2023-04-02 00:15:43,683 ERROR  , Thread-6, runner.py:107, [trial: 4, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:15:43,684 INFO   , Thread-6, checker.py:103, [trial: 4, gen: 0] Connection refused, reject mutation
2023-04-02 00:15:43,684 INFO   , Thread-6, acto.py  :472, [trial: 4, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:15:45,585 INFO   , Thread-2, runner.py:360, [trial: 4, gen: 0] System took 00:01:10 to converge
2023-04-02 00:15:45,586 DEBUG  , Thread-2, runner.py:98, [trial: 4, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:15:45,587 DEBUG  , Thread-2, runner.py:99, [trial: 4, gen: 0] STDERR: 
2023-04-02 00:15:45,735 DEBUG  , Thread-2, runner.py:177, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:14:38Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:14:35Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:14:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:14:49Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1188', 'uid': 'a76d9273-22f1-4e2f-a824-331ace8dcbe8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:14:49Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:14:38Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:14:39Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:14:44Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:15:45,770 DEBUG  , Thread-2, runner.py:202, [trial: 4, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-jggqm
2023-04-02 00:15:45,969 WARNING, Thread-2, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:15:45,970 INFO   , Thread-2, input.py :723, [trial: 4, gen: 1] Progress [10] cases left
2023-04-02 00:15:45,970 DEBUG  , Thread-2, test_case.py:51, [trial: 4, gen: 1] Precondition [change_precondition] Result [True]
2023-04-02 00:15:45,970 INFO   , Thread-2, acto.py  :263, [trial: 4, gen: 1] Precondition of ['spec', 'image', 'name'] satisfies
2023-04-02 00:15:45,970 INFO   , Thread-2, acto.py  :323, [trial: 4, gen: 1] Running bundled testcases
2023-04-02 00:15:45,970 DEBUG  , Thread-2, test_case.py:51, [trial: 4, gen: 1] Precondition [change_precondition] Result [True]
2023-04-02 00:15:45,970 INFO   , Thread-2, acto.py  :107, [trial: 4, gen: 1] JSON patch: [{"op": "replace", "path": "/spec/image/name", "value": "ACTOKEY"}]
2023-04-02 00:15:45,970 DEBUG  , Thread-2, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:15:46,287 INFO   , Thread-2, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:15:55,156 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:15:55,635 WARNING, Thread-7, schema.py:573, [trial: 4, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:15:55,636 DEBUG  , Thread-7, acto.py  :458, [trial: 4, gen: 0] Run and check
2023-04-02 00:15:58,279 INFO   , Thread-7, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:16:04,092 INFO   , Thread-6, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:16:20,142 INFO   , Thread-4, runner.py:360, [trial: 3, gen: 3] System took 00:01:00 to converge
2023-04-02 00:16:20,144 DEBUG  , Thread-4, runner.py:98, [trial: 3, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:16:20,144 DEBUG  , Thread-4, runner.py:99, [trial: 3, gen: 3] STDERR: 
2023-04-02 00:16:20,352 DEBUG  , Thread-4, runner.py:177, [trial: 3, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:13:17Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[{"hosts":["ACTOKEY"]}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:11:10Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:13:17Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:15:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:15:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1509', 'uid': '3d8a9d5b-680f-4d98-8dc0-a4bc1ffea625'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'tls': [{'hosts': ['ACTOKEY']}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:11:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:11:13Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:11:14Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:11:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:15:48Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:16:20,382 DEBUG  , Thread-4, runner.py:202, [trial: 3, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-hhntb
2023-04-02 00:16:20,871 ERROR  , Thread-4, checker.py:301, [trial: 3, gen: 3] Found no matching fields for input delta
2023-04-02 00:16:20,871 ERROR  , Thread-4, checker.py:302, [trial: 3, gen: 3] Input delta [['spec', 'ingress', 'sql', 'host']]
2023-04-02 00:16:21,078 INFO   , Thread-4, common.py:560, [trial: 3, gen: 3] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 00:16:21,078 INFO   , Thread-4, checker.py:134, [trial: 3, gen: 3] Number of system state fields: [3463] Number of delta: [3]
2023-04-02 00:16:21,079 INFO   , Thread-4, acto.py  :301, [trial: 3, gen: 3] Setup produced invalid input
2023-04-02 00:16:21,079 WARNING, Thread-4, schema.py:573, [trial: 3, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:16:21,080 DEBUG  , Thread-4, acto.py  :458, [trial: 3, gen: 3] Run and check
2023-04-02 00:16:21,406 INFO   , Thread-4, runner.py:291, [trial: 3, gen: 3] Waiting for system to converge... 
2023-04-02 00:16:21,477 INFO   , Thread-11, runner.py:323, [trial: 3, gen: 8] Statefulset test-cluster is not ready yet
2023-04-02 00:16:31,288 INFO   , Thread-15, runner.py:323, [trial: 5, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:16:32,459 INFO   , Thread-16, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:16:39,985 INFO   , Thread-10, runner.py:360, [trial: 3, gen: 1] System took 00:01:00 to converge
2023-04-02 00:16:39,986 DEBUG  , Thread-10, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:16:39,986 DEBUG  , Thread-10, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:16:40,221 DEBUG  , Thread-10, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:13:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cockroachDBVersion":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:13:32Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:13:37Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:13:37Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cockroachDBVersion': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:15:39Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1275', 'uid': '6e94bc2b-3e70-4d85-a2bf-a0153d21134b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:13:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:13:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:13:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:13:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:16:40,249 DEBUG  , Thread-10, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-855nj
2023-04-02 00:16:40,957 INFO   , Thread-10, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [3456] Number of delta: [0]
2023-04-02 00:16:40,959 WARNING, Thread-10, schema.py:573, [trial: 3, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 00:16:40,960 INFO   , Thread-10, input.py :723, [trial: 3, gen: 2] Progress [12] cases left
2023-04-02 00:16:40,960 DEBUG  , Thread-10, test_case.py:51, [trial: 3, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-02 00:16:40,960 INFO   , Thread-10, acto.py  :267, [trial: 3, gen: 2] Precondition of ["spec", "topologySpreadConstraints", 0] fails, try setup first
2023-04-02 00:16:40,961 INFO   , Thread-10, acto.py  :107, [trial: 3, gen: 2] JSON patch: [{"op": "add", "path": "/spec/topologySpreadConstraints", "value": [{"labelSelector": {"matchExpressions": [], "matchLabels": null}, "maxSkew": 4, "topologyKey": "ACTOKEY", "whenUnsatisfiable": "ACTOKEY"}]}]
2023-04-02 00:16:40,961 DEBUG  , Thread-10, test_case.py:51, [trial: 3, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-02 00:16:40,961 DEBUG  , Thread-10, acto.py  :458, [trial: 3, gen: 2] Run and check
2023-04-02 00:16:41,319 INFO   , Thread-10, runner.py:291, [trial: 3, gen: 2] Waiting for system to converge... 
2023-04-02 00:16:45,400 INFO   , Thread-3, runner.py:360, [trial: 4, gen: 1] System took 00:07:08 to converge
2023-04-02 00:16:45,401 DEBUG  , Thread-3, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:16:45,401 DEBUG  , Thread-3, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:16:45,521 DEBUG  , Thread-3, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:09:40Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"resourceFieldRef":{"divisor":5,"resource":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:34Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:09:36Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:09:40Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:09:41Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1954', 'uid': 'e3388b33-e0bb-4435-a924-2f8456c82696'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'resourceFieldRef': {'divisor': '5', 'resource': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:08:34Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:09:39Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:09:40Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:08:37Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:16:45Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:16:45,541 DEBUG  , Thread-3, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-cf2fq
2023-04-02 00:16:45,975 DEBUG  , Thread-3, checker.py:278, [trial: 4, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'resource']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 2, 'value_from', 'resource_field_ref', 'resource']]
2023-04-02 00:16:45,975 ERROR  , Thread-3, checker.py:282, [trial: 4, gen: 1] Matched delta inconsistent with input delta
2023-04-02 00:16:45,976 ERROR  , Thread-3, checker.py:283, [trial: 4, gen: 1] Input delta: not present -> ACTOKEY
2023-04-02 00:16:45,976 ERROR  , Thread-3, checker.py:284, [trial: 4, gen: 1] Matched delta: not present -> limits.cpu
2023-04-02 00:16:46,063 INFO   , Thread-3, common.py:569, [trial: 4, gen: 1] Recognized invalid input through field [name] in error message: User set image.name, using that field instead of cockroachDBVersion
2023-04-02 00:16:46,064 INFO   , Thread-3, checker.py:134, [trial: 4, gen: 1] Number of system state fields: [2022] Number of delta: [550]
2023-04-02 00:16:46,064 INFO   , Thread-3, acto.py  :301, [trial: 4, gen: 1] Setup produced invalid input
2023-04-02 00:16:46,064 WARNING, Thread-3, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:16:46,065 DEBUG  , Thread-3, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:16:46,452 INFO   , Thread-3, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:16:55,250 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:17:00,675 INFO   , Thread-8, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:17:09,777 INFO   , Thread-7, runner.py:360, [trial: 4, gen: 0] System took 00:01:11 to converge
2023-04-02 00:17:09,779 DEBUG  , Thread-7, runner.py:98, [trial: 4, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:17:09,779 DEBUG  , Thread-7, runner.py:99, [trial: 4, gen: 0] STDERR: 
2023-04-02 00:17:09,950 DEBUG  , Thread-7, runner.py:177, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:16:01Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:15:58Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:15:58Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:16:01Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:16:02Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1075', 'uid': 'e6f35b67-efbd-44ce-9d6b-f3655e443363'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:16:12Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:16:00Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:16:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:16:07Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:17:09,980 DEBUG  , Thread-7, runner.py:202, [trial: 4, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-h2ltc
2023-04-02 00:17:10,282 WARNING, Thread-7, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:17:10,282 INFO   , Thread-7, input.py :723, [trial: 4, gen: 1] Progress [7] cases left
2023-04-02 00:17:10,283 DEBUG  , Thread-7, test_case.py:51, [trial: 4, gen: 1] Precondition [change_precondition] Result [False]
2023-04-02 00:17:10,283 INFO   , Thread-7, acto.py  :267, [trial: 4, gen: 1] Precondition of ["spec", "additionalArgs", 0] fails, try setup first
2023-04-02 00:17:10,283 INFO   , Thread-7, acto.py  :107, [trial: 4, gen: 1] JSON patch: [{"op": "add", "path": "/spec/additionalArgs", "value": ["ACTOKEY"]}]
2023-04-02 00:17:10,283 DEBUG  , Thread-7, test_case.py:51, [trial: 4, gen: 1] Precondition [change_precondition] Result [True]
2023-04-02 00:17:10,283 DEBUG  , Thread-7, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:17:10,596 INFO   , Thread-7, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:17:12,111 INFO   , Thread-9, runner.py:360, [trial: 3, gen: 1] System took 00:07:09 to converge
2023-04-02 00:17:12,112 DEBUG  , Thread-9, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:17:12,113 DEBUG  , Thread-9, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:17:12,217 DEBUG  , Thread-9, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:10:05Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"secretKeyRef":{"key":"ACTOKEY","optional":true}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:59Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:10:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:10:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:10:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1986', 'uid': 'fd984d9e-2fc4-4733-b18c-6d50801fdec9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'secretKeyRef': {'key': 'ACTOKEY', 'optional': True}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:08:59Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:10:04Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:10:05Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:10:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:17:09Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:17:12,243 DEBUG  , Thread-9, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-jc6qt
2023-04-02 00:17:12,690 DEBUG  , Thread-9, checker.py:278, [trial: 3, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'secretKeyRef', 'optional']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 4, 'value_from', 'secret_key_ref', 'optional']]
2023-04-02 00:17:12,776 INFO   , Thread-9, common.py:569, [trial: 3, gen: 1] Recognized invalid input through field [name] in error message: User set image.name, using that field instead of cockroachDBVersion
2023-04-02 00:17:12,777 INFO   , Thread-9, checker.py:134, [trial: 3, gen: 1] Number of system state fields: [2022] Number of delta: [697]
2023-04-02 00:17:12,777 INFO   , Thread-9, acto.py  :301, [trial: 3, gen: 1] Setup produced invalid input
2023-04-02 00:17:12,777 WARNING, Thread-9, schema.py:573, [trial: 3, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:17:12,778 DEBUG  , Thread-9, acto.py  :458, [trial: 3, gen: 1] Run and check
2023-04-02 00:17:13,194 INFO   , Thread-9, runner.py:291, [trial: 3, gen: 1] Waiting for system to converge... 
2023-04-02 00:17:15,297 INFO   , Thread-6, runner.py:360, [trial: 4, gen: 0] System took 00:01:11 to converge
2023-04-02 00:17:15,299 DEBUG  , Thread-6, runner.py:98, [trial: 4, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:17:15,299 DEBUG  , Thread-6, runner.py:99, [trial: 4, gen: 0] STDERR: 
2023-04-02 00:17:15,516 DEBUG  , Thread-6, runner.py:177, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:16:07Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:16:04Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:16:04Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:16:08Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:16:08Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1190', 'uid': 'c37449d2-187d-4e79-acf9-5d1d3c09431a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:16:18Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:16:06Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:16:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:16:06Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:16:13Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:17:15,541 DEBUG  , Thread-6, runner.py:202, [trial: 4, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-f8lgk
2023-04-02 00:17:15,731 WARNING, Thread-6, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:17:15,732 INFO   , Thread-6, input.py :723, [trial: 4, gen: 1] Progress [10] cases left
2023-04-02 00:17:15,732 DEBUG  , Thread-6, test_case.py:51, [trial: 4, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:17:15,732 INFO   , Thread-6, acto.py  :263, [trial: 4, gen: 1] Precondition of ['spec', 'sqlPort'] satisfies
2023-04-02 00:17:15,732 INFO   , Thread-6, acto.py  :323, [trial: 4, gen: 1] Running bundled testcases
2023-04-02 00:17:15,732 DEBUG  , Thread-6, test_case.py:51, [trial: 4, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:17:15,732 INFO   , Thread-6, acto.py  :107, [trial: 4, gen: 1] JSON patch: [{"op": "add", "path": "/spec/sqlPort", "value": 0}]
2023-04-02 00:17:15,732 DEBUG  , Thread-6, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:17:16,081 INFO   , Thread-6, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:17:21,533 INFO   , Thread-4, runner.py:360, [trial: 3, gen: 3] System took 00:01:00 to converge
2023-04-02 00:17:21,534 DEBUG  , Thread-4, runner.py:98, [trial: 3, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:17:21,535 DEBUG  , Thread-4, runner.py:99, [trial: 3, gen: 3] STDERR: 
2023-04-02 00:17:21,601 INFO   , Thread-11, runner.py:323, [trial: 3, gen: 8] Statefulset test-cluster is not ready yet
2023-04-02 00:17:21,688 DEBUG  , Thread-4, runner.py:177, [trial: 3, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:13:17Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:11:10Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:13:17Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:15:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:16:21Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1560', 'uid': '3d8a9d5b-680f-4d98-8dc0-a4bc1ffea625'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:11:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:11:13Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:11:14Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:11:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:15:48Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:17:21,715 DEBUG  , Thread-4, runner.py:202, [trial: 3, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-hhntb
2023-04-02 00:17:22,492 INFO   , Thread-4, acto.py  :321, [trial: 3, gen: 3] All setups failed
2023-04-02 00:17:22,493 WARNING, Thread-4, schema.py:573, [trial: 3, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 00:17:22,493 INFO   , Thread-4, input.py :723, [trial: 3, gen: 5] Progress [8] cases left
2023-04-02 00:17:22,493 DEBUG  , Thread-4, test_case.py:51, [trial: 3, gen: 5] Precondition [empty_precondition] Result [True]
2023-04-02 00:17:22,493 INFO   , Thread-4, acto.py  :263, [trial: 3, gen: 5] Precondition of ['spec', 'ingress', 'sql', 'tls', 0, 'hosts', 0] satisfies
2023-04-02 00:17:22,493 INFO   , Thread-4, acto.py  :323, [trial: 3, gen: 5] Running bundled testcases
2023-04-02 00:17:22,494 DEBUG  , Thread-4, test_case.py:51, [trial: 3, gen: 5] Precondition [empty_precondition] Result [True]
2023-04-02 00:17:22,494 INFO   , Thread-4, acto.py  :107, [trial: 3, gen: 5] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": [{"hosts": [""]}]}}}]
2023-04-02 00:17:22,494 DEBUG  , Thread-4, acto.py  :458, [trial: 3, gen: 5] Run and check
2023-04-02 00:17:22,909 INFO   , Thread-4, runner.py:291, [trial: 3, gen: 5] Waiting for system to converge... 
2023-04-02 00:17:31,377 INFO   , Thread-15, runner.py:323, [trial: 5, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:17:32,541 INFO   , Thread-16, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:17:45,861 ERROR  , Thread-11, runner.py:363, [trial: 3, gen: 8] System failed to converge within 600 seconds
2023-04-02 00:17:45,862 DEBUG  , Thread-11, runner.py:98, [trial: 3, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:17:45,862 DEBUG  , Thread-11, runner.py:99, [trial: 3, gen: 8] STDERR: 
2023-04-02 00:17:46,013 DEBUG  , Thread-11, runner.py:177, [trial: 3, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"secretKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":false}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:57:15Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:05:41Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:07:45Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2197', 'uid': 'eb971ed8-845c-4aad-b594-c383585c877f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'secretKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': False}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:06:30Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:17:46,039 DEBUG  , Thread-11, runner.py:202, [trial: 3, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-r7p6w
2023-04-02 00:17:46,858 INFO   , Thread-11, checker.py:134, [trial: 3, gen: 8] Number of system state fields: [3043] Number of delta: [226]
2023-04-02 00:17:46,858 ERROR  , Thread-11, checker.py:561, [trial: 3, gen: 8] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:17:46,859 DEBUG  , Thread-11, acto.py  :489, [trial: 3, gen: 8] Running recovery
2023-04-02 00:17:48,942 INFO   , Thread-11, runner.py:291, [trial: 3, gen: 8] Waiting for system to converge... 
2023-04-02 00:17:53,738 INFO   , Thread-3, runner.py:360, [trial: 4, gen: 1] System took 00:01:07 to converge
2023-04-02 00:17:53,739 DEBUG  , Thread-3, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:17:53,740 DEBUG  , Thread-3, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:17:53,879 DEBUG  , Thread-3, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:09:40Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:34Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:16:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:16:55Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2090', 'uid': 'e3388b33-e0bb-4435-a924-2f8456c82696'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:16:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:09:39Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:09:40Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:08:37Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:16:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:17:53,908 DEBUG  , Thread-3, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-cf2fq
2023-04-02 00:17:54,386 INFO   , Thread-3, acto.py  :321, [trial: 4, gen: 1] All setups failed
2023-04-02 00:17:54,386 WARNING, Thread-3, schema.py:573, [trial: 4, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:17:54,387 INFO   , Thread-3, input.py :723, [trial: 4, gen: 3] Progress [14] cases left
2023-04-02 00:17:54,388 DEBUG  , Thread-3, test_case.py:46, [trial: 4, gen: 3] Precondition [precondition] Result [False]
2023-04-02 00:17:54,388 DEBUG  , Thread-3, test_case.py:51, [trial: 4, gen: 3] Precondition [empty_precondition] Result [False]
2023-04-02 00:17:54,389 INFO   , Thread-3, acto.py  :267, [trial: 4, gen: 3] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "resourceFieldRef", "divisor"] fails, try setup first
2023-04-02 00:17:54,389 INFO   , Thread-3, acto.py  :107, [trial: 4, gen: 3] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {"resource": "ACTOKEY", "divisor": 1}}}]}]
2023-04-02 00:17:54,390 DEBUG  , Thread-3, test_case.py:46, [trial: 4, gen: 3] Precondition [precondition] Result [True]
2023-04-02 00:17:54,390 DEBUG  , Thread-3, test_case.py:51, [trial: 4, gen: 3] Precondition [empty_precondition] Result [True]
2023-04-02 00:17:54,390 DEBUG  , Thread-3, acto.py  :458, [trial: 4, gen: 3] Run and check
2023-04-02 00:17:55,337 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:17:56,392 INFO   , Thread-3, runner.py:291, [trial: 4, gen: 3] Waiting for system to converge... 
2023-04-02 00:18:00,772 INFO   , Thread-8, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:18:16,204 INFO   , Thread-6, runner.py:360, [trial: 4, gen: 1] System took 00:01:00 to converge
2023-04-02 00:18:16,205 DEBUG  , Thread-6, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:18:16,205 DEBUG  , Thread-6, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:18:16,363 DEBUG  , Thread-6, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:16:07Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"sqlPort":0,"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:16:04Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:16:08Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:17:16Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:sqlPort': {}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:17:16Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1355', 'uid': 'c37449d2-187d-4e79-acf9-5d1d3c09431a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 0, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:16:18Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:16:06Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:16:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:16:06Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:16:13Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:17:44Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[2].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[2].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:18:16,392 DEBUG  , Thread-6, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-f8lgk
2023-04-02 00:18:17,186 INFO   , Thread-6, common.py:560, [trial: 4, gen: 1] Recognized invalid input through regex: failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[2].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[2].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]
2023-04-02 00:18:17,187 INFO   , Thread-6, checker.py:134, [trial: 4, gen: 1] Number of system state fields: [3464] Number of delta: [5]
2023-04-02 00:18:17,187 DEBUG  , Thread-6, acto.py  :374, [trial: 4, gen: 1] Invalid input, revert
2023-04-02 00:18:17,188 WARNING, Thread-6, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:18:17,188 DEBUG  , Thread-6, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:18:17,530 INFO   , Thread-6, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:18:20,516 INFO   , Thread-9, runner.py:360, [trial: 3, gen: 1] System took 00:01:07 to converge
2023-04-02 00:18:20,517 DEBUG  , Thread-9, runner.py:98, [trial: 3, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:18:20,517 DEBUG  , Thread-9, runner.py:99, [trial: 3, gen: 1] STDERR: 
2023-04-02 00:18:20,662 DEBUG  , Thread-9, runner.py:177, [trial: 3, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:10:05Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:59Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:17:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:17:25Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2132', 'uid': 'fd984d9e-2fc4-4733-b18c-6d50801fdec9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:17:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:10:04Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:10:05Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:10:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:17:19Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:18:20,691 DEBUG  , Thread-9, runner.py:202, [trial: 3, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-jc6qt
2023-04-02 00:18:21,216 INFO   , Thread-9, acto.py  :321, [trial: 3, gen: 1] All setups failed
2023-04-02 00:18:21,216 WARNING, Thread-9, schema.py:573, [trial: 3, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:18:21,216 INFO   , Thread-9, input.py :723, [trial: 3, gen: 3] Progress [11] cases left
2023-04-02 00:18:21,216 DEBUG  , Thread-9, test_case.py:51, [trial: 3, gen: 3] Precondition [toggle_on_precondition] Result [True]
2023-04-02 00:18:21,216 INFO   , Thread-9, acto.py  :263, [trial: 3, gen: 3] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom', 'secretKeyRef', 'optional'] satisfies
2023-04-02 00:18:21,216 INFO   , Thread-9, acto.py  :323, [trial: 3, gen: 3] Running bundled testcases
2023-04-02 00:18:21,217 DEBUG  , Thread-9, test_case.py:51, [trial: 3, gen: 3] Precondition [toggle_on_precondition] Result [True]
2023-04-02 00:18:21,217 INFO   , Thread-9, acto.py  :107, [trial: 3, gen: 3] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"secretKeyRef": {"key": "ACTOKEY", "optional": true}}}]}]
2023-04-02 00:18:21,217 DEBUG  , Thread-9, acto.py  :458, [trial: 3, gen: 3] Run and check
2023-04-02 00:18:23,028 INFO   , Thread-4, runner.py:360, [trial: 3, gen: 5] System took 00:01:00 to converge
2023-04-02 00:18:23,030 DEBUG  , Thread-4, runner.py:98, [trial: 3, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:18:23,030 DEBUG  , Thread-4, runner.py:99, [trial: 3, gen: 5] STDERR: 
2023-04-02 00:18:23,140 INFO   , Thread-9, runner.py:291, [trial: 3, gen: 3] Waiting for system to converge... 
2023-04-02 00:18:23,181 DEBUG  , Thread-4, runner.py:177, [trial: 3, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:13:17Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[{"hosts":[""]}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:11:10Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:17:22Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:17:22Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1701', 'uid': '3d8a9d5b-680f-4d98-8dc0-a4bc1ffea625'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'tls': [{'hosts': ['']}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:11:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:11:13Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:11:14Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:11:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:17:51Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:18:23,210 DEBUG  , Thread-4, runner.py:202, [trial: 3, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-hhntb
2023-04-02 00:18:23,701 ERROR  , Thread-4, checker.py:301, [trial: 3, gen: 5] Found no matching fields for input delta
2023-04-02 00:18:23,701 ERROR  , Thread-4, checker.py:302, [trial: 3, gen: 5] Input delta [['spec', 'ingress', 'sql', 'host']]
2023-04-02 00:18:23,912 INFO   , Thread-4, common.py:560, [trial: 3, gen: 5] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 00:18:23,912 INFO   , Thread-4, checker.py:134, [trial: 3, gen: 5] Number of system state fields: [3463] Number of delta: [3]
2023-04-02 00:18:23,913 DEBUG  , Thread-4, acto.py  :374, [trial: 3, gen: 5] Invalid input, revert
2023-04-02 00:18:23,913 WARNING, Thread-4, schema.py:573, [trial: 3, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 00:18:23,914 DEBUG  , Thread-4, acto.py  :458, [trial: 3, gen: 5] Run and check
2023-04-02 00:18:24,262 INFO   , Thread-4, runner.py:291, [trial: 3, gen: 5] Waiting for system to converge... 
2023-04-02 00:18:31,465 INFO   , Thread-15, runner.py:323, [trial: 5, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:18:32,627 INFO   , Thread-16, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:18:50,851 INFO   , Thread-11, runner.py:360, [trial: 3, gen: 8] System took 00:01:01 to converge
2023-04-02 00:18:50,852 DEBUG  , Thread-11, runner.py:98, [trial: 3, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:18:50,852 DEBUG  , Thread-11, runner.py:99, [trial: 3, gen: 8] STDERR: 
2023-04-02 00:18:51,075 DEBUG  , Thread-11, runner.py:177, [trial: 3, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T03:57:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T03:57:15Z', 'generation': 10, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:05:41Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:17:48Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3141', 'uid': 'eb971ed8-845c-4aad-b594-c383585c877f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T03:57:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T03:57:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T03:57:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T03:57:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:06:30Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:18:51,109 DEBUG  , Thread-11, runner.py:202, [trial: 3, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-r7p6w
2023-04-02 00:18:51,801 INFO   , Thread-11, acto.py  :187, Trial 3 finished, completed in 00:23:59
2023-04-02 00:18:51,801 INFO   , Thread-11, acto.py  :188, ---------------------------------------

2023-04-02 00:18:51,824 DEBUG  , Thread-11, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-r7p6w
2023-04-02 00:18:55,419 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:19:00,635 INFO   , Thread-3, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:19:00,857 INFO   , Thread-8, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:19:08,372 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-10
2023-04-02 00:19:08,384 ERROR  , Thread-1, runner.py:363, [trial: 4, gen: 1] System failed to converge within 600 seconds
2023-04-02 00:19:08,387 DEBUG  , Thread-1, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:19:08,387 DEBUG  , Thread-1, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:19:08,543 DEBUG  , Thread-1, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:09:40Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cache":"ACTOKEY","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:07:04Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cache': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:08:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:09:40Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:09:40Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2537', 'uid': 'be81b463-86bf-4231-b6cc-5ba518dc8c4c'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'cache': 'ACTOKEY', 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:07:04Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:09:39Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:09:40Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:09:10Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:19:08Z', 'message': 'pod has not completely started', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:19:08,570 DEBUG  , Thread-1, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-rdh5z
2023-04-02 00:19:09,325 ERROR  , Thread-1, checker.py:561, [trial: 4, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [None] with unhealthy status
2023-04-02 00:19:09,327 INFO   , Thread-1, acto.py  :332, [trial: 4, gen: 1] Error result, running recovery
2023-04-02 00:19:09,327 DEBUG  , Thread-1, acto.py  :489, [trial: 4, gen: 1] Running recovery
2023-04-02 00:19:11,629 INFO   , Thread-1, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:19:12,895 INFO   , Thread-10, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:19:17,644 INFO   , Thread-6, runner.py:360, [trial: 4, gen: 1] System took 00:01:00 to converge
2023-04-02 00:19:17,645 DEBUG  , Thread-6, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:19:17,645 DEBUG  , Thread-6, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:19:17,785 DEBUG  , Thread-6, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:16:07Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:16:04Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:16:08Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:17:16Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:18:17Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1404', 'uid': 'c37449d2-187d-4e79-acf9-5d1d3c09431a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:16:18Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:16:06Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:16:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:16:06Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:16:13Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:17:44Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[2].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[2].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:19:17,813 DEBUG  , Thread-6, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-f8lgk
2023-04-02 00:19:18,597 DEBUG  , Thread-6, acto.py  :383, [trial: 4, gen: 1] Only one patch, no need to isolate
2023-04-02 00:19:18,598 WARNING, Thread-6, schema.py:573, [trial: 4, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:19:18,598 INFO   , Thread-6, input.py :723, [trial: 4, gen: 3] Progress [9] cases left
2023-04-02 00:19:18,598 DEBUG  , Thread-6, test_case.py:51, [trial: 4, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-02 00:19:18,598 INFO   , Thread-6, acto.py  :263, [trial: 4, gen: 3] Precondition of ['spec', 'dataStore'] satisfies
2023-04-02 00:19:18,598 INFO   , Thread-6, acto.py  :323, [trial: 4, gen: 3] Running bundled testcases
2023-04-02 00:19:18,598 DEBUG  , Thread-6, test_case.py:51, [trial: 4, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-02 00:19:18,599 INFO   , Thread-6, acto.py  :107, [trial: 4, gen: 3] JSON patch: [{"op": "remove", "path": "/spec/dataStore/pvc"}]
2023-04-02 00:19:18,599 DEBUG  , Thread-6, acto.py  :458, [trial: 4, gen: 3] Run and check
2023-04-02 00:19:18,988 INFO   , Thread-6, runner.py:291, [trial: 4, gen: 3] Waiting for system to converge... 
2023-04-02 00:19:19,136 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:19:24,375 INFO   , Thread-4, runner.py:360, [trial: 3, gen: 5] System took 00:01:00 to converge
2023-04-02 00:19:24,376 DEBUG  , Thread-4, runner.py:98, [trial: 3, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:19:24,376 DEBUG  , Thread-4, runner.py:99, [trial: 3, gen: 5] STDERR: 
2023-04-02 00:19:24,508 DEBUG  , Thread-4, runner.py:177, [trial: 3, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:13:17Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:11:10Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:17:22Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:18:24Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1750', 'uid': '3d8a9d5b-680f-4d98-8dc0-a4bc1ffea625'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:11:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:11:13Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:11:14Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:11:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:17:51Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:19:24,537 DEBUG  , Thread-4, runner.py:202, [trial: 3, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-hhntb
2023-04-02 00:19:25,332 DEBUG  , Thread-4, acto.py  :383, [trial: 3, gen: 5] Only one patch, no need to isolate
2023-04-02 00:19:25,332 WARNING, Thread-4, schema.py:573, [trial: 3, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-02 00:19:25,333 INFO   , Thread-4, input.py :723, [trial: 3, gen: 7] Progress [7] cases left
2023-04-02 00:19:25,333 DEBUG  , Thread-4, test_case.py:51, [trial: 3, gen: 7] Precondition [delete_precondition] Result [False]
2023-04-02 00:19:25,333 INFO   , Thread-4, acto.py  :267, [trial: 3, gen: 7] Precondition of ["spec", "additionalArgs"] fails, try setup first
2023-04-02 00:19:25,333 INFO   , Thread-4, acto.py  :107, [trial: 3, gen: 7] JSON patch: [{"op": "add", "path": "/spec/additionalArgs", "value": ["ACTOKEY"]}]
2023-04-02 00:19:25,333 DEBUG  , Thread-4, test_case.py:51, [trial: 3, gen: 7] Precondition [delete_precondition] Result [True]
2023-04-02 00:19:25,333 DEBUG  , Thread-4, acto.py  :458, [trial: 3, gen: 7] Run and check
2023-04-02 00:19:25,669 INFO   , Thread-4, runner.py:291, [trial: 3, gen: 7] Waiting for system to converge... 
2023-04-02 00:19:30,843 INFO   , Thread-9, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:19:31,551 INFO   , Thread-15, runner.py:323, [trial: 5, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:19:32,713 INFO   , Thread-16, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:19:37,340 INFO   , Thread-7, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:19:58,260 ERROR  , Thread-15, runner.py:363, [trial: 5, gen: 1] System failed to converge within 600 seconds
2023-04-02 00:19:58,263 DEBUG  , Thread-15, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:19:58,263 DEBUG  , Thread-15, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:19:58,397 DEBUG  , Thread-15, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:08:37Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","optional":true}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:34Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:08:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:08:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:09:58Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1190', 'uid': '498ac576-8e2e-454e-b82c-730f27bf48da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'optional': True}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:08:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:08:37Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:08:38Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:08:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:19:58,427 DEBUG  , Thread-15, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-4nq4z
2023-04-02 00:19:58,942 DEBUG  , Thread-15, checker.py:278, [trial: 5, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'configMapKeyRef', 'optional']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 4, 'value_from', 'config_map_key_ref', 'optional']]
2023-04-02 00:19:59,210 INFO   , Thread-15, checker.py:134, [trial: 5, gen: 1] Number of system state fields: [3041] Number of delta: [206]
2023-04-02 00:19:59,210 ERROR  , Thread-15, checker.py:561, [trial: 5, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:19:59,211 INFO   , Thread-15, acto.py  :332, [trial: 5, gen: 1] Error result, running recovery
2023-04-02 00:19:59,211 DEBUG  , Thread-15, acto.py  :489, [trial: 5, gen: 1] Running recovery
2023-04-02 00:20:00,715 INFO   , Thread-3, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:20:00,941 INFO   , Thread-8, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:20:01,188 INFO   , Thread-15, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:20:02,923 INFO   , Thread-11, base.py  :41, Created cluster
2023-04-02 00:20:02,937 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:20:19,106 INFO   , Thread-6, runner.py:360, [trial: 4, gen: 3] System took 00:01:00 to converge
2023-04-02 00:20:19,108 DEBUG  , Thread-6, runner.py:98, [trial: 4, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:20:19,108 DEBUG  , Thread-6, runner.py:99, [trial: 4, gen: 3] STDERR: 
2023-04-02 00:20:19,214 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:20:19,247 DEBUG  , Thread-6, runner.py:177, [trial: 4, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:16:07Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:16:04Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:17:16Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:19:18Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1499', 'uid': 'c37449d2-187d-4e79-acf9-5d1d3c09431a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:16:18Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:16:06Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:16:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:16:06Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:16:13Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:17:44Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[2].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[2].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:20:19,277 DEBUG  , Thread-6, runner.py:202, [trial: 4, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-f8lgk
2023-04-02 00:20:19,787 WARNING, Thread-6, checker.py:347, [trial: 4, gen: 3] 'AccessModeSchema' object is not subscriptable happened when trying to fetch default value
2023-04-02 00:20:19,788 ERROR  , Thread-6, checker.py:301, [trial: 4, gen: 3] Found no matching fields for input delta
2023-04-02 00:20:19,788 ERROR  , Thread-6, checker.py:302, [trial: 4, gen: 3] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'accessModes', 0]]
2023-04-02 00:20:20,085 INFO   , Thread-6, checker.py:134, [trial: 4, gen: 3] Number of system state fields: [3460] Number of delta: [4]
2023-04-02 00:20:20,086 INFO   , Thread-6, acto.py  :332, [trial: 4, gen: 3] Error result, running recovery
2023-04-02 00:20:20,086 DEBUG  , Thread-6, acto.py  :489, [trial: 4, gen: 3] Running recovery
2023-04-02 00:20:20,428 INFO   , Thread-6, runner.py:291, [trial: 4, gen: 3] Waiting for system to converge... 
2023-04-02 00:20:20,439 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:20:26,838 ERROR  , Thread-8, runner.py:363, [trial: 3, gen: 2] System failed to converge within 600 seconds
2023-04-02 00:20:26,842 DEBUG  , Thread-8, runner.py:98, [trial: 3, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:20:26,842 DEBUG  , Thread-8, runner.py:99, [trial: 3, gen: 2] STDERR: 
2023-04-02 00:20:26,992 DEBUG  , Thread-8, runner.py:177, [trial: 3, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:09:17Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullPolicy":""},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"resourceFieldRef":{"containerName":"ACTOKEY","divisor":1,"resource":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:11Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:09:28Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullPolicy': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:10:26Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1408', 'uid': '19cd4c85-8709-4a7d-ad41-cb58b84b5682'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': ''}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'resourceFieldRef': {'containerName': 'ACTOKEY', 'divisor': '1', 'resource': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:09:28Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:09:16Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:09:17Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:08:13Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:09:23Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:20:27,024 DEBUG  , Thread-8, runner.py:202, [trial: 3, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-cw49q
2023-04-02 00:20:27,523 DEBUG  , Thread-8, checker.py:278, [trial: 3, gen: 2] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'containerName']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 4, 'value_from', 'resource_field_ref', 'container_name']]
2023-04-02 00:20:27,523 DEBUG  , Thread-8, checker.py:278, [trial: 3, gen: 2] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'divisor']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 2, 'value_from', 'resource_field_ref', 'divisor']]
2023-04-02 00:20:27,524 ERROR  , Thread-8, checker.py:282, [trial: 3, gen: 2] Matched delta inconsistent with input delta
2023-04-02 00:20:27,524 ERROR  , Thread-8, checker.py:283, [trial: 3, gen: 2] Input delta: not present -> 1
2023-04-02 00:20:27,524 ERROR  , Thread-8, checker.py:284, [trial: 3, gen: 2] Matched delta: 1 -> not present
2023-04-02 00:20:27,809 INFO   , Thread-8, common.py:569, [trial: 3, gen: 2] Recognized invalid input through field [resource] in error message: reconciling resources on deploy action
2023-04-02 00:20:27,810 INFO   , Thread-8, checker.py:134, [trial: 3, gen: 2] Number of system state fields: [3046] Number of delta: [354]
2023-04-02 00:20:27,810 ERROR  , Thread-8, checker.py:561, [trial: 3, gen: 2] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:20:27,811 DEBUG  , Thread-8, acto.py  :489, [trial: 3, gen: 2] Running recovery
2023-04-02 00:20:29,907 INFO   , Thread-8, runner.py:291, [trial: 3, gen: 2] Waiting for system to converge... 
2023-04-02 00:20:30,537 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-02 00:20:30,537 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:20:30,927 INFO   , Thread-9, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:20:32,472 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:20:32,800 INFO   , Thread-16, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:20:34,830 INFO   , Thread-10, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:20:37,424 INFO   , Thread-7, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:20:42,557 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-02 00:20:42,557 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:20:53,463 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:21:02,703 INFO   , Thread-15, runner.py:360, [trial: 5, gen: 1] System took 00:01:01 to converge
2023-04-02 00:21:02,704 DEBUG  , Thread-15, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:21:02,704 DEBUG  , Thread-15, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:21:02,856 DEBUG  , Thread-15, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:08:37Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:34Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:08:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:20:01Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2136', 'uid': '498ac576-8e2e-454e-b82c-730f27bf48da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:08:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:08:37Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:08:38Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:08:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:21:02,884 DEBUG  , Thread-15, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-4nq4z
2023-04-02 00:21:03,533 INFO   , Thread-15, acto.py  :187, Trial 5 finished, completed in 00:14:42
2023-04-02 00:21:03,534 INFO   , Thread-15, acto.py  :188, ---------------------------------------

2023-04-02 00:21:03,555 DEBUG  , Thread-15, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-4nq4z
2023-04-02 00:21:19,016 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-14
2023-04-02 00:21:19,305 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:21:20,559 INFO   , Thread-6, runner.py:360, [trial: 4, gen: 3] System took 00:01:00 to converge
2023-04-02 00:21:20,560 DEBUG  , Thread-6, runner.py:98, [trial: 4, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:21:20,560 DEBUG  , Thread-6, runner.py:99, [trial: 4, gen: 3] STDERR: 
2023-04-02 00:21:20,723 DEBUG  , Thread-6, runner.py:177, [trial: 4, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:16:07Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:16:04Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:17:16Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:20:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1592', 'uid': 'c37449d2-187d-4e79-acf9-5d1d3c09431a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:16:18Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:16:06Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:16:08Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:16:06Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:16:13Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:17:44Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[2].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[2].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:21:20,751 DEBUG  , Thread-6, runner.py:202, [trial: 4, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-f8lgk
2023-04-02 00:21:21,520 INFO   , Thread-6, acto.py  :187, Trial 4 finished, completed in 00:09:00
2023-04-02 00:21:21,520 INFO   , Thread-6, acto.py  :188, ---------------------------------------

2023-04-02 00:21:21,538 DEBUG  , Thread-6, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-f8lgk
2023-04-02 00:21:22,683 WARNING, Thread-11, schema.py:573, [trial: 4, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:21:22,683 DEBUG  , Thread-11, acto.py  :458, [trial: 4, gen: 0] Run and check
2023-04-02 00:21:25,698 INFO   , Thread-11, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:21:32,146 INFO   , Thread-8, runner.py:360, [trial: 3, gen: 2] System took 00:01:02 to converge
2023-04-02 00:21:32,148 DEBUG  , Thread-8, runner.py:98, [trial: 3, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:21:32,148 DEBUG  , Thread-8, runner.py:99, [trial: 3, gen: 2] STDERR: 
2023-04-02 00:21:32,291 DEBUG  , Thread-8, runner.py:177, [trial: 3, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:09:17Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullPolicy":""},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:11Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:09:28Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullPolicy': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:20:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2363', 'uid': '19cd4c85-8709-4a7d-ad41-cb58b84b5682'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': ''}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:09:28Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:09:16Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:09:17Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:08:13Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:09:23Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:21:32,322 DEBUG  , Thread-8, runner.py:202, [trial: 3, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-cw49q
2023-04-02 00:21:32,953 INFO   , Thread-16, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:21:33,062 INFO   , Thread-8, acto.py  :187, Trial 3 finished, completed in 00:17:03
2023-04-02 00:21:33,063 INFO   , Thread-8, acto.py  :188, ---------------------------------------

2023-04-02 00:21:33,095 DEBUG  , Thread-8, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-cw49q
2023-04-02 00:21:34,909 INFO   , Thread-10, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:21:37,121 INFO   , Thread-5, runner.py:360, [trial: 4, gen: 1] System took 00:07:17 to converge
2023-04-02 00:21:37,122 DEBUG  , Thread-5, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:21:37,122 DEBUG  , Thread-5, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:21:37,233 DEBUG  , Thread-5, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:14:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"fieldRef":{"fieldPath":""}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:13:17Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:14:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:14:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:14:23Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1959', 'uid': 'af79e867-c6e1-4bee-8773-bbbeb290ad5e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'fieldRef': {'fieldPath': ''}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:13:17Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:14:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:14:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:13:19Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:21:32Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:21:37,257 DEBUG  , Thread-5, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-x56rl
2023-04-02 00:21:37,658 INFO   , Thread-7, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:21:37,780 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-5
2023-04-02 00:21:37,835 INFO   , Thread-5, common.py:569, [trial: 4, gen: 1] Recognized invalid input through field [name] in error message: User set image.name, using that field instead of cockroachDBVersion
2023-04-02 00:21:37,835 INFO   , Thread-5, checker.py:134, [trial: 4, gen: 1] Number of system state fields: [2020] Number of delta: [549]
2023-04-02 00:21:37,836 DEBUG  , Thread-5, acto.py  :374, [trial: 4, gen: 1] Invalid input, revert
2023-04-02 00:21:37,836 WARNING, Thread-5, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:21:37,836 DEBUG  , Thread-5, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:21:38,202 INFO   , Thread-5, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:21:43,455 INFO   , Thread-4, runner.py:323, [trial: 3, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 00:21:44,693 INFO   , Thread-3, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:21:49,309 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-7
2023-04-02 00:21:53,546 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:22:11,829 INFO   , Thread-15, base.py  :41, Created cluster
2023-04-02 00:22:11,841 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:22:14,903 INFO   , Thread-9, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:22:19,383 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:22:29,308 DEBUG  , Thread-15, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:22:32,444 INFO   , Thread-6, base.py  :41, Created cluster
2023-04-02 00:22:32,460 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:22:33,046 INFO   , Thread-16, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:22:37,744 INFO   , Thread-11, runner.py:360, [trial: 4, gen: 0] System took 00:01:12 to converge
2023-04-02 00:22:37,746 DEBUG  , Thread-11, runner.py:98, [trial: 4, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:22:37,746 DEBUG  , Thread-11, runner.py:99, [trial: 4, gen: 0] STDERR: 
2023-04-02 00:22:37,904 DEBUG  , Thread-11, runner.py:177, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:21:29Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:21:25Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:21:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:21:39Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1078', 'uid': '2530dc2a-60b1-41f0-97b7-bc42a290639c'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:21:39Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:21:28Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:21:29Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:21:34Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:22:37,930 DEBUG  , Thread-11, runner.py:202, [trial: 4, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-cqjnq
2023-04-02 00:22:38,230 WARNING, Thread-11, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:22:38,230 INFO   , Thread-11, input.py :723, [trial: 4, gen: 1] Progress [11] cases left
2023-04-02 00:22:38,230 DEBUG  , Thread-11, test_case.py:51, [trial: 4, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:22:38,230 INFO   , Thread-11, acto.py  :263, [trial: 4, gen: 1] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom', 'secretKeyRef'] satisfies
2023-04-02 00:22:38,231 INFO   , Thread-11, acto.py  :323, [trial: 4, gen: 1] Running bundled testcases
2023-04-02 00:22:38,231 DEBUG  , Thread-11, test_case.py:51, [trial: 4, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:22:38,231 INFO   , Thread-11, acto.py  :107, [trial: 4, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"secretKeyRef": {}}}]}]
2023-04-02 00:22:38,231 DEBUG  , Thread-11, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:22:38,497 INFO   , Thread-11, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:22:39,400 INFO   , Thread-15, deploy.py:91, Operator ready
2023-04-02 00:22:39,401 INFO   , Thread-15, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:22:41,435 DEBUG  , Thread-15, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:22:43,207 ERROR  , Thread-16, runner.py:363, [trial: 3, gen: 3] System failed to converge within 600 seconds
2023-04-02 00:22:43,210 DEBUG  , Thread-16, runner.py:98, [trial: 3, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:22:43,210 DEBUG  , Thread-16, runner.py:99, [trial: 3, gen: 3] STDERR: 
2023-04-02 00:22:43,347 DEBUG  , Thread-16, runner.py:177, [trial: 3, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:04:29Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"resourceFieldRef":{"containerName":"ACTOKEY","resource":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:03:23Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:11:44Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:12:43Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2212', 'uid': 'a25cd870-96b9-478e-8412-eca2cb161c2e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'resourceFieldRef': {'containerName': 'ACTOKEY', 'divisor': '0', 'resource': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:11:44Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:04:28Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:04:29Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:03:25Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:11:38Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:22:43,378 DEBUG  , Thread-16, runner.py:202, [trial: 3, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-lfxzj
2023-04-02 00:22:43,611 INFO   , Thread-4, runner.py:323, [trial: 3, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 00:22:43,944 DEBUG  , Thread-16, checker.py:278, [trial: 3, gen: 3] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'resource']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 2, 'value_from', 'resource_field_ref', 'resource']]
2023-04-02 00:22:43,944 ERROR  , Thread-16, checker.py:282, [trial: 3, gen: 3] Matched delta inconsistent with input delta
2023-04-02 00:22:43,944 ERROR  , Thread-16, checker.py:283, [trial: 3, gen: 3] Input delta: not present -> ACTOKEY
2023-04-02 00:22:43,944 ERROR  , Thread-16, checker.py:284, [trial: 3, gen: 3] Matched delta: limits.cpu -> not present
2023-04-02 00:22:44,148 INFO   , Thread-16, common.py:569, [trial: 3, gen: 3] Recognized invalid input through field [resource] in error message: reconciling resources on deploy action
2023-04-02 00:22:44,149 INFO   , Thread-16, checker.py:134, [trial: 3, gen: 3] Number of system state fields: [3046] Number of delta: [226]
2023-04-02 00:22:44,149 ERROR  , Thread-16, checker.py:561, [trial: 3, gen: 3] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:22:44,151 DEBUG  , Thread-16, acto.py  :489, [trial: 3, gen: 3] Running recovery
2023-04-02 00:22:44,390 INFO   , Thread-8, base.py  :41, Created cluster
2023-04-02 00:22:44,401 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:22:44,779 INFO   , Thread-3, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:22:46,118 INFO   , Thread-16, runner.py:291, [trial: 3, gen: 3] Waiting for system to converge... 
2023-04-02 00:22:49,896 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:22:51,522 INFO   , Thread-15, deploy.py:91, Operator ready
2023-04-02 00:22:51,522 INFO   , Thread-15, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:22:53,630 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:22:59,974 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 00:22:59,974 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:23:01,461 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:23:02,071 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:23:11,555 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-02 00:23:11,555 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:23:12,171 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 00:23:12,172 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:23:13,409 INFO   , Thread-5, runner.py:360, [trial: 4, gen: 1] System took 00:01:35 to converge
2023-04-02 00:23:13,410 DEBUG  , Thread-5, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:23:13,410 DEBUG  , Thread-5, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:23:13,510 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:23:13,575 DEBUG  , Thread-5, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:14:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:13:17Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:21:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:21:48Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2104', 'uid': 'af79e867-c6e1-4bee-8773-bbbeb290ad5e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:21:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:14:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:14:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:13:19Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:21:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:23:13,610 DEBUG  , Thread-5, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-x56rl
2023-04-02 00:23:14,073 DEBUG  , Thread-5, acto.py  :383, [trial: 4, gen: 1] Only one patch, no need to isolate
2023-04-02 00:23:14,074 WARNING, Thread-5, schema.py:573, [trial: 4, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:23:14,075 INFO   , Thread-5, input.py :723, [trial: 4, gen: 3] Progress [6] cases left
2023-04-02 00:23:14,075 DEBUG  , Thread-5, test_case.py:51, [trial: 4, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-02 00:23:14,075 INFO   , Thread-5, acto.py  :263, [trial: 4, gen: 3] Precondition of ['spec', 'tlsEnabled'] satisfies
2023-04-02 00:23:14,075 INFO   , Thread-5, acto.py  :323, [trial: 4, gen: 3] Running bundled testcases
2023-04-02 00:23:14,075 DEBUG  , Thread-5, test_case.py:51, [trial: 4, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-02 00:23:14,075 INFO   , Thread-5, acto.py  :107, [trial: 4, gen: 3] JSON patch: [{"op": "replace", "path": "/spec/tlsEnabled", "value": false}]
2023-04-02 00:23:14,075 DEBUG  , Thread-5, acto.py  :458, [trial: 4, gen: 3] Run and check
2023-04-02 00:23:14,989 INFO   , Thread-9, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:23:16,014 INFO   , Thread-5, runner.py:291, [trial: 4, gen: 3] Waiting for system to converge... 
2023-04-02 00:23:18,705 INFO   , Thread-10, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:23:19,467 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:23:23,714 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-02 00:23:23,714 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:23:29,349 INFO   , Thread-7, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:23:31,660 WARNING, Thread-15, schema.py:573, [trial: 6, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:23:31,661 DEBUG  , Thread-15, acto.py  :458, [trial: 6, gen: 0] Run and check
2023-04-02 00:23:34,311 INFO   , Thread-15, runner.py:291, [trial: 6, gen: 0] Waiting for system to converge... 
2023-04-02 00:23:38,621 INFO   , Thread-11, runner.py:360, [trial: 4, gen: 1] System took 00:01:00 to converge
2023-04-02 00:23:38,622 DEBUG  , Thread-11, runner.py:98, [trial: 4, gen: 1] STDOUT: 
2023-04-02 00:23:38,622 DEBUG  , Thread-11, runner.py:99, [trial: 4, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-10-0004/mutated-1.yaml": error validating data: ValidationError(CrdbCluster.spec.podEnvVariables[0].valueFrom.secretKeyRef): missing required field "key" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.podEnvVariables.valueFrom.secretKeyRef; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 00:23:38,777 DEBUG  , Thread-11, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:21:29Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:21:25Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:21:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:21:39Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1078', 'uid': '2530dc2a-60b1-41f0-97b7-bc42a290639c'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:21:39Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:21:28Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:21:29Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:21:34Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:23:38,804 DEBUG  , Thread-11, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-cqjnq
2023-04-02 00:23:39,095 INFO   , Thread-11, checker.py:213, [trial: 4, gen: 1] Invalid input, reject mutation
2023-04-02 00:23:39,095 INFO   , Thread-11, checker.py:214, [trial: 4, gen: 1] STDOUT: 
2023-04-02 00:23:39,095 INFO   , Thread-11, checker.py:215, [trial: 4, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-10-0004/mutated-1.yaml": error validating data: ValidationError(CrdbCluster.spec.podEnvVariables[0].valueFrom.secretKeyRef): missing required field "key" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.podEnvVariables.valueFrom.secretKeyRef; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 00:23:39,324 ERROR  , Thread-11, checker.py:301, [trial: 4, gen: 1] Found no matching fields for input delta
2023-04-02 00:23:39,324 ERROR  , Thread-11, checker.py:302, [trial: 4, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'name']]
2023-04-02 00:23:39,551 INFO   , Thread-11, checker.py:134, [trial: 4, gen: 1] Number of system state fields: [3456] Number of delta: [0]
2023-04-02 00:23:39,552 DEBUG  , Thread-11, acto.py  :374, [trial: 4, gen: 1] Invalid input, revert
2023-04-02 00:23:39,552 WARNING, Thread-11, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:23:39,553 DEBUG  , Thread-11, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:23:39,928 INFO   , Thread-11, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:23:43,716 INFO   , Thread-4, runner.py:323, [trial: 3, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 00:23:44,872 INFO   , Thread-3, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:23:47,850 INFO   , Thread-16, runner.py:360, [trial: 3, gen: 3] System took 00:01:01 to converge
2023-04-02 00:23:47,851 DEBUG  , Thread-16, runner.py:98, [trial: 3, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:23:47,852 DEBUG  , Thread-16, runner.py:99, [trial: 3, gen: 3] STDERR: 
2023-04-02 00:23:47,980 DEBUG  , Thread-16, runner.py:177, [trial: 3, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:04:29Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:03:23Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:11:44Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:22:46Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3144', 'uid': 'a25cd870-96b9-478e-8412-eca2cb161c2e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:11:44Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:04:28Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:04:29Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:03:25Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:11:38Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:23:48,011 DEBUG  , Thread-16, runner.py:202, [trial: 3, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-lfxzj
2023-04-02 00:23:48,755 INFO   , Thread-16, acto.py  :187, Trial 3 finished, completed in 00:24:10
2023-04-02 00:23:48,756 INFO   , Thread-16, acto.py  :188, ---------------------------------------

2023-04-02 00:23:48,773 DEBUG  , Thread-16, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-lfxzj
2023-04-02 00:23:52,312 WARNING, Thread-6, schema.py:573, [trial: 5, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:23:52,312 DEBUG  , Thread-6, acto.py  :458, [trial: 5, gen: 0] Run and check
2023-04-02 00:23:53,715 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:23:55,036 INFO   , Thread-6, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:24:03,858 WARNING, Thread-8, schema.py:573, [trial: 4, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:24:03,859 DEBUG  , Thread-8, acto.py  :458, [trial: 4, gen: 0] Run and check
2023-04-02 00:24:04,012 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-15
2023-04-02 00:24:06,839 INFO   , Thread-8, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:24:15,078 INFO   , Thread-9, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:24:18,794 INFO   , Thread-10, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:24:23,142 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:24:29,440 INFO   , Thread-7, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:24:40,060 INFO   , Thread-11, runner.py:360, [trial: 4, gen: 1] System took 00:01:00 to converge
2023-04-02 00:24:40,061 DEBUG  , Thread-11, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:24:40,061 DEBUG  , Thread-11, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:24:40,200 DEBUG  , Thread-11, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:21:29Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:21:25Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:21:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:21:39Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1284', 'uid': '2530dc2a-60b1-41f0-97b7-bc42a290639c'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:21:39Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:21:28Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:21:29Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:21:34Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:24:40,228 DEBUG  , Thread-11, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-cqjnq
2023-04-02 00:24:41,019 DEBUG  , Thread-11, acto.py  :383, [trial: 4, gen: 1] Only one patch, no need to isolate
2023-04-02 00:24:41,020 WARNING, Thread-11, schema.py:573, [trial: 4, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:24:41,020 INFO   , Thread-11, input.py :723, [trial: 4, gen: 3] Progress [10] cases left
2023-04-02 00:24:41,021 INFO   , Thread-11, acto.py  :187, Trial 4 finished, completed in 00:05:39
2023-04-02 00:24:41,021 INFO   , Thread-11, acto.py  :188, ---------------------------------------

2023-04-02 00:24:41,043 DEBUG  , Thread-11, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-cqjnq
2023-04-02 00:24:44,954 INFO   , Thread-3, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:24:51,066 INFO   , Thread-11, common.py:629, Trial testrun-crdb-whitebox/trial-10-0004 completed without error
2023-04-02 00:24:57,038 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-10
2023-04-02 00:24:58,142 INFO   , Thread-16, base.py  :41, Created cluster
2023-04-02 00:24:58,153 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:25:08,697 INFO   , Thread-8, runner.py:360, [trial: 4, gen: 0] System took 00:01:01 to converge
2023-04-02 00:25:08,699 DEBUG  , Thread-8, runner.py:98, [trial: 4, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:25:08,699 DEBUG  , Thread-8, runner.py:99, [trial: 4, gen: 0] STDERR: 
2023-04-02 00:25:08,782 INFO   , Thread-6, runner.py:360, [trial: 5, gen: 0] System took 00:01:13 to converge
2023-04-02 00:25:08,783 DEBUG  , Thread-6, runner.py:98, [trial: 5, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:25:08,783 DEBUG  , Thread-6, runner.py:99, [trial: 5, gen: 0] STDERR: 
2023-04-02 00:25:08,855 DEBUG  , Thread-8, runner.py:177, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:24:06Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:24:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:24:09Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '908', 'uid': '669c688f-99bc-4a6a-95cf-35439751374b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:24:07Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:24:07Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:24:09Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:25:08,910 DEBUG  , Thread-8, runner.py:202, [trial: 4, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-g2694
2023-04-02 00:25:09,041 DEBUG  , Thread-6, runner.py:177, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:23:58Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:23:54Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:23:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:24:09Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1063', 'uid': 'c21bc10f-e47b-4b97-a335-ad4e362bee3f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:24:09Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:23:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:23:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:24:03Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:25:09,062 WARNING, Thread-8, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:25:09,063 INFO   , Thread-8, input.py :723, [trial: 4, gen: 1] Progress [14] cases left
2023-04-02 00:25:09,064 DEBUG  , Thread-8, test_case.py:51, [trial: 4, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:25:09,064 INFO   , Thread-8, acto.py  :263, [trial: 4, gen: 1] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef'] satisfies
2023-04-02 00:25:09,065 INFO   , Thread-8, acto.py  :323, [trial: 4, gen: 1] Running bundled testcases
2023-04-02 00:25:09,066 DEBUG  , Thread-8, test_case.py:51, [trial: 4, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:25:09,066 INFO   , Thread-8, acto.py  :107, [trial: 4, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {}}}]}]
2023-04-02 00:25:09,067 DEBUG  , Thread-8, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:25:09,111 DEBUG  , Thread-6, runner.py:202, [trial: 5, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-4r2x6
2023-04-02 00:25:09,391 WARNING, Thread-6, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:25:09,391 INFO   , Thread-6, input.py :723, [trial: 5, gen: 1] Progress [8] cases left
2023-04-02 00:25:09,391 DEBUG  , Thread-6, test_case.py:51, [trial: 5, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:25:09,391 INFO   , Thread-6, acto.py  :263, [trial: 5, gen: 1] Precondition of ['spec', 'dataStore'] satisfies
2023-04-02 00:25:09,391 INFO   , Thread-6, acto.py  :323, [trial: 5, gen: 1] Running bundled testcases
2023-04-02 00:25:09,391 DEBUG  , Thread-6, test_case.py:51, [trial: 5, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:25:09,392 INFO   , Thread-6, acto.py  :107, [trial: 5, gen: 1] JSON patch: [{"op": "remove", "path": "/spec/dataStore/pvc"}]
2023-04-02 00:25:09,392 DEBUG  , Thread-6, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:25:09,392 INFO   , Thread-8, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:25:09,698 INFO   , Thread-6, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:25:15,247 INFO   , Thread-9, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:25:15,295 DEBUG  , Thread-16, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:25:18,880 INFO   , Thread-10, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:25:23,227 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:25:25,368 INFO   , Thread-16, deploy.py:91, Operator ready
2023-04-02 00:25:25,368 INFO   , Thread-16, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:25:27,430 DEBUG  , Thread-16, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:25:29,525 INFO   , Thread-7, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:25:34,447 INFO   , Thread-4, runner.py:323, [trial: 3, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 00:25:37,517 INFO   , Thread-16, deploy.py:91, Operator ready
2023-04-02 00:25:37,517 INFO   , Thread-16, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:25:40,226 INFO   , Thread-15, runner.py:360, [trial: 6, gen: 0] System took 00:02:05 to converge
2023-04-02 00:25:40,227 DEBUG  , Thread-15, runner.py:98, [trial: 6, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:25:40,227 DEBUG  , Thread-15, runner.py:99, [trial: 6, gen: 0] STDERR: 
2023-04-02 00:25:40,366 DEBUG  , Thread-15, runner.py:177, [trial: 6, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:23:37Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:23:34Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:23:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:23:48Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1100', 'uid': '1a26ac00-777d-4ccd-bf5b-1b549b2292b5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:23:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:23:37Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:23:38Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:23:36Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:23:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:25:40,394 DEBUG  , Thread-15, runner.py:202, [trial: 6, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-sgkp9
2023-04-02 00:25:40,655 WARNING, Thread-15, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:25:40,656 INFO   , Thread-15, input.py :723, [trial: 6, gen: 1] Progress [1] cases left
2023-04-02 00:25:40,656 DEBUG  , Thread-15, test_case.py:51, [trial: 6, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-02 00:25:40,656 INFO   , Thread-15, acto.py  :267, [trial: 6, gen: 1] Precondition of ["spec", "clientTLSSecret"] fails, try setup first
2023-04-02 00:25:40,657 INFO   , Thread-15, acto.py  :107, [trial: 6, gen: 1] JSON patch: [{"op": "add", "path": "/spec/clientTLSSecret", "value": "ACTOKEY"}]
2023-04-02 00:25:40,657 DEBUG  , Thread-15, test_case.py:51, [trial: 6, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-02 00:25:40,657 DEBUG  , Thread-15, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 00:25:41,032 INFO   , Thread-15, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:25:45,054 INFO   , Thread-3, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:25:46,297 ERROR  , Thread-2, runner.py:363, [trial: 4, gen: 1] System failed to converge within 600 seconds
2023-04-02 00:25:46,298 DEBUG  , Thread-2, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:25:46,299 DEBUG  , Thread-2, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:25:46,446 DEBUG  , Thread-2, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:14:38Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"ACTOKEY"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:14:35Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:14:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:14:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:15:46Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1296', 'uid': 'a76d9273-22f1-4e2f-a824-331ace8dcbe8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'ACTOKEY', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:14:49Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:15:46Z', 'status': 'False', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:14:39Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:14:44Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:25:46,471 DEBUG  , Thread-2, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-jggqm
2023-04-02 00:25:47,002 DEBUG  , Thread-2, compare.py:79, [trial: 4, gen: 1] cockroachdb/cockroach - v21.2.10
2023-04-02 00:25:47,002 DEBUG  , Thread-2, compare.py:79, [trial: 4, gen: 1] cockroachdb/cockroach - v21.2.10
2023-04-02 00:25:47,009 DEBUG  , Thread-2, compare.py:79, [trial: 4, gen: 1] cockroachdb/cockroach - v21.2.10
2023-04-02 00:25:47,009 DEBUG  , Thread-2, compare.py:79, [trial: 4, gen: 1] cockroachdb/cockroach - v21.2.10
2023-04-02 00:25:47,009 ERROR  , Thread-2, checker.py:301, [trial: 4, gen: 1] Found no matching fields for input delta
2023-04-02 00:25:47,009 ERROR  , Thread-2, checker.py:302, [trial: 4, gen: 1] Input delta [['spec', 'image', 'name']]
2023-04-02 00:25:47,296 INFO   , Thread-2, checker.py:134, [trial: 4, gen: 1] Number of system state fields: [3463] Number of delta: [52]
2023-04-02 00:25:47,296 ERROR  , Thread-2, checker.py:561, [trial: 4, gen: 1] Found deployment: cockroach-operator-manager replicas [1] ready_replicas [None], cockroach-operator-manager condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2023-04-02 00:25:47,297 INFO   , Thread-2, acto.py  :332, [trial: 4, gen: 1] Error result, running recovery
2023-04-02 00:25:47,298 DEBUG  , Thread-2, acto.py  :489, [trial: 4, gen: 1] Running recovery
2023-04-02 00:25:50,258 INFO   , Thread-2, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:25:50,285 INFO   , Thread-11, base.py  :41, Created cluster
2023-04-02 00:25:50,304 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:25:55,473 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:26:07,771 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:26:09,509 INFO   , Thread-8, runner.py:360, [trial: 4, gen: 1] System took 00:01:00 to converge
2023-04-02 00:26:09,510 DEBUG  , Thread-8, runner.py:98, [trial: 4, gen: 1] STDOUT: 
2023-04-02 00:26:09,510 DEBUG  , Thread-8, runner.py:99, [trial: 4, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-07-0004/mutated-1.yaml": error validating data: ValidationError(CrdbCluster.spec.podEnvVariables[0].valueFrom.resourceFieldRef): missing required field "resource" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.podEnvVariables.valueFrom.resourceFieldRef; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 00:26:09,614 DEBUG  , Thread-8, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:24:06Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:24:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:24:09Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '908', 'uid': '669c688f-99bc-4a6a-95cf-35439751374b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:24:07Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:24:07Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:24:09Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:26:09,639 DEBUG  , Thread-8, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-g2694
2023-04-02 00:26:09,770 INFO   , Thread-8, checker.py:213, [trial: 4, gen: 1] Invalid input, reject mutation
2023-04-02 00:26:09,770 INFO   , Thread-8, checker.py:214, [trial: 4, gen: 1] STDOUT: 
2023-04-02 00:26:09,770 INFO   , Thread-8, checker.py:215, [trial: 4, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-07-0004/mutated-1.yaml": error validating data: ValidationError(CrdbCluster.spec.podEnvVariables[0].valueFrom.resourceFieldRef): missing required field "resource" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.podEnvVariables.valueFrom.resourceFieldRef; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 00:26:09,885 ERROR  , Thread-8, checker.py:301, [trial: 4, gen: 1] Found no matching fields for input delta
2023-04-02 00:26:09,885 ERROR  , Thread-8, checker.py:302, [trial: 4, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'name']]
2023-04-02 00:26:09,984 INFO   , Thread-8, checker.py:134, [trial: 4, gen: 1] Number of system state fields: [1500] Number of delta: [0]
2023-04-02 00:26:09,985 DEBUG  , Thread-8, acto.py  :374, [trial: 4, gen: 1] Invalid input, revert
2023-04-02 00:26:09,985 WARNING, Thread-8, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:26:09,986 DEBUG  , Thread-8, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:26:10,028 INFO   , Thread-6, runner.py:360, [trial: 5, gen: 1] System took 00:01:00 to converge
2023-04-02 00:26:10,030 DEBUG  , Thread-6, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:26:10,030 DEBUG  , Thread-6, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:26:10,180 DEBUG  , Thread-6, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:23:58Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:23:54Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:24:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:25:09Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1184', 'uid': 'c21bc10f-e47b-4b97-a335-ad4e362bee3f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:24:09Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:23:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:23:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:24:03Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:26:10,218 DEBUG  , Thread-6, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-4r2x6
2023-04-02 00:26:10,395 INFO   , Thread-8, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:26:10,854 WARNING, Thread-6, checker.py:347, [trial: 5, gen: 1] 'AccessModeSchema' object is not subscriptable happened when trying to fetch default value
2023-04-02 00:26:10,854 ERROR  , Thread-6, checker.py:301, [trial: 5, gen: 1] Found no matching fields for input delta
2023-04-02 00:26:10,854 ERROR  , Thread-6, checker.py:302, [trial: 5, gen: 1] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'accessModes', 0]]
2023-04-02 00:26:11,068 INFO   , Thread-6, checker.py:134, [trial: 5, gen: 1] Number of system state fields: [3452] Number of delta: [4]
2023-04-02 00:26:11,069 INFO   , Thread-6, acto.py  :332, [trial: 5, gen: 1] Error result, running recovery
2023-04-02 00:26:11,069 DEBUG  , Thread-6, acto.py  :489, [trial: 5, gen: 1] Running recovery
2023-04-02 00:26:11,425 INFO   , Thread-6, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:26:15,344 INFO   , Thread-9, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:26:17,644 WARNING, Thread-16, schema.py:573, [trial: 4, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:26:17,645 DEBUG  , Thread-16, acto.py  :458, [trial: 4, gen: 0] Run and check
2023-04-02 00:26:17,853 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-02 00:26:17,853 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:26:18,971 INFO   , Thread-10, runner.py:323, [trial: 3, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:26:20,494 INFO   , Thread-5, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:26:21,225 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:26:21,468 INFO   , Thread-16, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:26:29,621 INFO   , Thread-7, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:26:31,304 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-02 00:26:31,304 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:26:34,527 INFO   , Thread-4, runner.py:323, [trial: 3, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 00:26:41,328 ERROR  , Thread-10, runner.py:363, [trial: 3, gen: 2] System failed to converge within 600 seconds
2023-04-02 00:26:41,329 DEBUG  , Thread-10, runner.py:98, [trial: 3, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:26:41,329 DEBUG  , Thread-10, runner.py:99, [trial: 3, gen: 2] STDERR: 
2023-04-02 00:26:41,467 DEBUG  , Thread-10, runner.py:177, [trial: 3, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:13:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cockroachDBVersion":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"topologySpreadConstraints":[{"labelSelector":{"matchExpressions":[],"matchLabels":null},"maxSkew":4,"topologyKey":"ACTOKEY","whenUnsatisfiable":"ACTOKEY"}]}}\n'}, 'creationTimestamp': '2023-04-02T04:13:32Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:13:37Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cockroachDBVersion': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:topologySpreadConstraints': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:16:41Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1367', 'uid': '6e94bc2b-3e70-4d85-a2bf-a0153d21134b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'topologySpreadConstraints': [{'labelSelector': {}, 'maxSkew': 4, 'topologyKey': 'ACTOKEY', 'whenUnsatisfiable': 'ACTOKEY'}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:13:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:13:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:13:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:13:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:26:41,493 DEBUG  , Thread-10, runner.py:202, [trial: 3, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-855nj
2023-04-02 00:26:42,055 DEBUG  , Thread-10, checker.py:278, [trial: 3, gen: 2] Input delta [['spec', 'topologySpreadConstraints', 0, 'maxSkew']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 0, 'max_skew']]
2023-04-02 00:26:42,056 DEBUG  , Thread-10, checker.py:278, [trial: 3, gen: 2] Input delta [['spec', 'topologySpreadConstraints', 0, 'topologyKey']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 0, 'topology_key']]
2023-04-02 00:26:42,057 DEBUG  , Thread-10, checker.py:278, [trial: 3, gen: 2] Input delta [['spec', 'topologySpreadConstraints', 0, 'whenUnsatisfiable']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 0, 'when_unsatisfiable']]
2023-04-02 00:26:42,270 INFO   , Thread-10, checker.py:134, [trial: 3, gen: 2] Number of system state fields: [3037] Number of delta: [215]
2023-04-02 00:26:42,270 ERROR  , Thread-10, checker.py:561, [trial: 3, gen: 2] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:26:42,271 DEBUG  , Thread-10, acto.py  :489, [trial: 3, gen: 2] Running recovery
2023-04-02 00:26:44,224 INFO   , Thread-10, runner.py:291, [trial: 3, gen: 2] Waiting for system to converge... 
2023-04-02 00:26:45,142 INFO   , Thread-3, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:26:50,410 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:26:55,555 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:27:10,606 ERROR  , Thread-7, runner.py:363, [trial: 4, gen: 1] System failed to converge within 600 seconds
2023-04-02 00:27:10,608 DEBUG  , Thread-7, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:27:10,609 DEBUG  , Thread-7, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:27:10,755 DEBUG  , Thread-7, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:16:01Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":["ACTOKEY"],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:15:58Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:16:01Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:16:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:17:10Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1187', 'uid': 'e6f35b67-efbd-44ce-9d6b-f3655e443363'}, 'spec': {'additionalArgs': ['ACTOKEY'], 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:16:12Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:16:00Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:16:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:16:07Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:27:10,785 DEBUG  , Thread-7, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-h2ltc
2023-04-02 00:27:11,650 INFO   , Thread-7, checker.py:134, [trial: 4, gen: 1] Number of system state fields: [3469] Number of delta: [210]
2023-04-02 00:27:11,650 ERROR  , Thread-7, checker.py:561, [trial: 4, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:27:11,652 DEBUG  , Thread-7, acto.py  :489, [trial: 4, gen: 1] Running recovery
2023-04-02 00:27:11,722 INFO   , Thread-6, runner.py:360, [trial: 5, gen: 1] System took 00:01:00 to converge
2023-04-02 00:27:11,724 DEBUG  , Thread-6, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:27:11,724 DEBUG  , Thread-6, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:27:11,791 WARNING, Thread-11, schema.py:573, [trial: 5, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:27:11,802 DEBUG  , Thread-11, acto.py  :458, [trial: 5, gen: 0] Run and check
2023-04-02 00:27:11,916 DEBUG  , Thread-6, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:23:58Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:23:54Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:24:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:26:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1277', 'uid': 'c21bc10f-e47b-4b97-a335-ad4e362bee3f'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:24:09Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:23:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:23:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:24:03Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:27:11,943 DEBUG  , Thread-6, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-4r2x6
2023-04-02 00:27:12,636 INFO   , Thread-6, acto.py  :187, Trial 5 finished, completed in 00:05:41
2023-04-02 00:27:12,636 INFO   , Thread-6, acto.py  :188, ---------------------------------------

2023-04-02 00:27:12,661 DEBUG  , Thread-6, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-4r2x6
2023-04-02 00:27:14,560 INFO   , Thread-7, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:27:15,439 INFO   , Thread-9, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:27:15,452 INFO   , Thread-11, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:27:20,580 INFO   , Thread-5, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:27:29,112 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-5
2023-04-02 00:27:32,887 INFO   , Thread-16, runner.py:360, [trial: 4, gen: 0] System took 00:01:11 to converge
2023-04-02 00:27:32,888 DEBUG  , Thread-16, runner.py:98, [trial: 4, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:27:32,888 DEBUG  , Thread-16, runner.py:99, [trial: 4, gen: 0] STDERR: 
2023-04-02 00:27:33,031 DEBUG  , Thread-16, runner.py:177, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:26:24Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:26:21Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:26:21Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:26:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:26:25Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1063', 'uid': 'db5bbd59-cbe5-40e2-bdf1-f64afad0fe74'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:26:35Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:26:24Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:26:25Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:26:30Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:27:33,064 DEBUG  , Thread-16, runner.py:202, [trial: 4, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-rfg7m
2023-04-02 00:27:33,326 WARNING, Thread-16, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:27:33,327 INFO   , Thread-16, input.py :723, [trial: 4, gen: 1] Progress [4] cases left
2023-04-02 00:27:33,327 DEBUG  , Thread-16, test_case.py:51, [trial: 4, gen: 1] Precondition [change_precondition] Result [False]
2023-04-02 00:27:33,327 INFO   , Thread-16, acto.py  :267, [trial: 4, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "resourceFieldRef", "containerName"] fails, try setup first
2023-04-02 00:27:33,327 INFO   , Thread-16, acto.py  :107, [trial: 4, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {"resource": "ACTOKEY", "containerName": "ACTOKEY"}}}]}]
2023-04-02 00:27:33,327 DEBUG  , Thread-16, test_case.py:51, [trial: 4, gen: 1] Precondition [change_precondition] Result [True]
2023-04-02 00:27:33,327 DEBUG  , Thread-16, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:27:33,671 INFO   , Thread-16, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:27:34,620 INFO   , Thread-4, runner.py:323, [trial: 3, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 00:27:42,278 INFO   , Thread-8, runner.py:360, [trial: 4, gen: 1] System took 00:01:31 to converge
2023-04-02 00:27:42,280 DEBUG  , Thread-8, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:27:42,280 DEBUG  , Thread-8, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:27:42,435 DEBUG  , Thread-8, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:26:13Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:24:06Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:24:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:26:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:26:14Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1268', 'uid': '669c688f-99bc-4a6a-95cf-35439751374b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:26:24Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:26:12Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:26:13Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:24:09Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:26:19Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:27:42,475 DEBUG  , Thread-8, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-g2694
2023-04-02 00:27:43,016 DEBUG  , Thread-8, acto.py  :383, [trial: 4, gen: 1] Only one patch, no need to isolate
2023-04-02 00:27:43,017 WARNING, Thread-8, schema.py:573, [trial: 4, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:27:43,017 INFO   , Thread-8, input.py :723, [trial: 4, gen: 3] Progress [13] cases left
2023-04-02 00:27:43,018 DEBUG  , Thread-8, test_case.py:51, [trial: 4, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-02 00:27:43,018 INFO   , Thread-8, acto.py  :267, [trial: 4, gen: 3] Precondition of ["spec", "logConfigMap"] fails, try setup first
2023-04-02 00:27:43,018 INFO   , Thread-8, acto.py  :107, [trial: 4, gen: 3] JSON patch: [{"op": "add", "path": "/spec/logConfigMap", "value": "ACTOKEY"}]
2023-04-02 00:27:43,018 DEBUG  , Thread-8, test_case.py:51, [trial: 4, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-02 00:27:43,018 DEBUG  , Thread-8, acto.py  :458, [trial: 4, gen: 3] Run and check
2023-04-02 00:27:43,360 INFO   , Thread-8, runner.py:291, [trial: 4, gen: 3] Waiting for system to converge... 
2023-04-02 00:27:45,236 INFO   , Thread-3, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:27:50,492 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:27:55,640 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:27:56,400 ERROR  , Thread-3, runner.py:363, [trial: 4, gen: 3] System failed to converge within 600 seconds
2023-04-02 00:27:56,401 DEBUG  , Thread-3, runner.py:98, [trial: 4, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:27:56,401 DEBUG  , Thread-3, runner.py:99, [trial: 4, gen: 3] STDERR: 
2023-04-02 00:27:56,537 DEBUG  , Thread-3, runner.py:177, [trial: 4, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:09:40Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"resourceFieldRef":{"divisor":1,"resource":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:34Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:16:55Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:17:56Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2196', 'uid': 'e3388b33-e0bb-4435-a924-2f8456c82696'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'resourceFieldRef': {'divisor': '1', 'resource': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:16:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:09:39Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:09:40Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:08:37Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:16:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:27:56,566 DEBUG  , Thread-3, runner.py:202, [trial: 4, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-cf2fq
2023-04-02 00:27:57,140 DEBUG  , Thread-3, checker.py:278, [trial: 4, gen: 3] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'resource']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 2, 'value_from', 'resource_field_ref', 'resource']]
2023-04-02 00:27:57,140 ERROR  , Thread-3, checker.py:282, [trial: 4, gen: 3] Matched delta inconsistent with input delta
2023-04-02 00:27:57,140 ERROR  , Thread-3, checker.py:283, [trial: 4, gen: 3] Input delta: not present -> ACTOKEY
2023-04-02 00:27:57,140 ERROR  , Thread-3, checker.py:284, [trial: 4, gen: 3] Matched delta: limits.cpu -> not present
2023-04-02 00:27:57,326 INFO   , Thread-3, common.py:569, [trial: 4, gen: 3] Recognized invalid input through field [resource] in error message: reconciling resources on deploy action
2023-04-02 00:27:57,326 INFO   , Thread-3, checker.py:134, [trial: 4, gen: 3] Number of system state fields: [3045] Number of delta: [224]
2023-04-02 00:27:57,326 ERROR  , Thread-3, checker.py:561, [trial: 4, gen: 3] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:27:57,327 DEBUG  , Thread-3, acto.py  :489, [trial: 4, gen: 3] Running recovery
2023-04-02 00:27:59,256 INFO   , Thread-3, runner.py:291, [trial: 4, gen: 3] Waiting for system to converge... 
2023-04-02 00:27:59,448 INFO   , Thread-10, runner.py:360, [trial: 3, gen: 2] System took 00:01:15 to converge
2023-04-02 00:27:59,450 DEBUG  , Thread-10, runner.py:98, [trial: 3, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:27:59,450 DEBUG  , Thread-10, runner.py:99, [trial: 3, gen: 2] STDERR: 
2023-04-02 00:27:59,583 DEBUG  , Thread-10, runner.py:177, [trial: 3, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:13:36Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cockroachDBVersion":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:13:32Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:13:37Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cockroachDBVersion': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:26:44Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2313', 'uid': '6e94bc2b-3e70-4d85-a2bf-a0153d21134b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:13:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:13:35Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:13:37Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:13:42Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:27:59,610 DEBUG  , Thread-10, runner.py:202, [trial: 3, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-855nj
2023-04-02 00:28:00,297 INFO   , Thread-10, acto.py  :187, Trial 3 finished, completed in 00:16:48
2023-04-02 00:28:00,297 INFO   , Thread-10, acto.py  :188, ---------------------------------------

2023-04-02 00:28:00,320 DEBUG  , Thread-10, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-855nj
2023-04-02 00:28:15,528 INFO   , Thread-9, runner.py:323, [trial: 3, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:28:15,611 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-9
2023-04-02 00:28:20,664 INFO   , Thread-5, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:28:22,378 INFO   , Thread-6, base.py  :41, Created cluster
2023-04-02 00:28:22,390 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:28:23,151 ERROR  , Thread-9, runner.py:363, [trial: 3, gen: 3] System failed to converge within 600 seconds
2023-04-02 00:28:23,153 DEBUG  , Thread-9, runner.py:98, [trial: 3, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:28:23,153 DEBUG  , Thread-9, runner.py:99, [trial: 3, gen: 3] STDERR: 
2023-04-02 00:28:23,288 DEBUG  , Thread-9, runner.py:177, [trial: 3, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:10:05Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"secretKeyRef":{"key":"ACTOKEY","optional":true}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:59Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:17:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:18:23Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2235', 'uid': 'fd984d9e-2fc4-4733-b18c-6d50801fdec9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'secretKeyRef': {'key': 'ACTOKEY', 'optional': True}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:17:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:10:04Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:10:05Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:10:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:17:19Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:28:23,314 DEBUG  , Thread-9, runner.py:202, [trial: 3, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-jc6qt
2023-04-02 00:28:23,999 DEBUG  , Thread-9, checker.py:278, [trial: 3, gen: 3] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'secretKeyRef', 'optional']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 4, 'value_from', 'secret_key_ref', 'optional']]
2023-04-02 00:28:24,203 INFO   , Thread-9, checker.py:134, [trial: 3, gen: 3] Number of system state fields: [3045] Number of delta: [224]
2023-04-02 00:28:24,203 ERROR  , Thread-9, checker.py:561, [trial: 3, gen: 3] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:28:24,204 INFO   , Thread-9, acto.py  :332, [trial: 3, gen: 3] Error result, running recovery
2023-04-02 00:28:24,204 DEBUG  , Thread-9, acto.py  :489, [trial: 3, gen: 3] Running recovery
2023-04-02 00:28:26,167 INFO   , Thread-9, runner.py:291, [trial: 3, gen: 3] Waiting for system to converge... 
2023-04-02 00:28:28,981 INFO   , Thread-11, runner.py:360, [trial: 5, gen: 0] System took 00:01:13 to converge
2023-04-02 00:28:28,982 DEBUG  , Thread-11, runner.py:98, [trial: 5, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:28:28,983 DEBUG  , Thread-11, runner.py:99, [trial: 5, gen: 0] STDERR: 
2023-04-02 00:28:29,131 DEBUG  , Thread-11, runner.py:177, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:27:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:27:15Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:27:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:27:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:27:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1082', 'uid': '96a7db4a-1ae6-45cd-b991-a0a8db00bfe1'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:27:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:27:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:27:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:27:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:28:29,158 DEBUG  , Thread-11, runner.py:202, [trial: 5, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-6gd74
2023-04-02 00:28:29,466 WARNING, Thread-11, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:28:29,466 INFO   , Thread-11, input.py :723, [trial: 5, gen: 1] Progress [10] cases left
2023-04-02 00:28:29,466 DEBUG  , Thread-11, test_case.py:51, [trial: 5, gen: 1] Precondition [increase_precondition] Result [False]
2023-04-02 00:28:29,466 INFO   , Thread-11, acto.py  :267, [trial: 5, gen: 1] Precondition of ["spec", "dataStore", "pvc", "spec", "resources", "requests", "rgztrsjoct"] fails, try setup first
2023-04-02 00:28:29,467 INFO   , Thread-11, acto.py  :107, [trial: 5, gen: 1] JSON patch: [{"op": "add", "path": "/spec/dataStore/pvc/spec/resources/requests/rgztrsjoct", "value": "1000m"}]
2023-04-02 00:28:29,467 DEBUG  , Thread-11, test_case.py:51, [trial: 5, gen: 1] Precondition [increase_precondition] Result [True]
2023-04-02 00:28:29,468 DEBUG  , Thread-11, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:28:29,784 INFO   , Thread-11, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:28:34,709 INFO   , Thread-4, runner.py:323, [trial: 3, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 00:28:35,303 INFO   , Thread-7, runner.py:360, [trial: 4, gen: 1] System took 00:01:20 to converge
2023-04-02 00:28:35,305 DEBUG  , Thread-7, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:28:35,305 DEBUG  , Thread-7, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:28:35,460 DEBUG  , Thread-7, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:16:01Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:15:58Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:16:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:27:14Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2178', 'uid': 'e6f35b67-efbd-44ce-9d6b-f3655e443363'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:16:12Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:16:00Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:16:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:16:07Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:28:35,492 DEBUG  , Thread-7, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-h2ltc
2023-04-02 00:28:36,214 INFO   , Thread-7, acto.py  :187, Trial 4 finished, completed in 00:14:50
2023-04-02 00:28:36,214 INFO   , Thread-7, acto.py  :188, ---------------------------------------

2023-04-02 00:28:36,240 DEBUG  , Thread-7, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-h2ltc
2023-04-02 00:28:39,662 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:28:49,759 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 00:28:49,759 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:28:51,553 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-6
2023-04-02 00:28:51,825 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:28:55,734 INFO   , Thread-1, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:28:55,766 INFO   , Thread-15, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:29:00,936 INFO   , Thread-3, runner.py:360, [trial: 4, gen: 3] System took 00:01:01 to converge
2023-04-02 00:29:00,937 DEBUG  , Thread-3, runner.py:98, [trial: 4, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:29:00,937 DEBUG  , Thread-3, runner.py:99, [trial: 4, gen: 3] STDERR: 
2023-04-02 00:29:01,081 DEBUG  , Thread-3, runner.py:177, [trial: 4, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:09:40Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:34Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:16:55Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:27:59Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3125', 'uid': 'e3388b33-e0bb-4435-a924-2f8456c82696'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:16:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:09:39Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:09:40Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:08:37Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:16:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:29:01,109 DEBUG  , Thread-3, runner.py:202, [trial: 4, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-cf2fq
2023-04-02 00:29:01,899 INFO   , Thread-3, acto.py  :187, Trial 4 finished, completed in 00:24:10
2023-04-02 00:29:01,899 INFO   , Thread-3, acto.py  :188, ---------------------------------------

2023-04-02 00:29:01,923 DEBUG  , Thread-3, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-cf2fq
2023-04-02 00:29:02,016 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 00:29:02,016 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:29:08,465 INFO   , Thread-10, base.py  :41, Created cluster
2023-04-02 00:29:08,478 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:29:11,638 ERROR  , Thread-1, runner.py:363, [trial: 4, gen: 1] System failed to converge within 600 seconds
2023-04-02 00:29:11,640 DEBUG  , Thread-1, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:29:11,640 DEBUG  , Thread-1, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:29:11,776 DEBUG  , Thread-1, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:09:40Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cache":"ACTOKEY","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:07:04Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cache': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:08:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:09:40Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:19:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3585', 'uid': 'be81b463-86bf-4231-b6cc-5ba518dc8c4c'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'cache': 'ACTOKEY', 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:07:04Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:09:39Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:09:40Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:09:10Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:29:07Z', 'message': 'pod has not completely started', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:29:11,805 DEBUG  , Thread-1, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-rdh5z
2023-04-02 00:29:12,295 DEBUG  , Thread-1, checker.py:728, [trial: 4, gen: 1] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [root['pod']['test-cluster-0'], root['pod']['test-cluster-1'], root['pod']['test-cluster-2'], root['stateful_set']['test-cluster'], root['service']['test-cluster'], root['service']['test-cluster-public'], root['pvc']['datadir-test-cluster-0'], root['pvc']['datadir-test-cluster-1'], root['pvc']['datadir-test-cluster-2'], root['pod_disruption_budget']['test-cluster'], root['secret']['test-cluster-ca'], root['secret']['test-cluster-node'], root['secret']['test-cluster-root']]}
2023-04-02 00:29:12,302 INFO   , Thread-1, acto.py  :187, Trial 4 finished, completed in 00:25:52
2023-04-02 00:29:12,302 INFO   , Thread-1, acto.py  :188, ---------------------------------------

2023-04-02 00:29:12,323 DEBUG  , Thread-1, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-rdh5z
2023-04-02 00:29:14,130 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:29:19,120 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-2
2023-04-02 00:29:25,628 DEBUG  , Thread-10, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:29:25,679 ERROR  , Thread-4, runner.py:363, [trial: 3, gen: 7] System failed to converge within 600 seconds
2023-04-02 00:29:25,680 DEBUG  , Thread-4, runner.py:98, [trial: 3, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:29:25,681 DEBUG  , Thread-4, runner.py:99, [trial: 3, gen: 7] STDERR: 
2023-04-02 00:29:25,828 DEBUG  , Thread-4, runner.py:177, [trial: 3, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:13:17Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":["ACTOKEY"],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:11:10Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:17:22Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:19:25Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1842', 'uid': '3d8a9d5b-680f-4d98-8dc0-a4bc1ffea625'}, 'spec': {'additionalArgs': ['ACTOKEY'], 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:11:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:11:13Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:11:14Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:11:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:17:51Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:29:25,856 DEBUG  , Thread-4, runner.py:202, [trial: 3, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-hhntb
2023-04-02 00:29:26,725 INFO   , Thread-4, checker.py:134, [trial: 3, gen: 7] Number of system state fields: [3474] Number of delta: [68]
2023-04-02 00:29:26,725 ERROR  , Thread-4, checker.py:561, [trial: 3, gen: 7] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:29:26,726 DEBUG  , Thread-4, acto.py  :489, [trial: 3, gen: 7] Running recovery
2023-04-02 00:29:27,128 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-0
2023-04-02 00:29:29,321 INFO   , Thread-4, runner.py:291, [trial: 3, gen: 7] Waiting for system to converge... 
2023-04-02 00:29:29,905 INFO   , Thread-11, runner.py:360, [trial: 5, gen: 1] System took 00:01:00 to converge
2023-04-02 00:29:29,906 DEBUG  , Thread-11, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:29:29,906 DEBUG  , Thread-11, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:29:30,043 DEBUG  , Thread-11, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:27:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"rgztrsjoct":"1000m","storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:27:15Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:27:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:28:29Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:rgztrsjoct': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:28:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1243', 'uid': '96a7db4a-1ae6-45cd-b991-a0a8db00bfe1'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'rgztrsjoct': '1', 'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:27:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:27:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:27:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:27:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:28:58Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:29:30,075 DEBUG  , Thread-11, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-6gd74
2023-04-02 00:29:30,565 INFO   , Thread-5, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:29:30,739 ERROR  , Thread-11, checker.py:301, [trial: 5, gen: 1] Found no matching fields for input delta
2023-04-02 00:29:30,739 ERROR  , Thread-11, checker.py:302, [trial: 5, gen: 1] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'resources', 'requests', 'rgztrsjoct']]
2023-04-02 00:29:30,983 INFO   , Thread-11, common.py:560, [trial: 5, gen: 1] Recognized invalid input through regex: failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than 'replicas', 'template', 'updateStrategy' and 'minReadySeconds' are forbidden
2023-04-02 00:29:30,983 INFO   , Thread-11, checker.py:134, [trial: 5, gen: 1] Number of system state fields: [3461] Number of delta: [5]
2023-04-02 00:29:30,984 INFO   , Thread-11, acto.py  :301, [trial: 5, gen: 1] Setup produced invalid input
2023-04-02 00:29:30,984 WARNING, Thread-11, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:29:30,985 DEBUG  , Thread-11, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:29:31,371 INFO   , Thread-11, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:29:35,719 INFO   , Thread-10, deploy.py:91, Operator ready
2023-04-02 00:29:35,719 INFO   , Thread-10, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:29:37,389 INFO   , Thread-7, base.py  :41, Created cluster
2023-04-02 00:29:37,401 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:29:37,793 DEBUG  , Thread-10, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:29:42,149 WARNING, Thread-6, schema.py:573, [trial: 6, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:29:42,150 DEBUG  , Thread-6, acto.py  :458, [trial: 6, gen: 0] Run and check
2023-04-02 00:29:44,800 INFO   , Thread-6, runner.py:291, [trial: 6, gen: 0] Waiting for system to converge... 
2023-04-02 00:29:47,989 INFO   , Thread-10, deploy.py:91, Operator ready
2023-04-02 00:29:47,989 INFO   , Thread-10, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:29:54,259 DEBUG  , Thread-7, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:29:55,858 INFO   , Thread-15, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:29:56,366 INFO   , Thread-9, runner.py:360, [trial: 3, gen: 3] System took 00:01:30 to converge
2023-04-02 00:29:56,367 DEBUG  , Thread-9, runner.py:98, [trial: 3, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:29:56,367 DEBUG  , Thread-9, runner.py:99, [trial: 3, gen: 3] STDERR: 
2023-04-02 00:29:56,512 DEBUG  , Thread-9, runner.py:177, [trial: 3, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:10:05Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:08:59Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:17:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:28:26Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3165', 'uid': 'fd984d9e-2fc4-4733-b18c-6d50801fdec9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:17:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:10:04Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:10:05Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:10:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:17:19Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:29:56,538 DEBUG  , Thread-9, runner.py:202, [trial: 3, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-jc6qt
2023-04-02 00:29:57,240 INFO   , Thread-9, acto.py  :187, Trial 3 finished, completed in 00:24:40
2023-04-02 00:29:57,240 INFO   , Thread-9, acto.py  :188, ---------------------------------------

2023-04-02 00:29:57,261 DEBUG  , Thread-9, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-jc6qt
2023-04-02 00:30:03,824 INFO   , Thread-8, runner.py:360, [trial: 4, gen: 3] System took 00:02:20 to converge
2023-04-02 00:30:03,826 DEBUG  , Thread-8, runner.py:98, [trial: 4, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:30:03,826 DEBUG  , Thread-8, runner.py:99, [trial: 4, gen: 3] STDERR: 
2023-04-02 00:30:03,981 DEBUG  , Thread-8, runner.py:177, [trial: 4, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:26:13Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"logConfigMap":"ACTOKEY","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:24:06Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:26:13Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:26:14Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:logConfigMap': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:27:43Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1418', 'uid': '669c688f-99bc-4a6a-95cf-35439751374b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'logConfigMap': 'ACTOKEY', 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:26:24Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:26:12Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:26:13Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:24:09Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:26:19Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:30:04,010 DEBUG  , Thread-8, runner.py:202, [trial: 4, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-g2694
2023-04-02 00:30:04,657 ERROR  , Thread-8, checker.py:301, [trial: 4, gen: 3] Found no matching fields for input delta
2023-04-02 00:30:04,657 ERROR  , Thread-8, checker.py:302, [trial: 4, gen: 3] Input delta [['spec', 'logConfigMap']]
2023-04-02 00:30:04,919 INFO   , Thread-8, checker.py:134, [trial: 4, gen: 3] Number of system state fields: [3782] Number of delta: [71]
2023-04-02 00:30:04,963 DEBUG  , Thread-8, acto.py  :489, [trial: 4, gen: 3] Running recovery
2023-04-02 00:30:04,966 INFO   , Thread-7, deploy.py:91, Operator ready
2023-04-02 00:30:04,967 INFO   , Thread-7, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:30:05,106 INFO   , Thread-16, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:30:05,459 INFO   , Thread-8, runner.py:291, [trial: 4, gen: 3] Waiting for system to converge... 
2023-04-02 00:30:07,138 DEBUG  , Thread-7, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:30:12,436 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-8
2023-04-02 00:30:13,525 INFO   , Thread-1, base.py  :41, Created cluster
2023-04-02 00:30:13,538 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:30:14,214 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:30:14,793 INFO   , Thread-3, base.py  :41, Created cluster
2023-04-02 00:30:14,801 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:30:17,229 INFO   , Thread-7, deploy.py:91, Operator ready
2023-04-02 00:30:17,229 INFO   , Thread-7, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:30:28,123 WARNING, Thread-10, schema.py:573, [trial: 4, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:30:28,124 DEBUG  , Thread-10, acto.py  :458, [trial: 4, gen: 0] Run and check
2023-04-02 00:30:29,451 DEBUG  , Thread-1, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:30:30,674 INFO   , Thread-10, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:30:30,686 INFO   , Thread-5, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:30:30,732 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:30:31,490 INFO   , Thread-11, runner.py:360, [trial: 5, gen: 1] System took 00:01:00 to converge
2023-04-02 00:30:31,492 DEBUG  , Thread-11, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:30:31,492 DEBUG  , Thread-11, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:30:31,644 DEBUG  , Thread-11, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:27:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:27:15Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:27:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:28:29Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:29:31Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1296', 'uid': '96a7db4a-1ae6-45cd-b991-a0a8db00bfe1'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:27:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:27:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:27:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:27:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:28:58Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:30:31,673 DEBUG  , Thread-11, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-6gd74
2023-04-02 00:30:32,456 INFO   , Thread-11, acto.py  :321, [trial: 5, gen: 1] All setups failed
2023-04-02 00:30:32,456 WARNING, Thread-11, schema.py:573, [trial: 5, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:30:32,457 INFO   , Thread-11, input.py :723, [trial: 5, gen: 3] Progress [9] cases left
2023-04-02 00:30:32,457 DEBUG  , Thread-11, test_case.py:51, [trial: 5, gen: 3] Precondition [decrease_precondition] Result [False]
2023-04-02 00:30:32,457 INFO   , Thread-11, acto.py  :267, [trial: 5, gen: 3] Precondition of ["spec", "dataStore", "pvc", "spec", "resources", "requests", "rgztrsjoct"] fails, try setup first
2023-04-02 00:30:32,457 INFO   , Thread-11, acto.py  :107, [trial: 5, gen: 3] JSON patch: [{"op": "add", "path": "/spec/dataStore/pvc/spec/resources/requests/rgztrsjoct", "value": "1000m"}]
2023-04-02 00:30:32,458 DEBUG  , Thread-11, test_case.py:51, [trial: 5, gen: 3] Precondition [decrease_precondition] Result [True]
2023-04-02 00:30:32,458 DEBUG  , Thread-11, acto.py  :458, [trial: 5, gen: 3] Run and check
2023-04-02 00:30:32,943 INFO   , Thread-11, runner.py:291, [trial: 5, gen: 3] Waiting for system to converge... 
2023-04-02 00:30:39,555 INFO   , Thread-1, deploy.py:91, Operator ready
2023-04-02 00:30:39,555 INFO   , Thread-1, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:30:40,815 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-02 00:30:40,815 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:30:41,918 DEBUG  , Thread-1, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:30:43,115 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:30:52,004 INFO   , Thread-1, deploy.py:91, Operator ready
2023-04-02 00:30:52,004 INFO   , Thread-1, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:30:53,190 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-02 00:30:53,190 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:30:55,275 INFO   , Thread-4, runner.py:360, [trial: 3, gen: 7] System took 00:01:25 to converge
2023-04-02 00:30:55,277 DEBUG  , Thread-4, runner.py:98, [trial: 3, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:30:55,277 DEBUG  , Thread-4, runner.py:99, [trial: 3, gen: 7] STDERR: 
2023-04-02 00:30:55,421 DEBUG  , Thread-4, runner.py:177, [trial: 3, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:13:17Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:11:10Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:17:22Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:29:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2821', 'uid': '3d8a9d5b-680f-4d98-8dc0-a4bc1ffea625'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:11:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:11:13Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:11:14Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:11:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:17:51Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:30:55,447 DEBUG  , Thread-4, runner.py:202, [trial: 3, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-hhntb
2023-04-02 00:30:56,126 INFO   , Thread-4, acto.py  :187, Trial 3 finished, completed in 00:21:59
2023-04-02 00:30:56,127 INFO   , Thread-4, acto.py  :188, ---------------------------------------

2023-04-02 00:30:56,151 DEBUG  , Thread-4, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-hhntb
2023-04-02 00:30:56,406 INFO   , Thread-6, runner.py:360, [trial: 6, gen: 0] System took 00:01:11 to converge
2023-04-02 00:30:56,407 DEBUG  , Thread-6, runner.py:98, [trial: 6, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:30:56,407 DEBUG  , Thread-6, runner.py:99, [trial: 6, gen: 0] STDERR: 
2023-04-02 00:30:56,535 DEBUG  , Thread-6, runner.py:177, [trial: 6, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:29:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:29:44Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:29:44Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:29:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:29:48Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1080', 'uid': 'd5736baf-ff75-4661-af74-1976e72a62a2'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:29:59Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:29:47Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:29:48Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:29:53Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:30:56,561 DEBUG  , Thread-6, runner.py:202, [trial: 6, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-9pfjg
2023-04-02 00:30:56,822 WARNING, Thread-6, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:30:56,823 INFO   , Thread-6, input.py :723, [trial: 6, gen: 1] Progress [7] cases left
2023-04-02 00:30:56,823 DEBUG  , Thread-6, test_case.py:51, [trial: 6, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-02 00:30:56,823 INFO   , Thread-6, acto.py  :267, [trial: 6, gen: 1] Precondition of ["spec", "affinity"] fails, try setup first
2023-04-02 00:30:56,823 INFO   , Thread-6, acto.py  :107, [trial: 6, gen: 1] JSON patch: [{"op": "add", "path": "/spec/affinity", "value": {"nodeAffinity": {"requiredDuringSchedulingIgnoredDuringExecution": {"nodeSelectorTerms": [{"matchExpressions": [{"key": "kubernetes.io/hostname", "operator": "In", "values": ["kind-worker", "kind-worker2", "kind-worker3kind-control-plane"]}]}]}}}}]
2023-04-02 00:30:56,823 DEBUG  , Thread-6, test_case.py:51, [trial: 6, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-02 00:30:56,823 DEBUG  , Thread-6, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 00:30:57,173 INFO   , Thread-6, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:30:57,358 WARNING, Thread-7, schema.py:573, [trial: 5, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:30:57,358 DEBUG  , Thread-7, acto.py  :458, [trial: 5, gen: 0] Run and check
2023-04-02 00:30:59,861 INFO   , Thread-7, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:31:05,381 INFO   , Thread-9, base.py  :41, Created cluster
2023-04-02 00:31:05,391 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:31:05,661 INFO   , Thread-8, runner.py:360, [trial: 4, gen: 3] System took 00:01:00 to converge
2023-04-02 00:31:05,663 DEBUG  , Thread-8, runner.py:98, [trial: 4, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:31:05,663 DEBUG  , Thread-8, runner.py:99, [trial: 4, gen: 3] STDERR: 
2023-04-02 00:31:05,805 DEBUG  , Thread-8, runner.py:177, [trial: 4, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:26:13Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:24:06Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:26:14Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:30:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1810', 'uid': '669c688f-99bc-4a6a-95cf-35439751374b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:26:24Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:26:12Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:26:13Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:24:09Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:26:19Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:31:05,834 DEBUG  , Thread-8, runner.py:202, [trial: 4, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-g2694
2023-04-02 00:31:06,592 DEBUG  , Thread-8, checker.py:728, [trial: 4, gen: 3] failed attempt recovering to seed state - system state diff: {'type_changes': {"root['pod']['test-cluster-2']['metadata']['deletion_grace_period_seconds']": {'old_type': <class 'NoneType'>, 'new_type': <class 'int'>, 'old_value': None, 'new_value': 300}, "root['pod']['test-cluster-2']['metadata']['deletion_timestamp']": {'old_type': <class 'NoneType'>, 'new_type': <class 'datetime.datetime'>, 'old_value': None, 'new_value': datetime.datetime(2023, 4, 2, 4, 35, 5, tzinfo=tzutc())}}, 'values_changed': {"root['pod']['test-cluster-0']['spec']['containers'][0]['command'][2]": {'new_value': 'exec /cockroach/cockroach.sh start --advertise-host=$(POD_NAME).test-cluster.cockroach-operator-system --certs-dir=/cockroach/cockroach-certs/ --http-port=8080 --sql-addr=:26257 --listen-addr=:26258 --log= --cache $(expr $MEMORY_LIMIT_MIB / 4)MiB --max-sql-memory $(expr $MEMORY_LIMIT_MIB / 4)MiB --join=test-cluster-0.test-cluster.cockroach-operator-system:26258,test-cluster-1.test-cluster.cockroach-operator-system:26258,test-cluster-2.test-cluster.cockroach-operator-system:26258', 'old_value': 'exec /cockroach/cockroach.sh start --advertise-host=$(POD_NAME).test-cluster.cockroach-operator-system --certs-dir=/cockroach/cockroach-certs/ --http-port=8080 --sql-addr=:26257 --listen-addr=:26258 --log="{sinks: {stderr: {channels: [OPS, HEALTH], redact: true}}}" --cache $(expr $MEMORY_LIMIT_MIB / 4)MiB --max-sql-memory $(expr $MEMORY_LIMIT_MIB / 4)MiB --join=test-cluster-0.test-cluster.cockroach-operator-system:26258,test-cluster-1.test-cluster.cockroach-operator-system:26258,test-cluster-2.test-cluster.cockroach-operator-system:26258'}, "root['pod']['test-cluster-1']['spec']['containers'][0]['command'][2]": {'new_value': 'exec /cockroach/cockroach.sh start --advertise-host=$(POD_NAME).test-cluster.cockroach-operator-system --certs-dir=/cockroach/cockroach-certs/ --http-port=8080 --sql-addr=:26257 --listen-addr=:26258 --log= --cache $(expr $MEMORY_LIMIT_MIB / 4)MiB --max-sql-memory $(expr $MEMORY_LIMIT_MIB / 4)MiB --join=test-cluster-0.test-cluster.cockroach-operator-system:26258,test-cluster-1.test-cluster.cockroach-operator-system:26258,test-cluster-2.test-cluster.cockroach-operator-system:26258', 'old_value': 'exec /cockroach/cockroach.sh start --advertise-host=$(POD_NAME).test-cluster.cockroach-operator-system --certs-dir=/cockroach/cockroach-certs/ --http-port=8080 --sql-addr=:26257 --listen-addr=:26258 --log="{sinks: {stderr: {channels: [OPS, HEALTH], redact: true}}}" --cache $(expr $MEMORY_LIMIT_MIB / 4)MiB --max-sql-memory $(expr $MEMORY_LIMIT_MIB / 4)MiB --join=test-cluster-0.test-cluster.cockroach-operator-system:26258,test-cluster-1.test-cluster.cockroach-operator-system:26258,test-cluster-2.test-cluster.cockroach-operator-system:26258'}, "root['pod']['test-cluster-2']['spec']['containers'][0]['command'][2]": {'new_value': 'exec /cockroach/cockroach.sh start --advertise-host=$(POD_NAME).test-cluster.cockroach-operator-system --certs-dir=/cockroach/cockroach-certs/ --http-port=8080 --sql-addr=:26257 --listen-addr=:26258 --log= --cache $(expr $MEMORY_LIMIT_MIB / 4)MiB --max-sql-memory $(expr $MEMORY_LIMIT_MIB / 4)MiB --join=test-cluster-0.test-cluster.cockroach-operator-system:26258,test-cluster-1.test-cluster.cockroach-operator-system:26258,test-cluster-2.test-cluster.cockroach-operator-system:26258', 'old_value': 'exec /cockroach/cockroach.sh start --advertise-host=$(POD_NAME).test-cluster.cockroach-operator-system --certs-dir=/cockroach/cockroach-certs/ --http-port=8080 --sql-addr=:26257 --listen-addr=:26258 --log="{sinks: {stderr: {channels: [OPS, HEALTH], redact: true}}}" --cache $(expr $MEMORY_LIMIT_MIB / 4)MiB --max-sql-memory $(expr $MEMORY_LIMIT_MIB / 4)MiB --join=test-cluster-0.test-cluster.cockroach-operator-system:26258,test-cluster-1.test-cluster.cockroach-operator-system:26258,test-cluster-2.test-cluster.cockroach-operator-system:26258'}}}
2023-04-02 00:31:06,600 INFO   , Thread-8, acto.py  :187, Trial 4 finished, completed in 00:09:23
2023-04-02 00:31:06,600 INFO   , Thread-8, acto.py  :188, ---------------------------------------

2023-04-02 00:31:06,622 DEBUG  , Thread-8, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-g2694
2023-04-02 00:31:09,213 INFO   , Thread-15, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:31:12,925 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-3
2023-04-02 00:31:14,299 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:31:22,181 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-7
2023-04-02 00:31:22,203 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:31:26,865 INFO   , Thread-16, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:31:30,773 INFO   , Thread-5, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:31:30,895 INFO   , Thread-10, runner.py:360, [trial: 4, gen: 0] System took 00:01:00 to converge
2023-04-02 00:31:30,895 DEBUG  , Thread-10, runner.py:98, [trial: 4, gen: 0] STDOUT: 
2023-04-02 00:31:30,895 DEBUG  , Thread-10, runner.py:99, [trial: 4, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-09-0004/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.9.70:443: connect: connection refused

2023-04-02 00:31:30,993 DEBUG  , Thread-10, runner.py:177, [trial: 4, gen: 0] {}
2023-04-02 00:31:30,993 ERROR  , Thread-10, runner.py:107, [trial: 4, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:31:30,994 INFO   , Thread-10, checker.py:103, [trial: 4, gen: 0] Connection refused, reject mutation
2023-04-02 00:31:30,994 INFO   , Thread-10, acto.py  :472, [trial: 4, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:31:32,133 WARNING, Thread-1, schema.py:573, [trial: 5, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:31:32,134 DEBUG  , Thread-1, acto.py  :458, [trial: 5, gen: 0] Run and check
2023-04-02 00:31:32,294 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-02 00:31:32,295 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:31:33,061 INFO   , Thread-11, runner.py:360, [trial: 5, gen: 3] System took 00:01:00 to converge
2023-04-02 00:31:33,063 DEBUG  , Thread-11, runner.py:98, [trial: 5, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:31:33,063 DEBUG  , Thread-11, runner.py:99, [trial: 5, gen: 3] STDERR: 
2023-04-02 00:31:33,214 DEBUG  , Thread-11, runner.py:177, [trial: 5, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:27:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"rgztrsjoct":"1000m","storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:27:15Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:rgztrsjoct': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:30:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:30:33Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1434', 'uid': '96a7db4a-1ae6-45cd-b991-a0a8db00bfe1'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'rgztrsjoct': '1', 'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:27:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:27:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:27:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:27:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:31:01Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:31:33,239 DEBUG  , Thread-11, runner.py:202, [trial: 5, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-6gd74
2023-04-02 00:31:33,515 WARNING, Thread-3, schema.py:573, [trial: 5, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:31:33,522 DEBUG  , Thread-3, acto.py  :458, [trial: 5, gen: 0] Run and check
2023-04-02 00:31:33,979 ERROR  , Thread-11, checker.py:301, [trial: 5, gen: 3] Found no matching fields for input delta
2023-04-02 00:31:33,979 ERROR  , Thread-11, checker.py:302, [trial: 5, gen: 3] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'resources', 'requests', 'rgztrsjoct']]
2023-04-02 00:31:34,268 INFO   , Thread-11, common.py:560, [trial: 5, gen: 3] Recognized invalid input through regex: failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than 'replicas', 'template', 'updateStrategy' and 'minReadySeconds' are forbidden
2023-04-02 00:31:34,268 INFO   , Thread-11, checker.py:134, [trial: 5, gen: 3] Number of system state fields: [3461] Number of delta: [2]
2023-04-02 00:31:34,269 INFO   , Thread-11, acto.py  :301, [trial: 5, gen: 3] Setup produced invalid input
2023-04-02 00:31:34,269 WARNING, Thread-11, schema.py:573, [trial: 5, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:31:34,270 DEBUG  , Thread-11, acto.py  :458, [trial: 5, gen: 3] Run and check
2023-04-02 00:31:34,654 INFO   , Thread-11, runner.py:291, [trial: 5, gen: 3] Waiting for system to converge... 
2023-04-02 00:31:35,945 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:31:36,590 INFO   , Thread-1, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:31:37,362 INFO   , Thread-3, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:31:46,042 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-02 00:31:46,042 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:31:51,403 INFO   , Thread-10, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:31:59,790 INFO   , Thread-4, base.py  :41, Created cluster
2023-04-02 00:31:59,800 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:32:03,296 INFO   , Thread-6, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:32:14,382 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:32:15,649 INFO   , Thread-8, base.py  :41, Created cluster
2023-04-02 00:32:15,660 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:32:17,097 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:32:23,314 INFO   , Thread-7, runner.py:360, [trial: 5, gen: 0] System took 00:01:23 to converge
2023-04-02 00:32:23,316 DEBUG  , Thread-7, runner.py:98, [trial: 5, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:32:23,316 DEBUG  , Thread-7, runner.py:99, [trial: 5, gen: 0] STDERR: 
2023-04-02 00:32:23,474 DEBUG  , Thread-7, runner.py:177, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:31:03Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:30:59Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:30:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:31:03Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:31:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1064', 'uid': 'f0ffb534-a8d4-4ff0-b5a8-95bf968ef295'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:14Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:31:02Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:31:03Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:09Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:32:23,506 DEBUG  , Thread-7, runner.py:202, [trial: 5, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-kmjj9
2023-04-02 00:32:23,768 WARNING, Thread-7, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:32:23,769 INFO   , Thread-7, input.py :723, [trial: 5, gen: 1] Progress [6] cases left
2023-04-02 00:32:23,769 DEBUG  , Thread-7, test_case.py:51, [trial: 5, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:32:23,769 INFO   , Thread-7, acto.py  :263, [trial: 5, gen: 1] Precondition of ['spec', 'additionalArgs', 0] satisfies
2023-04-02 00:32:23,769 INFO   , Thread-7, acto.py  :323, [trial: 5, gen: 1] Running bundled testcases
2023-04-02 00:32:23,769 DEBUG  , Thread-7, test_case.py:51, [trial: 5, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:32:23,770 INFO   , Thread-7, acto.py  :107, [trial: 5, gen: 1] JSON patch: [{"op": "add", "path": "/spec/additionalArgs", "value": [""]}]
2023-04-02 00:32:23,770 DEBUG  , Thread-7, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:32:24,108 INFO   , Thread-7, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:32:26,172 WARNING, Thread-9, schema.py:573, [trial: 4, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:32:26,173 DEBUG  , Thread-9, acto.py  :458, [trial: 4, gen: 0] Run and check
2023-04-02 00:32:26,946 INFO   , Thread-16, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:32:27,181 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-02 00:32:27,181 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:32:30,165 INFO   , Thread-9, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:32:30,550 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:32:30,857 INFO   , Thread-5, runner.py:323, [trial: 4, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:32:33,064 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:32:34,775 INFO   , Thread-11, runner.py:360, [trial: 5, gen: 3] System took 00:01:00 to converge
2023-04-02 00:32:34,776 DEBUG  , Thread-11, runner.py:98, [trial: 5, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:32:34,777 DEBUG  , Thread-11, runner.py:99, [trial: 5, gen: 3] STDERR: 
2023-04-02 00:32:34,932 DEBUG  , Thread-11, runner.py:177, [trial: 5, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:27:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:27:15Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:30:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:31:34Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1490', 'uid': '96a7db4a-1ae6-45cd-b991-a0a8db00bfe1'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:27:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:27:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:27:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:27:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:31:01Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:32:34,958 DEBUG  , Thread-11, runner.py:202, [trial: 5, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-6gd74
2023-04-02 00:32:35,791 INFO   , Thread-11, acto.py  :321, [trial: 5, gen: 3] All setups failed
2023-04-02 00:32:35,791 WARNING, Thread-11, schema.py:573, [trial: 5, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 00:32:35,792 INFO   , Thread-11, input.py :723, [trial: 5, gen: 5] Progress [8] cases left
2023-04-02 00:32:35,792 DEBUG  , Thread-11, test_case.py:51, [trial: 5, gen: 5] Precondition [change_access_mode_precondition] Result [True]
2023-04-02 00:32:35,792 INFO   , Thread-11, acto.py  :263, [trial: 5, gen: 5] Precondition of ['spec', 'dataStore', 'pvc', 'spec', 'accessModes'] satisfies
2023-04-02 00:32:35,792 INFO   , Thread-11, acto.py  :323, [trial: 5, gen: 5] Running bundled testcases
2023-04-02 00:32:35,792 DEBUG  , Thread-11, test_case.py:51, [trial: 5, gen: 5] Precondition [change_access_mode_precondition] Result [True]
2023-04-02 00:32:35,793 INFO   , Thread-11, acto.py  :107, [trial: 5, gen: 5] JSON patch: [{"op": "replace", "path": "/spec/dataStore/pvc/spec/accessModes", "value": "ReadWriteOnce"}]
2023-04-02 00:32:35,793 DEBUG  , Thread-11, acto.py  :458, [trial: 5, gen: 5] Run and check
2023-04-02 00:32:36,090 INFO   , Thread-11, runner.py:291, [trial: 5, gen: 5] Waiting for system to converge... 
2023-04-02 00:32:36,732 INFO   , Thread-1, runner.py:360, [trial: 5, gen: 0] System took 00:01:00 to converge
2023-04-02 00:32:36,733 DEBUG  , Thread-1, runner.py:98, [trial: 5, gen: 0] STDOUT: 
2023-04-02 00:32:36,733 DEBUG  , Thread-1, runner.py:99, [trial: 5, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-00-0005/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.112.178:443: connect: connection refused

2023-04-02 00:32:36,823 DEBUG  , Thread-1, runner.py:177, [trial: 5, gen: 0] {}
2023-04-02 00:32:36,823 ERROR  , Thread-1, runner.py:107, [trial: 5, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:32:36,824 INFO   , Thread-1, checker.py:103, [trial: 5, gen: 0] Connection refused, reject mutation
2023-04-02 00:32:36,824 INFO   , Thread-1, acto.py  :472, [trial: 5, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:32:38,690 INFO   , Thread-3, runner.py:360, [trial: 5, gen: 0] System took 00:01:01 to converge
2023-04-02 00:32:38,691 DEBUG  , Thread-3, runner.py:98, [trial: 5, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:32:38,691 DEBUG  , Thread-3, runner.py:99, [trial: 5, gen: 0] STDERR: 
2023-04-02 00:32:38,796 DEBUG  , Thread-3, runner.py:177, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:31:37Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:31:37Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:31:39Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '910', 'uid': 'a2d2beac-f962-4938-90d9-1f5474a70c23'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:37Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:31:37Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:39Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:32:38,815 DEBUG  , Thread-3, runner.py:202, [trial: 5, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-p6w44
2023-04-02 00:32:39,012 WARNING, Thread-3, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:32:39,012 INFO   , Thread-3, input.py :723, [trial: 5, gen: 1] Progress [13] cases left
2023-04-02 00:32:39,014 DEBUG  , Thread-3, test_case.py:46, [trial: 5, gen: 1] Precondition [precondition] Result [False]
2023-04-02 00:32:39,014 DEBUG  , Thread-3, test_case.py:51, [trial: 5, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-02 00:32:39,014 INFO   , Thread-3, acto.py  :267, [trial: 5, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "resourceFieldRef", "divisor"] fails, try setup first
2023-04-02 00:32:39,015 INFO   , Thread-3, acto.py  :107, [trial: 5, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {"resource": "ACTOKEY", "divisor": ".7Mi"}}}]}]
2023-04-02 00:32:39,016 DEBUG  , Thread-3, test_case.py:46, [trial: 5, gen: 1] Precondition [precondition] Result [True]
2023-04-02 00:32:39,016 DEBUG  , Thread-3, test_case.py:51, [trial: 5, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-02 00:32:39,016 DEBUG  , Thread-3, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:32:39,356 INFO   , Thread-3, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:32:40,642 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-02 00:32:40,642 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:32:43,164 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-02 00:32:43,164 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:32:45,287 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:32:52,805 INFO   , Thread-10, runner.py:360, [trial: 4, gen: 0] System took 00:01:01 to converge
2023-04-02 00:32:52,806 DEBUG  , Thread-10, runner.py:98, [trial: 4, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:32:52,807 DEBUG  , Thread-10, runner.py:99, [trial: 4, gen: 0] STDERR: 
2023-04-02 00:32:52,904 DEBUG  , Thread-10, runner.py:177, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:31:51Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:31:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:31:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1038', 'uid': '9612c15d-8e65-46c5-9df6-fb0b76d1f936'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:51Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:31:51Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:53Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:32:52,922 DEBUG  , Thread-10, runner.py:202, [trial: 4, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-6pr7w
2023-04-02 00:32:53,046 WARNING, Thread-10, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:32:53,047 INFO   , Thread-10, input.py :723, [trial: 4, gen: 1] Progress [11] cases left
2023-04-02 00:32:53,047 DEBUG  , Thread-10, test_case.py:51, [trial: 4, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:32:53,047 INFO   , Thread-10, acto.py  :263, [trial: 4, gen: 1] Precondition of ['spec', 'topologySpreadConstraints', 0] satisfies
2023-04-02 00:32:53,047 INFO   , Thread-10, acto.py  :323, [trial: 4, gen: 1] Running bundled testcases
2023-04-02 00:32:53,047 DEBUG  , Thread-10, test_case.py:51, [trial: 4, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:32:53,048 INFO   , Thread-10, acto.py  :107, [trial: 4, gen: 1] JSON patch: [{"op": "add", "path": "/spec/topologySpreadConstraints", "value": [{}]}]
2023-04-02 00:32:53,048 DEBUG  , Thread-10, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:32:53,383 INFO   , Thread-10, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:32:55,381 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-02 00:32:55,382 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:32:57,250 INFO   , Thread-1, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:33:14,470 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:33:16,021 ERROR  , Thread-5, runner.py:363, [trial: 4, gen: 3] System failed to converge within 600 seconds
2023-04-02 00:33:16,023 DEBUG  , Thread-5, runner.py:98, [trial: 4, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:33:16,024 DEBUG  , Thread-5, runner.py:99, [trial: 4, gen: 3] STDERR: 
2023-04-02 00:33:16,154 DEBUG  , Thread-5, runner.py:177, [trial: 4, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:14:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":false}}\n'}, 'creationTimestamp': '2023-04-02T04:13:17Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:21:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:21:48Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2264', 'uid': 'af79e867-c6e1-4bee-8773-bbbeb290ad5e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:21:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:14:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:14:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:13:19Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:21:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:33:16,186 DEBUG  , Thread-5, runner.py:202, [trial: 4, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-x56rl
2023-04-02 00:33:16,980 INFO   , Thread-5, checker.py:134, [trial: 4, gen: 3] Number of system state fields: [3172] Number of delta: [146]
2023-04-02 00:33:16,980 ERROR  , Thread-5, checker.py:561, [trial: 4, gen: 3] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:33:16,981 INFO   , Thread-5, acto.py  :332, [trial: 4, gen: 3] Error result, running recovery
2023-04-02 00:33:16,981 DEBUG  , Thread-5, acto.py  :489, [trial: 4, gen: 3] Running recovery
2023-04-02 00:33:18,956 INFO   , Thread-5, runner.py:291, [trial: 4, gen: 3] Waiting for system to converge... 
2023-04-02 00:33:20,768 WARNING, Thread-4, schema.py:573, [trial: 4, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:33:20,769 DEBUG  , Thread-4, acto.py  :458, [trial: 4, gen: 0] Run and check
2023-04-02 00:33:23,399 INFO   , Thread-4, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:33:25,244 INFO   , Thread-15, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:33:30,279 INFO   , Thread-9, runner.py:360, [trial: 4, gen: 0] System took 00:01:00 to converge
2023-04-02 00:33:30,280 DEBUG  , Thread-9, runner.py:98, [trial: 4, gen: 0] STDOUT: 
2023-04-02 00:33:30,280 DEBUG  , Thread-9, runner.py:99, [trial: 4, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-08-0004/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.212.186:443: connect: connection refused

2023-04-02 00:33:30,378 DEBUG  , Thread-9, runner.py:177, [trial: 4, gen: 0] {}
2023-04-02 00:33:30,378 ERROR  , Thread-9, runner.py:107, [trial: 4, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:33:30,380 INFO   , Thread-9, checker.py:103, [trial: 4, gen: 0] Connection refused, reject mutation
2023-04-02 00:33:30,380 INFO   , Thread-9, acto.py  :472, [trial: 4, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:33:35,523 WARNING, Thread-8, schema.py:573, [trial: 5, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:33:35,524 DEBUG  , Thread-8, acto.py  :458, [trial: 5, gen: 0] Run and check
2023-04-02 00:33:36,213 INFO   , Thread-11, runner.py:360, [trial: 5, gen: 5] System took 00:01:00 to converge
2023-04-02 00:33:36,214 DEBUG  , Thread-11, runner.py:98, [trial: 5, gen: 5] STDOUT: 
2023-04-02 00:33:36,215 DEBUG  , Thread-11, runner.py:99, [trial: 5, gen: 5] STDERR: error: error validating "testrun-crdb-whitebox/trial-10-0005/mutated-5.yaml": error validating data: ValidationError(CrdbCluster.spec.dataStore.pvc.spec.accessModes): invalid type for com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.dataStore.pvc.spec.accessModes: got "string", expected "array"; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 00:33:36,371 DEBUG  , Thread-11, runner.py:177, [trial: 5, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:27:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:27:15Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:30:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:31:34Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1490', 'uid': '96a7db4a-1ae6-45cd-b991-a0a8db00bfe1'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:27:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:27:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:27:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:27:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:31:01Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:33:36,408 DEBUG  , Thread-11, runner.py:202, [trial: 5, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-6gd74
2023-04-02 00:33:36,788 INFO   , Thread-11, common.py:560, [trial: 5, gen: 5] Recognized invalid input through regex: error: error validating "testrun-crdb-whitebox/trial-10-0005/mutated-5.yaml": error validating data: ValidationError(CrdbCluster.spec.dataStore.pvc.spec.accessModes): invalid type for com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.dataStore.pvc.spec.accessModes: got "string", expected "array"; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 00:33:36,788 INFO   , Thread-11, checker.py:213, [trial: 5, gen: 5] Invalid input, reject mutation
2023-04-02 00:33:36,788 INFO   , Thread-11, checker.py:214, [trial: 5, gen: 5] STDOUT: 
2023-04-02 00:33:36,788 INFO   , Thread-11, checker.py:215, [trial: 5, gen: 5] STDERR: error: error validating "testrun-crdb-whitebox/trial-10-0005/mutated-5.yaml": error validating data: ValidationError(CrdbCluster.spec.dataStore.pvc.spec.accessModes): invalid type for com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.dataStore.pvc.spec.accessModes: got "string", expected "array"; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 00:33:37,008 ERROR  , Thread-11, checker.py:301, [trial: 5, gen: 5] Found no matching fields for input delta
2023-04-02 00:33:37,008 ERROR  , Thread-11, checker.py:302, [trial: 5, gen: 5] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'accessModes']]
2023-04-02 00:33:37,227 INFO   , Thread-11, checker.py:134, [trial: 5, gen: 5] Number of system state fields: [3460] Number of delta: [0]
2023-04-02 00:33:37,229 DEBUG  , Thread-11, acto.py  :374, [trial: 5, gen: 5] Invalid input, revert
2023-04-02 00:33:37,229 WARNING, Thread-11, schema.py:573, [trial: 5, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 00:33:37,230 DEBUG  , Thread-11, acto.py  :458, [trial: 5, gen: 5] Run and check
2023-04-02 00:33:37,627 INFO   , Thread-11, runner.py:291, [trial: 5, gen: 5] Waiting for system to converge... 
2023-04-02 00:33:38,214 INFO   , Thread-8, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:33:50,786 INFO   , Thread-9, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:33:53,496 INFO   , Thread-10, runner.py:360, [trial: 4, gen: 1] System took 00:01:00 to converge
2023-04-02 00:33:53,498 DEBUG  , Thread-10, runner.py:98, [trial: 4, gen: 1] STDOUT: 
2023-04-02 00:33:53,498 DEBUG  , Thread-10, runner.py:99, [trial: 4, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-09-0004/mutated-1.yaml": error validating data: [ValidationError(CrdbCluster.spec.topologySpreadConstraints[0]): missing required field "maxSkew" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.topologySpreadConstraints, ValidationError(CrdbCluster.spec.topologySpreadConstraints[0]): missing required field "topologyKey" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.topologySpreadConstraints, ValidationError(CrdbCluster.spec.topologySpreadConstraints[0]): missing required field "whenUnsatisfiable" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.topologySpreadConstraints]; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 00:33:53,598 DEBUG  , Thread-10, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:31:51Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:31:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:31:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1038', 'uid': '9612c15d-8e65-46c5-9df6-fb0b76d1f936'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:51Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:31:51Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:53Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:33:53,617 DEBUG  , Thread-10, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-6pr7w
2023-04-02 00:33:53,762 INFO   , Thread-10, checker.py:213, [trial: 4, gen: 1] Invalid input, reject mutation
2023-04-02 00:33:53,762 INFO   , Thread-10, checker.py:214, [trial: 4, gen: 1] STDOUT: 
2023-04-02 00:33:53,762 INFO   , Thread-10, checker.py:215, [trial: 4, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-09-0004/mutated-1.yaml": error validating data: [ValidationError(CrdbCluster.spec.topologySpreadConstraints[0]): missing required field "maxSkew" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.topologySpreadConstraints, ValidationError(CrdbCluster.spec.topologySpreadConstraints[0]): missing required field "topologyKey" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.topologySpreadConstraints, ValidationError(CrdbCluster.spec.topologySpreadConstraints[0]): missing required field "whenUnsatisfiable" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.topologySpreadConstraints]; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 00:33:54,037 INFO   , Thread-10, checker.py:134, [trial: 4, gen: 1] Number of system state fields: [1500] Number of delta: [0]
2023-04-02 00:33:54,038 DEBUG  , Thread-10, acto.py  :374, [trial: 4, gen: 1] Invalid input, revert
2023-04-02 00:33:54,038 WARNING, Thread-10, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:33:54,038 DEBUG  , Thread-10, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:33:54,411 INFO   , Thread-10, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:34:07,604 INFO   , Thread-1, runner.py:360, [trial: 5, gen: 0] System took 00:01:10 to converge
2023-04-02 00:34:07,605 DEBUG  , Thread-1, runner.py:98, [trial: 5, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:34:07,605 DEBUG  , Thread-1, runner.py:99, [trial: 5, gen: 0] STDERR: 
2023-04-02 00:34:07,766 DEBUG  , Thread-1, runner.py:177, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:33:00Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:32:57Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:32:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:33:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1201', 'uid': '31c0d80a-6c5a-4acf-9551-38112312c0b9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:33:11Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:32:59Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:33:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:33:06Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:34:07,793 DEBUG  , Thread-1, runner.py:202, [trial: 5, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-bnc4x
2023-04-02 00:34:07,966 WARNING, Thread-1, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:34:07,967 INFO   , Thread-1, input.py :723, [trial: 5, gen: 1] Progress [7] cases left
2023-04-02 00:34:07,967 DEBUG  , Thread-1, test_case.py:51, [trial: 5, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:34:07,967 INFO   , Thread-1, acto.py  :263, [trial: 5, gen: 1] Precondition of ['spec', 'cache'] satisfies
2023-04-02 00:34:07,967 INFO   , Thread-1, acto.py  :323, [trial: 5, gen: 1] Running bundled testcases
2023-04-02 00:34:07,967 DEBUG  , Thread-1, test_case.py:51, [trial: 5, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:34:07,967 INFO   , Thread-1, acto.py  :107, [trial: 5, gen: 1] JSON patch: [{"op": "add", "path": "/spec/cache", "value": ""}]
2023-04-02 00:34:07,967 DEBUG  , Thread-1, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:34:08,308 INFO   , Thread-1, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:34:10,750 INFO   , Thread-16, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:34:15,131 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:34:23,523 INFO   , Thread-4, runner.py:360, [trial: 4, gen: 0] System took 00:01:00 to converge
2023-04-02 00:34:23,525 DEBUG  , Thread-4, runner.py:98, [trial: 4, gen: 0] STDOUT: 
2023-04-02 00:34:23,525 DEBUG  , Thread-4, runner.py:99, [trial: 4, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-03-0004/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.253.224:443: connect: connection refused

2023-04-02 00:34:23,617 DEBUG  , Thread-4, runner.py:177, [trial: 4, gen: 0] {}
2023-04-02 00:34:23,618 ERROR  , Thread-4, runner.py:107, [trial: 4, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:34:23,619 INFO   , Thread-4, checker.py:103, [trial: 4, gen: 0] Connection refused, reject mutation
2023-04-02 00:34:23,619 INFO   , Thread-4, acto.py  :472, [trial: 4, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:34:37,749 INFO   , Thread-11, runner.py:360, [trial: 5, gen: 5] System took 00:01:00 to converge
2023-04-02 00:34:37,750 DEBUG  , Thread-11, runner.py:98, [trial: 5, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:34:37,750 DEBUG  , Thread-11, runner.py:99, [trial: 5, gen: 5] STDERR: 
2023-04-02 00:34:37,996 DEBUG  , Thread-11, runner.py:177, [trial: 5, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:27:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:27:15Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:30:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:31:34Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1490', 'uid': '96a7db4a-1ae6-45cd-b991-a0a8db00bfe1'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:27:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:27:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:27:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:27:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:31:01Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:34:38,022 DEBUG  , Thread-11, runner.py:202, [trial: 5, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-6gd74
2023-04-02 00:34:38,652 INFO   , Thread-8, runner.py:360, [trial: 5, gen: 0] System took 00:01:00 to converge
2023-04-02 00:34:38,659 DEBUG  , Thread-8, runner.py:98, [trial: 5, gen: 0] STDOUT: 
2023-04-02 00:34:38,664 DEBUG  , Thread-8, runner.py:99, [trial: 5, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-07-0005/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.46.17:443: connect: connection refused

2023-04-02 00:34:38,811 DEBUG  , Thread-11, acto.py  :383, [trial: 5, gen: 5] Only one patch, no need to isolate
2023-04-02 00:34:38,812 WARNING, Thread-11, schema.py:573, [trial: 5, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-02 00:34:38,813 INFO   , Thread-11, input.py :723, [trial: 5, gen: 7] Progress [7] cases left
2023-04-02 00:34:38,813 DEBUG  , Thread-11, test_case.py:51, [trial: 5, gen: 7] Precondition [increase_precondition] Result [False]
2023-04-02 00:34:38,813 INFO   , Thread-11, acto.py  :267, [trial: 5, gen: 7] Precondition of ["spec", "dataStore", "pvc", "spec", "resources", "limits", "tpkhxkwcgs"] fails, try setup first
2023-04-02 00:34:38,814 INFO   , Thread-11, acto.py  :107, [trial: 5, gen: 7] JSON patch: [{"op": "add", "path": "/spec/dataStore/pvc/spec/resources/limits", "value": {"storage": "1000m", "tpkhxkwcgs": "1000m"}}]
2023-04-02 00:34:38,814 DEBUG  , Thread-11, test_case.py:51, [trial: 5, gen: 7] Precondition [increase_precondition] Result [True]
2023-04-02 00:34:38,814 DEBUG  , Thread-11, acto.py  :458, [trial: 5, gen: 7] Run and check
2023-04-02 00:34:38,894 DEBUG  , Thread-8, runner.py:177, [trial: 5, gen: 0] {}
2023-04-02 00:34:38,894 ERROR  , Thread-8, runner.py:107, [trial: 5, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:34:38,895 INFO   , Thread-8, checker.py:103, [trial: 5, gen: 0] Connection refused, reject mutation
2023-04-02 00:34:38,895 INFO   , Thread-8, acto.py  :472, [trial: 5, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:34:39,170 INFO   , Thread-11, runner.py:291, [trial: 5, gen: 7] Waiting for system to converge... 
2023-04-02 00:34:44,036 INFO   , Thread-4, runner.py:291, [trial: 4, gen: 0] Waiting for system to converge... 
2023-04-02 00:34:59,287 INFO   , Thread-8, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:35:02,225 INFO   , Thread-9, runner.py:360, [trial: 4, gen: 0] System took 00:01:11 to converge
2023-04-02 00:35:02,227 DEBUG  , Thread-9, runner.py:98, [trial: 4, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:35:02,227 DEBUG  , Thread-9, runner.py:99, [trial: 4, gen: 0] STDERR: 
2023-04-02 00:35:02,464 DEBUG  , Thread-9, runner.py:177, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:33:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:33:50Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:33:50Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:34:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1198', 'uid': '62613970-d1fd-4d3a-bff2-1ed05bbe77a8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:34:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:33:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:33:54Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:33:59Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:35:02,492 DEBUG  , Thread-9, runner.py:202, [trial: 4, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-gj97f
2023-04-02 00:35:02,680 WARNING, Thread-9, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:35:02,681 INFO   , Thread-9, input.py :723, [trial: 4, gen: 1] Progress [10] cases left
2023-04-02 00:35:02,682 INFO   , Thread-9, acto.py  :187, Trial 4 finished, completed in 00:04:55
2023-04-02 00:35:02,682 INFO   , Thread-9, acto.py  :188, ---------------------------------------

2023-04-02 00:35:02,705 DEBUG  , Thread-9, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-gj97f
2023-04-02 00:35:08,435 INFO   , Thread-1, runner.py:360, [trial: 5, gen: 1] System took 00:01:00 to converge
2023-04-02 00:35:08,436 DEBUG  , Thread-1, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:35:08,436 DEBUG  , Thread-1, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:35:08,605 DEBUG  , Thread-1, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:33:00Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cache":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:32:57Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:33:11Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cache': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:34:08Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1311', 'uid': '31c0d80a-6c5a-4acf-9551-38112312c0b9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:33:11Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:32:59Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:33:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:33:06Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:35:08,633 DEBUG  , Thread-1, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-bnc4x
2023-04-02 00:35:09,430 INFO   , Thread-1, checker.py:134, [trial: 5, gen: 1] Number of system state fields: [3456] Number of delta: [0]
2023-04-02 00:35:09,432 WARNING, Thread-1, schema.py:573, [trial: 5, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 00:35:09,433 INFO   , Thread-1, input.py :723, [trial: 5, gen: 2] Progress [6] cases left
2023-04-02 00:35:09,433 DEBUG  , Thread-1, test_case.py:51, [trial: 5, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-02 00:35:09,433 INFO   , Thread-1, acto.py  :267, [trial: 5, gen: 2] Precondition of ["spec", "ingress", "sql", "annotations"] fails, try setup first
2023-04-02 00:35:09,434 INFO   , Thread-1, acto.py  :107, [trial: 5, gen: 2] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "annotations": {"ACTOKEY": "ACTOKEY"}}}}]
2023-04-02 00:35:09,434 DEBUG  , Thread-1, test_case.py:51, [trial: 5, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-02 00:35:09,434 DEBUG  , Thread-1, acto.py  :458, [trial: 5, gen: 2] Run and check
2023-04-02 00:35:09,763 INFO   , Thread-1, runner.py:291, [trial: 5, gen: 2] Waiting for system to converge... 
2023-04-02 00:35:10,606 INFO   , Thread-7, runner.py:360, [trial: 5, gen: 1] System took 00:02:46 to converge
2023-04-02 00:35:10,608 DEBUG  , Thread-7, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:35:10,608 DEBUG  , Thread-7, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:35:10,746 DEBUG  , Thread-7, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:31:03Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":[""],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:30:59Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:31:03Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:31:04Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:32:24Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1191', 'uid': 'f0ffb534-a8d4-4ff0-b5a8-95bf968ef295'}, 'spec': {'additionalArgs': [''], 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:14Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:31:02Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:31:03Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:09Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:35:10,774 DEBUG  , Thread-7, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-kmjj9
2023-04-02 00:35:10,891 INFO   , Thread-16, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:35:11,649 INFO   , Thread-7, checker.py:134, [trial: 5, gen: 1] Number of system state fields: [3463] Number of delta: [71]
2023-04-02 00:35:11,656 WARNING, Thread-7, schema.py:573, [trial: 5, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 00:35:11,661 INFO   , Thread-7, input.py :723, [trial: 5, gen: 2] Progress [5] cases left
2023-04-02 00:35:11,661 INFO   , Thread-5, runner.py:360, [trial: 4, gen: 3] System took 00:01:52 to converge
2023-04-02 00:35:11,661 DEBUG  , Thread-7, test_case.py:51, [trial: 5, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-02 00:35:11,662 DEBUG  , Thread-5, runner.py:98, [trial: 4, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:35:11,662 INFO   , Thread-7, acto.py  :267, [trial: 5, gen: 2] Precondition of ["spec", "ingress", "ui", "ingressClassName"] fails, try setup first
2023-04-02 00:35:11,662 DEBUG  , Thread-5, runner.py:99, [trial: 4, gen: 3] STDERR: 
2023-04-02 00:35:11,663 INFO   , Thread-7, acto.py  :107, [trial: 5, gen: 2] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "ingressClassName": "ACTOKEY"}}}]
2023-04-02 00:35:11,664 DEBUG  , Thread-7, test_case.py:51, [trial: 5, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-02 00:35:11,664 DEBUG  , Thread-7, acto.py  :458, [trial: 5, gen: 2] Run and check
2023-04-02 00:35:11,827 DEBUG  , Thread-5, runner.py:177, [trial: 4, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:14:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:13:17Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:21:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:21:48Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3231', 'uid': 'af79e867-c6e1-4bee-8773-bbbeb290ad5e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:21:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:14:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:14:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:13:19Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:21:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:35:11,856 DEBUG  , Thread-5, runner.py:202, [trial: 4, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-x56rl
2023-04-02 00:35:12,084 INFO   , Thread-7, runner.py:291, [trial: 5, gen: 2] Waiting for system to converge... 
2023-04-02 00:35:12,661 INFO   , Thread-5, acto.py  :187, Trial 4 finished, completed in 00:25:27
2023-04-02 00:35:12,662 INFO   , Thread-5, acto.py  :188, ---------------------------------------

2023-04-02 00:35:12,685 DEBUG  , Thread-5, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-x56rl
2023-04-02 00:35:12,732 INFO   , Thread-9, common.py:629, Trial testrun-crdb-whitebox/trial-08-0004 completed without error
2023-04-02 00:35:15,217 INFO   , Thread-2, runner.py:336, [trial: 4, gen: 1] Deployment cockroach-operator-manager is not ready yet
2023-04-02 00:35:17,834 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-8
2023-04-02 00:35:27,291 INFO   , Thread-10, runner.py:360, [trial: 4, gen: 1] System took 00:01:32 to converge
2023-04-02 00:35:27,292 DEBUG  , Thread-10, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:35:27,292 DEBUG  , Thread-10, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:35:27,408 DEBUG  , Thread-10, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:31:51Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:31:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:31:53Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:33:55Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1301', 'uid': '9612c15d-8e65-46c5-9df6-fb0b76d1f936'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:51Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:31:51Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:34:28Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:35:27,429 DEBUG  , Thread-10, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-6pr7w
2023-04-02 00:35:27,808 DEBUG  , Thread-10, acto.py  :383, [trial: 4, gen: 1] Only one patch, no need to isolate
2023-04-02 00:35:27,808 WARNING, Thread-10, schema.py:573, [trial: 4, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:35:27,809 INFO   , Thread-10, input.py :723, [trial: 4, gen: 3] Progress [10] cases left
2023-04-02 00:35:27,809 INFO   , Thread-10, acto.py  :187, Trial 4 finished, completed in 00:07:17
2023-04-02 00:35:27,809 INFO   , Thread-10, acto.py  :188, ---------------------------------------

2023-04-02 00:35:27,832 DEBUG  , Thread-10, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-6pr7w
2023-04-02 00:35:28,477 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-4
2023-04-02 00:35:37,862 INFO   , Thread-10, common.py:629, Trial testrun-crdb-whitebox/trial-09-0004 completed without error
2023-04-02 00:35:39,284 INFO   , Thread-11, runner.py:360, [trial: 5, gen: 7] System took 00:01:00 to converge
2023-04-02 00:35:39,285 DEBUG  , Thread-11, runner.py:98, [trial: 5, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:35:39,285 DEBUG  , Thread-11, runner.py:99, [trial: 5, gen: 7] STDERR: 
2023-04-02 00:35:39,414 DEBUG  , Thread-11, runner.py:177, [trial: 5, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:27:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"limits":{"storage":"1000m","tpkhxkwcgs":"1000m"},"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:27:15Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:34:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:storage': {}, 'f:tpkhxkwcgs': {}}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:34:39Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1815', 'uid': '96a7db4a-1ae6-45cd-b991-a0a8db00bfe1'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'limits': {'storage': '1', 'tpkhxkwcgs': '1'}, 'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:27:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:27:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:27:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:27:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:35:09Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:35:39,448 DEBUG  , Thread-11, runner.py:202, [trial: 5, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-6gd74
2023-04-02 00:35:40,059 ERROR  , Thread-11, checker.py:301, [trial: 5, gen: 7] Found no matching fields for input delta
2023-04-02 00:35:40,059 ERROR  , Thread-11, checker.py:302, [trial: 5, gen: 7] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'resources', 'limits', 'storage']]
2023-04-02 00:35:40,271 INFO   , Thread-11, common.py:560, [trial: 5, gen: 7] Recognized invalid input through regex: failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than 'replicas', 'template', 'updateStrategy' and 'minReadySeconds' are forbidden
2023-04-02 00:35:40,272 INFO   , Thread-11, checker.py:134, [trial: 5, gen: 7] Number of system state fields: [3462] Number of delta: [3]
2023-04-02 00:35:40,273 INFO   , Thread-11, acto.py  :301, [trial: 5, gen: 7] Setup produced invalid input
2023-04-02 00:35:40,273 WARNING, Thread-11, schema.py:573, [trial: 5, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-02 00:35:40,274 DEBUG  , Thread-11, acto.py  :458, [trial: 5, gen: 7] Run and check
2023-04-02 00:35:40,615 INFO   , Thread-11, runner.py:291, [trial: 5, gen: 7] Waiting for system to converge... 
2023-04-02 00:35:41,042 ERROR  , Thread-15, runner.py:363, [trial: 6, gen: 1] System failed to converge within 600 seconds
2023-04-02 00:35:41,044 DEBUG  , Thread-15, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:35:41,045 DEBUG  , Thread-15, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:35:41,208 DEBUG  , Thread-15, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:23:37Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"clientTLSSecret":"ACTOKEY","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:23:34Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:23:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:clientTLSSecret': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:25:40Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1290', 'uid': '1a26ac00-777d-4ccd-bf5b-1b549b2292b5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'clientTLSSecret': 'ACTOKEY', 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:23:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:23:37Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:23:38Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:23:36Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:23:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:35:41,235 DEBUG  , Thread-15, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-sgkp9
2023-04-02 00:35:42,099 INFO   , Thread-15, checker.py:134, [trial: 6, gen: 1] Number of system state fields: [3443] Number of delta: [68]
2023-04-02 00:35:42,100 ERROR  , Thread-15, checker.py:561, [trial: 6, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:35:42,100 ERROR  , Thread-15, checker.py:561, [trial: 6, gen: 1] Found pod: test-cluster-2 with unhealthy status
2023-04-02 00:35:42,101 DEBUG  , Thread-15, acto.py  :489, [trial: 6, gen: 1] Running recovery
2023-04-02 00:35:42,754 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-9
2023-04-02 00:35:44,072 INFO   , Thread-15, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:35:45,496 INFO   , Thread-4, runner.py:360, [trial: 4, gen: 0] System took 00:01:01 to converge
2023-04-02 00:35:45,497 DEBUG  , Thread-4, runner.py:98, [trial: 4, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:35:45,498 DEBUG  , Thread-4, runner.py:99, [trial: 4, gen: 0] STDERR: 
2023-04-02 00:35:45,589 DEBUG  , Thread-4, runner.py:177, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:34:43Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:34:43Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:34:45Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1034', 'uid': 'a7b6ff38-e592-48e2-a52c-157ec8724f75'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:34:44Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:34:44Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:34:46Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:35:45,609 DEBUG  , Thread-4, runner.py:202, [trial: 4, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-s5plr
2023-04-02 00:35:45,721 WARNING, Thread-4, schema.py:573, [trial: 4, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:35:45,721 INFO   , Thread-4, input.py :723, [trial: 4, gen: 1] Progress [6] cases left
2023-04-02 00:35:45,721 DEBUG  , Thread-4, test_case.py:51, [trial: 4, gen: 1] Precondition [push_precondition] Result [False]
2023-04-02 00:35:45,721 INFO   , Thread-4, acto.py  :267, [trial: 4, gen: 1] Precondition of ["spec", "additionalArgs"] fails, try setup first
2023-04-02 00:35:45,722 INFO   , Thread-4, acto.py  :107, [trial: 4, gen: 1] JSON patch: [{"op": "add", "path": "/spec/additionalArgs", "value": ["ACTOKEY"]}]
2023-04-02 00:35:45,722 DEBUG  , Thread-4, test_case.py:51, [trial: 4, gen: 1] Precondition [push_precondition] Result [True]
2023-04-02 00:35:45,722 DEBUG  , Thread-4, acto.py  :458, [trial: 4, gen: 1] Run and check
2023-04-02 00:35:46,133 INFO   , Thread-4, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:35:50,272 ERROR  , Thread-2, runner.py:363, [trial: 4, gen: 1] System failed to converge within 600 seconds
2023-04-02 00:35:50,275 DEBUG  , Thread-2, runner.py:98, [trial: 4, gen: 1] STDOUT: 
2023-04-02 00:35:50,275 DEBUG  , Thread-2, runner.py:99, [trial: 4, gen: 1] STDERR: Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"image":{"name":"cockroachdb/cockroach:v21.2.10"},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-01-0004/mutated--1.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.227.21:443: connect: connection refused

2023-04-02 00:35:50,430 DEBUG  , Thread-2, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:14:38Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"ACTOKEY"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:14:35Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:14:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:14:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:15:46Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1296', 'uid': 'a76d9273-22f1-4e2f-a824-331ace8dcbe8'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'ACTOKEY', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:14:49Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:15:46Z', 'status': 'False', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:14:39Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:14:44Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:35:50,456 DEBUG  , Thread-2, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-jggqm
2023-04-02 00:35:51,221 INFO   , Thread-2, acto.py  :187, Trial 4 finished, completed in 00:24:57
2023-04-02 00:35:51,221 INFO   , Thread-2, acto.py  :188, ---------------------------------------

2023-04-02 00:35:51,236 DEBUG  , Thread-2, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-jggqm
2023-04-02 00:36:07,416 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-1
2023-04-02 00:36:09,886 INFO   , Thread-1, runner.py:360, [trial: 5, gen: 2] System took 00:01:00 to converge
2023-04-02 00:36:09,887 DEBUG  , Thread-1, runner.py:98, [trial: 5, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:36:09,887 DEBUG  , Thread-1, runner.py:99, [trial: 5, gen: 2] STDERR: 
2023-04-02 00:36:10,016 DEBUG  , Thread-1, runner.py:177, [trial: 5, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:35:10Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cache":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"annotations":{"ACTOKEY":"ACTOKEY"},"host":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:32:57Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cache': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:annotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:host': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:35:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:35:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:35:10Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1461', 'uid': '31c0d80a-6c5a-4acf-9551-38112312c0b9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'annotations': {'ACTOKEY': 'ACTOKEY'}, 'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:33:11Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:32:59Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:33:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:33:06Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:35:40Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:36:10,046 DEBUG  , Thread-1, runner.py:202, [trial: 5, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-bnc4x
2023-04-02 00:36:10,932 INFO   , Thread-1, common.py:560, [trial: 5, gen: 2] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 00:36:10,932 INFO   , Thread-1, checker.py:134, [trial: 5, gen: 2] Number of system state fields: [3463] Number of delta: [9]
2023-04-02 00:36:10,933 INFO   , Thread-1, acto.py  :301, [trial: 5, gen: 2] Setup produced invalid input
2023-04-02 00:36:10,934 WARNING, Thread-1, schema.py:573, [trial: 5, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 00:36:10,934 DEBUG  , Thread-1, acto.py  :458, [trial: 5, gen: 2] Run and check
2023-04-02 00:36:10,978 INFO   , Thread-8, runner.py:360, [trial: 5, gen: 0] System took 00:01:11 to converge
2023-04-02 00:36:10,979 DEBUG  , Thread-8, runner.py:98, [trial: 5, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:36:10,979 DEBUG  , Thread-8, runner.py:99, [trial: 5, gen: 0] STDERR: 
2023-04-02 00:36:10,990 INFO   , Thread-16, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:36:11,131 DEBUG  , Thread-8, runner.py:177, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:35:02Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:34:59Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:34:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:35:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:35:03Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1205', 'uid': 'fc33d21b-0a0b-493d-9229-bc5e51a89d33'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:35:13Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:35:01Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:35:02Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:35:08Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:36:11,161 DEBUG  , Thread-8, runner.py:202, [trial: 5, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-qtcvl
2023-04-02 00:36:11,300 INFO   , Thread-1, runner.py:291, [trial: 5, gen: 2] Waiting for system to converge... 
2023-04-02 00:36:11,434 WARNING, Thread-8, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:36:11,435 INFO   , Thread-8, input.py :723, [trial: 5, gen: 1] Progress [12] cases left
2023-04-02 00:36:11,435 DEBUG  , Thread-8, test_case.py:51, [trial: 5, gen: 1] Precondition [change_precondition] Result [False]
2023-04-02 00:36:11,435 INFO   , Thread-8, acto.py  :267, [trial: 5, gen: 1] Precondition of ["spec", "logConfigMap"] fails, try setup first
2023-04-02 00:36:11,435 INFO   , Thread-8, acto.py  :107, [trial: 5, gen: 1] JSON patch: [{"op": "add", "path": "/spec/logConfigMap", "value": "ACTOKEY"}]
2023-04-02 00:36:11,435 DEBUG  , Thread-8, test_case.py:51, [trial: 5, gen: 1] Precondition [change_precondition] Result [True]
2023-04-02 00:36:11,435 DEBUG  , Thread-8, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:36:12,593 INFO   , Thread-9, base.py  :41, Created cluster
2023-04-02 00:36:12,602 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:36:12,763 INFO   , Thread-7, runner.py:360, [trial: 5, gen: 2] System took 00:01:00 to converge
2023-04-02 00:36:12,765 DEBUG  , Thread-7, runner.py:98, [trial: 5, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:36:12,765 DEBUG  , Thread-7, runner.py:99, [trial: 5, gen: 2] STDERR: 
2023-04-02 00:36:12,903 DEBUG  , Thread-7, runner.py:177, [trial: 5, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:31:03Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":[""],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","ingressClassName":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:30:59Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:31:04Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:host': {}, 'f:ingressClassName': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:35:11Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:35:12Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1667', 'uid': 'f0ffb534-a8d4-4ff0-b5a8-95bf968ef295'}, 'spec': {'additionalArgs': [''], 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY', 'ingressClassName': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:14Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:31:02Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:31:03Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:09Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:35:40Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:36:12,930 DEBUG  , Thread-7, runner.py:202, [trial: 5, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-kmjj9
2023-04-02 00:36:13,750 INFO   , Thread-7, common.py:560, [trial: 5, gen: 2] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-02 00:36:13,750 INFO   , Thread-7, checker.py:134, [trial: 5, gen: 2] Number of system state fields: [3469] Number of delta: [6]
2023-04-02 00:36:13,751 INFO   , Thread-7, acto.py  :301, [trial: 5, gen: 2] Setup produced invalid input
2023-04-02 00:36:13,752 WARNING, Thread-7, schema.py:573, [trial: 5, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 00:36:13,752 DEBUG  , Thread-7, acto.py  :458, [trial: 5, gen: 2] Run and check
2023-04-02 00:36:14,095 INFO   , Thread-7, runner.py:291, [trial: 5, gen: 2] Waiting for system to converge... 
2023-04-02 00:36:25,098 INFO   , Thread-5, base.py  :41, Created cluster
2023-04-02 00:36:25,108 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:36:30,060 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:36:37,901 INFO   , Thread-10, base.py  :41, Created cluster
2023-04-02 00:36:37,911 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:36:40,147 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-02 00:36:40,148 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:36:40,735 INFO   , Thread-11, runner.py:360, [trial: 5, gen: 7] System took 00:01:00 to converge
2023-04-02 00:36:40,736 DEBUG  , Thread-11, runner.py:98, [trial: 5, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:36:40,737 DEBUG  , Thread-11, runner.py:99, [trial: 5, gen: 7] STDERR: 
2023-04-02 00:36:40,884 DEBUG  , Thread-11, runner.py:177, [trial: 5, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:27:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:27:15Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:34:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:35:40Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1864', 'uid': '96a7db4a-1ae6-45cd-b991-a0a8db00bfe1'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:27:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:27:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:27:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:27:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:35:09Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:36:40,915 DEBUG  , Thread-11, runner.py:202, [trial: 5, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-6gd74
2023-04-02 00:36:41,805 INFO   , Thread-11, acto.py  :321, [trial: 5, gen: 7] All setups failed
2023-04-02 00:36:41,806 WARNING, Thread-11, schema.py:573, [trial: 5, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-02 00:36:41,806 INFO   , Thread-11, input.py :723, [trial: 5, gen: 9] Progress [6] cases left
2023-04-02 00:36:41,806 DEBUG  , Thread-11, test_case.py:51, [trial: 5, gen: 9] Precondition [decrease_precondition] Result [False]
2023-04-02 00:36:41,807 INFO   , Thread-11, acto.py  :267, [trial: 5, gen: 9] Precondition of ["spec", "dataStore", "pvc", "spec", "resources", "limits", "tpkhxkwcgs"] fails, try setup first
2023-04-02 00:36:41,807 INFO   , Thread-11, acto.py  :107, [trial: 5, gen: 9] JSON patch: [{"op": "add", "path": "/spec/dataStore/pvc/spec/resources/limits", "value": {"storage": "1000m", "tpkhxkwcgs": "1000m"}}]
2023-04-02 00:36:41,808 DEBUG  , Thread-11, test_case.py:51, [trial: 5, gen: 9] Precondition [decrease_precondition] Result [True]
2023-04-02 00:36:41,808 DEBUG  , Thread-11, acto.py  :458, [trial: 5, gen: 9] Run and check
2023-04-02 00:36:42,184 INFO   , Thread-11, runner.py:291, [trial: 5, gen: 9] Waiting for system to converge... 
2023-04-02 00:36:42,315 DEBUG  , Thread-5, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:36:42,394 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:36:52,420 INFO   , Thread-5, deploy.py:91, Operator ready
2023-04-02 00:36:52,420 INFO   , Thread-5, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:36:52,503 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-02 00:36:52,503 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:36:52,602 INFO   , Thread-2, base.py  :41, Created cluster
2023-04-02 00:36:52,616 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:36:54,578 DEBUG  , Thread-5, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:36:54,670 DEBUG  , Thread-10, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:37:04,670 INFO   , Thread-5, deploy.py:91, Operator ready
2023-04-02 00:37:04,670 INFO   , Thread-5, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:37:04,753 INFO   , Thread-10, deploy.py:91, Operator ready
2023-04-02 00:37:04,753 INFO   , Thread-10, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:37:06,752 DEBUG  , Thread-10, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:37:09,960 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:37:11,075 INFO   , Thread-16, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:37:11,559 INFO   , Thread-1, runner.py:360, [trial: 5, gen: 2] System took 00:01:00 to converge
2023-04-02 00:37:11,560 DEBUG  , Thread-1, runner.py:98, [trial: 5, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:37:11,561 DEBUG  , Thread-1, runner.py:99, [trial: 5, gen: 2] STDERR: 
2023-04-02 00:37:11,583 INFO   , Thread-8, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:37:11,718 DEBUG  , Thread-1, runner.py:177, [trial: 5, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:35:10Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cache":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:32:57Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:35:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:35:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cache': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:36:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1510', 'uid': '31c0d80a-6c5a-4acf-9551-38112312c0b9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:33:11Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:32:59Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:33:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:33:06Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:35:40Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:37:11,748 DEBUG  , Thread-1, runner.py:202, [trial: 5, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-bnc4x
2023-04-02 00:37:12,517 INFO   , Thread-1, acto.py  :321, [trial: 5, gen: 2] All setups failed
2023-04-02 00:37:12,517 WARNING, Thread-1, schema.py:573, [trial: 5, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-02 00:37:12,518 INFO   , Thread-1, input.py :723, [trial: 5, gen: 4] Progress [5] cases left
2023-04-02 00:37:12,518 DEBUG  , Thread-1, test_case.py:51, [trial: 5, gen: 4] Precondition [empty_precondition] Result [True]
2023-04-02 00:37:12,518 INFO   , Thread-1, acto.py  :263, [trial: 5, gen: 4] Precondition of ['spec', 'ingress', 'sql', 'annotations'] satisfies
2023-04-02 00:37:12,518 INFO   , Thread-1, acto.py  :323, [trial: 5, gen: 4] Running bundled testcases
2023-04-02 00:37:12,518 DEBUG  , Thread-1, test_case.py:51, [trial: 5, gen: 4] Precondition [empty_precondition] Result [True]
2023-04-02 00:37:12,518 INFO   , Thread-1, acto.py  :107, [trial: 5, gen: 4] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "annotations": {}}}}]
2023-04-02 00:37:12,518 DEBUG  , Thread-1, acto.py  :458, [trial: 5, gen: 4] Run and check
2023-04-02 00:37:12,837 INFO   , Thread-1, runner.py:291, [trial: 5, gen: 4] Waiting for system to converge... 
2023-04-02 00:37:14,221 INFO   , Thread-7, runner.py:360, [trial: 5, gen: 2] System took 00:01:00 to converge
2023-04-02 00:37:14,223 DEBUG  , Thread-7, runner.py:98, [trial: 5, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:37:14,223 DEBUG  , Thread-7, runner.py:99, [trial: 5, gen: 2] STDERR: 
2023-04-02 00:37:14,356 DEBUG  , Thread-7, runner.py:177, [trial: 5, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:31:03Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":[""],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:30:59Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:31:04Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:35:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:36:14Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1717', 'uid': 'f0ffb534-a8d4-4ff0-b5a8-95bf968ef295'}, 'spec': {'additionalArgs': [''], 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:14Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:31:02Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:31:03Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:09Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:35:40Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:37:14,382 DEBUG  , Thread-7, runner.py:202, [trial: 5, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-kmjj9
2023-04-02 00:37:15,101 INFO   , Thread-7, acto.py  :321, [trial: 5, gen: 2] All setups failed
2023-04-02 00:37:15,101 WARNING, Thread-7, schema.py:573, [trial: 5, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-02 00:37:15,102 INFO   , Thread-7, input.py :723, [trial: 5, gen: 4] Progress [4] cases left
2023-04-02 00:37:15,102 DEBUG  , Thread-7, test_case.py:51, [trial: 5, gen: 4] Precondition [change_precondition] Result [False]
2023-04-02 00:37:15,102 INFO   , Thread-7, acto.py  :267, [trial: 5, gen: 4] Precondition of ["spec", "ingress", "ui", "ingressClassName"] fails, try setup first
2023-04-02 00:37:15,103 INFO   , Thread-7, acto.py  :107, [trial: 5, gen: 4] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "ingressClassName": "ACTOKEY"}}}]
2023-04-02 00:37:15,103 DEBUG  , Thread-7, test_case.py:51, [trial: 5, gen: 4] Precondition [change_precondition] Result [True]
2023-04-02 00:37:15,103 DEBUG  , Thread-7, acto.py  :458, [trial: 5, gen: 4] Run and check
2023-04-02 00:37:15,450 INFO   , Thread-7, runner.py:291, [trial: 5, gen: 4] Waiting for system to converge... 
2023-04-02 00:37:16,848 INFO   , Thread-10, deploy.py:91, Operator ready
2023-04-02 00:37:16,848 INFO   , Thread-10, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:37:20,123 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-02 00:37:20,123 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:37:22,115 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:37:32,199 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-02 00:37:32,199 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:37:32,630 WARNING, Thread-9, schema.py:573, [trial: 5, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:37:32,630 DEBUG  , Thread-9, acto.py  :458, [trial: 5, gen: 0] Run and check
2023-04-02 00:37:33,680 ERROR  , Thread-16, runner.py:363, [trial: 4, gen: 1] System failed to converge within 600 seconds
2023-04-02 00:37:33,683 DEBUG  , Thread-16, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:37:33,683 DEBUG  , Thread-16, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:37:33,817 DEBUG  , Thread-16, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:26:24Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"resourceFieldRef":{"containerName":"ACTOKEY","resource":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:26:21Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:26:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:26:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:27:33Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1171', 'uid': 'db5bbd59-cbe5-40e2-bdf1-f64afad0fe74'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'resourceFieldRef': {'containerName': 'ACTOKEY', 'divisor': '0', 'resource': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:26:35Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:26:24Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:26:25Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:26:30Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:37:33,844 DEBUG  , Thread-16, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-rfg7m
2023-04-02 00:37:34,352 DEBUG  , Thread-16, checker.py:278, [trial: 4, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'resource']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 2, 'value_from', 'resource_field_ref', 'resource']]
2023-04-02 00:37:34,352 ERROR  , Thread-16, checker.py:282, [trial: 4, gen: 1] Matched delta inconsistent with input delta
2023-04-02 00:37:34,352 ERROR  , Thread-16, checker.py:283, [trial: 4, gen: 1] Input delta: not present -> ACTOKEY
2023-04-02 00:37:34,352 ERROR  , Thread-16, checker.py:284, [trial: 4, gen: 1] Matched delta: limits.cpu -> not present
2023-04-02 00:37:34,626 INFO   , Thread-16, common.py:569, [trial: 4, gen: 1] Recognized invalid input through field [resource] in error message: reconciling resources on deploy action
2023-04-02 00:37:34,626 INFO   , Thread-16, checker.py:134, [trial: 4, gen: 1] Number of system state fields: [3042] Number of delta: [226]
2023-04-02 00:37:34,626 ERROR  , Thread-16, checker.py:561, [trial: 4, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:37:34,627 DEBUG  , Thread-16, acto.py  :489, [trial: 4, gen: 1] Running recovery
2023-04-02 00:37:35,655 INFO   , Thread-9, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:37:36,906 INFO   , Thread-16, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:37:42,395 INFO   , Thread-11, runner.py:360, [trial: 5, gen: 9] System took 00:01:00 to converge
2023-04-02 00:37:42,396 DEBUG  , Thread-11, runner.py:98, [trial: 5, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:37:42,397 DEBUG  , Thread-11, runner.py:99, [trial: 5, gen: 9] STDERR: 
2023-04-02 00:37:42,536 DEBUG  , Thread-11, runner.py:177, [trial: 5, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:27:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"limits":{"storage":"1000m","tpkhxkwcgs":"1000m"},"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:27:15Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:36:42Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:storage': {}, 'f:tpkhxkwcgs': {}}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:36:42Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2039', 'uid': '96a7db4a-1ae6-45cd-b991-a0a8db00bfe1'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'limits': {'storage': '1', 'tpkhxkwcgs': '1'}, 'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:27:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:27:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:27:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:27:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:37:31Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:37:42,565 DEBUG  , Thread-11, runner.py:202, [trial: 5, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-6gd74
2023-04-02 00:37:43,074 ERROR  , Thread-11, checker.py:301, [trial: 5, gen: 9] Found no matching fields for input delta
2023-04-02 00:37:43,075 ERROR  , Thread-11, checker.py:302, [trial: 5, gen: 9] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'resources', 'limits', 'storage']]
2023-04-02 00:37:43,284 INFO   , Thread-11, common.py:560, [trial: 5, gen: 9] Recognized invalid input through regex: failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than 'replicas', 'template', 'updateStrategy' and 'minReadySeconds' are forbidden
2023-04-02 00:37:43,284 INFO   , Thread-11, checker.py:134, [trial: 5, gen: 9] Number of system state fields: [3462] Number of delta: [3]
2023-04-02 00:37:43,285 INFO   , Thread-11, acto.py  :301, [trial: 5, gen: 9] Setup produced invalid input
2023-04-02 00:37:43,286 WARNING, Thread-11, schema.py:573, [trial: 5, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-02 00:37:43,286 DEBUG  , Thread-11, acto.py  :458, [trial: 5, gen: 9] Run and check
2023-04-02 00:37:44,884 WARNING, Thread-5, schema.py:573, [trial: 5, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:37:44,884 DEBUG  , Thread-5, acto.py  :458, [trial: 5, gen: 0] Run and check
2023-04-02 00:37:45,234 INFO   , Thread-11, runner.py:291, [trial: 5, gen: 9] Waiting for system to converge... 
2023-04-02 00:37:47,629 INFO   , Thread-5, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:37:56,976 WARNING, Thread-10, schema.py:573, [trial: 5, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:37:56,976 DEBUG  , Thread-10, acto.py  :458, [trial: 5, gen: 0] Run and check
2023-04-02 00:37:59,645 INFO   , Thread-10, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:38:04,203 INFO   , Thread-15, runner.py:360, [trial: 6, gen: 1] System took 00:02:20 to converge
2023-04-02 00:38:04,205 DEBUG  , Thread-15, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:38:04,205 DEBUG  , Thread-15, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:38:04,346 DEBUG  , Thread-15, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:23:37Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:23:34Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:23:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:35:44Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2240', 'uid': '1a26ac00-777d-4ccd-bf5b-1b549b2292b5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:23:48Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:23:37Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:23:38Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:23:36Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:23:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:38:04,373 DEBUG  , Thread-15, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-sgkp9
2023-04-02 00:38:05,041 INFO   , Thread-15, acto.py  :187, Trial 6 finished, completed in 00:16:51
2023-04-02 00:38:05,042 INFO   , Thread-15, acto.py  :188, ---------------------------------------

2023-04-02 00:38:05,062 DEBUG  , Thread-15, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-sgkp9
2023-04-02 00:38:12,340 WARNING, Thread-2, schema.py:573, [trial: 5, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:38:12,341 DEBUG  , Thread-2, acto.py  :458, [trial: 5, gen: 0] Run and check
2023-04-02 00:38:12,958 INFO   , Thread-1, runner.py:360, [trial: 5, gen: 4] System took 00:01:00 to converge
2023-04-02 00:38:12,960 DEBUG  , Thread-1, runner.py:98, [trial: 5, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:38:12,960 DEBUG  , Thread-1, runner.py:99, [trial: 5, gen: 4] STDERR: 
2023-04-02 00:38:13,106 DEBUG  , Thread-1, runner.py:177, [trial: 5, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:35:10Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cache":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"annotations":{},"host":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:32:57Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:37:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cache': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:annotations': {}, 'f:host': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:37:12Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1693', 'uid': '31c0d80a-6c5a-4acf-9551-38112312c0b9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:33:11Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:32:59Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:33:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:33:06Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:38:09Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:38:13,134 DEBUG  , Thread-1, runner.py:202, [trial: 5, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-bnc4x
2023-04-02 00:38:13,731 ERROR  , Thread-1, checker.py:301, [trial: 5, gen: 4] Found no matching fields for input delta
2023-04-02 00:38:13,731 ERROR  , Thread-1, checker.py:302, [trial: 5, gen: 4] Input delta [['spec', 'ingress', 'sql', 'host']]
2023-04-02 00:38:13,946 INFO   , Thread-1, common.py:560, [trial: 5, gen: 4] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 00:38:13,946 INFO   , Thread-1, checker.py:134, [trial: 5, gen: 4] Number of system state fields: [3462] Number of delta: [2]
2023-04-02 00:38:13,947 DEBUG  , Thread-1, acto.py  :374, [trial: 5, gen: 4] Invalid input, revert
2023-04-02 00:38:13,947 WARNING, Thread-1, schema.py:573, [trial: 5, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-02 00:38:13,947 DEBUG  , Thread-1, acto.py  :458, [trial: 5, gen: 4] Run and check
2023-04-02 00:38:14,304 INFO   , Thread-1, runner.py:291, [trial: 5, gen: 4] Waiting for system to converge... 
2023-04-02 00:38:15,092 INFO   , Thread-15, acto.py  :195, Test finished
2023-04-02 00:38:15,092 INFO   , Thread-2, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:38:15,093 INFO   , Thread-15, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"dataStore\\\", \\\"hostPath\\\", \\\"type\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"configMapKeyRef\\\", \\\"optional\\\"]\"": [
        "boolean-deletion",
        "boolean-toggle-off"
    ],
    "\"[\\\"spec\\\", \\\"clientTLSSecret\\\"]\"": [
        "string-deletion"
    ]
}
2023-04-02 00:38:15,576 INFO   , Thread-7, runner.py:360, [trial: 5, gen: 4] System took 00:01:00 to converge
2023-04-02 00:38:15,578 DEBUG  , Thread-7, runner.py:98, [trial: 5, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:38:15,578 DEBUG  , Thread-7, runner.py:99, [trial: 5, gen: 4] STDERR: 
2023-04-02 00:38:15,721 DEBUG  , Thread-7, runner.py:177, [trial: 5, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:31:03Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":[""],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","ingressClassName":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:30:59Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:37:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:host': {}, 'f:ingressClassName': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:37:15Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1858', 'uid': 'f0ffb534-a8d4-4ff0-b5a8-95bf968ef295'}, 'spec': {'additionalArgs': [''], 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY', 'ingressClassName': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:14Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:31:02Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:31:03Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:09Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:37:45Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:38:15,745 DEBUG  , Thread-7, runner.py:202, [trial: 5, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-kmjj9
2023-04-02 00:38:16,276 ERROR  , Thread-7, checker.py:301, [trial: 5, gen: 4] Found no matching fields for input delta
2023-04-02 00:38:16,276 ERROR  , Thread-7, checker.py:302, [trial: 5, gen: 4] Input delta [['spec', 'ingress', 'ui', 'host']]
2023-04-02 00:38:16,573 INFO   , Thread-7, common.py:560, [trial: 5, gen: 4] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-02 00:38:16,573 INFO   , Thread-7, checker.py:134, [trial: 5, gen: 4] Number of system state fields: [3469] Number of delta: [3]
2023-04-02 00:38:16,574 INFO   , Thread-7, acto.py  :301, [trial: 5, gen: 4] Setup produced invalid input
2023-04-02 00:38:16,574 WARNING, Thread-7, schema.py:573, [trial: 5, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-02 00:38:16,575 DEBUG  , Thread-7, acto.py  :458, [trial: 5, gen: 4] Run and check
2023-04-02 00:38:16,917 INFO   , Thread-7, runner.py:291, [trial: 5, gen: 4] Waiting for system to converge... 
2023-04-02 00:38:18,896 INFO   , Thread-4, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:38:37,131 INFO   , Thread-9, runner.py:360, [trial: 5, gen: 0] System took 00:01:01 to converge
2023-04-02 00:38:37,132 DEBUG  , Thread-9, runner.py:98, [trial: 5, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:38:37,133 DEBUG  , Thread-9, runner.py:99, [trial: 5, gen: 0] STDERR: 
2023-04-02 00:38:37,188 INFO   , Thread-8, runner.py:360, [trial: 5, gen: 1] System took 00:01:25 to converge
2023-04-02 00:38:37,189 DEBUG  , Thread-8, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:38:37,189 DEBUG  , Thread-8, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:38:37,341 DEBUG  , Thread-9, runner.py:177, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:37:35Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:37:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:37:37Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '917', 'uid': '61bcc790-07e4-4ea6-a490-89bb9a75c452'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:37:35Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:37:35Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:37:37Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:38:37,374 DEBUG  , Thread-8, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:35:02Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"logConfigMap":"ACTOKEY","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:34:59Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:35:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:35:03Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:logConfigMap': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:36:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1321', 'uid': 'fc33d21b-0a0b-493d-9229-bc5e51a89d33'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'logConfigMap': 'ACTOKEY', 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:35:13Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:35:01Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:35:02Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:35:08Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:38:37,375 DEBUG  , Thread-9, runner.py:202, [trial: 5, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-mrt9w
2023-04-02 00:38:37,410 DEBUG  , Thread-8, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-qtcvl
2023-04-02 00:38:37,503 WARNING, Thread-9, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:38:37,505 INFO   , Thread-9, input.py :723, [trial: 5, gen: 1] Progress [10] cases left
2023-04-02 00:38:37,505 DEBUG  , Thread-9, test_case.py:51, [trial: 5, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:38:37,505 INFO   , Thread-9, acto.py  :263, [trial: 5, gen: 1] Precondition of ['spec', 'ingress', 'sql', 'host'] satisfies
2023-04-02 00:38:37,506 INFO   , Thread-9, acto.py  :323, [trial: 5, gen: 1] Running bundled testcases
2023-04-02 00:38:37,506 DEBUG  , Thread-9, test_case.py:51, [trial: 5, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:38:37,506 INFO   , Thread-9, acto.py  :107, [trial: 5, gen: 1] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": ""}}}]
2023-04-02 00:38:37,506 DEBUG  , Thread-9, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:38:37,933 INFO   , Thread-9, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:38:38,176 ERROR  , Thread-8, checker.py:301, [trial: 5, gen: 1] Found no matching fields for input delta
2023-04-02 00:38:38,176 ERROR  , Thread-8, checker.py:302, [trial: 5, gen: 1] Input delta [['spec', 'logConfigMap']]
2023-04-02 00:38:38,414 INFO   , Thread-8, checker.py:134, [trial: 5, gen: 1] Number of system state fields: [3778] Number of delta: [94]
2023-04-02 00:38:38,416 DEBUG  , Thread-8, acto.py  :489, [trial: 5, gen: 1] Running recovery
2023-04-02 00:38:38,795 INFO   , Thread-8, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:38:45,359 INFO   , Thread-11, runner.py:360, [trial: 5, gen: 9] System took 00:01:00 to converge
2023-04-02 00:38:45,360 DEBUG  , Thread-11, runner.py:98, [trial: 5, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:38:45,360 DEBUG  , Thread-11, runner.py:99, [trial: 5, gen: 9] STDERR: 
2023-04-02 00:38:45,496 DEBUG  , Thread-11, runner.py:177, [trial: 5, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:27:19Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:27:15Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:36:42Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:37:45Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2061', 'uid': '96a7db4a-1ae6-45cd-b991-a0a8db00bfe1'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:27:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:27:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:27:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:27:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:37:31Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:38:45,525 DEBUG  , Thread-11, runner.py:202, [trial: 5, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-6gd74
2023-04-02 00:38:46,344 INFO   , Thread-11, acto.py  :321, [trial: 5, gen: 9] All setups failed
2023-04-02 00:38:46,349 INFO   , Thread-11, acto.py  :187, Trial 5 finished, completed in 00:13:55
2023-04-02 00:38:46,349 INFO   , Thread-11, acto.py  :188, ---------------------------------------

2023-04-02 00:38:46,370 DEBUG  , Thread-11, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-6gd74
2023-04-02 00:38:49,491 INFO   , Thread-5, runner.py:360, [trial: 5, gen: 0] System took 00:01:01 to converge
2023-04-02 00:38:49,493 DEBUG  , Thread-5, runner.py:98, [trial: 5, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:38:49,493 DEBUG  , Thread-5, runner.py:99, [trial: 5, gen: 0] STDERR: 
2023-04-02 00:38:49,604 DEBUG  , Thread-5, runner.py:177, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:37:47Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:37:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:37:49Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '909', 'uid': '1f72e09d-c8c4-417a-9ba4-88287e2e1a33'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:37:48Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:37:48Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:37:50Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:38:49,624 DEBUG  , Thread-5, runner.py:202, [trial: 5, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-25x62
2023-04-02 00:38:49,728 WARNING, Thread-5, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:38:49,728 INFO   , Thread-5, input.py :723, [trial: 5, gen: 1] Progress [5] cases left
2023-04-02 00:38:49,728 DEBUG  , Thread-5, test_case.py:51, [trial: 5, gen: 1] Precondition [toggle_off_precondition] Result [True]
2023-04-02 00:38:49,728 INFO   , Thread-5, acto.py  :263, [trial: 5, gen: 1] Precondition of ['spec', 'tlsEnabled'] satisfies
2023-04-02 00:38:49,728 INFO   , Thread-5, acto.py  :323, [trial: 5, gen: 1] Running bundled testcases
2023-04-02 00:38:49,728 DEBUG  , Thread-5, test_case.py:51, [trial: 5, gen: 1] Precondition [toggle_off_precondition] Result [True]
2023-04-02 00:38:49,729 INFO   , Thread-5, acto.py  :107, [trial: 5, gen: 1] JSON patch: [{"op": "replace", "path": "/spec/tlsEnabled", "value": false}]
2023-04-02 00:38:49,729 DEBUG  , Thread-5, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:38:50,045 INFO   , Thread-5, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:38:56,396 INFO   , Thread-11, common.py:629, Trial testrun-crdb-whitebox/trial-10-0005 completed without error
2023-04-02 00:38:57,106 INFO   , Thread-16, runner.py:360, [trial: 4, gen: 1] System took 00:01:20 to converge
2023-04-02 00:38:57,107 DEBUG  , Thread-16, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:38:57,107 DEBUG  , Thread-16, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:38:57,247 DEBUG  , Thread-16, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:26:24Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:26:21Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:26:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:37:36Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2118', 'uid': 'db5bbd59-cbe5-40e2-bdf1-f64afad0fe74'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:26:35Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:26:24Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:26:25Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:26:30Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:38:57,274 DEBUG  , Thread-16, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-rfg7m
2023-04-02 00:38:58,042 INFO   , Thread-16, acto.py  :187, Trial 4 finished, completed in 00:14:59
2023-04-02 00:38:58,042 INFO   , Thread-16, acto.py  :188, ---------------------------------------

2023-04-02 00:38:58,056 DEBUG  , Thread-16, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-rfg7m
2023-04-02 00:39:00,432 INFO   , Thread-10, runner.py:360, [trial: 5, gen: 0] System took 00:01:00 to converge
2023-04-02 00:39:00,433 DEBUG  , Thread-10, runner.py:98, [trial: 5, gen: 0] STDOUT: 
2023-04-02 00:39:00,434 DEBUG  , Thread-10, runner.py:99, [trial: 5, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-09-0005/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.249.90:443: connect: connection refused

2023-04-02 00:39:00,518 DEBUG  , Thread-10, runner.py:177, [trial: 5, gen: 0] {}
2023-04-02 00:39:00,519 ERROR  , Thread-10, runner.py:107, [trial: 5, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:39:00,520 INFO   , Thread-10, checker.py:103, [trial: 5, gen: 0] Connection refused, reject mutation
2023-04-02 00:39:00,520 INFO   , Thread-10, acto.py  :472, [trial: 5, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:39:02,505 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-10
2023-04-02 00:39:13,683 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-15
2023-04-02 00:39:14,429 INFO   , Thread-1, runner.py:360, [trial: 5, gen: 4] System took 00:01:00 to converge
2023-04-02 00:39:14,430 DEBUG  , Thread-1, runner.py:98, [trial: 5, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:39:14,430 DEBUG  , Thread-1, runner.py:99, [trial: 5, gen: 4] STDERR: 
2023-04-02 00:39:14,557 DEBUG  , Thread-1, runner.py:177, [trial: 5, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:35:10Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cache":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:32:57Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:37:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cache': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:sql': {'f:annotations': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:38:14Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1700', 'uid': '31c0d80a-6c5a-4acf-9551-38112312c0b9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:33:11Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:32:59Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:33:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:33:06Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:38:09Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:39:14,585 DEBUG  , Thread-1, runner.py:202, [trial: 5, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-bnc4x
2023-04-02 00:39:15,393 DEBUG  , Thread-1, acto.py  :383, [trial: 5, gen: 4] Only one patch, no need to isolate
2023-04-02 00:39:15,393 WARNING, Thread-1, schema.py:573, [trial: 5, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-02 00:39:15,394 INFO   , Thread-1, input.py :723, [trial: 5, gen: 6] Progress [4] cases left
2023-04-02 00:39:15,394 DEBUG  , Thread-1, test_case.py:51, [trial: 5, gen: 6] Precondition [delete_precondition] Result [False]
2023-04-02 00:39:15,394 INFO   , Thread-1, acto.py  :267, [trial: 5, gen: 6] Precondition of ["spec", "ingress", "ui", "tls", 0, "secretName"] fails, try setup first
2023-04-02 00:39:15,395 INFO   , Thread-1, acto.py  :107, [trial: 5, gen: 6] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": [{"secretName": "ACTOKEY"}]}}}]
2023-04-02 00:39:15,395 DEBUG  , Thread-1, test_case.py:51, [trial: 5, gen: 6] Precondition [delete_precondition] Result [True]
2023-04-02 00:39:15,395 DEBUG  , Thread-1, acto.py  :458, [trial: 5, gen: 6] Run and check
2023-04-02 00:39:15,781 INFO   , Thread-1, runner.py:291, [trial: 5, gen: 6] Waiting for system to converge... 
2023-04-02 00:39:16,802 INFO   , Thread-2, runner.py:360, [trial: 5, gen: 0] System took 00:01:01 to converge
2023-04-02 00:39:16,804 DEBUG  , Thread-2, runner.py:98, [trial: 5, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:39:16,804 DEBUG  , Thread-2, runner.py:99, [trial: 5, gen: 0] STDERR: 
2023-04-02 00:39:16,905 DEBUG  , Thread-2, runner.py:177, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:38:15Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:38:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:38:17Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '902', 'uid': '1890e9a2-127e-46cf-916d-488d8ee5e5f0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:38:15Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:38:15Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:38:17Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:39:16,930 DEBUG  , Thread-2, runner.py:202, [trial: 5, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-hnbz7
2023-04-02 00:39:17,029 WARNING, Thread-2, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:39:17,030 INFO   , Thread-2, input.py :723, [trial: 5, gen: 1] Progress [9] cases left
2023-04-02 00:39:17,031 DEBUG  , Thread-2, test_case.py:51, [trial: 5, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:39:17,031 INFO   , Thread-2, acto.py  :263, [trial: 5, gen: 1] Precondition of ['spec', 'image', 'name'] satisfies
2023-04-02 00:39:17,031 INFO   , Thread-2, acto.py  :323, [trial: 5, gen: 1] Running bundled testcases
2023-04-02 00:39:17,032 DEBUG  , Thread-2, test_case.py:51, [trial: 5, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:39:17,032 INFO   , Thread-2, acto.py  :107, [trial: 5, gen: 1] JSON patch: [{"op": "replace", "path": "/spec/image/name", "value": ""}]
2023-04-02 00:39:17,033 DEBUG  , Thread-2, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:39:17,074 INFO   , Thread-7, runner.py:360, [trial: 5, gen: 4] System took 00:01:00 to converge
2023-04-02 00:39:17,076 DEBUG  , Thread-7, runner.py:98, [trial: 5, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:39:17,077 DEBUG  , Thread-7, runner.py:99, [trial: 5, gen: 4] STDERR: 
2023-04-02 00:39:17,240 DEBUG  , Thread-7, runner.py:177, [trial: 5, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:31:03Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":[""],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:30:59Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:37:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:38:16Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1906', 'uid': 'f0ffb534-a8d4-4ff0-b5a8-95bf968ef295'}, 'spec': {'additionalArgs': [''], 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:14Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:31:02Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:31:03Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:09Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:37:45Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.ingressClassName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:39:17,271 DEBUG  , Thread-7, runner.py:202, [trial: 5, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-kmjj9
2023-04-02 00:39:17,381 INFO   , Thread-2, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:39:18,165 INFO   , Thread-7, acto.py  :321, [trial: 5, gen: 4] All setups failed
2023-04-02 00:39:18,165 WARNING, Thread-7, schema.py:573, [trial: 5, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-02 00:39:18,166 INFO   , Thread-7, input.py :723, [trial: 5, gen: 6] Progress [3] cases left
2023-04-02 00:39:18,166 DEBUG  , Thread-7, test_case.py:51, [trial: 5, gen: 6] Precondition [empty_precondition] Result [True]
2023-04-02 00:39:18,166 INFO   , Thread-7, acto.py  :263, [trial: 5, gen: 6] Precondition of ['spec', 'ingress', 'ui', 'ingressClassName'] satisfies
2023-04-02 00:39:18,166 INFO   , Thread-7, acto.py  :323, [trial: 5, gen: 6] Running bundled testcases
2023-04-02 00:39:18,166 DEBUG  , Thread-7, test_case.py:51, [trial: 5, gen: 6] Precondition [empty_precondition] Result [True]
2023-04-02 00:39:18,166 INFO   , Thread-7, acto.py  :107, [trial: 5, gen: 6] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "ingressClassName": ""}}}]
2023-04-02 00:39:18,166 DEBUG  , Thread-7, acto.py  :458, [trial: 5, gen: 6] Run and check
2023-04-02 00:39:18,511 INFO   , Thread-7, runner.py:291, [trial: 5, gen: 6] Waiting for system to converge... 
2023-04-02 00:39:18,983 INFO   , Thread-4, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:39:20,910 INFO   , Thread-10, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:39:38,268 INFO   , Thread-9, runner.py:360, [trial: 5, gen: 1] System took 00:01:00 to converge
2023-04-02 00:39:38,269 DEBUG  , Thread-9, runner.py:98, [trial: 5, gen: 1] STDOUT: 
2023-04-02 00:39:38,269 DEBUG  , Thread-9, runner.py:99, [trial: 5, gen: 1] STDERR: Error from server (host required for SQL): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"ingress\":{\"sql\":{\"host\":\"\"}},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"ingress":{"sql":{"host":""}},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-08-0005/mutated-1.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: host required for SQL

2023-04-02 00:39:38,373 DEBUG  , Thread-9, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:37:35Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:37:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:37:37Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '917', 'uid': '61bcc790-07e4-4ea6-a490-89bb9a75c452'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:37:35Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:37:35Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:37:37Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:39:38,403 DEBUG  , Thread-9, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-mrt9w
2023-04-02 00:39:38,544 INFO   , Thread-9, common.py:569, [trial: 5, gen: 1] Recognized invalid input through field [host] in error message: Error from server (host required for SQL): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"ingress\":{\"sql\":{\"host\":\"\"}},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"ingress":{"sql":{"host":""}},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-08-0005/mutated-1.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: host required for SQL

2023-04-02 00:39:38,545 INFO   , Thread-9, checker.py:213, [trial: 5, gen: 1] Invalid input, reject mutation
2023-04-02 00:39:38,545 INFO   , Thread-9, checker.py:214, [trial: 5, gen: 1] STDOUT: 
2023-04-02 00:39:38,545 INFO   , Thread-9, checker.py:215, [trial: 5, gen: 1] STDERR: Error from server (host required for SQL): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"cockroachdb/cockroach:v21.2.10\"},\"ingress\":{\"sql\":{\"host\":\"\"}},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"ingress":{"sql":{"host":""}},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-08-0005/mutated-1.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: host required for SQL

2023-04-02 00:39:38,742 INFO   , Thread-9, checker.py:134, [trial: 5, gen: 1] Number of system state fields: [1500] Number of delta: [0]
2023-04-02 00:39:38,744 DEBUG  , Thread-9, acto.py  :374, [trial: 5, gen: 1] Invalid input, revert
2023-04-02 00:39:38,744 WARNING, Thread-9, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:39:38,745 DEBUG  , Thread-9, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:39:39,084 INFO   , Thread-9, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:39:51,096 INFO   , Thread-5, runner.py:360, [trial: 5, gen: 1] System took 00:01:01 to converge
2023-04-02 00:39:51,097 DEBUG  , Thread-5, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:39:51,097 DEBUG  , Thread-5, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:39:51,208 DEBUG  , Thread-5, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":false}}\n'}, 'creationTimestamp': '2023-04-02T04:37:47Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:37:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:37:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:38:51Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1013', 'uid': '1f72e09d-c8c4-417a-9ba4-88287e2e1a33'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:37:48Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:37:48Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:38:51Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:39:51,232 DEBUG  , Thread-5, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-25x62
2023-04-02 00:39:51,706 INFO   , Thread-5, checker.py:134, [trial: 5, gen: 1] Number of system state fields: [1803] Number of delta: [148]
2023-04-02 00:39:51,707 WARNING, Thread-5, schema.py:573, [trial: 5, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 00:39:51,707 INFO   , Thread-5, input.py :723, [trial: 5, gen: 2] Progress [4] cases left
2023-04-02 00:39:51,707 DEBUG  , Thread-5, test_case.py:51, [trial: 5, gen: 2] Precondition [toggle_on_precondition] Result [True]
2023-04-02 00:39:51,707 INFO   , Thread-5, acto.py  :263, [trial: 5, gen: 2] Precondition of ['spec', 'tlsEnabled'] satisfies
2023-04-02 00:39:51,707 INFO   , Thread-5, acto.py  :323, [trial: 5, gen: 2] Running bundled testcases
2023-04-02 00:39:51,707 DEBUG  , Thread-5, test_case.py:51, [trial: 5, gen: 2] Precondition [toggle_on_precondition] Result [True]
2023-04-02 00:39:51,708 INFO   , Thread-5, acto.py  :107, [trial: 5, gen: 2] JSON patch: [{"op": "replace", "path": "/spec/tlsEnabled", "value": true}]
2023-04-02 00:39:51,708 DEBUG  , Thread-5, acto.py  :458, [trial: 5, gen: 2] Run and check
2023-04-02 00:39:52,051 INFO   , Thread-5, runner.py:291, [trial: 5, gen: 2] Waiting for system to converge... 
2023-04-02 00:39:54,733 INFO   , Thread-3, runner.py:360, [trial: 5, gen: 1] System took 00:07:15 to converge
2023-04-02 00:39:54,734 DEBUG  , Thread-3, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:39:54,734 DEBUG  , Thread-3, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:39:54,838 DEBUG  , Thread-3, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:32:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"resourceFieldRef":{"divisor":".7Mi","resource":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:31:37Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:32:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:32:42Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:32:43Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1842', 'uid': 'a2d2beac-f962-4938-90d9-1f5474a70c23'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'resourceFieldRef': {'divisor': '734003200m', 'resource': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:37Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:32:41Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:32:42Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:39Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:39:52Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:39:54,859 DEBUG  , Thread-3, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-p6w44
2023-04-02 00:39:55,240 DEBUG  , Thread-3, checker.py:278, [trial: 5, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'resource']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 2, 'value_from', 'resource_field_ref', 'resource']]
2023-04-02 00:39:55,241 ERROR  , Thread-3, checker.py:282, [trial: 5, gen: 1] Matched delta inconsistent with input delta
2023-04-02 00:39:55,241 ERROR  , Thread-3, checker.py:283, [trial: 5, gen: 1] Input delta: not present -> ACTOKEY
2023-04-02 00:39:55,241 ERROR  , Thread-3, checker.py:284, [trial: 5, gen: 1] Matched delta: not present -> limits.cpu
2023-04-02 00:39:55,345 INFO   , Thread-3, common.py:569, [trial: 5, gen: 1] Recognized invalid input through field [name] in error message: User set image.name, using that field instead of cockroachDBVersion
2023-04-02 00:39:55,345 INFO   , Thread-3, checker.py:134, [trial: 5, gen: 1] Number of system state fields: [2022] Number of delta: [550]
2023-04-02 00:39:55,347 INFO   , Thread-3, acto.py  :301, [trial: 5, gen: 1] Setup produced invalid input
2023-04-02 00:39:55,347 WARNING, Thread-3, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:39:55,348 DEBUG  , Thread-3, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:39:55,724 INFO   , Thread-3, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:39:56,061 INFO   , Thread-11, base.py  :41, Created cluster
2023-04-02 00:39:56,076 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:40:07,353 INFO   , Thread-16, base.py  :41, Created cluster
2023-04-02 00:40:07,367 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:40:13,248 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:40:15,903 INFO   , Thread-1, runner.py:360, [trial: 5, gen: 6] System took 00:01:00 to converge
2023-04-02 00:40:15,904 DEBUG  , Thread-1, runner.py:98, [trial: 5, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:40:15,905 DEBUG  , Thread-1, runner.py:99, [trial: 5, gen: 6] STDERR: 
2023-04-02 00:40:16,049 DEBUG  , Thread-1, runner.py:177, [trial: 5, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:35:10Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cache":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","tls":[{"secretName":"ACTOKEY"}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:32:57Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:39:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cache': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'f:annotations': {}}, 'f:ui': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:39:15Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1884', 'uid': '31c0d80a-6c5a-4acf-9551-38112312c0b9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY', 'tls': [{'secretName': 'ACTOKEY'}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:33:11Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:32:59Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:33:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:33:06Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:40:11Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:40:16,075 DEBUG  , Thread-1, runner.py:202, [trial: 5, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-bnc4x
2023-04-02 00:40:16,854 INFO   , Thread-1, common.py:560, [trial: 5, gen: 6] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-02 00:40:16,854 INFO   , Thread-1, checker.py:134, [trial: 5, gen: 6] Number of system state fields: [3463] Number of delta: [4]
2023-04-02 00:40:16,859 INFO   , Thread-1, acto.py  :301, [trial: 5, gen: 6] Setup produced invalid input
2023-04-02 00:40:16,859 WARNING, Thread-1, schema.py:573, [trial: 5, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-02 00:40:16,860 DEBUG  , Thread-1, acto.py  :458, [trial: 5, gen: 6] Run and check
2023-04-02 00:40:17,170 INFO   , Thread-1, runner.py:291, [trial: 5, gen: 6] Waiting for system to converge... 
2023-04-02 00:40:17,968 INFO   , Thread-2, runner.py:360, [trial: 5, gen: 1] System took 00:01:00 to converge
2023-04-02 00:40:17,970 DEBUG  , Thread-2, runner.py:98, [trial: 5, gen: 1] STDOUT: 
2023-04-02 00:40:17,970 DEBUG  , Thread-2, runner.py:99, [trial: 5, gen: 1] STDERR: Error from server (you have to provide the cockroachDBVersion or cockroach image): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"\"},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"image":{"name":""},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-01-0005/mutated-1.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: you have to provide the cockroachDBVersion or cockroach image

2023-04-02 00:40:18,067 DEBUG  , Thread-2, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:38:15Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:38:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:38:17Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '902', 'uid': '1890e9a2-127e-46cf-916d-488d8ee5e5f0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:38:15Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:38:15Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:38:17Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:40:18,091 DEBUG  , Thread-2, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-hnbz7
2023-04-02 00:40:18,238 INFO   , Thread-2, common.py:569, [trial: 5, gen: 1] Recognized invalid input through field [name] in error message: Error from server (you have to provide the cockroachDBVersion or cockroach image): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"\"},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"image":{"name":""},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-01-0005/mutated-1.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: you have to provide the cockroachDBVersion or cockroach image

2023-04-02 00:40:18,238 INFO   , Thread-2, checker.py:213, [trial: 5, gen: 1] Invalid input, reject mutation
2023-04-02 00:40:18,238 INFO   , Thread-2, checker.py:214, [trial: 5, gen: 1] STDOUT: 
2023-04-02 00:40:18,238 INFO   , Thread-2, checker.py:215, [trial: 5, gen: 1] STDERR: Error from server (you have to provide the cockroachDBVersion or cockroach image): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"\"},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"image":{"name":""},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-01-0005/mutated-1.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: you have to provide the cockroachDBVersion or cockroach image

2023-04-02 00:40:18,437 ERROR  , Thread-2, checker.py:301, [trial: 5, gen: 1] Found no matching fields for input delta
2023-04-02 00:40:18,437 ERROR  , Thread-2, checker.py:302, [trial: 5, gen: 1] Input delta [['spec', 'image', 'name']]
2023-04-02 00:40:18,549 INFO   , Thread-2, checker.py:134, [trial: 5, gen: 1] Number of system state fields: [1500] Number of delta: [0]
2023-04-02 00:40:18,550 DEBUG  , Thread-2, acto.py  :374, [trial: 5, gen: 1] Invalid input, revert
2023-04-02 00:40:18,550 WARNING, Thread-2, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:40:18,551 DEBUG  , Thread-2, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:40:18,631 INFO   , Thread-7, runner.py:360, [trial: 5, gen: 6] System took 00:01:00 to converge
2023-04-02 00:40:18,633 DEBUG  , Thread-7, runner.py:98, [trial: 5, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:40:18,633 DEBUG  , Thread-7, runner.py:99, [trial: 5, gen: 6] STDERR: 
2023-04-02 00:40:18,779 DEBUG  , Thread-7, runner.py:177, [trial: 5, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:31:03Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":[""],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","ingressClassName":""}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:30:59Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:39:18Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:host': {}, 'f:ingressClassName': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:39:18Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2048', 'uid': 'f0ffb534-a8d4-4ff0-b5a8-95bf968ef295'}, 'spec': {'additionalArgs': [''], 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:14Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:31:02Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:31:03Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:09Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:39:48Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:40:18,811 DEBUG  , Thread-7, runner.py:202, [trial: 5, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-kmjj9
2023-04-02 00:40:18,923 INFO   , Thread-2, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:40:19,158 INFO   , Thread-4, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:40:19,772 INFO   , Thread-7, common.py:560, [trial: 5, gen: 6] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 00:40:19,772 INFO   , Thread-7, checker.py:134, [trial: 5, gen: 6] Number of system state fields: [3468] Number of delta: [3]
2023-04-02 00:40:19,773 DEBUG  , Thread-7, acto.py  :374, [trial: 5, gen: 6] Invalid input, revert
2023-04-02 00:40:19,774 WARNING, Thread-7, schema.py:573, [trial: 5, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-02 00:40:19,774 DEBUG  , Thread-7, acto.py  :458, [trial: 5, gen: 6] Run and check
2023-04-02 00:40:20,109 INFO   , Thread-7, runner.py:291, [trial: 5, gen: 6] Waiting for system to converge... 
2023-04-02 00:40:23,344 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-02 00:40:23,344 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:40:24,192 DEBUG  , Thread-16, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:40:25,430 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:40:31,097 INFO   , Thread-8, runner.py:360, [trial: 5, gen: 1] System took 00:01:52 to converge
2023-04-02 00:40:31,099 DEBUG  , Thread-8, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:40:31,099 DEBUG  , Thread-8, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:40:31,207 INFO   , Thread-10, runner.py:360, [trial: 5, gen: 0] System took 00:01:10 to converge
2023-04-02 00:40:31,208 DEBUG  , Thread-10, runner.py:98, [trial: 5, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:40:31,209 DEBUG  , Thread-10, runner.py:99, [trial: 5, gen: 0] STDERR: 
2023-04-02 00:40:31,326 DEBUG  , Thread-8, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:35:02Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:34:59Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:35:03Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:38:38Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1703', 'uid': 'fc33d21b-0a0b-493d-9229-bc5e51a89d33'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:35:13Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:35:01Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:35:02Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:35:08Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:40:31,383 DEBUG  , Thread-8, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-qtcvl
2023-04-02 00:40:31,405 DEBUG  , Thread-10, runner.py:177, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:39:20Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:39:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:39:34Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1206', 'uid': '36a02668-4108-4473-86fb-d90190c7a824'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:39:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:39:22Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:39:29Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:40:31,525 DEBUG  , Thread-10, runner.py:202, [trial: 5, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-b9w5s
2023-04-02 00:40:32,415 WARNING, Thread-10, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:40:32,421 INFO   , Thread-10, input.py :723, [trial: 5, gen: 1] Progress [10] cases left
2023-04-02 00:40:32,426 DEBUG  , Thread-10, test_case.py:51, [trial: 5, gen: 1] Precondition [decrease_precondition] Result [False]
2023-04-02 00:40:32,431 INFO   , Thread-10, acto.py  :267, [trial: 5, gen: 1] Precondition of ["spec", "dataStore", "pvc", "spec", "resources", "limits", "storage"] fails, try setup first
2023-04-02 00:40:32,438 INFO   , Thread-10, acto.py  :107, [trial: 5, gen: 1] JSON patch: [{"op": "add", "path": "/spec/dataStore/pvc/spec/resources/limits", "value": {"storage": "1000m"}}]
2023-04-02 00:40:32,449 DEBUG  , Thread-10, test_case.py:51, [trial: 5, gen: 1] Precondition [decrease_precondition] Result [True]
2023-04-02 00:40:32,454 DEBUG  , Thread-10, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:40:32,657 DEBUG  , Thread-8, checker.py:728, [trial: 5, gen: 1] failed attempt recovering to seed state - system state diff: {'type_changes': {"root['pod']['test-cluster-0']['metadata']['deletion_grace_period_seconds']": {'old_type': <class 'NoneType'>, 'new_type': <class 'int'>, 'old_value': None, 'new_value': 300}, "root['pod']['test-cluster-0']['metadata']['deletion_timestamp']": {'old_type': <class 'NoneType'>, 'new_type': <class 'datetime.datetime'>, 'old_value': None, 'new_value': datetime.datetime(2023, 4, 2, 4, 44, 30, tzinfo=tzutc())}}, 'values_changed': {"root['pod']['test-cluster-0']['spec']['containers'][0]['command'][2]": {'new_value': 'exec /cockroach/cockroach.sh start --advertise-host=$(POD_NAME).test-cluster.cockroach-operator-system --certs-dir=/cockroach/cockroach-certs/ --http-port=8080 --sql-addr=:26257 --listen-addr=:26258 --log= --cache $(expr $MEMORY_LIMIT_MIB / 4)MiB --max-sql-memory $(expr $MEMORY_LIMIT_MIB / 4)MiB --join=test-cluster-0.test-cluster.cockroach-operator-system:26258,test-cluster-1.test-cluster.cockroach-operator-system:26258,test-cluster-2.test-cluster.cockroach-operator-system:26258', 'old_value': 'exec /cockroach/cockroach.sh start --advertise-host=$(POD_NAME).test-cluster.cockroach-operator-system --certs-dir=/cockroach/cockroach-certs/ --http-port=8080 --sql-addr=:26257 --listen-addr=:26258 --log="{sinks: {stderr: {channels: [OPS, HEALTH], redact: true}}}" --cache $(expr $MEMORY_LIMIT_MIB / 4)MiB --max-sql-memory $(expr $MEMORY_LIMIT_MIB / 4)MiB --join=test-cluster-0.test-cluster.cockroach-operator-system:26258,test-cluster-1.test-cluster.cockroach-operator-system:26258,test-cluster-2.test-cluster.cockroach-operator-system:26258'}}}
2023-04-02 00:40:32,663 INFO   , Thread-8, acto.py  :187, Trial 5 finished, completed in 00:09:15
2023-04-02 00:40:32,663 INFO   , Thread-8, acto.py  :188, ---------------------------------------

2023-04-02 00:40:32,679 DEBUG  , Thread-8, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-qtcvl
2023-04-02 00:40:33,001 INFO   , Thread-10, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:40:34,297 INFO   , Thread-16, deploy.py:91, Operator ready
2023-04-02 00:40:34,297 INFO   , Thread-16, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:40:35,518 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-02 00:40:35,519 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:40:36,418 DEBUG  , Thread-16, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:40:46,511 INFO   , Thread-16, deploy.py:91, Operator ready
2023-04-02 00:40:46,511 INFO   , Thread-16, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:40:48,507 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-7
2023-04-02 00:40:57,184 ERROR  , Thread-6, runner.py:363, [trial: 6, gen: 1] System failed to converge within 600 seconds
2023-04-02 00:40:57,186 DEBUG  , Thread-6, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:40:57,187 DEBUG  , Thread-6, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:40:57,341 DEBUG  , Thread-6, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:29:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.io/hostname","operator":"In","values":["kind-worker","kind-worker2","kind-worker3kind-control-plane"]}]}]}}},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:29:44Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:29:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:29:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:affinity': {'.': {}, 'f:nodeAffinity': {'.': {}, 'f:requiredDuringSchedulingIgnoredDuringExecution': {'.': {}, 'f:nodeSelectorTerms': {}}}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:30:57Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1194', 'uid': 'd5736baf-ff75-4661-af74-1976e72a62a2'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'affinity': {'nodeAffinity': {'requiredDuringSchedulingIgnoredDuringExecution': {'nodeSelectorTerms': [{'matchExpressions': [{'key': 'kubernetes.io/hostname', 'operator': 'In', 'values': ['kind-worker', 'kind-worker2', 'kind-worker3kind-control-plane']}]}]}}}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:29:59Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:29:47Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:29:48Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:29:53Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:40:57,368 DEBUG  , Thread-6, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-9pfjg
2023-04-02 00:40:58,225 INFO   , Thread-6, common.py:569, [trial: 6, gen: 1] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-02 00:40:58,226 INFO   , Thread-6, checker.py:134, [trial: 6, gen: 1] Number of system state fields: [3415] Number of delta: [85]
2023-04-02 00:40:58,226 ERROR  , Thread-6, checker.py:561, [trial: 6, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:40:58,226 ERROR  , Thread-6, checker.py:561, [trial: 6, gen: 1] Found pod: test-cluster-2 with unhealthy status
2023-04-02 00:40:58,227 DEBUG  , Thread-6, acto.py  :489, [trial: 6, gen: 1] Running recovery
2023-04-02 00:41:00,204 INFO   , Thread-6, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:41:03,070 INFO   , Thread-3, runner.py:360, [trial: 5, gen: 1] System took 00:01:07 to converge
2023-04-02 00:41:03,071 DEBUG  , Thread-3, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:41:03,072 DEBUG  , Thread-3, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:41:03,221 DEBUG  , Thread-3, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:32:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:31:37Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:39:55Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:40:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1987', 'uid': 'a2d2beac-f962-4938-90d9-1f5474a70c23'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:40:07Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:32:41Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:32:42Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:39Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:40:02Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:41:03,250 DEBUG  , Thread-3, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-p6w44
2023-04-02 00:41:03,740 INFO   , Thread-3, acto.py  :321, [trial: 5, gen: 1] All setups failed
2023-04-02 00:41:03,740 WARNING, Thread-3, schema.py:573, [trial: 5, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:41:03,741 INFO   , Thread-3, input.py :723, [trial: 5, gen: 3] Progress [12] cases left
2023-04-02 00:41:03,742 DEBUG  , Thread-3, test_case.py:46, [trial: 5, gen: 3] Precondition [precondition] Result [False]
2023-04-02 00:41:03,742 DEBUG  , Thread-3, test_case.py:51, [trial: 5, gen: 3] Precondition [change_precondition] Result [False]
2023-04-02 00:41:03,742 INFO   , Thread-3, acto.py  :267, [trial: 5, gen: 3] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "resourceFieldRef", "divisor"] fails, try setup first
2023-04-02 00:41:03,744 INFO   , Thread-3, acto.py  :107, [trial: 5, gen: 3] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {"resource": "ACTOKEY", "divisor": "-5326.92690"}}}]}]
2023-04-02 00:41:03,745 DEBUG  , Thread-3, test_case.py:46, [trial: 5, gen: 3] Precondition [precondition] Result [True]
2023-04-02 00:41:03,745 DEBUG  , Thread-3, test_case.py:51, [trial: 5, gen: 3] Precondition [change_precondition] Result [True]
2023-04-02 00:41:03,745 DEBUG  , Thread-3, acto.py  :458, [trial: 5, gen: 3] Run and check
2023-04-02 00:41:04,082 INFO   , Thread-3, runner.py:291, [trial: 5, gen: 3] Waiting for system to converge... 
2023-04-02 00:41:10,581 INFO   , Thread-9, runner.py:360, [trial: 5, gen: 1] System took 00:01:31 to converge
2023-04-02 00:41:10,583 DEBUG  , Thread-9, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:41:10,583 DEBUG  , Thread-9, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:41:10,728 DEBUG  , Thread-9, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:37:35Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:37:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:39:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1279', 'uid': '61bcc790-07e4-4ea6-a490-89bb9a75c452'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:39:53Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:41Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:42Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:37:37Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:39:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:41:10,757 DEBUG  , Thread-9, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-mrt9w
2023-04-02 00:41:11,250 DEBUG  , Thread-9, acto.py  :383, [trial: 5, gen: 1] Only one patch, no need to isolate
2023-04-02 00:41:11,250 WARNING, Thread-9, schema.py:573, [trial: 5, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:41:11,250 INFO   , Thread-9, input.py :723, [trial: 5, gen: 3] Progress [9] cases left
2023-04-02 00:41:11,250 DEBUG  , Thread-9, test_case.py:51, [trial: 5, gen: 3] Precondition [increase_precondition] Result [False]
2023-04-02 00:41:11,250 INFO   , Thread-9, acto.py  :267, [trial: 5, gen: 3] Precondition of ["spec", "resources", "limits", "kiaqbglcgq"] fails, try setup first
2023-04-02 00:41:11,251 INFO   , Thread-9, acto.py  :107, [trial: 5, gen: 3] JSON patch: [{"op": "add", "path": "/spec/resources/limits/kiaqbglcgq", "value": "1000m"}]
2023-04-02 00:41:11,251 DEBUG  , Thread-9, test_case.py:51, [trial: 5, gen: 3] Precondition [increase_precondition] Result [True]
2023-04-02 00:41:11,251 DEBUG  , Thread-9, acto.py  :458, [trial: 5, gen: 3] Run and check
2023-04-02 00:41:11,612 INFO   , Thread-9, runner.py:291, [trial: 5, gen: 3] Waiting for system to converge... 
2023-04-02 00:41:15,656 WARNING, Thread-11, schema.py:573, [trial: 6, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:41:15,658 DEBUG  , Thread-11, acto.py  :458, [trial: 6, gen: 0] Run and check
2023-04-02 00:41:17,295 INFO   , Thread-1, runner.py:360, [trial: 5, gen: 6] System took 00:01:00 to converge
2023-04-02 00:41:17,297 DEBUG  , Thread-1, runner.py:98, [trial: 5, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:41:17,297 DEBUG  , Thread-1, runner.py:99, [trial: 5, gen: 6] STDERR: 
2023-04-02 00:41:17,438 DEBUG  , Thread-1, runner.py:177, [trial: 5, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:35:10Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cache":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:32:57Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:39:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cache': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:sql': {'f:annotations': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:40:17Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1892', 'uid': '31c0d80a-6c5a-4acf-9551-38112312c0b9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:33:11Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:32:59Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:33:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:33:06Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:40:11Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:41:17,465 DEBUG  , Thread-1, runner.py:202, [trial: 5, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-bnc4x
2023-04-02 00:41:18,253 INFO   , Thread-1, acto.py  :321, [trial: 5, gen: 6] All setups failed
2023-04-02 00:41:18,254 INFO   , Thread-11, runner.py:291, [trial: 6, gen: 0] Waiting for system to converge... 
2023-04-02 00:41:18,254 WARNING, Thread-1, schema.py:573, [trial: 5, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-02 00:41:18,257 INFO   , Thread-1, input.py :723, [trial: 5, gen: 8] Progress [3] cases left
2023-04-02 00:41:18,257 DEBUG  , Thread-1, test_case.py:51, [trial: 5, gen: 8] Precondition [change_precondition] Result [False]
2023-04-02 00:41:18,257 INFO   , Thread-1, acto.py  :267, [trial: 5, gen: 8] Precondition of ["spec", "ingress", "ui", "tls", 0, "secretName"] fails, try setup first
2023-04-02 00:41:18,258 INFO   , Thread-1, acto.py  :107, [trial: 5, gen: 8] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": [{"secretName": "ACTOKEY"}]}}}]
2023-04-02 00:41:18,258 DEBUG  , Thread-1, test_case.py:51, [trial: 5, gen: 8] Precondition [change_precondition] Result [True]
2023-04-02 00:41:18,258 DEBUG  , Thread-1, acto.py  :458, [trial: 5, gen: 8] Run and check
2023-04-02 00:41:18,590 INFO   , Thread-1, runner.py:291, [trial: 5, gen: 8] Waiting for system to converge... 
2023-04-02 00:41:20,229 INFO   , Thread-7, runner.py:360, [trial: 5, gen: 6] System took 00:01:00 to converge
2023-04-02 00:41:20,231 DEBUG  , Thread-7, runner.py:98, [trial: 5, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:41:20,231 DEBUG  , Thread-7, runner.py:99, [trial: 5, gen: 6] STDERR: 
2023-04-02 00:41:20,365 DEBUG  , Thread-7, runner.py:177, [trial: 5, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:31:03Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":[""],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:30:59Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:39:18Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:ui': {'f:ingressClassName': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:40:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2101', 'uid': 'f0ffb534-a8d4-4ff0-b5a8-95bf968ef295'}, 'spec': {'additionalArgs': [''], 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:14Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:31:02Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:31:03Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:09Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:39:48Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:41:20,399 DEBUG  , Thread-7, runner.py:202, [trial: 5, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-kmjj9
2023-04-02 00:41:21,212 DEBUG  , Thread-7, acto.py  :383, [trial: 5, gen: 6] Only one patch, no need to isolate
2023-04-02 00:41:21,212 WARNING, Thread-7, schema.py:573, [trial: 5, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-02 00:41:21,212 INFO   , Thread-7, input.py :723, [trial: 5, gen: 8] Progress [2] cases left
2023-04-02 00:41:21,212 DEBUG  , Thread-7, test_case.py:51, [trial: 5, gen: 8] Precondition [delete_precondition] Result [False]
2023-04-02 00:41:21,212 INFO   , Thread-7, acto.py  :267, [trial: 5, gen: 8] Precondition of ["spec", "grpcPort"] fails, try setup first
2023-04-02 00:41:21,213 INFO   , Thread-7, acto.py  :107, [trial: 5, gen: 8] JSON patch: [{"op": "add", "path": "/spec/grpcPort", "value": 26257}]
2023-04-02 00:41:21,213 DEBUG  , Thread-7, test_case.py:51, [trial: 5, gen: 8] Precondition [delete_precondition] Result [True]
2023-04-02 00:41:21,213 DEBUG  , Thread-7, acto.py  :458, [trial: 5, gen: 8] Run and check
2023-04-02 00:41:23,052 INFO   , Thread-5, runner.py:360, [trial: 5, gen: 2] System took 00:01:31 to converge
2023-04-02 00:41:23,053 DEBUG  , Thread-5, runner.py:98, [trial: 5, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:41:23,053 DEBUG  , Thread-5, runner.py:99, [trial: 5, gen: 2] STDERR: 
2023-04-02 00:41:23,139 INFO   , Thread-7, runner.py:291, [trial: 5, gen: 8] Waiting for system to converge... 
2023-04-02 00:41:23,211 DEBUG  , Thread-5, runner.py:177, [trial: 5, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:37:47Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:37:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:40:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1285', 'uid': '1f72e09d-c8c4-417a-9ba4-88287e2e1a33'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:40:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:54Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:39:53Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:40:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:41:23,240 DEBUG  , Thread-5, runner.py:202, [trial: 5, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-25x62
2023-04-02 00:41:23,861 INFO   , Thread-5, checker.py:134, [trial: 5, gen: 2] Number of system state fields: [4085] Number of delta: [1127]
2023-04-02 00:41:23,863 WARNING, Thread-5, schema.py:573, [trial: 5, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:41:23,864 INFO   , Thread-5, input.py :723, [trial: 5, gen: 3] Progress [3] cases left
2023-04-02 00:41:23,864 DEBUG  , Thread-5, test_case.py:51, [trial: 5, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-02 00:41:23,864 INFO   , Thread-5, acto.py  :267, [trial: 5, gen: 3] Precondition of ["spec", "sqlPort"] fails, try setup first
2023-04-02 00:41:23,864 INFO   , Thread-5, acto.py  :107, [trial: 5, gen: 3] JSON patch: [{"op": "add", "path": "/spec/sqlPort", "value": 26257}]
2023-04-02 00:41:23,864 DEBUG  , Thread-5, test_case.py:51, [trial: 5, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-02 00:41:23,864 DEBUG  , Thread-5, acto.py  :458, [trial: 5, gen: 3] Run and check
2023-04-02 00:41:24,203 INFO   , Thread-5, runner.py:291, [trial: 5, gen: 3] Waiting for system to converge... 
2023-04-02 00:41:26,644 WARNING, Thread-16, schema.py:573, [trial: 5, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:41:26,645 DEBUG  , Thread-16, acto.py  :458, [trial: 5, gen: 0] Run and check
2023-04-02 00:41:29,299 INFO   , Thread-16, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:41:33,119 INFO   , Thread-10, runner.py:360, [trial: 5, gen: 1] System took 00:01:00 to converge
2023-04-02 00:41:33,120 DEBUG  , Thread-10, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:41:33,120 DEBUG  , Thread-10, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:41:33,262 DEBUG  , Thread-10, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"limits":{"storage":"1000m"},"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:39:20Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:39:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:storage': {}}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:40:32Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:40:33Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1373', 'uid': '36a02668-4108-4473-86fb-d90190c7a824'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'limits': {'storage': '1'}, 'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:39:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:39:22Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:39:29Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:41:01Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:41:33,289 DEBUG  , Thread-10, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-b9w5s
2023-04-02 00:41:33,791 ERROR  , Thread-10, checker.py:301, [trial: 5, gen: 1] Found no matching fields for input delta
2023-04-02 00:41:33,792 ERROR  , Thread-10, checker.py:302, [trial: 5, gen: 1] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'resources', 'limits', 'storage']]
2023-04-02 00:41:34,001 INFO   , Thread-10, common.py:560, [trial: 5, gen: 1] Recognized invalid input through regex: failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than 'replicas', 'template', 'updateStrategy' and 'minReadySeconds' are forbidden
2023-04-02 00:41:34,001 INFO   , Thread-10, checker.py:134, [trial: 5, gen: 1] Number of system state fields: [3465] Number of delta: [5]
2023-04-02 00:41:34,002 INFO   , Thread-10, acto.py  :301, [trial: 5, gen: 1] Setup produced invalid input
2023-04-02 00:41:34,003 WARNING, Thread-10, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:41:34,003 DEBUG  , Thread-10, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:41:34,342 INFO   , Thread-10, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:41:41,587 INFO   , Thread-8, base.py  :41, Created cluster
2023-04-02 00:41:41,601 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:41:50,466 INFO   , Thread-2, runner.py:360, [trial: 5, gen: 1] System took 00:01:31 to converge
2023-04-02 00:41:50,467 DEBUG  , Thread-2, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:41:50,468 DEBUG  , Thread-2, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:41:50,616 DEBUG  , Thread-2, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:40:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:38:15Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:38:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:22Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:40:22Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1262', 'uid': '1890e9a2-127e-46cf-916d-488d8ee5e5f0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:40:33Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:40:21Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:40:22Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:38:17Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:40:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:41:50,647 DEBUG  , Thread-2, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-hnbz7
2023-04-02 00:41:51,190 DEBUG  , Thread-2, acto.py  :383, [trial: 5, gen: 1] Only one patch, no need to isolate
2023-04-02 00:41:51,190 WARNING, Thread-2, schema.py:573, [trial: 5, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:41:51,191 INFO   , Thread-2, input.py :723, [trial: 5, gen: 3] Progress [8] cases left
2023-04-02 00:41:51,191 DEBUG  , Thread-2, test_case.py:51, [trial: 5, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-02 00:41:51,191 INFO   , Thread-2, acto.py  :267, [trial: 5, gen: 3] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "secretKeyRef", "key"] fails, try setup first
2023-04-02 00:41:51,191 INFO   , Thread-2, acto.py  :107, [trial: 5, gen: 3] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"secretKeyRef": {"key": "ACTOKEY"}}}]}]
2023-04-02 00:41:51,192 DEBUG  , Thread-2, test_case.py:51, [trial: 5, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-02 00:41:51,192 DEBUG  , Thread-2, acto.py  :458, [trial: 5, gen: 3] Run and check
2023-04-02 00:41:51,517 INFO   , Thread-2, runner.py:291, [trial: 5, gen: 3] Waiting for system to converge... 
2023-04-02 00:41:59,147 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:42:01,557 INFO   , Thread-6, runner.py:360, [trial: 6, gen: 1] System took 00:01:01 to converge
2023-04-02 00:42:01,559 DEBUG  , Thread-6, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:42:01,559 DEBUG  , Thread-6, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:42:01,714 DEBUG  , Thread-6, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:29:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:29:44Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:29:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:41:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2137', 'uid': 'd5736baf-ff75-4661-af74-1976e72a62a2'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:29:59Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:29:47Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:29:48Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:29:53Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:42:01,746 DEBUG  , Thread-6, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-9pfjg
2023-04-02 00:42:02,413 INFO   , Thread-6, acto.py  :187, Trial 6 finished, completed in 00:14:39
2023-04-02 00:42:02,414 INFO   , Thread-6, acto.py  :188, ---------------------------------------

2023-04-02 00:42:02,438 DEBUG  , Thread-6, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-9pfjg
2023-04-02 00:42:08,210 INFO   , Thread-4, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:42:09,242 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-02 00:42:09,242 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:42:10,536 INFO   , Thread-3, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:42:11,294 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:42:17,767 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-5
2023-04-02 00:42:18,400 INFO   , Thread-11, runner.py:360, [trial: 6, gen: 0] System took 00:01:00 to converge
2023-04-02 00:42:18,401 DEBUG  , Thread-11, runner.py:98, [trial: 6, gen: 0] STDOUT: 
2023-04-02 00:42:18,401 DEBUG  , Thread-11, runner.py:99, [trial: 6, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-10-0006/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.219.138:443: connect: connection refused

2023-04-02 00:42:18,498 DEBUG  , Thread-11, runner.py:177, [trial: 6, gen: 0] {}
2023-04-02 00:42:18,498 ERROR  , Thread-11, runner.py:107, [trial: 6, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:42:18,499 INFO   , Thread-11, checker.py:103, [trial: 6, gen: 0] Connection refused, reject mutation
2023-04-02 00:42:18,499 INFO   , Thread-11, acto.py  :472, [trial: 6, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:42:18,714 INFO   , Thread-1, runner.py:360, [trial: 5, gen: 8] System took 00:01:00 to converge
2023-04-02 00:42:18,715 DEBUG  , Thread-1, runner.py:98, [trial: 5, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:42:18,715 DEBUG  , Thread-1, runner.py:99, [trial: 5, gen: 8] STDERR: 
2023-04-02 00:42:18,868 DEBUG  , Thread-1, runner.py:177, [trial: 5, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:35:10Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cache":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","tls":[{"secretName":"ACTOKEY"}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:32:57Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:41:18Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cache': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'f:annotations': {}}, 'f:ui': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:41:18Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2037', 'uid': '31c0d80a-6c5a-4acf-9551-38112312c0b9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY', 'tls': [{'secretName': 'ACTOKEY'}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:33:11Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:32:59Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:33:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:33:06Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:41:48Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:42:18,897 DEBUG  , Thread-1, runner.py:202, [trial: 5, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-bnc4x
2023-04-02 00:42:19,476 ERROR  , Thread-1, checker.py:301, [trial: 5, gen: 8] Found no matching fields for input delta
2023-04-02 00:42:19,476 ERROR  , Thread-1, checker.py:302, [trial: 5, gen: 8] Input delta [['spec', 'ingress', 'ui', 'host']]
2023-04-02 00:42:19,689 INFO   , Thread-1, common.py:560, [trial: 5, gen: 8] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-02 00:42:19,689 INFO   , Thread-1, checker.py:134, [trial: 5, gen: 8] Number of system state fields: [3463] Number of delta: [3]
2023-04-02 00:42:19,690 INFO   , Thread-1, acto.py  :301, [trial: 5, gen: 8] Setup produced invalid input
2023-04-02 00:42:19,690 WARNING, Thread-1, schema.py:573, [trial: 5, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-02 00:42:19,691 DEBUG  , Thread-1, acto.py  :458, [trial: 5, gen: 8] Run and check
2023-04-02 00:42:21,380 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-02 00:42:21,381 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:42:21,717 INFO   , Thread-1, runner.py:291, [trial: 5, gen: 8] Waiting for system to converge... 
2023-04-02 00:42:23,273 INFO   , Thread-7, runner.py:360, [trial: 5, gen: 8] System took 00:01:00 to converge
2023-04-02 00:42:23,275 DEBUG  , Thread-7, runner.py:98, [trial: 5, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:42:23,275 DEBUG  , Thread-7, runner.py:99, [trial: 5, gen: 8] STDERR: 
2023-04-02 00:42:23,422 DEBUG  , Thread-7, runner.py:177, [trial: 5, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:31:03Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":[""],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"grpcPort":26257,"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:30:59Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:41:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:grpcPort': {}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:ui': {'f:ingressClassName': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:41:23Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2242', 'uid': 'f0ffb534-a8d4-4ff0-b5a8-95bf968ef295'}, 'spec': {'additionalArgs': [''], 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26257, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:14Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:31:02Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:31:03Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:09Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:39:48Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}, {'lastTransitionTime': '2023-04-02T04:41:51Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: spec.ports[2]: Duplicate value: core.ServicePort{Name:"", Protocol:"TCP", AppProtocol:(*string)(nil), Port:26257, TargetPort:intstr.IntOrString{Type:0, IntVal:0, StrVal:""}, NodePort:0}', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:42:23,450 DEBUG  , Thread-7, runner.py:202, [trial: 5, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-kmjj9
2023-04-02 00:42:24,260 INFO   , Thread-7, common.py:560, [trial: 5, gen: 8] Recognized invalid input through regex: failed to reconcile test-cluster: Service "test-cluster" is invalid: spec.ports[2]: Duplicate value: core.ServicePort{Name:"", Protocol:"TCP", AppProtocol:(*string)(nil), Port:26257, TargetPort:intstr.IntOrString{Type:0, IntVal:0, StrVal:""}, NodePort:0}
2023-04-02 00:42:24,260 INFO   , Thread-7, checker.py:134, [trial: 5, gen: 8] Number of system state fields: [3471] Number of delta: [5]
2023-04-02 00:42:24,261 INFO   , Thread-7, acto.py  :301, [trial: 5, gen: 8] Setup produced invalid input
2023-04-02 00:42:24,262 WARNING, Thread-7, schema.py:573, [trial: 5, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-02 00:42:24,262 DEBUG  , Thread-7, acto.py  :458, [trial: 5, gen: 8] Run and check
2023-04-02 00:42:24,522 INFO   , Thread-5, runner.py:360, [trial: 5, gen: 3] System took 00:01:00 to converge
2023-04-02 00:42:24,523 DEBUG  , Thread-5, runner.py:98, [trial: 5, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:42:24,524 DEBUG  , Thread-5, runner.py:99, [trial: 5, gen: 3] STDERR: 
2023-04-02 00:42:24,658 INFO   , Thread-7, runner.py:291, [trial: 5, gen: 8] Waiting for system to converge... 
2023-04-02 00:42:24,696 DEBUG  , Thread-5, runner.py:177, [trial: 5, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"sqlPort":26257,"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:37:47Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:37:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1435', 'uid': '1f72e09d-c8c4-417a-9ba4-88287e2e1a33'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:40:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:54Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:39:53Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:40:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:42:24,726 DEBUG  , Thread-5, runner.py:202, [trial: 5, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-25x62
2023-04-02 00:42:25,375 ERROR  , Thread-5, checker.py:301, [trial: 5, gen: 3] Found no matching fields for input delta
2023-04-02 00:42:25,375 ERROR  , Thread-5, checker.py:302, [trial: 5, gen: 3] Input delta [['spec', 'sqlPort']]
2023-04-02 00:42:25,618 INFO   , Thread-5, checker.py:134, [trial: 5, gen: 3] Number of system state fields: [4090] Number of delta: [8]
2023-04-02 00:42:25,619 DEBUG  , Thread-5, acto.py  :489, [trial: 5, gen: 3] Running recovery
2023-04-02 00:42:25,953 INFO   , Thread-5, runner.py:291, [trial: 5, gen: 3] Waiting for system to converge... 
2023-04-02 00:42:30,692 INFO   , Thread-16, runner.py:360, [trial: 5, gen: 0] System took 00:01:01 to converge
2023-04-02 00:42:30,693 DEBUG  , Thread-16, runner.py:98, [trial: 5, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:42:30,693 DEBUG  , Thread-16, runner.py:99, [trial: 5, gen: 0] STDERR: 
2023-04-02 00:42:30,810 DEBUG  , Thread-16, runner.py:177, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:41:29Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:41:29Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:41:31Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '906', 'uid': 'cce6499f-a31f-4f72-a644-915be26cc0d4'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:41:29Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:41:29Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:41:31Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:42:30,835 DEBUG  , Thread-16, runner.py:202, [trial: 5, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-bchdc
2023-04-02 00:42:30,959 WARNING, Thread-16, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:42:30,960 INFO   , Thread-16, input.py :723, [trial: 5, gen: 1] Progress [3] cases left
2023-04-02 00:42:30,960 DEBUG  , Thread-16, test_case.py:51, [trial: 5, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:42:30,960 INFO   , Thread-16, acto.py  :263, [trial: 5, gen: 1] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'containerName'] satisfies
2023-04-02 00:42:30,960 INFO   , Thread-16, acto.py  :323, [trial: 5, gen: 1] Running bundled testcases
2023-04-02 00:42:30,960 DEBUG  , Thread-16, test_case.py:51, [trial: 5, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:42:30,961 INFO   , Thread-16, acto.py  :107, [trial: 5, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {"resource": "ACTOKEY", "containerName": ""}}}]}]
2023-04-02 00:42:30,961 DEBUG  , Thread-16, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:42:31,292 INFO   , Thread-16, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:42:34,466 INFO   , Thread-10, runner.py:360, [trial: 5, gen: 1] System took 00:01:00 to converge
2023-04-02 00:42:34,467 DEBUG  , Thread-10, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:42:34,467 DEBUG  , Thread-10, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:42:34,614 DEBUG  , Thread-10, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:39:20Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:39:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:41:34Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1421', 'uid': '36a02668-4108-4473-86fb-d90190c7a824'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:39:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:39:22Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:39:29Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:41:01Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:42:34,638 DEBUG  , Thread-10, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-b9w5s
2023-04-02 00:42:35,454 INFO   , Thread-10, acto.py  :321, [trial: 5, gen: 1] All setups failed
2023-04-02 00:42:35,454 WARNING, Thread-10, schema.py:573, [trial: 5, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:42:35,454 INFO   , Thread-10, input.py :723, [trial: 5, gen: 3] Progress [9] cases left
2023-04-02 00:42:35,454 DEBUG  , Thread-10, test_case.py:51, [trial: 5, gen: 3] Precondition [change_image_pull_policy_precondition] Result [False]
2023-04-02 00:42:35,454 INFO   , Thread-10, acto.py  :267, [trial: 5, gen: 3] Precondition of ["spec", "image", "pullPolicy"] fails, try setup first
2023-04-02 00:42:35,455 INFO   , Thread-10, acto.py  :107, [trial: 5, gen: 3] JSON patch: [{"op": "add", "path": "/spec/image/pullPolicy", "value": "Always"}]
2023-04-02 00:42:35,455 DEBUG  , Thread-10, test_case.py:51, [trial: 5, gen: 3] Precondition [change_image_pull_policy_precondition] Result [True]
2023-04-02 00:42:35,455 DEBUG  , Thread-10, acto.py  :458, [trial: 5, gen: 3] Run and check
2023-04-02 00:42:35,801 INFO   , Thread-10, runner.py:291, [trial: 5, gen: 3] Waiting for system to converge... 
2023-04-02 00:42:38,927 INFO   , Thread-11, runner.py:291, [trial: 6, gen: 0] Waiting for system to converge... 
2023-04-02 00:43:01,521 WARNING, Thread-8, schema.py:573, [trial: 6, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:43:01,522 DEBUG  , Thread-8, acto.py  :458, [trial: 6, gen: 0] Run and check
2023-04-02 00:43:04,161 INFO   , Thread-8, runner.py:291, [trial: 6, gen: 0] Waiting for system to converge... 
2023-04-02 00:43:08,297 INFO   , Thread-4, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:43:10,619 INFO   , Thread-3, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:43:12,314 INFO   , Thread-6, base.py  :41, Created cluster
2023-04-02 00:43:12,329 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:43:21,845 INFO   , Thread-1, runner.py:360, [trial: 5, gen: 8] System took 00:01:00 to converge
2023-04-02 00:43:21,847 DEBUG  , Thread-1, runner.py:98, [trial: 5, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:43:21,847 DEBUG  , Thread-1, runner.py:99, [trial: 5, gen: 8] STDERR: 
2023-04-02 00:43:21,975 DEBUG  , Thread-1, runner.py:177, [trial: 5, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:35:10Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"cache":"","dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:32:57Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:41:18Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:cache': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:sql': {'f:annotations': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:42:21Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2088', 'uid': '31c0d80a-6c5a-4acf-9551-38112312c0b9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:33:11Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:32:59Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:33:01Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:33:06Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:41:48Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].secretName: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 00:43:22,004 DEBUG  , Thread-1, runner.py:202, [trial: 5, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-bnc4x
2023-04-02 00:43:22,891 INFO   , Thread-1, acto.py  :321, [trial: 5, gen: 8] All setups failed
2023-04-02 00:43:22,897 INFO   , Thread-1, acto.py  :187, Trial 5 finished, completed in 00:14:00
2023-04-02 00:43:22,897 INFO   , Thread-1, acto.py  :188, ---------------------------------------

2023-04-02 00:43:22,919 DEBUG  , Thread-1, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-bnc4x
2023-04-02 00:43:24,780 INFO   , Thread-7, runner.py:360, [trial: 5, gen: 8] System took 00:01:00 to converge
2023-04-02 00:43:24,781 DEBUG  , Thread-7, runner.py:98, [trial: 5, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:43:24,781 DEBUG  , Thread-7, runner.py:99, [trial: 5, gen: 8] STDERR: 
2023-04-02 00:43:24,909 DEBUG  , Thread-7, runner.py:177, [trial: 5, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:31:03Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":[""],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:30:59Z', 'generation': 10, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:41:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:ui': {'f:ingressClassName': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:42:24Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2290', 'uid': 'f0ffb534-a8d4-4ff0-b5a8-95bf968ef295'}, 'spec': {'additionalArgs': [''], 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:31:14Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:31:02Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:31:03Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:09Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:39:48Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}, {'lastTransitionTime': '2023-04-02T04:41:51Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: spec.ports[2]: Duplicate value: core.ServicePort{Name:"", Protocol:"TCP", AppProtocol:(*string)(nil), Port:26257, TargetPort:intstr.IntOrString{Type:0, IntVal:0, StrVal:""}, NodePort:0}', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:43:24,940 DEBUG  , Thread-7, runner.py:202, [trial: 5, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-kmjj9
2023-04-02 00:43:25,800 INFO   , Thread-7, acto.py  :321, [trial: 5, gen: 8] All setups failed
2023-04-02 00:43:25,804 INFO   , Thread-7, acto.py  :187, Trial 5 finished, completed in 00:14:39
2023-04-02 00:43:25,805 INFO   , Thread-7, acto.py  :188, ---------------------------------------

2023-04-02 00:43:25,824 DEBUG  , Thread-7, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-kmjj9
2023-04-02 00:43:26,075 INFO   , Thread-5, runner.py:360, [trial: 5, gen: 3] System took 00:01:00 to converge
2023-04-02 00:43:26,076 DEBUG  , Thread-5, runner.py:98, [trial: 5, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:43:26,077 DEBUG  , Thread-5, runner.py:99, [trial: 5, gen: 3] STDERR: 
2023-04-02 00:43:26,249 DEBUG  , Thread-5, runner.py:177, [trial: 5, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:54Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:37:47Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:37:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1535', 'uid': '1f72e09d-c8c4-417a-9ba4-88287e2e1a33'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:40:05Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:54Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:39:53Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:40:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:43:26,281 DEBUG  , Thread-5, runner.py:202, [trial: 5, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-25x62
2023-04-02 00:43:26,992 INFO   , Thread-5, acto.py  :187, Trial 5 finished, completed in 00:08:04
2023-04-02 00:43:26,992 INFO   , Thread-5, acto.py  :188, ---------------------------------------

2023-04-02 00:43:27,018 DEBUG  , Thread-5, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-25x62
2023-04-02 00:43:29,737 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:43:32,944 INFO   , Thread-1, common.py:629, Trial testrun-crdb-whitebox/trial-00-0005 completed without error
2023-04-02 00:43:35,849 INFO   , Thread-7, common.py:629, Trial testrun-crdb-whitebox/trial-06-0005 completed without error
2023-04-02 00:43:38,802 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-0
2023-04-02 00:43:39,913 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 00:43:39,913 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:43:40,079 INFO   , Thread-9, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:43:40,293 INFO   , Thread-11, runner.py:360, [trial: 6, gen: 0] System took 00:01:01 to converge
2023-04-02 00:43:40,294 DEBUG  , Thread-11, runner.py:98, [trial: 6, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:43:40,295 DEBUG  , Thread-11, runner.py:99, [trial: 6, gen: 0] STDERR: 
2023-04-02 00:43:40,385 DEBUG  , Thread-11, runner.py:177, [trial: 6, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:42:38Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:42:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:42:40Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1036', 'uid': '5a2b001f-e409-4f23-8793-9cb6bcd02cda'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:42:38Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:42:38Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:42:41Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:43:40,404 DEBUG  , Thread-11, runner.py:202, [trial: 6, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-4b66k
2023-04-02 00:43:40,529 WARNING, Thread-11, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:43:40,530 INFO   , Thread-11, input.py :723, [trial: 6, gen: 1] Progress [5] cases left
2023-04-02 00:43:40,530 DEBUG  , Thread-11, test_case.py:51, [trial: 6, gen: 1] Precondition [all_on_one_node_precondition] Result [True]
2023-04-02 00:43:40,530 INFO   , Thread-11, acto.py  :263, [trial: 6, gen: 1] Precondition of ['spec', 'affinity'] satisfies
2023-04-02 00:43:40,530 INFO   , Thread-11, acto.py  :323, [trial: 6, gen: 1] Running bundled testcases
2023-04-02 00:43:40,530 DEBUG  , Thread-11, test_case.py:51, [trial: 6, gen: 1] Precondition [all_on_one_node_precondition] Result [True]
2023-04-02 00:43:40,530 INFO   , Thread-11, acto.py  :107, [trial: 6, gen: 1] JSON patch: [{"op": "add", "path": "/spec/affinity", "value": {"nodeAffinity": {"requiredDuringSchedulingIgnoredDuringExecution": {"nodeSelectorTerms": [{"matchExpressions": [{"key": "kubernetes.io/hostname", "operator": "In", "values": ["kind-worker"]}]}]}}}}]
2023-04-02 00:43:40,530 DEBUG  , Thread-11, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 00:43:40,882 INFO   , Thread-11, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:43:41,851 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-6
2023-04-02 00:43:42,113 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:43:45,796 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-4
2023-04-02 00:43:52,203 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 00:43:52,203 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:44:04,294 INFO   , Thread-8, runner.py:360, [trial: 6, gen: 0] System took 00:01:00 to converge
2023-04-02 00:44:04,296 DEBUG  , Thread-8, runner.py:98, [trial: 6, gen: 0] STDOUT: 
2023-04-02 00:44:04,296 DEBUG  , Thread-8, runner.py:99, [trial: 6, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-07-0006/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.122.44:443: connect: connection refused

2023-04-02 00:44:04,391 DEBUG  , Thread-8, runner.py:177, [trial: 6, gen: 0] {}
2023-04-02 00:44:04,391 ERROR  , Thread-8, runner.py:107, [trial: 6, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:44:04,392 INFO   , Thread-8, checker.py:103, [trial: 6, gen: 0] Connection refused, reject mutation
2023-04-02 00:44:04,392 INFO   , Thread-8, acto.py  :472, [trial: 6, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:44:08,377 INFO   , Thread-4, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:44:19,843 INFO   , Thread-2, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:44:24,796 INFO   , Thread-8, runner.py:291, [trial: 6, gen: 0] Waiting for system to converge... 
2023-04-02 00:44:28,355 INFO   , Thread-1, base.py  :41, Created cluster
2023-04-02 00:44:28,370 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:44:30,821 INFO   , Thread-5, base.py  :41, Created cluster
2023-04-02 00:44:30,833 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:44:32,331 WARNING, Thread-6, schema.py:573, [trial: 7, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:44:32,331 DEBUG  , Thread-6, acto.py  :458, [trial: 7, gen: 0] Run and check
2023-04-02 00:44:35,226 INFO   , Thread-6, runner.py:291, [trial: 7, gen: 0] Waiting for system to converge... 
2023-04-02 00:44:37,121 INFO   , Thread-7, base.py  :41, Created cluster
2023-04-02 00:44:37,132 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:44:41,115 INFO   , Thread-11, runner.py:360, [trial: 6, gen: 1] System took 00:01:00 to converge
2023-04-02 00:44:41,116 DEBUG  , Thread-11, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:44:41,117 DEBUG  , Thread-11, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:44:41,228 DEBUG  , Thread-11, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.io/hostname","operator":"In","values":["kind-worker"]}]}]}}},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:42:38Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:42:40Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:affinity': {'.': {}, 'f:nodeAffinity': {'.': {}, 'f:requiredDuringSchedulingIgnoredDuringExecution': {'.': {}, 'f:nodeSelectorTerms': {}}}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:43:40Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1126', 'uid': '5a2b001f-e409-4f23-8793-9cb6bcd02cda'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'affinity': {'nodeAffinity': {'requiredDuringSchedulingIgnoredDuringExecution': {'nodeSelectorTerms': [{'matchExpressions': [{'key': 'kubernetes.io/hostname', 'operator': 'In', 'values': ['kind-worker']}]}]}}}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:42:38Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:42:38Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:42:41Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:44:41,250 DEBUG  , Thread-11, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-4b66k
2023-04-02 00:44:41,812 INFO   , Thread-11, common.py:569, [trial: 6, gen: 1] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-02 00:44:41,812 INFO   , Thread-11, checker.py:134, [trial: 6, gen: 1] Number of system state fields: [1789] Number of delta: [135]
2023-04-02 00:44:41,812 ERROR  , Thread-11, checker.py:561, [trial: 6, gen: 1] Found pod: test-cluster-vcheck-28006843--1-67497 with unhealthy status
2023-04-02 00:44:41,813 DEBUG  , Thread-11, acto.py  :374, [trial: 6, gen: 1] Invalid input, revert
2023-04-02 00:44:41,813 WARNING, Thread-11, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:44:41,814 DEBUG  , Thread-11, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 00:44:42,125 INFO   , Thread-11, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:44:44,729 DEBUG  , Thread-1, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:44:46,601 DEBUG  , Thread-5, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:44:53,369 DEBUG  , Thread-7, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:44:54,032 INFO   , Thread-3, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:44:54,822 INFO   , Thread-1, deploy.py:91, Operator ready
2023-04-02 00:44:54,823 INFO   , Thread-1, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:44:56,748 INFO   , Thread-5, deploy.py:91, Operator ready
2023-04-02 00:44:56,748 INFO   , Thread-5, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:44:56,870 DEBUG  , Thread-1, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:44:58,095 INFO   , Thread-10, runner.py:360, [trial: 5, gen: 3] System took 00:02:22 to converge
2023-04-02 00:44:58,097 DEBUG  , Thread-10, runner.py:98, [trial: 5, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:44:58,097 DEBUG  , Thread-10, runner.py:99, [trial: 5, gen: 3] STDERR: 
2023-04-02 00:44:58,247 DEBUG  , Thread-10, runner.py:177, [trial: 5, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullPolicy":"Always"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:39:20Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullPolicy': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:42:35Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1516', 'uid': '36a02668-4108-4473-86fb-d90190c7a824'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'Always'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:39:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:39:22Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:39:29Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:41:01Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:44:58,274 DEBUG  , Thread-10, runner.py:202, [trial: 5, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-b9w5s
2023-04-02 00:44:58,843 DEBUG  , Thread-5, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:44:59,139 INFO   , Thread-10, checker.py:134, [trial: 5, gen: 3] Number of system state fields: [3470] Number of delta: [81]
2023-04-02 00:44:59,140 INFO   , Thread-10, acto.py  :323, [trial: 5, gen: 3] Running bundled testcases
2023-04-02 00:44:59,140 DEBUG  , Thread-10, test_case.py:51, [trial: 5, gen: 3] Precondition [change_image_pull_policy_precondition] Result [True]
2023-04-02 00:44:59,140 INFO   , Thread-10, acto.py  :107, [trial: 5, gen: 3] JSON patch: [{"op": "replace", "path": "/spec/image/pullPolicy", "value": "IfNotPresent"}]
2023-04-02 00:44:59,140 DEBUG  , Thread-10, acto.py  :458, [trial: 5, gen: 3] Run and check
2023-04-02 00:44:59,566 INFO   , Thread-10, runner.py:291, [trial: 5, gen: 3] Waiting for system to converge... 
2023-04-02 00:45:02,020 INFO   , Thread-9, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:45:03,454 INFO   , Thread-7, deploy.py:91, Operator ready
2023-04-02 00:45:03,454 INFO   , Thread-7, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:45:05,589 DEBUG  , Thread-7, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:45:06,956 INFO   , Thread-1, deploy.py:91, Operator ready
2023-04-02 00:45:06,956 INFO   , Thread-1, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:45:08,466 INFO   , Thread-4, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:45:08,926 INFO   , Thread-5, deploy.py:91, Operator ready
2023-04-02 00:45:08,926 INFO   , Thread-5, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:45:15,675 INFO   , Thread-7, deploy.py:91, Operator ready
2023-04-02 00:45:15,675 INFO   , Thread-7, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:45:36,395 INFO   , Thread-8, runner.py:360, [trial: 6, gen: 0] System took 00:01:11 to converge
2023-04-02 00:45:36,396 DEBUG  , Thread-8, runner.py:98, [trial: 6, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:45:36,396 DEBUG  , Thread-8, runner.py:99, [trial: 6, gen: 0] STDERR: 
2023-04-02 00:45:36,530 DEBUG  , Thread-8, runner.py:177, [trial: 6, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:44:28Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:44:24Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:44:24Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:44:28Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:44:28Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1197', 'uid': '75b6e53c-8260-4f55-85c6-8fa8b8f39b67'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:44:39Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:44:27Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:44:28Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:44:27Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:44:33Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:45:36,554 DEBUG  , Thread-8, runner.py:202, [trial: 6, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-x89pk
2023-04-02 00:45:36,789 WARNING, Thread-8, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:45:36,789 INFO   , Thread-8, input.py :723, [trial: 6, gen: 1] Progress [11] cases left
2023-04-02 00:45:36,789 DEBUG  , Thread-8, test_case.py:51, [trial: 6, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:45:36,789 INFO   , Thread-8, acto.py  :263, [trial: 6, gen: 1] Precondition of ['spec', 'logConfigMap'] satisfies
2023-04-02 00:45:36,789 INFO   , Thread-8, acto.py  :323, [trial: 6, gen: 1] Running bundled testcases
2023-04-02 00:45:36,790 DEBUG  , Thread-8, test_case.py:51, [trial: 6, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:45:36,790 INFO   , Thread-8, acto.py  :107, [trial: 6, gen: 1] JSON patch: [{"op": "add", "path": "/spec/logConfigMap", "value": ""}]
2023-04-02 00:45:36,790 DEBUG  , Thread-8, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 00:45:37,103 INFO   , Thread-8, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:45:41,794 INFO   , Thread-2, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:45:46,142 ERROR  , Thread-4, runner.py:363, [trial: 4, gen: 1] System failed to converge within 600 seconds
2023-04-02 00:45:46,145 DEBUG  , Thread-4, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:45:46,145 DEBUG  , Thread-4, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:45:46,282 DEBUG  , Thread-4, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:35:49Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":["ACTOKEY"],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:34:43Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:35:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:35:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:35:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2414', 'uid': 'a7b6ff38-e592-48e2-a52c-157ec8724f75'}, 'spec': {'additionalArgs': ['ACTOKEY'], 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:34:44Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:35:48Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:35:49Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:34:46Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:45:43Z', 'message': 'pod has not completely started', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:45:46,311 DEBUG  , Thread-4, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-s5plr
2023-04-02 00:45:47,231 INFO   , Thread-4, checker.py:134, [trial: 4, gen: 1] Number of system state fields: [3482] Number of delta: [1258]
2023-04-02 00:45:47,231 ERROR  , Thread-4, checker.py:561, [trial: 4, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [None] with unhealthy status
2023-04-02 00:45:47,233 DEBUG  , Thread-4, acto.py  :489, [trial: 4, gen: 1] Running recovery
2023-04-02 00:45:47,320 WARNING, Thread-1, schema.py:573, [trial: 6, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:45:47,320 DEBUG  , Thread-1, acto.py  :458, [trial: 6, gen: 0] Run and check
2023-04-02 00:45:49,056 WARNING, Thread-5, schema.py:573, [trial: 6, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:45:49,057 DEBUG  , Thread-5, acto.py  :458, [trial: 6, gen: 0] Run and check
2023-04-02 00:45:50,140 INFO   , Thread-4, runner.py:291, [trial: 4, gen: 1] Waiting for system to converge... 
2023-04-02 00:45:51,665 INFO   , Thread-1, runner.py:291, [trial: 6, gen: 0] Waiting for system to converge... 
2023-04-02 00:45:52,596 INFO   , Thread-5, runner.py:291, [trial: 6, gen: 0] Waiting for system to converge... 
2023-04-02 00:45:54,128 INFO   , Thread-3, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:45:55,799 WARNING, Thread-7, schema.py:573, [trial: 6, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:45:55,800 DEBUG  , Thread-7, acto.py  :458, [trial: 6, gen: 0] Run and check
2023-04-02 00:45:58,463 INFO   , Thread-7, runner.py:291, [trial: 6, gen: 0] Waiting for system to converge... 
2023-04-02 00:46:02,116 INFO   , Thread-9, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:46:37,222 INFO   , Thread-8, runner.py:360, [trial: 6, gen: 1] System took 00:01:00 to converge
2023-04-02 00:46:37,223 DEBUG  , Thread-8, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:46:37,223 DEBUG  , Thread-8, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:46:37,354 DEBUG  , Thread-8, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:44:28Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"logConfigMap":"","nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:44:24Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:44:28Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:44:28Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:logConfigMap': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:45:37Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1313', 'uid': '75b6e53c-8260-4f55-85c6-8fa8b8f39b67'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:44:39Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:44:27Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:44:28Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:44:27Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:44:33Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:46:37,382 DEBUG  , Thread-8, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-x89pk
2023-04-02 00:46:38,163 INFO   , Thread-8, checker.py:134, [trial: 6, gen: 1] Number of system state fields: [3460] Number of delta: [0]
2023-04-02 00:46:38,164 WARNING, Thread-8, schema.py:573, [trial: 6, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 00:46:38,165 INFO   , Thread-8, input.py :723, [trial: 6, gen: 2] Progress [10] cases left
2023-04-02 00:46:38,166 INFO   , Thread-8, acto.py  :187, Trial 6 finished, completed in 00:05:55
2023-04-02 00:46:38,166 INFO   , Thread-8, acto.py  :188, ---------------------------------------

2023-04-02 00:46:38,191 DEBUG  , Thread-8, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-x89pk
2023-04-02 00:46:40,843 INFO   , Thread-6, runner.py:360, [trial: 7, gen: 0] System took 00:02:05 to converge
2023-04-02 00:46:40,845 DEBUG  , Thread-6, runner.py:98, [trial: 7, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:46:40,845 DEBUG  , Thread-6, runner.py:99, [trial: 7, gen: 0] STDERR: 
2023-04-02 00:46:40,991 DEBUG  , Thread-6, runner.py:177, [trial: 7, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:44:38Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:44:35Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:44:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:44:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:44:38Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1056', 'uid': '28b48ab6-9e7a-4e52-81cb-1b009531415e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:44:49Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:44:37Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:44:38Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:44:37Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:44:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:46:41,022 DEBUG  , Thread-6, runner.py:202, [trial: 7, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-7ntxn
2023-04-02 00:46:41,312 WARNING, Thread-6, schema.py:573, [trial: 7, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:46:41,313 INFO   , Thread-6, input.py :723, [trial: 7, gen: 1] Progress [6] cases left
2023-04-02 00:46:41,313 DEBUG  , Thread-6, test_case.py:51, [trial: 7, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:46:41,313 INFO   , Thread-6, acto.py  :263, [trial: 7, gen: 1] Precondition of ['spec', 'affinity'] satisfies
2023-04-02 00:46:41,313 INFO   , Thread-6, acto.py  :323, [trial: 7, gen: 1] Running bundled testcases
2023-04-02 00:46:41,313 DEBUG  , Thread-6, test_case.py:51, [trial: 7, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:46:41,313 INFO   , Thread-6, acto.py  :107, [trial: 7, gen: 1] JSON patch: [{"op": "add", "path": "/spec/affinity", "value": {}}]
2023-04-02 00:46:41,313 DEBUG  , Thread-6, acto.py  :458, [trial: 7, gen: 1] Run and check
2023-04-02 00:46:41,685 INFO   , Thread-6, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 00:46:41,882 INFO   , Thread-2, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:46:48,221 INFO   , Thread-8, common.py:629, Trial testrun-crdb-whitebox/trial-07-0006 completed without error
2023-04-02 00:46:53,713 INFO   , Thread-1, runner.py:360, [trial: 6, gen: 0] System took 00:01:02 to converge
2023-04-02 00:46:53,715 DEBUG  , Thread-1, runner.py:98, [trial: 6, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:46:53,715 DEBUG  , Thread-1, runner.py:99, [trial: 6, gen: 0] STDERR: 
2023-04-02 00:46:53,755 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-7
2023-04-02 00:46:53,834 DEBUG  , Thread-1, runner.py:177, [trial: 6, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:45:51Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:45:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:45:54Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '906', 'uid': 'f25c9693-407f-453a-b41b-082550c50f00'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:45:52Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:45:52Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:45:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:46:53,852 DEBUG  , Thread-1, runner.py:202, [trial: 6, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-p2jhw
2023-04-02 00:46:53,944 WARNING, Thread-1, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:46:53,945 INFO   , Thread-1, input.py :723, [trial: 6, gen: 1] Progress [2] cases left
2023-04-02 00:46:53,945 DEBUG  , Thread-1, test_case.py:51, [trial: 6, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:46:53,945 INFO   , Thread-1, acto.py  :263, [trial: 6, gen: 1] Precondition of ['spec', 'ingress', 'ui', 'tls', 0, 'secretName'] satisfies
2023-04-02 00:46:53,945 INFO   , Thread-1, acto.py  :323, [trial: 6, gen: 1] Running bundled testcases
2023-04-02 00:46:53,945 DEBUG  , Thread-1, test_case.py:51, [trial: 6, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 00:46:53,946 INFO   , Thread-1, acto.py  :107, [trial: 6, gen: 1] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": [{"secretName": ""}]}}}]
2023-04-02 00:46:53,946 DEBUG  , Thread-1, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 00:46:54,083 INFO   , Thread-5, runner.py:360, [trial: 6, gen: 0] System took 00:01:01 to converge
2023-04-02 00:46:54,084 DEBUG  , Thread-5, runner.py:98, [trial: 6, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:46:54,084 DEBUG  , Thread-5, runner.py:99, [trial: 6, gen: 0] STDERR: 
2023-04-02 00:46:54,184 DEBUG  , Thread-5, runner.py:177, [trial: 6, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:45:52Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:45:52Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:45:54Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '911', 'uid': '7b05d3f0-6dfe-46a1-bf1d-2961a9636c82'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:45:52Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:45:52Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:45:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:46:54,215 INFO   , Thread-3, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:46:54,225 DEBUG  , Thread-5, runner.py:202, [trial: 6, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-fmd9r
2023-04-02 00:46:54,287 INFO   , Thread-1, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:46:54,337 WARNING, Thread-5, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:46:54,338 INFO   , Thread-5, input.py :723, [trial: 6, gen: 1] Progress [2] cases left
2023-04-02 00:46:54,338 DEBUG  , Thread-5, test_case.py:51, [trial: 6, gen: 1] Precondition [increase_precondition] Result [False]
2023-04-02 00:46:54,338 INFO   , Thread-5, acto.py  :267, [trial: 6, gen: 1] Precondition of ["spec", "sqlPort"] fails, try setup first
2023-04-02 00:46:54,338 INFO   , Thread-5, acto.py  :107, [trial: 6, gen: 1] JSON patch: [{"op": "add", "path": "/spec/sqlPort", "value": 0}]
2023-04-02 00:46:54,339 DEBUG  , Thread-5, test_case.py:51, [trial: 6, gen: 1] Precondition [increase_precondition] Result [True]
2023-04-02 00:46:54,339 DEBUG  , Thread-5, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 00:47:01,903 INFO   , Thread-7, runner.py:360, [trial: 6, gen: 0] System took 00:01:03 to converge
2023-04-02 00:47:01,904 DEBUG  , Thread-7, runner.py:98, [trial: 6, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:47:01,904 DEBUG  , Thread-7, runner.py:99, [trial: 6, gen: 0] STDERR: 
2023-04-02 00:47:02,022 DEBUG  , Thread-7, runner.py:177, [trial: 6, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:45:58Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:45:58Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:46:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '930', 'uid': 'ae5a217c-6019-4586-af8f-6bb212c1dd81'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:45:58Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:45:58Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:46:02Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:47:02,050 DEBUG  , Thread-7, runner.py:202, [trial: 6, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-hrsmw
2023-04-02 00:47:02,176 WARNING, Thread-7, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:47:02,177 INFO   , Thread-7, input.py :723, [trial: 6, gen: 1] Progress [1] cases left
2023-04-02 00:47:02,177 DEBUG  , Thread-7, test_case.py:51, [trial: 6, gen: 1] Precondition [increase_precondition] Result [False]
2023-04-02 00:47:02,177 INFO   , Thread-7, acto.py  :267, [trial: 6, gen: 1] Precondition of ["spec", "grpcPort"] fails, try setup first
2023-04-02 00:47:02,178 INFO   , Thread-7, acto.py  :107, [trial: 6, gen: 1] JSON patch: [{"op": "add", "path": "/spec/grpcPort", "value": 0}]
2023-04-02 00:47:02,178 DEBUG  , Thread-7, test_case.py:51, [trial: 6, gen: 1] Precondition [increase_precondition] Result [True]
2023-04-02 00:47:02,178 DEBUG  , Thread-7, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 00:47:02,394 INFO   , Thread-11, runner.py:360, [trial: 6, gen: 1] System took 00:02:20 to converge
2023-04-02 00:47:02,395 DEBUG  , Thread-11, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:47:02,395 DEBUG  , Thread-11, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:47:02,512 INFO   , Thread-7, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:47:02,550 DEBUG  , Thread-11, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:45:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:42:38Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:44:42Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:45:55Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:45:55Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1520', 'uid': '5a2b001f-e409-4f23-8793-9cb6bcd02cda'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:46:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:45:54Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:45:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:42:41Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:46:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:47:02,577 DEBUG  , Thread-11, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-4b66k
2023-04-02 00:47:03,129 DEBUG  , Thread-11, acto.py  :383, [trial: 6, gen: 1] Only one patch, no need to isolate
2023-04-02 00:47:03,129 INFO   , Thread-11, acto.py  :332, [trial: 6, gen: 1] Error result, running recovery
2023-04-02 00:47:03,129 DEBUG  , Thread-11, acto.py  :489, [trial: 6, gen: 1] Running recovery
2023-04-02 00:47:03,466 INFO   , Thread-11, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:47:45,898 INFO   , Thread-9, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:47:47,854 INFO   , Thread-8, base.py  :41, Created cluster
2023-04-02 00:47:47,868 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:47:54,299 INFO   , Thread-3, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:48:03,503 INFO   , Thread-7, runner.py:360, [trial: 6, gen: 1] System took 00:01:00 to converge
2023-04-02 00:48:03,504 DEBUG  , Thread-7, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:48:03,504 DEBUG  , Thread-7, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:48:03,598 INFO   , Thread-11, runner.py:360, [trial: 6, gen: 1] System took 00:01:00 to converge
2023-04-02 00:48:03,601 DEBUG  , Thread-11, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:48:03,601 DEBUG  , Thread-11, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:48:03,801 DEBUG  , Thread-7, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"grpcPort":0,"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:45:58Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:46:00Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:grpcPort': {}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:47:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:47:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1035', 'uid': 'ae5a217c-6019-4586-af8f-6bb212c1dd81'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 0, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:45:58Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:45:58Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:47:04Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:48:03,840 DEBUG  , Thread-7, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-hrsmw
2023-04-02 00:48:03,999 DEBUG  , Thread-11, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:45:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:42:38Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:44:42Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:45:55Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:45:55Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1634', 'uid': '5a2b001f-e409-4f23-8793-9cb6bcd02cda'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:46:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:45:54Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:45:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:42:41Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:46:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:48:04,336 INFO   , Thread-7, checker.py:134, [trial: 6, gen: 1] Number of system state fields: [2108] Number of delta: [148]
2023-04-02 00:48:04,338 INFO   , Thread-7, acto.py  :323, [trial: 6, gen: 1] Running bundled testcases
2023-04-02 00:48:04,339 DEBUG  , Thread-7, test_case.py:51, [trial: 6, gen: 1] Precondition [increase_precondition] Result [True]
2023-04-02 00:48:04,339 INFO   , Thread-7, acto.py  :107, [trial: 6, gen: 1] JSON patch: []
2023-04-02 00:48:04,339 DEBUG  , Thread-7, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 00:48:04,369 DEBUG  , Thread-11, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-4b66k
2023-04-02 00:48:04,724 INFO   , Thread-7, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:48:04,746 DEBUG  , Thread-11, checker.py:728, [trial: 6, gen: 1] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [root['pod']['test-cluster-0'], root['pod']['test-cluster-1'], root['pod']['test-cluster-2'], root['stateful_set']['test-cluster'], root['service']['test-cluster'], root['service']['test-cluster-public'], root['pvc']['datadir-test-cluster-0'], root['pvc']['datadir-test-cluster-1'], root['pvc']['datadir-test-cluster-2'], root['pod_disruption_budget']['test-cluster'], root['secret']['test-cluster-ca'], root['secret']['test-cluster-node'], root['secret']['test-cluster-root']]}
2023-04-02 00:48:04,751 INFO   , Thread-11, acto.py  :187, Trial 6 finished, completed in 00:09:08
2023-04-02 00:48:04,751 INFO   , Thread-11, acto.py  :188, ---------------------------------------

2023-04-02 00:48:04,794 DEBUG  , Thread-11, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-4b66k
2023-04-02 00:48:05,299 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:48:06,170 INFO   , Thread-1, runner.py:360, [trial: 6, gen: 1] System took 00:01:11 to converge
2023-04-02 00:48:06,171 DEBUG  , Thread-1, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:48:06,171 DEBUG  , Thread-1, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:48:06,193 INFO   , Thread-5, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:48:06,455 DEBUG  , Thread-1, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:46:57Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","tls":[{"secretName":""}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:45:51Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:46:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:46:58Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:46:58Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1292', 'uid': 'f25c9693-407f-453a-b41b-082550c50f00'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY', 'tls': [{}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:47:08Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:46:56Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:46:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:45:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:47:03Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:47:59Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:48:06,492 DEBUG  , Thread-1, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-p2jhw
2023-04-02 00:48:07,196 INFO   , Thread-1, common.py:560, [trial: 6, gen: 1] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 00:48:07,197 INFO   , Thread-1, checker.py:134, [trial: 6, gen: 1] Number of system state fields: [3769] Number of delta: [1092]
2023-04-02 00:48:07,198 DEBUG  , Thread-1, acto.py  :374, [trial: 6, gen: 1] Invalid input, revert
2023-04-02 00:48:07,199 WARNING, Thread-1, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:48:07,199 DEBUG  , Thread-1, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 00:48:07,546 INFO   , Thread-1, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:48:09,171 INFO   , Thread-10, runner.py:360, [trial: 5, gen: 3] System took 00:03:09 to converge
2023-04-02 00:48:09,172 DEBUG  , Thread-10, runner.py:98, [trial: 5, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:48:09,173 DEBUG  , Thread-10, runner.py:99, [trial: 5, gen: 3] STDERR: 
2023-04-02 00:48:09,316 DEBUG  , Thread-10, runner.py:177, [trial: 5, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullPolicy":"IfNotPresent"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:39:20Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullPolicy': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:42:35Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1914', 'uid': '36a02668-4108-4473-86fb-d90190c7a824'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:39:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:39:22Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:39:29Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:41:01Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:48:09,344 DEBUG  , Thread-10, runner.py:202, [trial: 5, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-b9w5s
2023-04-02 00:48:10,164 INFO   , Thread-10, checker.py:134, [trial: 5, gen: 3] Number of system state fields: [3464] Number of delta: [75]
2023-04-02 00:48:10,165 WARNING, Thread-10, schema.py:573, [trial: 5, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 00:48:10,166 INFO   , Thread-10, input.py :723, [trial: 5, gen: 5] Progress [8] cases left
2023-04-02 00:48:10,166 DEBUG  , Thread-10, test_case.py:51, [trial: 5, gen: 5] Precondition [tolerations_pop_precondition] Result [False]
2023-04-02 00:48:10,166 INFO   , Thread-10, acto.py  :267, [trial: 5, gen: 5] Precondition of ["spec", "tolerations"] fails, try setup first
2023-04-02 00:48:10,166 INFO   , Thread-10, acto.py  :107, [trial: 5, gen: 5] JSON patch: [{"op": "add", "path": "/spec/tolerations", "value": [{"key": "test-key", "operator": "Equal", "value": "test-value", "effect": "NoSchedule"}]}]
2023-04-02 00:48:10,166 DEBUG  , Thread-10, test_case.py:51, [trial: 5, gen: 5] Precondition [tolerations_pop_precondition] Result [True]
2023-04-02 00:48:10,166 DEBUG  , Thread-10, acto.py  :458, [trial: 5, gen: 5] Run and check
2023-04-02 00:48:12,106 INFO   , Thread-10, runner.py:291, [trial: 5, gen: 5] Waiting for system to converge... 
2023-04-02 00:48:15,377 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-02 00:48:15,377 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:48:17,571 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:48:20,366 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-10
2023-04-02 00:48:25,649 INFO   , Thread-2, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:48:27,651 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-02 00:48:27,652 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:48:32,081 INFO   , Thread-4, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:48:45,980 INFO   , Thread-9, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:48:54,382 INFO   , Thread-3, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:49:06,291 INFO   , Thread-11, base.py  :41, Created cluster
2023-04-02 00:49:06,300 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:49:06,444 INFO   , Thread-6, runner.py:360, [trial: 7, gen: 1] System took 00:02:24 to converge
2023-04-02 00:49:06,445 DEBUG  , Thread-6, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:49:06,445 DEBUG  , Thread-6, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 00:49:06,579 DEBUG  , Thread-6, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:44:38Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"affinity":{},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:44:35Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:44:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:44:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:affinity': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:46:41Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1252', 'uid': '28b48ab6-9e7a-4e52-81cb-1b009531415e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'affinity': {}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:44:49Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:44:37Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:44:38Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:44:37Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:44:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:49:06,607 DEBUG  , Thread-6, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-7ntxn
2023-04-02 00:49:07,528 INFO   , Thread-6, checker.py:134, [trial: 7, gen: 1] Number of system state fields: [3474] Number of delta: [66]
2023-04-02 00:49:07,532 WARNING, Thread-6, schema.py:573, [trial: 7, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 00:49:07,532 INFO   , Thread-6, input.py :723, [trial: 7, gen: 2] Progress [5] cases left
2023-04-02 00:49:07,532 DEBUG  , Thread-6, test_case.py:51, [trial: 7, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-02 00:49:07,533 INFO   , Thread-6, acto.py  :267, [trial: 7, gen: 2] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "secretKeyRef", "name"] fails, try setup first
2023-04-02 00:49:07,533 INFO   , Thread-6, acto.py  :107, [trial: 7, gen: 2] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"secretKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY"}}}]}]
2023-04-02 00:49:07,533 DEBUG  , Thread-6, test_case.py:51, [trial: 7, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-02 00:49:07,533 DEBUG  , Thread-6, acto.py  :458, [trial: 7, gen: 2] Run and check
2023-04-02 00:49:07,772 WARNING, Thread-8, schema.py:573, [trial: 7, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:49:07,773 DEBUG  , Thread-8, acto.py  :458, [trial: 7, gen: 0] Run and check
2023-04-02 00:49:07,900 INFO   , Thread-6, runner.py:291, [trial: 7, gen: 2] Waiting for system to converge... 
2023-04-02 00:49:10,487 INFO   , Thread-8, runner.py:291, [trial: 7, gen: 0] Waiting for system to converge... 
2023-04-02 00:49:23,553 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:49:25,738 INFO   , Thread-2, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:49:27,211 INFO   , Thread-1, runner.py:360, [trial: 6, gen: 1] System took 00:01:19 to converge
2023-04-02 00:49:27,213 DEBUG  , Thread-1, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:49:27,213 DEBUG  , Thread-1, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:49:27,362 DEBUG  , Thread-1, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:46:57Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:45:51Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:46:58Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:46:58Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:48:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1306', 'uid': 'f25c9693-407f-453a-b41b-082550c50f00'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:47:08Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:46:56Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:46:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:45:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:47:03Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:47:59Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:49:27,392 DEBUG  , Thread-1, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-p2jhw
2023-04-02 00:49:27,817 DEBUG  , Thread-1, acto.py  :383, [trial: 6, gen: 1] Only one patch, no need to isolate
2023-04-02 00:49:27,818 WARNING, Thread-1, schema.py:573, [trial: 6, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:49:27,818 INFO   , Thread-1, input.py :723, [trial: 6, gen: 3] Progress [1] cases left
2023-04-02 00:49:27,819 DEBUG  , Thread-1, test_case.py:51, [trial: 6, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-02 00:49:27,819 INFO   , Thread-1, acto.py  :263, [trial: 6, gen: 3] Precondition of ['spec', 'image', 'name'] satisfies
2023-04-02 00:49:27,819 INFO   , Thread-1, acto.py  :323, [trial: 6, gen: 3] Running bundled testcases
2023-04-02 00:49:27,819 DEBUG  , Thread-1, test_case.py:51, [trial: 6, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-02 00:49:27,819 INFO   , Thread-1, acto.py  :107, [trial: 6, gen: 3] JSON patch: [{"op": "replace", "path": "/spec/image/name", "value": ""}]
2023-04-02 00:49:27,819 DEBUG  , Thread-1, acto.py  :458, [trial: 6, gen: 3] Run and check
2023-04-02 00:49:27,854 INFO   , Thread-5, runner.py:360, [trial: 6, gen: 1] System took 00:01:21 to converge
2023-04-02 00:49:27,855 DEBUG  , Thread-5, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:49:27,855 DEBUG  , Thread-5, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:49:27,957 DEBUG  , Thread-5, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:46:58Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"sqlPort":0,"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:45:52Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:sqlPort': {}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:46:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:46:58Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:46:58Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1214', 'uid': '7b05d3f0-6dfe-46a1-bf1d-2961a9636c82'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 0, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:45:52Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:46:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:46:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:45:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:48:50Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[2].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[2].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:49:27,986 DEBUG  , Thread-5, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-fmd9r
2023-04-02 00:49:28,203 INFO   , Thread-1, runner.py:291, [trial: 6, gen: 3] Waiting for system to converge... 
2023-04-02 00:49:28,472 INFO   , Thread-5, common.py:560, [trial: 6, gen: 1] Recognized invalid input through regex: failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[2].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[2].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]
2023-04-02 00:49:28,473 INFO   , Thread-5, checker.py:134, [trial: 6, gen: 1] Number of system state fields: [1605] Number of delta: [75]
2023-04-02 00:49:28,474 INFO   , Thread-5, acto.py  :301, [trial: 6, gen: 1] Setup produced invalid input
2023-04-02 00:49:28,475 WARNING, Thread-5, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:49:28,476 DEBUG  , Thread-5, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 00:49:28,843 INFO   , Thread-5, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:49:32,172 INFO   , Thread-4, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:49:33,643 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-02 00:49:33,643 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:49:35,275 INFO   , Thread-7, runner.py:360, [trial: 6, gen: 1] System took 00:01:30 to converge
2023-04-02 00:49:35,277 DEBUG  , Thread-7, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:49:35,277 DEBUG  , Thread-7, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:49:35,386 DEBUG  , Thread-7, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:48:35Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"grpcPort":0,"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:45:58Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:grpcPort': {}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:47:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:48:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:48:35Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1308', 'uid': 'ae5a217c-6019-4586-af8f-6bb212c1dd81'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 0, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:45:58Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:48:33Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:48:35Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:48:06Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:49:35Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:49:35,411 DEBUG  , Thread-7, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-hrsmw
2023-04-02 00:49:35,834 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:49:35,988 INFO   , Thread-7, common.py:560, [trial: 6, gen: 1] Recognized invalid input through regex: failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]
2023-04-02 00:49:35,990 DEBUG  , Thread-7, acto.py  :374, [trial: 6, gen: 1] Invalid input, revert
2023-04-02 00:49:35,990 WARNING, Thread-7, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:49:35,990 DEBUG  , Thread-7, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 00:49:36,363 INFO   , Thread-7, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:49:45,718 INFO   , Thread-16, runner.py:360, [trial: 5, gen: 1] System took 00:07:14 to converge
2023-04-02 00:49:45,719 DEBUG  , Thread-16, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:49:45,719 DEBUG  , Thread-16, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:49:45,824 DEBUG  , Thread-16, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:42:34Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"resourceFieldRef":{"containerName":"","resource":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:41:29Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:42:31Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:42:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:42:35Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1835', 'uid': 'cce6499f-a31f-4f72-a644-915be26cc0d4'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'resourceFieldRef': {'divisor': '0', 'resource': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:41:29Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:42:33Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:42:35Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:41:31Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:49:44Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:49:45,846 DEBUG  , Thread-16, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-bchdc
2023-04-02 00:49:45,945 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-02 00:49:45,946 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:49:46,151 INFO   , Thread-9, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:49:46,279 DEBUG  , Thread-16, checker.py:278, [trial: 5, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'resource']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 2, 'value_from', 'resource_field_ref', 'resource']]
2023-04-02 00:49:46,279 ERROR  , Thread-16, checker.py:282, [trial: 5, gen: 1] Matched delta inconsistent with input delta
2023-04-02 00:49:46,279 ERROR  , Thread-16, checker.py:283, [trial: 5, gen: 1] Input delta: not present -> ACTOKEY
2023-04-02 00:49:46,279 ERROR  , Thread-16, checker.py:284, [trial: 5, gen: 1] Matched delta: not present -> limits.cpu
2023-04-02 00:49:46,368 INFO   , Thread-16, common.py:569, [trial: 5, gen: 1] Recognized invalid input through field [name] in error message: User set image.name, using that field instead of cockroachDBVersion
2023-04-02 00:49:46,368 INFO   , Thread-16, checker.py:134, [trial: 5, gen: 1] Number of system state fields: [2022] Number of delta: [550]
2023-04-02 00:49:46,369 DEBUG  , Thread-16, acto.py  :374, [trial: 5, gen: 1] Invalid input, revert
2023-04-02 00:49:46,370 WARNING, Thread-16, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:49:46,371 DEBUG  , Thread-16, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 00:49:46,758 INFO   , Thread-16, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 00:49:54,474 INFO   , Thread-3, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:50:11,807 INFO   , Thread-8, runner.py:360, [trial: 7, gen: 0] System took 00:01:01 to converge
2023-04-02 00:50:11,808 DEBUG  , Thread-8, runner.py:98, [trial: 7, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:50:11,809 DEBUG  , Thread-8, runner.py:99, [trial: 7, gen: 0] STDERR: 
2023-04-02 00:50:11,918 DEBUG  , Thread-8, runner.py:177, [trial: 7, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:49:10Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:49:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:49:12Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '918', 'uid': '311d5bf5-8677-4b18-9421-798c08c53ba9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:49:10Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:49:10Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:49:12Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:50:12,015 DEBUG  , Thread-8, runner.py:202, [trial: 7, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-tvn89
2023-04-02 00:50:12,112 WARNING, Thread-8, schema.py:573, [trial: 7, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:50:12,112 INFO   , Thread-8, input.py :723, [trial: 7, gen: 1] Progress [10] cases left
2023-04-02 00:50:12,112 DEBUG  , Thread-8, test_case.py:51, [trial: 7, gen: 1] Precondition [decrease_precondition] Result [False]
2023-04-02 00:50:12,112 INFO   , Thread-8, acto.py  :267, [trial: 7, gen: 1] Precondition of ["spec", "grpcPort"] fails, try setup first
2023-04-02 00:50:12,113 INFO   , Thread-8, acto.py  :107, [trial: 7, gen: 1] JSON patch: [{"op": "add", "path": "/spec/grpcPort", "value": 5}]
2023-04-02 00:50:12,113 DEBUG  , Thread-8, test_case.py:51, [trial: 7, gen: 1] Precondition [decrease_precondition] Result [True]
2023-04-02 00:50:12,113 DEBUG  , Thread-8, acto.py  :458, [trial: 7, gen: 1] Run and check
2023-04-02 00:50:12,459 INFO   , Thread-8, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 00:50:25,828 INFO   , Thread-2, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:50:26,076 WARNING, Thread-11, schema.py:573, [trial: 7, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:50:26,076 DEBUG  , Thread-11, acto.py  :458, [trial: 7, gen: 0] Run and check
2023-04-02 00:50:28,590 INFO   , Thread-1, runner.py:360, [trial: 6, gen: 3] System took 00:01:00 to converge
2023-04-02 00:50:28,591 DEBUG  , Thread-1, runner.py:98, [trial: 6, gen: 3] STDOUT: 
2023-04-02 00:50:28,591 DEBUG  , Thread-1, runner.py:99, [trial: 6, gen: 3] STDERR: Error from server (you have to provide the cockroachDBVersion or cockroach image): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"\"},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"image":{"name":""},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-00-0006/mutated-3.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: you have to provide the cockroachDBVersion or cockroach image

2023-04-02 00:50:28,655 INFO   , Thread-11, runner.py:291, [trial: 7, gen: 0] Waiting for system to converge... 
2023-04-02 00:50:28,764 DEBUG  , Thread-1, runner.py:177, [trial: 6, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:46:57Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:45:51Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:46:58Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:46:58Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:48:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1306', 'uid': 'f25c9693-407f-453a-b41b-082550c50f00'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:47:08Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:46:56Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:46:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:45:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:47:03Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:47:59Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:50:28,807 DEBUG  , Thread-1, runner.py:202, [trial: 6, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-p2jhw
2023-04-02 00:50:29,126 INFO   , Thread-1, common.py:569, [trial: 6, gen: 3] Recognized invalid input through field [name] in error message: Error from server (you have to provide the cockroachDBVersion or cockroach image): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"\"},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"image":{"name":""},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-00-0006/mutated-3.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: you have to provide the cockroachDBVersion or cockroach image

2023-04-02 00:50:29,126 INFO   , Thread-1, checker.py:213, [trial: 6, gen: 3] Invalid input, reject mutation
2023-04-02 00:50:29,126 INFO   , Thread-1, checker.py:214, [trial: 6, gen: 3] STDOUT: 
2023-04-02 00:50:29,126 INFO   , Thread-1, checker.py:215, [trial: 6, gen: 3] STDERR: Error from server (you have to provide the cockroachDBVersion or cockroach image): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"crdb.cockroachlabs.com/v1alpha1\",\"kind\":\"CrdbCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"cockroach-operator-system\"},\"spec\":{\"additionalLabels\":{\"crdb\":\"is-cool\"},\"dataStore\":{\"pvc\":{\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"1Gi\"}},\"volumeMode\":\"Filesystem\"}}},\"image\":{\"name\":\"\"},\"nodes\":3,\"resources\":{\"limits\":{\"cpu\":2,\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"1Gi\"}},\"tlsEnabled\":true}}\n"}},"spec":{"image":{"name":""},"resources":{"limits":{"cpu":2}}}}
to:
Resource: "crdb.cockroachlabs.com/v1alpha1, Resource=crdbclusters", GroupVersionKind: "crdb.cockroachlabs.com/v1alpha1, Kind=CrdbCluster"
Name: "test-cluster", Namespace: "cockroach-operator-system"
for: "testrun-crdb-whitebox/trial-00-0006/mutated-3.yaml": admission webhook "vcrdbcluster.kb.io" denied the request: you have to provide the cockroachDBVersion or cockroach image

2023-04-02 00:50:29,364 ERROR  , Thread-1, checker.py:301, [trial: 6, gen: 3] Found no matching fields for input delta
2023-04-02 00:50:29,364 ERROR  , Thread-1, checker.py:302, [trial: 6, gen: 3] Input delta [['spec', 'image', 'name']]
2023-04-02 00:50:29,664 INFO   , Thread-1, checker.py:134, [trial: 6, gen: 3] Number of system state fields: [3779] Number of delta: [0]
2023-04-02 00:50:29,666 DEBUG  , Thread-1, acto.py  :374, [trial: 6, gen: 3] Invalid input, revert
2023-04-02 00:50:29,666 WARNING, Thread-1, schema.py:573, [trial: 6, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:50:29,666 DEBUG  , Thread-1, acto.py  :458, [trial: 6, gen: 3] Run and check
2023-04-02 00:50:30,079 INFO   , Thread-1, runner.py:291, [trial: 6, gen: 3] Waiting for system to converge... 
2023-04-02 00:50:32,261 INFO   , Thread-4, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:50:37,414 INFO   , Thread-7, runner.py:360, [trial: 6, gen: 1] System took 00:01:01 to converge
2023-04-02 00:50:37,416 DEBUG  , Thread-7, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:50:37,416 DEBUG  , Thread-7, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:50:37,555 DEBUG  , Thread-7, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:48:35Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"grpcPort":0,"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:45:58Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:grpcPort': {}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:47:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:49:36Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1397', 'uid': 'ae5a217c-6019-4586-af8f-6bb212c1dd81'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 0, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:45:58Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:48:33Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:48:35Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:48:06Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:50:27Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:50:37,586 DEBUG  , Thread-7, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-hrsmw
2023-04-02 00:50:38,017 INFO   , Thread-7, common.py:560, [trial: 6, gen: 1] Recognized invalid input through regex: failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]
2023-04-02 00:50:38,018 DEBUG  , Thread-7, acto.py  :383, [trial: 6, gen: 1] Only one patch, no need to isolate
2023-04-02 00:50:38,018 INFO   , Thread-7, acto.py  :339, [trial: 6, gen: 1] Input model is empty, break
2023-04-02 00:50:38,020 INFO   , Thread-7, acto.py  :187, Trial 6 finished, completed in 00:07:02
2023-04-02 00:50:38,020 INFO   , Thread-7, acto.py  :188, ---------------------------------------

2023-04-02 00:50:38,045 DEBUG  , Thread-7, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-hrsmw
2023-04-02 00:50:46,243 INFO   , Thread-9, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:50:48,071 INFO   , Thread-7, common.py:629, Trial testrun-crdb-whitebox/trial-06-0006 completed without error
2023-04-02 00:50:48,071 INFO   , Thread-7, acto.py  :195, Test finished
2023-04-02 00:50:48,071 INFO   , Thread-7, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"sql\\\", \\\"tls\\\", 0, \\\"secretName\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"ui\\\", \\\"annotations\\\"]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"ui\\\", \\\"host\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"nodeSelector\\\", \\\"ACTOKEY\\\"]\"": [
        "string-deletion"
    ],
    "\"[\\\"spec\\\", \\\"additionalArgs\\\", 0]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"ui\\\", \\\"ingressClassName\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"grpcPort\\\"]\"": [
        "number-deletion"
    ]
}
2023-04-02 00:50:49,106 INFO   , Thread-5, runner.py:360, [trial: 6, gen: 1] System took 00:01:20 to converge
2023-04-02 00:50:49,107 DEBUG  , Thread-5, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:50:49,107 DEBUG  , Thread-5, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 00:50:49,248 DEBUG  , Thread-5, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:46:58Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:45:52Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:49:28Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:49:39Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1429', 'uid': '7b05d3f0-6dfe-46a1-bf1d-2961a9636c82'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:49:39Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:46:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:46:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:45:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:48:50Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[2].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[2].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T04:49:34Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:50:49,276 DEBUG  , Thread-5, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-fmd9r
2023-04-02 00:50:49,769 INFO   , Thread-5, acto.py  :321, [trial: 6, gen: 1] All setups failed
2023-04-02 00:50:49,770 WARNING, Thread-5, schema.py:573, [trial: 6, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:50:49,770 INFO   , Thread-5, input.py :723, [trial: 6, gen: 3] Progress [1] cases left
2023-04-02 00:50:49,770 DEBUG  , Thread-5, test_case.py:51, [trial: 6, gen: 3] Precondition [decrease_precondition] Result [False]
2023-04-02 00:50:49,770 INFO   , Thread-5, acto.py  :267, [trial: 6, gen: 3] Precondition of ["spec", "sqlPort"] fails, try setup first
2023-04-02 00:50:49,771 INFO   , Thread-5, acto.py  :107, [trial: 6, gen: 3] JSON patch: [{"op": "add", "path": "/spec/sqlPort", "value": 5}]
2023-04-02 00:50:49,771 DEBUG  , Thread-5, test_case.py:51, [trial: 6, gen: 3] Precondition [decrease_precondition] Result [True]
2023-04-02 00:50:49,771 DEBUG  , Thread-5, acto.py  :458, [trial: 6, gen: 3] Run and check
2023-04-02 00:50:50,119 INFO   , Thread-5, runner.py:291, [trial: 6, gen: 3] Waiting for system to converge... 
2023-04-02 00:50:54,571 INFO   , Thread-3, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:50:56,532 INFO   , Thread-6, runner.py:323, [trial: 7, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:51:03,700 INFO   , Thread-10, runner.py:360, [trial: 5, gen: 5] System took 00:02:51 to converge
2023-04-02 00:51:03,702 DEBUG  , Thread-10, runner.py:98, [trial: 5, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:51:03,702 DEBUG  , Thread-10, runner.py:99, [trial: 5, gen: 5] STDERR: 
2023-04-02 00:51:03,841 DEBUG  , Thread-10, runner.py:177, [trial: 5, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullPolicy":"IfNotPresent"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"tolerations":[{"effect":"NoSchedule","key":"test-key","operator":"Equal","value":"test-value"}]}}\n'}, 'creationTimestamp': '2023-04-02T04:39:20Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullPolicy': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:48:12Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2348', 'uid': '36a02668-4108-4473-86fb-d90190c7a824'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'tolerations': [{'effect': 'NoSchedule', 'key': 'test-key', 'operator': 'Equal', 'value': 'test-value'}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:39:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:39:22Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:39:29Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:41:01Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:51:03,872 DEBUG  , Thread-10, runner.py:202, [trial: 5, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-b9w5s
2023-04-02 00:51:04,159 ERROR  , Thread-3, runner.py:363, [trial: 5, gen: 3] System failed to converge within 600 seconds
2023-04-02 00:51:04,170 DEBUG  , Thread-3, runner.py:98, [trial: 5, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:51:04,171 DEBUG  , Thread-3, runner.py:99, [trial: 5, gen: 3] STDERR: 
2023-04-02 00:51:04,774 DEBUG  , Thread-3, runner.py:177, [trial: 5, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:32:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"resourceFieldRef":{"divisor":"-5326.92690","resource":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:31:37Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:07Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:41:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2093', 'uid': 'a2d2beac-f962-4938-90d9-1f5474a70c23'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'resourceFieldRef': {'divisor': '-5326926900u', 'resource': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:40:07Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:32:41Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:32:42Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:39Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:40:02Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:51:05,024 INFO   , Thread-10, common.py:569, [trial: 5, gen: 5] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-02 00:51:05,025 INFO   , Thread-10, checker.py:134, [trial: 5, gen: 5] Number of system state fields: [3487] Number of delta: [104]
2023-04-02 00:51:05,027 INFO   , Thread-10, acto.py  :301, [trial: 5, gen: 5] Setup produced invalid input
2023-04-02 00:51:05,028 WARNING, Thread-10, schema.py:573, [trial: 5, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 00:51:05,029 DEBUG  , Thread-10, acto.py  :458, [trial: 5, gen: 5] Run and check
2023-04-02 00:51:05,062 DEBUG  , Thread-3, runner.py:202, [trial: 5, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-p6w44
2023-04-02 00:51:05,479 INFO   , Thread-10, runner.py:291, [trial: 5, gen: 5] Waiting for system to converge... 
2023-04-02 00:51:05,604 DEBUG  , Thread-3, checker.py:278, [trial: 5, gen: 3] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'resource']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 2, 'value_from', 'resource_field_ref', 'resource']]
2023-04-02 00:51:05,605 ERROR  , Thread-3, checker.py:282, [trial: 5, gen: 3] Matched delta inconsistent with input delta
2023-04-02 00:51:05,605 ERROR  , Thread-3, checker.py:283, [trial: 5, gen: 3] Input delta: not present -> ACTOKEY
2023-04-02 00:51:05,605 ERROR  , Thread-3, checker.py:284, [trial: 5, gen: 3] Matched delta: limits.cpu -> not present
2023-04-02 00:51:05,808 INFO   , Thread-3, common.py:569, [trial: 5, gen: 3] Recognized invalid input through field [resource] in error message: reconciling resources on deploy action
2023-04-02 00:51:05,809 INFO   , Thread-3, checker.py:134, [trial: 5, gen: 3] Number of system state fields: [3045] Number of delta: [224]
2023-04-02 00:51:05,809 ERROR  , Thread-3, checker.py:561, [trial: 5, gen: 3] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:51:05,811 DEBUG  , Thread-3, acto.py  :489, [trial: 5, gen: 3] Running recovery
2023-04-02 00:51:07,800 INFO   , Thread-3, runner.py:291, [trial: 5, gen: 3] Waiting for system to converge... 
2023-04-02 00:51:11,623 ERROR  , Thread-9, runner.py:363, [trial: 5, gen: 3] System failed to converge within 600 seconds
2023-04-02 00:51:11,627 DEBUG  , Thread-9, runner.py:98, [trial: 5, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:51:11,628 DEBUG  , Thread-9, runner.py:99, [trial: 5, gen: 3] STDERR: 
2023-04-02 00:51:11,885 DEBUG  , Thread-9, runner.py:177, [trial: 5, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"kiaqbglcgq":"1000m","memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:37:35Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:39:53Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:kiaqbglcgq': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:41:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1423', 'uid': '61bcc790-07e4-4ea6-a490-89bb9a75c452'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'kiaqbglcgq': '1', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:39:53Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:41Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:42Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:37:37Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:39:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:51:11,917 DEBUG  , Thread-9, runner.py:202, [trial: 5, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-mrt9w
2023-04-02 00:51:12,389 DEBUG  , Thread-9, checker.py:278, [trial: 5, gen: 3] Input delta [['spec', 'resources', 'limits', 'kiaqbglcgq']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'limits', 'kiaqbglcgq']]
2023-04-02 00:51:12,575 INFO   , Thread-9, checker.py:134, [trial: 5, gen: 3] Number of system state fields: [3036] Number of delta: [378]
2023-04-02 00:51:12,575 ERROR  , Thread-9, checker.py:561, [trial: 5, gen: 3] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:51:12,576 DEBUG  , Thread-9, acto.py  :489, [trial: 5, gen: 3] Running recovery
2023-04-02 00:51:13,493 INFO   , Thread-8, runner.py:360, [trial: 7, gen: 1] System took 00:01:01 to converge
2023-04-02 00:51:13,494 DEBUG  , Thread-8, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:51:13,494 DEBUG  , Thread-8, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 00:51:13,605 DEBUG  , Thread-8, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"grpcPort":5,"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:49:10Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:49:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:grpcPort': {}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:50:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:50:13Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1021', 'uid': '311d5bf5-8677-4b18-9421-798c08c53ba9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 5, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:49:10Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:49:10Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:50:13Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:51:13,623 DEBUG  , Thread-8, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-tvn89
2023-04-02 00:51:14,066 INFO   , Thread-8, checker.py:134, [trial: 7, gen: 1] Number of system state fields: [1804] Number of delta: [148]
2023-04-02 00:51:14,067 INFO   , Thread-8, acto.py  :323, [trial: 7, gen: 1] Running bundled testcases
2023-04-02 00:51:14,067 DEBUG  , Thread-8, test_case.py:51, [trial: 7, gen: 1] Precondition [decrease_precondition] Result [True]
2023-04-02 00:51:14,068 INFO   , Thread-8, acto.py  :107, [trial: 7, gen: 1] JSON patch: [{"op": "replace", "path": "/spec/grpcPort", "value": 2}]
2023-04-02 00:51:14,068 DEBUG  , Thread-8, acto.py  :458, [trial: 7, gen: 1] Run and check
2023-04-02 00:51:14,449 INFO   , Thread-8, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 00:51:14,693 INFO   , Thread-9, runner.py:291, [trial: 5, gen: 3] Waiting for system to converge... 
2023-04-02 00:51:21,982 INFO   , Thread-16, runner.py:360, [trial: 5, gen: 1] System took 00:01:35 to converge
2023-04-02 00:51:21,984 DEBUG  , Thread-16, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:51:21,985 DEBUG  , Thread-16, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 00:51:22,128 DEBUG  , Thread-16, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:42:34Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:41:29Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:49:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:49:59Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1984', 'uid': 'cce6499f-a31f-4f72-a644-915be26cc0d4'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:49:59Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:42:33Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:42:35Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:41:31Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:49:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:51:22,165 DEBUG  , Thread-16, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-bchdc
2023-04-02 00:51:22,658 DEBUG  , Thread-16, acto.py  :383, [trial: 5, gen: 1] Only one patch, no need to isolate
2023-04-02 00:51:22,659 WARNING, Thread-16, schema.py:573, [trial: 5, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:51:22,659 INFO   , Thread-16, input.py :723, [trial: 5, gen: 3] Progress [2] cases left
2023-04-02 00:51:22,660 DEBUG  , Thread-16, test_case.py:51, [trial: 5, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-02 00:51:22,660 INFO   , Thread-16, acto.py  :267, [trial: 5, gen: 3] Precondition of ["spec", "dataStore", "pvc", "source", "readOnly"] fails, try setup first
2023-04-02 00:51:22,660 INFO   , Thread-16, acto.py  :107, [trial: 5, gen: 3] JSON patch: [{"op": "add", "path": "/spec/dataStore/pvc/source", "value": {"claimName": "ACTOKEY", "readOnly": true}}]
2023-04-02 00:51:22,660 DEBUG  , Thread-16, test_case.py:51, [trial: 5, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-02 00:51:22,660 DEBUG  , Thread-16, acto.py  :458, [trial: 5, gen: 3] Run and check
2023-04-02 00:51:23,027 INFO   , Thread-16, runner.py:291, [trial: 5, gen: 3] Waiting for system to converge... 
2023-04-02 00:51:25,934 INFO   , Thread-2, runner.py:323, [trial: 5, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:51:28,790 INFO   , Thread-11, runner.py:360, [trial: 7, gen: 0] System took 00:01:00 to converge
2023-04-02 00:51:28,792 DEBUG  , Thread-11, runner.py:98, [trial: 7, gen: 0] STDOUT: 
2023-04-02 00:51:28,792 DEBUG  , Thread-11, runner.py:99, [trial: 7, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-10-0007/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.207.182:443: connect: connection refused

2023-04-02 00:51:28,904 DEBUG  , Thread-11, runner.py:177, [trial: 7, gen: 0] {}
2023-04-02 00:51:28,904 ERROR  , Thread-11, runner.py:107, [trial: 7, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 00:51:28,905 INFO   , Thread-11, checker.py:103, [trial: 7, gen: 0] Connection refused, reject mutation
2023-04-02 00:51:28,905 INFO   , Thread-11, acto.py  :472, [trial: 7, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 00:51:30,202 INFO   , Thread-1, runner.py:360, [trial: 6, gen: 3] System took 00:01:00 to converge
2023-04-02 00:51:30,204 DEBUG  , Thread-1, runner.py:98, [trial: 6, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:51:30,204 DEBUG  , Thread-1, runner.py:99, [trial: 6, gen: 3] STDERR: 
2023-04-02 00:51:30,361 DEBUG  , Thread-1, runner.py:177, [trial: 6, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:46:57Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:45:51Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:46:58Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:48:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1526', 'uid': 'f25c9693-407f-453a-b41b-082550c50f00'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:47:08Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:46:56Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:46:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:45:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:47:03Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:47:59Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 00:51:30,395 DEBUG  , Thread-1, runner.py:202, [trial: 6, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-p2jhw
2023-04-02 00:51:31,244 DEBUG  , Thread-1, acto.py  :383, [trial: 6, gen: 3] Only one patch, no need to isolate
2023-04-02 00:51:31,245 INFO   , Thread-1, acto.py  :339, [trial: 6, gen: 3] Input model is empty, break
2023-04-02 00:51:31,246 INFO   , Thread-1, acto.py  :187, Trial 6 finished, completed in 00:07:58
2023-04-02 00:51:31,246 INFO   , Thread-1, acto.py  :188, ---------------------------------------

2023-04-02 00:51:31,268 DEBUG  , Thread-1, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-p2jhw
2023-04-02 00:51:41,290 INFO   , Thread-1, common.py:629, Trial testrun-crdb-whitebox/trial-00-0006 completed without error
2023-04-02 00:51:41,291 INFO   , Thread-1, acto.py  :195, Test finished
2023-04-02 00:51:41,291 INFO   , Thread-1, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"name\\\"]\"": [
        "string-deletion"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"configMapKeyRef\\\"]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"cache\\\"]\"": [
        "string-deletion"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"sql\\\", \\\"annotations\\\"]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"ui\\\", \\\"tls\\\", 0, \\\"secretName\\\"]\"": [
        "string-deletion",
        "string-change"
    ]
}
2023-04-02 00:51:49,315 INFO   , Thread-11, runner.py:291, [trial: 7, gen: 0] Waiting for system to converge... 
2023-04-02 00:51:51,525 ERROR  , Thread-2, runner.py:363, [trial: 5, gen: 3] System failed to converge within 600 seconds
2023-04-02 00:51:51,529 DEBUG  , Thread-2, runner.py:98, [trial: 5, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:51:51,530 DEBUG  , Thread-2, runner.py:99, [trial: 5, gen: 3] STDERR: 
2023-04-02 00:51:51,680 DEBUG  , Thread-2, runner.py:177, [trial: 5, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:40:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"secretKeyRef":{"key":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:38:15Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:22Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:22Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:41:51Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1411', 'uid': '1890e9a2-127e-46cf-916d-488d8ee5e5f0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'secretKeyRef': {'key': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:40:33Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:40:21Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:40:22Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:38:17Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:40:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:51:51,710 DEBUG  , Thread-2, runner.py:202, [trial: 5, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-hnbz7
2023-04-02 00:51:52,545 INFO   , Thread-2, checker.py:134, [trial: 5, gen: 3] Number of system state fields: [3044] Number of delta: [362]
2023-04-02 00:51:52,545 ERROR  , Thread-2, checker.py:561, [trial: 5, gen: 3] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:51:52,546 DEBUG  , Thread-2, acto.py  :489, [trial: 5, gen: 3] Running recovery
2023-04-02 00:51:54,529 INFO   , Thread-2, runner.py:291, [trial: 5, gen: 3] Waiting for system to converge... 
2023-04-02 00:51:56,621 INFO   , Thread-6, runner.py:323, [trial: 7, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:52:03,136 INFO   , Thread-4, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:52:09,350 INFO   , Thread-3, runner.py:360, [trial: 5, gen: 3] System took 00:01:01 to converge
2023-04-02 00:52:09,351 DEBUG  , Thread-3, runner.py:98, [trial: 5, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:52:09,351 DEBUG  , Thread-3, runner.py:99, [trial: 5, gen: 3] STDERR: 
2023-04-02 00:52:09,498 DEBUG  , Thread-3, runner.py:177, [trial: 5, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:32:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:31:37Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:07Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:51:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3026', 'uid': 'a2d2beac-f962-4938-90d9-1f5474a70c23'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:40:07Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:32:41Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:32:42Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:31:39Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:40:02Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:52:09,527 DEBUG  , Thread-3, runner.py:202, [trial: 5, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-p6w44
2023-04-02 00:52:10,216 INFO   , Thread-3, acto.py  :187, Trial 5 finished, completed in 00:22:58
2023-04-02 00:52:10,216 INFO   , Thread-3, acto.py  :188, ---------------------------------------

2023-04-02 00:52:10,236 DEBUG  , Thread-3, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-p6w44
2023-04-02 00:52:26,616 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-2
2023-04-02 00:52:29,922 INFO   , Thread-9, runner.py:360, [trial: 5, gen: 3] System took 00:01:15 to converge
2023-04-02 00:52:29,924 DEBUG  , Thread-9, runner.py:98, [trial: 5, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:52:29,924 DEBUG  , Thread-9, runner.py:99, [trial: 5, gen: 3] STDERR: 
2023-04-02 00:52:30,067 DEBUG  , Thread-9, runner.py:177, [trial: 5, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:42Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:37:35Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:39:53Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:51:14Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2375', 'uid': '61bcc790-07e4-4ea6-a490-89bb9a75c452'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:39:53Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:41Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:42Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:37:37Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:39:48Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:52:30,104 DEBUG  , Thread-9, runner.py:202, [trial: 5, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-mrt9w
2023-04-02 00:52:30,858 INFO   , Thread-9, acto.py  :187, Trial 5 finished, completed in 00:17:18
2023-04-02 00:52:30,858 INFO   , Thread-9, acto.py  :188, ---------------------------------------

2023-04-02 00:52:30,876 DEBUG  , Thread-9, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-mrt9w
2023-04-02 00:52:46,657 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-8
2023-04-02 00:52:50,800 INFO   , Thread-11, runner.py:360, [trial: 7, gen: 0] System took 00:01:01 to converge
2023-04-02 00:52:50,802 DEBUG  , Thread-11, runner.py:98, [trial: 7, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:52:50,802 DEBUG  , Thread-11, runner.py:99, [trial: 7, gen: 0] STDERR: 
2023-04-02 00:52:50,898 DEBUG  , Thread-11, runner.py:177, [trial: 7, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:51:49Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:51:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:51:51Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1018', 'uid': 'd0f50402-d611-432b-9c88-c5ef9dd04a33'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:51:49Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:51:49Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:51:51Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:52:50,926 DEBUG  , Thread-11, runner.py:202, [trial: 7, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-j4xfq
2023-04-02 00:52:51,022 WARNING, Thread-11, schema.py:573, [trial: 7, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:52:51,023 INFO   , Thread-11, input.py :723, [trial: 7, gen: 1] Progress [4] cases left
2023-04-02 00:52:51,023 DEBUG  , Thread-11, test_case.py:51, [trial: 7, gen: 1] Precondition [all_on_different_nodes_precondition] Result [True]
2023-04-02 00:52:51,023 INFO   , Thread-11, acto.py  :263, [trial: 7, gen: 1] Precondition of ['spec', 'affinity'] satisfies
2023-04-02 00:52:51,023 INFO   , Thread-11, acto.py  :323, [trial: 7, gen: 1] Running bundled testcases
2023-04-02 00:52:51,023 DEBUG  , Thread-11, test_case.py:51, [trial: 7, gen: 1] Precondition [all_on_different_nodes_precondition] Result [True]
2023-04-02 00:52:51,024 INFO   , Thread-11, acto.py  :107, [trial: 7, gen: 1] JSON patch: [{"op": "add", "path": "/spec/affinity", "value": {"podAntiAffinity": {"requiredDuringSchedulingIgnoredDuringExecution": [{"labelSelector": {"matchExpressions": [{"key": "app.kubernetes.io/name", "operator": "In", "values": ["test-cluster"]}]}, "topologyKey": "kubernetes.io/hostname"}]}}}]
2023-04-02 00:52:51,024 DEBUG  , Thread-11, acto.py  :458, [trial: 7, gen: 1] Run and check
2023-04-02 00:52:51,394 INFO   , Thread-11, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 00:52:56,070 INFO   , Thread-2, runner.py:360, [trial: 5, gen: 3] System took 00:01:01 to converge
2023-04-02 00:52:56,071 DEBUG  , Thread-2, runner.py:98, [trial: 5, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:52:56,072 DEBUG  , Thread-2, runner.py:99, [trial: 5, gen: 3] STDERR: 
2023-04-02 00:52:56,303 DEBUG  , Thread-2, runner.py:177, [trial: 5, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:40:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:38:15Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:22Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:51:54Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2358', 'uid': '1890e9a2-127e-46cf-916d-488d8ee5e5f0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:40:33Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:40:21Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:40:22Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:38:17Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:40:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:52:56,334 DEBUG  , Thread-2, runner.py:202, [trial: 5, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-hnbz7
2023-04-02 00:52:56,775 INFO   , Thread-6, runner.py:323, [trial: 7, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:52:57,066 INFO   , Thread-2, acto.py  :187, Trial 5 finished, completed in 00:16:55
2023-04-02 00:52:57,066 INFO   , Thread-2, acto.py  :188, ---------------------------------------

2023-04-02 00:52:57,096 DEBUG  , Thread-2, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-hnbz7
2023-04-02 00:53:03,210 INFO   , Thread-4, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:53:13,092 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-1
2023-04-02 00:53:13,236 INFO   , Thread-5, runner.py:323, [trial: 6, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:53:21,703 INFO   , Thread-3, base.py  :41, Created cluster
2023-04-02 00:53:21,718 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:53:30,048 INFO   , Thread-10, runner.py:360, [trial: 5, gen: 5] System took 00:02:24 to converge
2023-04-02 00:53:30,049 DEBUG  , Thread-10, runner.py:98, [trial: 5, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:53:30,049 DEBUG  , Thread-10, runner.py:99, [trial: 5, gen: 5] STDERR: 
2023-04-02 00:53:30,182 DEBUG  , Thread-10, runner.py:177, [trial: 5, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullPolicy":"IfNotPresent"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:39:20Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullPolicy': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:51:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2749', 'uid': '36a02668-4108-4473-86fb-d90190c7a824'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:39:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:39:22Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:39:29Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:41:01Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 00:53:30,209 DEBUG  , Thread-10, runner.py:202, [trial: 5, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-b9w5s
2023-04-02 00:53:31,138 INFO   , Thread-10, acto.py  :321, [trial: 5, gen: 5] All setups failed
2023-04-02 00:53:31,138 WARNING, Thread-10, schema.py:573, [trial: 5, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-02 00:53:31,139 INFO   , Thread-10, input.py :723, [trial: 5, gen: 7] Progress [7] cases left
2023-04-02 00:53:31,139 DEBUG  , Thread-10, test_case.py:51, [trial: 5, gen: 7] Precondition [invalid_topology_spread_constraint_precondition] Result [True]
2023-04-02 00:53:31,139 INFO   , Thread-10, acto.py  :263, [trial: 5, gen: 7] Precondition of ['spec', 'topologySpreadConstraints', 0] satisfies
2023-04-02 00:53:31,139 INFO   , Thread-10, acto.py  :323, [trial: 5, gen: 7] Running bundled testcases
2023-04-02 00:53:31,139 DEBUG  , Thread-10, test_case.py:51, [trial: 5, gen: 7] Precondition [invalid_topology_spread_constraint_precondition] Result [True]
2023-04-02 00:53:31,140 INFO   , Thread-10, acto.py  :107, [trial: 5, gen: 7] JSON patch: [{"op": "add", "path": "/spec/topologySpreadConstraints", "value": [{"maxSkew": 1, "topologyKey": "kubernetes.io/hostname", "whenUnsatisfiable": "INVALID", "labelSelector": {"matchLabels": {"foo": "bar"}}}]}]
2023-04-02 00:53:31,140 DEBUG  , Thread-10, acto.py  :458, [trial: 5, gen: 7] Run and check
2023-04-02 00:53:31,484 INFO   , Thread-10, runner.py:291, [trial: 5, gen: 7] Waiting for system to converge... 
2023-04-02 00:53:38,641 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:53:41,599 INFO   , Thread-9, base.py  :41, Created cluster
2023-04-02 00:53:41,612 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:53:47,360 INFO   , Thread-16, runner.py:360, [trial: 5, gen: 3] System took 00:02:24 to converge
2023-04-02 00:53:47,361 DEBUG  , Thread-16, runner.py:98, [trial: 5, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:53:47,361 DEBUG  , Thread-16, runner.py:99, [trial: 5, gen: 3] STDERR: 
2023-04-02 00:53:47,503 DEBUG  , Thread-16, runner.py:177, [trial: 5, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:42:34Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":true},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:41:29Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:49:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:51:22Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2141', 'uid': 'cce6499f-a31f-4f72-a644-915be26cc0d4'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY', 'readOnly': True}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:49:59Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:42:33Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:42:35Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:41:31Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:49:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:53:47,531 DEBUG  , Thread-16, runner.py:202, [trial: 5, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-bchdc
2023-04-02 00:53:48,194 DEBUG  , Thread-16, checker.py:278, [trial: 5, gen: 3] Input delta [['spec', 'dataStore', 'pvc', 'source', 'readOnly']] matched with [['test-cluster', 'spec', 'template', 'spec', 'volumes', 0, 'persistent_volume_claim', 'read_only']]
2023-04-02 00:53:48,422 INFO   , Thread-16, checker.py:134, [trial: 5, gen: 3] Number of system state fields: [3467] Number of delta: [70]
2023-04-02 00:53:48,423 INFO   , Thread-16, acto.py  :323, [trial: 5, gen: 3] Running bundled testcases
2023-04-02 00:53:48,423 DEBUG  , Thread-16, test_case.py:51, [trial: 5, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-02 00:53:48,424 INFO   , Thread-16, acto.py  :107, [trial: 5, gen: 3] JSON patch: [{"op": "replace", "path": "/spec/dataStore/pvc/source/readOnly", "value": false}]
2023-04-02 00:53:48,424 DEBUG  , Thread-16, acto.py  :458, [trial: 5, gen: 3] Run and check
2023-04-02 00:53:48,829 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-02 00:53:48,829 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:53:51,780 INFO   , Thread-16, runner.py:291, [trial: 5, gen: 3] Waiting for system to converge... 
2023-04-02 00:53:52,208 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:53:56,864 INFO   , Thread-6, runner.py:323, [trial: 7, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:53:57,538 INFO   , Thread-2, base.py  :41, Created cluster
2023-04-02 00:53:57,552 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:53:58,768 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:54:02,293 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-02 00:54:02,294 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:54:02,518 INFO   , Thread-11, runner.py:360, [trial: 7, gen: 1] System took 00:01:11 to converge
2023-04-02 00:54:02,520 DEBUG  , Thread-11, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:54:02,520 DEBUG  , Thread-11, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 00:54:02,674 DEBUG  , Thread-11, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:52:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchExpressions":[{"key":"app.kubernetes.io/name","operator":"In","values":["test-cluster"]}]},"topologyKey":"kubernetes.io/hostname"}]}},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:51:49Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:affinity': {'.': {}, 'f:podAntiAffinity': {'.': {}, 'f:requiredDuringSchedulingIgnoredDuringExecution': {}}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:52:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:53:06Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1290', 'uid': 'd0f50402-d611-432b-9c88-c5ef9dd04a33'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'affinity': {'podAntiAffinity': {'requiredDuringSchedulingIgnoredDuringExecution': [{'labelSelector': {'matchExpressions': [{'key': 'app.kubernetes.io/name', 'operator': 'In', 'values': ['test-cluster']}]}, 'topologyKey': 'kubernetes.io/hostname'}]}}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:53:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:52:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:52:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:51:51Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:53:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:54:02,701 DEBUG  , Thread-11, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-j4xfq
2023-04-02 00:54:03,343 INFO   , Thread-4, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:54:03,661 DEBUG  , Thread-11, checker.py:278, [trial: 7, gen: 1] Input delta [['spec', 'affinity', 'podAntiAffinity', 'requiredDuringSchedulingIgnoredDuringExecution', 0, 'topologyKey']] matched with [['test-cluster-0', 'spec', 'affinity', 'pod_anti_affinity', 'required_during_scheduling_ignored_during_execution', 0, 'topology_key']]
2023-04-02 00:54:03,661 DEBUG  , Thread-11, checker.py:278, [trial: 7, gen: 1] Input delta [['spec', 'affinity', 'podAntiAffinity', 'requiredDuringSchedulingIgnoredDuringExecution', 0, 'topologyKey']] matched with [['test-cluster-1', 'spec', 'affinity', 'pod_anti_affinity', 'required_during_scheduling_ignored_during_execution', 0, 'topology_key']]
2023-04-02 00:54:03,661 DEBUG  , Thread-11, checker.py:278, [trial: 7, gen: 1] Input delta [['spec', 'affinity', 'podAntiAffinity', 'requiredDuringSchedulingIgnoredDuringExecution', 0, 'topologyKey']] matched with [['test-cluster-2', 'spec', 'affinity', 'pod_anti_affinity', 'required_during_scheduling_ignored_during_execution', 0, 'topology_key']]
2023-04-02 00:54:03,661 DEBUG  , Thread-11, checker.py:278, [trial: 7, gen: 1] Input delta [['spec', 'affinity', 'podAntiAffinity', 'requiredDuringSchedulingIgnoredDuringExecution', 0, 'topologyKey']] matched with [['test-cluster', 'spec', 'template', 'spec', 'affinity', 'pod_anti_affinity', 'required_during_scheduling_ignored_during_execution', 0, 'topology_key']]
2023-04-02 00:54:03,775 INFO   , Thread-11, common.py:569, [trial: 7, gen: 1] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-02 00:54:03,776 INFO   , Thread-11, checker.py:134, [trial: 7, gen: 1] Number of system state fields: [3804] Number of delta: [1107]
2023-04-02 00:54:03,776 DEBUG  , Thread-11, acto.py  :374, [trial: 7, gen: 1] Invalid input, revert
2023-04-02 00:54:03,776 WARNING, Thread-11, schema.py:573, [trial: 7, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:54:03,777 DEBUG  , Thread-11, acto.py  :458, [trial: 7, gen: 1] Run and check
2023-04-02 00:54:04,094 INFO   , Thread-11, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 00:54:08,866 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-02 00:54:08,866 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:54:10,950 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:54:11,466 INFO   , Thread-8, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:54:13,319 INFO   , Thread-5, runner.py:323, [trial: 6, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:54:14,973 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:54:21,037 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-02 00:54:21,037 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:54:25,065 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-02 00:54:25,066 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:54:27,205 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:54:31,655 INFO   , Thread-10, runner.py:323, [trial: 5, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 00:54:37,291 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-02 00:54:37,291 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:54:42,433 WARNING, Thread-3, schema.py:573, [trial: 6, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:54:42,434 DEBUG  , Thread-3, acto.py  :458, [trial: 6, gen: 0] Run and check
2023-04-02 00:54:44,976 INFO   , Thread-3, runner.py:291, [trial: 6, gen: 0] Waiting for system to converge... 
2023-04-02 00:55:01,175 WARNING, Thread-9, schema.py:573, [trial: 6, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:55:01,176 DEBUG  , Thread-9, acto.py  :458, [trial: 6, gen: 0] Run and check
2023-04-02 00:55:03,435 INFO   , Thread-4, runner.py:323, [trial: 4, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:55:03,836 INFO   , Thread-9, runner.py:291, [trial: 6, gen: 0] Waiting for system to converge... 
2023-04-02 00:55:11,529 INFO   , Thread-8, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:55:13,405 INFO   , Thread-5, runner.py:323, [trial: 6, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:55:17,422 WARNING, Thread-2, schema.py:573, [trial: 6, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:55:17,422 DEBUG  , Thread-2, acto.py  :458, [trial: 6, gen: 0] Run and check
2023-04-02 00:55:20,073 INFO   , Thread-2, runner.py:291, [trial: 6, gen: 0] Waiting for system to converge... 
2023-04-02 00:55:43,332 INFO   , Thread-6, runner.py:323, [trial: 7, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:55:50,148 ERROR  , Thread-4, runner.py:363, [trial: 4, gen: 1] System failed to converge within 600 seconds
2023-04-02 00:55:50,150 DEBUG  , Thread-4, runner.py:98, [trial: 4, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:55:50,151 DEBUG  , Thread-4, runner.py:99, [trial: 4, gen: 1] STDERR: 
2023-04-02 00:55:50,288 DEBUG  , Thread-4, runner.py:177, [trial: 4, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:35:49Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:34:43Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:45:50Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:45:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3525', 'uid': 'a7b6ff38-e592-48e2-a52c-157ec8724f75'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:34:44Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:35:48Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:35:49Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:34:46Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:55:48Z', 'message': 'pod has not completely started', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:55:50,316 DEBUG  , Thread-4, runner.py:202, [trial: 4, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-s5plr
2023-04-02 00:55:50,737 DEBUG  , Thread-4, checker.py:728, [trial: 4, gen: 1] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [root['pod']['test-cluster-0'], root['pod']['test-cluster-1'], root['pod']['test-cluster-2'], root['stateful_set']['test-cluster'], root['service']['test-cluster'], root['service']['test-cluster-public'], root['pvc']['datadir-test-cluster-0'], root['pvc']['datadir-test-cluster-1'], root['pvc']['datadir-test-cluster-2'], root['pod_disruption_budget']['test-cluster'], root['secret']['test-cluster-ca'], root['secret']['test-cluster-node'], root['secret']['test-cluster-root']]}
2023-04-02 00:55:50,741 INFO   , Thread-4, acto.py  :187, Trial 4 finished, completed in 00:24:44
2023-04-02 00:55:50,741 INFO   , Thread-4, acto.py  :188, ---------------------------------------

2023-04-02 00:55:50,761 DEBUG  , Thread-4, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-s5plr
2023-04-02 00:55:55,646 INFO   , Thread-3, runner.py:360, [trial: 6, gen: 0] System took 00:01:10 to converge
2023-04-02 00:55:55,647 DEBUG  , Thread-3, runner.py:98, [trial: 6, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:55:55,647 DEBUG  , Thread-3, runner.py:99, [trial: 6, gen: 0] STDERR: 
2023-04-02 00:55:55,791 DEBUG  , Thread-3, runner.py:177, [trial: 6, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:54:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:54:44Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:54:44Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:54:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:54:48Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1090', 'uid': '900e7e09-2bdc-4a17-9937-824ab84bc51d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:54:59Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:54:47Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:54:48Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:54:53Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:55:55,818 DEBUG  , Thread-3, runner.py:202, [trial: 6, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-x7zpn
2023-04-02 00:55:56,092 WARNING, Thread-3, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:55:56,092 INFO   , Thread-3, input.py :723, [trial: 6, gen: 1] Progress [11] cases left
2023-04-02 00:55:56,094 DEBUG  , Thread-3, test_case.py:46, [trial: 6, gen: 1] Precondition [precondition] Result [False]
2023-04-02 00:55:56,094 DEBUG  , Thread-3, test_case.py:51, [trial: 6, gen: 1] Precondition [empty_precondition] Result [False]
2023-04-02 00:55:56,094 INFO   , Thread-3, acto.py  :267, [trial: 6, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "resourceFieldRef", "divisor"] fails, try setup first
2023-04-02 00:55:56,095 INFO   , Thread-3, acto.py  :107, [trial: 6, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"resourceFieldRef": {"resource": "ACTOKEY", "divisor": null}}}]}]
2023-04-02 00:55:56,096 DEBUG  , Thread-3, test_case.py:46, [trial: 6, gen: 1] Precondition [precondition] Result [False]
2023-04-02 00:55:56,096 DEBUG  , Thread-3, test_case.py:51, [trial: 6, gen: 1] Precondition [empty_precondition] Result [False]
2023-04-02 00:55:56,096 ERROR  , Thread-3, acto.py  :277, [trial: 6, gen: 1] Setup does not work correctly
2023-04-02 00:55:56,096 INFO   , Thread-3, acto.py  :321, [trial: 6, gen: 1] All setups failed
2023-04-02 00:55:56,096 WARNING, Thread-3, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:55:56,097 INFO   , Thread-3, input.py :723, [trial: 6, gen: 1] Progress [10] cases left
2023-04-02 00:55:56,097 INFO   , Thread-3, acto.py  :187, Trial 6 finished, completed in 00:03:35
2023-04-02 00:55:56,097 INFO   , Thread-3, acto.py  :188, ---------------------------------------

2023-04-02 00:55:56,107 DEBUG  , Thread-3, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-x7zpn
2023-04-02 00:56:00,842 INFO   , Thread-10, runner.py:323, [trial: 5, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 00:56:05,306 INFO   , Thread-9, runner.py:360, [trial: 6, gen: 0] System took 00:01:01 to converge
2023-04-02 00:56:05,308 DEBUG  , Thread-9, runner.py:98, [trial: 6, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:56:05,308 DEBUG  , Thread-9, runner.py:99, [trial: 6, gen: 0] STDERR: 
2023-04-02 00:56:05,420 DEBUG  , Thread-9, runner.py:177, [trial: 6, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:55:03Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:55:03Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:55:05Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '915', 'uid': 'a0d48ac2-efdc-4992-9fbc-0198c776a40a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:55:03Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:55:03Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:55:05Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 00:56:05,439 DEBUG  , Thread-9, runner.py:202, [trial: 6, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-ngc7s
2023-04-02 00:56:05,570 WARNING, Thread-9, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:56:05,570 INFO   , Thread-9, input.py :723, [trial: 6, gen: 1] Progress [8] cases left
2023-04-02 00:56:05,570 DEBUG  , Thread-9, test_case.py:51, [trial: 6, gen: 1] Precondition [decrease_precondition] Result [False]
2023-04-02 00:56:05,570 INFO   , Thread-9, acto.py  :267, [trial: 6, gen: 1] Precondition of ["spec", "resources", "limits", "kiaqbglcgq"] fails, try setup first
2023-04-02 00:56:05,571 INFO   , Thread-9, acto.py  :107, [trial: 6, gen: 1] JSON patch: [{"op": "add", "path": "/spec/resources/limits/kiaqbglcgq", "value": "1000m"}]
2023-04-02 00:56:05,571 DEBUG  , Thread-9, test_case.py:51, [trial: 6, gen: 1] Precondition [decrease_precondition] Result [True]
2023-04-02 00:56:05,571 DEBUG  , Thread-9, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 00:56:05,912 INFO   , Thread-9, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:56:06,131 INFO   , Thread-3, common.py:629, Trial testrun-crdb-whitebox/trial-02-0006 completed without error
2023-04-02 00:56:07,101 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-3
2023-04-02 00:56:11,617 INFO   , Thread-8, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:56:12,395 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-2
2023-04-02 00:56:13,492 INFO   , Thread-5, runner.py:323, [trial: 6, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:56:20,723 INFO   , Thread-16, runner.py:360, [trial: 5, gen: 3] System took 00:02:28 to converge
2023-04-02 00:56:20,725 DEBUG  , Thread-16, runner.py:98, [trial: 5, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:56:20,725 DEBUG  , Thread-16, runner.py:99, [trial: 5, gen: 3] STDERR: 
2023-04-02 00:56:20,893 DEBUG  , Thread-16, runner.py:177, [trial: 5, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:42:34Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":false},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:41:29Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:49:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:51:22Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2538', 'uid': 'cce6499f-a31f-4f72-a644-915be26cc0d4'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY'}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:49:59Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:42:33Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:42:35Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:41:31Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:49:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:56:20,926 DEBUG  , Thread-16, runner.py:202, [trial: 5, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-bchdc
2023-04-02 00:56:21,571 DEBUG  , Thread-16, checker.py:278, [trial: 5, gen: 3] Input delta [['spec', 'dataStore', 'pvc', 'source', 'readOnly']] matched with [['test-cluster', 'spec', 'template', 'spec', 'volumes', 0, 'persistent_volume_claim', 'read_only']]
2023-04-02 00:56:21,788 INFO   , Thread-16, checker.py:134, [trial: 5, gen: 3] Number of system state fields: [3460] Number of delta: [68]
2023-04-02 00:56:21,790 WARNING, Thread-16, schema.py:573, [trial: 5, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 00:56:21,790 INFO   , Thread-16, input.py :723, [trial: 5, gen: 5] Progress [1] cases left
2023-04-02 00:56:21,790 DEBUG  , Thread-16, test_case.py:51, [trial: 5, gen: 5] Precondition [toggle_off_precondition] Result [False]
2023-04-02 00:56:21,790 INFO   , Thread-16, acto.py  :267, [trial: 5, gen: 5] Precondition of ["spec", "dataStore", "pvc", "source", "readOnly"] fails, try setup first
2023-04-02 00:56:21,790 INFO   , Thread-16, acto.py  :107, [trial: 5, gen: 5] JSON patch: [{"op": "replace", "path": "/spec/dataStore/pvc/source/readOnly", "value": true}]
2023-04-02 00:56:21,791 DEBUG  , Thread-16, test_case.py:51, [trial: 5, gen: 5] Precondition [toggle_off_precondition] Result [True]
2023-04-02 00:56:21,791 DEBUG  , Thread-16, acto.py  :458, [trial: 5, gen: 5] Run and check
2023-04-02 00:56:22,141 INFO   , Thread-16, runner.py:291, [trial: 5, gen: 5] Waiting for system to converge... 
2023-04-02 00:56:30,450 INFO   , Thread-2, runner.py:360, [trial: 6, gen: 0] System took 00:01:10 to converge
2023-04-02 00:56:30,451 DEBUG  , Thread-2, runner.py:98, [trial: 6, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:56:30,451 DEBUG  , Thread-2, runner.py:99, [trial: 6, gen: 0] STDERR: 
2023-04-02 00:56:30,653 DEBUG  , Thread-2, runner.py:177, [trial: 6, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:55:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:55:20Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:55:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:55:34Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1058', 'uid': 'c971a0b3-4b64-48ff-be6f-5a6617cd5190'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:55:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:55:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:55:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:55:29Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:56:30,683 DEBUG  , Thread-2, runner.py:202, [trial: 6, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-qw652
2023-04-02 00:56:30,863 WARNING, Thread-2, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:56:30,863 INFO   , Thread-2, input.py :723, [trial: 6, gen: 1] Progress [7] cases left
2023-04-02 00:56:30,863 DEBUG  , Thread-2, test_case.py:51, [trial: 6, gen: 1] Precondition [change_precondition] Result [False]
2023-04-02 00:56:30,863 INFO   , Thread-2, acto.py  :267, [trial: 6, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "secretKeyRef", "key"] fails, try setup first
2023-04-02 00:56:30,864 INFO   , Thread-2, acto.py  :107, [trial: 6, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"secretKeyRef": {"key": "ACTOKEY"}}}]}]
2023-04-02 00:56:30,864 DEBUG  , Thread-2, test_case.py:51, [trial: 6, gen: 1] Precondition [change_precondition] Result [True]
2023-04-02 00:56:30,864 DEBUG  , Thread-2, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 00:56:31,166 INFO   , Thread-2, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 00:56:32,875 INFO   , Thread-11, runner.py:360, [trial: 7, gen: 1] System took 00:02:28 to converge
2023-04-02 00:56:32,876 DEBUG  , Thread-11, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:56:32,877 DEBUG  , Thread-11, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 00:56:33,011 DEBUG  , Thread-11, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:52:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:51:49Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:53:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:54:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1398', 'uid': 'd0f50402-d611-432b-9c88-c5ef9dd04a33'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:53:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:52:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:52:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:51:51Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:53:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:56:33,041 DEBUG  , Thread-11, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-j4xfq
2023-04-02 00:56:33,562 DEBUG  , Thread-11, acto.py  :383, [trial: 7, gen: 1] Only one patch, no need to isolate
2023-04-02 00:56:33,562 WARNING, Thread-11, schema.py:573, [trial: 7, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 00:56:33,562 INFO   , Thread-11, input.py :723, [trial: 7, gen: 3] Progress [3] cases left
2023-04-02 00:56:33,562 DEBUG  , Thread-11, test_case.py:51, [trial: 7, gen: 3] Precondition [invalid_affinity_precondition] Result [True]
2023-04-02 00:56:33,563 INFO   , Thread-11, acto.py  :263, [trial: 7, gen: 3] Precondition of ['spec', 'affinity'] satisfies
2023-04-02 00:56:33,563 INFO   , Thread-11, acto.py  :323, [trial: 7, gen: 3] Running bundled testcases
2023-04-02 00:56:33,563 DEBUG  , Thread-11, test_case.py:51, [trial: 7, gen: 3] Precondition [invalid_affinity_precondition] Result [True]
2023-04-02 00:56:33,563 INFO   , Thread-11, acto.py  :107, [trial: 7, gen: 3] JSON patch: [{"op": "add", "path": "/spec/affinity", "value": {"nodeAffinity": {"requiredDuringSchedulingIgnoredDuringExecution": {"nodeSelectorTerms": [{"matchExpressions": [{"key": "kubernetes.io/hostname", "operator": "In", "values": ["NULL"]}]}]}}}}]
2023-04-02 00:56:33,563 DEBUG  , Thread-11, acto.py  :458, [trial: 7, gen: 3] Run and check
2023-04-02 00:56:33,971 INFO   , Thread-11, runner.py:291, [trial: 7, gen: 3] Waiting for system to converge... 
2023-04-02 00:56:43,421 INFO   , Thread-6, runner.py:323, [trial: 7, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:56:54,779 INFO   , Thread-4, base.py  :41, Created cluster
2023-04-02 00:56:54,792 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:56:57,747 INFO   , Thread-3, base.py  :41, Created cluster
2023-04-02 00:56:57,757 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 00:57:00,929 INFO   , Thread-10, runner.py:323, [trial: 5, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 00:57:11,217 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:57:13,833 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:57:15,236 INFO   , Thread-5, runner.py:323, [trial: 6, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:57:21,297 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-02 00:57:21,297 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:57:23,289 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:57:23,918 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-02 00:57:23,918 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:57:25,905 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-02 00:57:33,390 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-02 00:57:33,390 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:57:35,996 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-02 00:57:35,996 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 00:57:43,506 INFO   , Thread-6, runner.py:323, [trial: 7, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:57:43,630 INFO   , Thread-11, runner.py:323, [trial: 7, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:58:01,017 INFO   , Thread-10, runner.py:323, [trial: 5, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 00:58:04,179 INFO   , Thread-8, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:58:13,520 WARNING, Thread-4, schema.py:573, [trial: 5, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:58:13,521 DEBUG  , Thread-4, acto.py  :458, [trial: 5, gen: 0] Run and check
2023-04-02 00:58:15,322 INFO   , Thread-5, runner.py:323, [trial: 6, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:58:16,128 WARNING, Thread-3, schema.py:573, [trial: 7, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 00:58:16,128 DEBUG  , Thread-3, acto.py  :458, [trial: 7, gen: 0] Run and check
2023-04-02 00:58:16,217 INFO   , Thread-4, runner.py:291, [trial: 5, gen: 0] Waiting for system to converge... 
2023-04-02 00:58:18,775 INFO   , Thread-3, runner.py:291, [trial: 7, gen: 0] Waiting for system to converge... 
2023-04-02 00:58:19,754 INFO   , Thread-16, runner.py:360, [trial: 5, gen: 5] System took 00:01:57 to converge
2023-04-02 00:58:19,755 DEBUG  , Thread-16, runner.py:98, [trial: 5, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:58:19,756 DEBUG  , Thread-16, runner.py:99, [trial: 5, gen: 5] STDERR: 
2023-04-02 00:58:19,913 DEBUG  , Thread-16, runner.py:177, [trial: 5, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:42:34Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":true},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:41:29Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:49:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:51:22Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2943', 'uid': 'cce6499f-a31f-4f72-a644-915be26cc0d4'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY', 'readOnly': True}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:49:59Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:42:33Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:42:35Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:41:31Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:49:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:58:19,946 DEBUG  , Thread-16, runner.py:202, [trial: 5, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-bchdc
2023-04-02 00:58:20,633 DEBUG  , Thread-16, checker.py:278, [trial: 5, gen: 5] Input delta [['spec', 'dataStore', 'pvc', 'source', 'readOnly']] matched with [['test-cluster', 'spec', 'template', 'spec', 'volumes', 0, 'persistent_volume_claim', 'read_only']]
2023-04-02 00:58:20,960 INFO   , Thread-16, checker.py:134, [trial: 5, gen: 5] Number of system state fields: [3457] Number of delta: [68]
2023-04-02 00:58:20,962 INFO   , Thread-16, acto.py  :323, [trial: 5, gen: 5] Running bundled testcases
2023-04-02 00:58:20,962 DEBUG  , Thread-16, test_case.py:51, [trial: 5, gen: 5] Precondition [toggle_off_precondition] Result [True]
2023-04-02 00:58:20,962 INFO   , Thread-16, acto.py  :107, [trial: 5, gen: 5] JSON patch: [{"op": "replace", "path": "/spec/dataStore/pvc/source/readOnly", "value": false}]
2023-04-02 00:58:20,962 DEBUG  , Thread-16, acto.py  :458, [trial: 5, gen: 5] Run and check
2023-04-02 00:58:21,379 INFO   , Thread-16, runner.py:291, [trial: 5, gen: 5] Waiting for system to converge... 
2023-04-02 00:58:43,596 INFO   , Thread-6, runner.py:323, [trial: 7, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 00:59:01,108 INFO   , Thread-10, runner.py:323, [trial: 5, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 00:59:02,502 INFO   , Thread-2, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:59:04,261 INFO   , Thread-8, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 00:59:07,908 ERROR  , Thread-6, runner.py:363, [trial: 7, gen: 2] System failed to converge within 600 seconds
2023-04-02 00:59:07,910 DEBUG  , Thread-6, runner.py:98, [trial: 7, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:59:07,910 DEBUG  , Thread-6, runner.py:99, [trial: 7, gen: 2] STDERR: 
2023-04-02 00:59:08,049 DEBUG  , Thread-6, runner.py:177, [trial: 7, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:44:38Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"affinity":{},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"secretKeyRef":{"key":"ACTOKEY","name":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:44:35Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:44:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:affinity': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:49:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1658', 'uid': '28b48ab6-9e7a-4e52-81cb-1b009531415e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'affinity': {}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'secretKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:44:49Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:44:37Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:44:38Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:44:37Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:44:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:59:08,079 DEBUG  , Thread-6, runner.py:202, [trial: 7, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-7ntxn
2023-04-02 00:59:08,814 INFO   , Thread-6, checker.py:134, [trial: 7, gen: 2] Number of system state fields: [3051] Number of delta: [215]
2023-04-02 00:59:08,815 ERROR  , Thread-6, checker.py:561, [trial: 7, gen: 2] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 00:59:08,817 DEBUG  , Thread-6, acto.py  :489, [trial: 7, gen: 2] Running recovery
2023-04-02 00:59:10,729 INFO   , Thread-6, runner.py:291, [trial: 7, gen: 2] Waiting for system to converge... 
2023-04-02 00:59:15,411 INFO   , Thread-5, runner.py:323, [trial: 6, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 00:59:44,065 INFO   , Thread-16, runner.py:360, [trial: 5, gen: 5] System took 00:01:22 to converge
2023-04-02 00:59:44,066 DEBUG  , Thread-16, runner.py:98, [trial: 5, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 00:59:44,066 DEBUG  , Thread-16, runner.py:99, [trial: 5, gen: 5] STDERR: 
2023-04-02 00:59:44,275 DEBUG  , Thread-16, runner.py:177, [trial: 5, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:42:34Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"source":{"claimName":"ACTOKEY","readOnly":false},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:41:29Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:49:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:source': {'f:claimName': {}, 'f:readOnly': {}}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:51:22Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3254', 'uid': 'cce6499f-a31f-4f72-a644-915be26cc0d4'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': 'ACTOKEY'}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:49:59Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:42:33Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:42:35Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:41:31Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:49:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:59:44,302 DEBUG  , Thread-16, runner.py:202, [trial: 5, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-bchdc
2023-04-02 00:59:44,871 DEBUG  , Thread-16, checker.py:278, [trial: 5, gen: 5] Input delta [['spec', 'dataStore', 'pvc', 'source', 'readOnly']] matched with [['test-cluster', 'spec', 'template', 'spec', 'volumes', 0, 'persistent_volume_claim', 'read_only']]
2023-04-02 00:59:45,089 INFO   , Thread-16, checker.py:134, [trial: 5, gen: 5] Number of system state fields: [3440] Number of delta: [39]
2023-04-02 00:59:45,090 INFO   , Thread-16, acto.py  :339, [trial: 5, gen: 5] Input model is empty, break
2023-04-02 00:59:45,094 INFO   , Thread-16, acto.py  :187, Trial 5 finished, completed in 00:20:37
2023-04-02 00:59:45,095 INFO   , Thread-16, acto.py  :188, ---------------------------------------

2023-04-02 00:59:45,114 DEBUG  , Thread-16, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-bchdc
2023-04-02 00:59:53,203 INFO   , Thread-3, runner.py:360, [trial: 7, gen: 0] System took 00:01:34 to converge
2023-04-02 00:59:53,205 DEBUG  , Thread-3, runner.py:98, [trial: 7, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 00:59:53,205 DEBUG  , Thread-3, runner.py:99, [trial: 7, gen: 0] STDERR: 
2023-04-02 00:59:53,420 DEBUG  , Thread-3, runner.py:177, [trial: 7, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:18Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:58:18Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:58:33Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1088', 'uid': '34f5360c-3ee3-42e3-abfa-6bb6e7624f06'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:33Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:21Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:22Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:21Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:58:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 00:59:53,448 DEBUG  , Thread-3, runner.py:202, [trial: 7, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-7pgtc
2023-04-02 00:59:53,645 WARNING, Thread-3, schema.py:573, [trial: 7, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 00:59:53,645 INFO   , Thread-3, input.py :723, [trial: 7, gen: 1] Progress [10] cases left
2023-04-02 00:59:53,646 DEBUG  , Thread-3, test_case.py:51, [trial: 7, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-02 00:59:53,646 INFO   , Thread-3, acto.py  :267, [trial: 7, gen: 1] Precondition of ["spec", "ingress", "ui", "tls", 0, "hosts"] fails, try setup first
2023-04-02 00:59:53,646 INFO   , Thread-3, acto.py  :107, [trial: 7, gen: 1] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": [{"hosts": ["ACTOKEY", "ACTOKEY", "ACTOKEY", "ACTOKEY"]}]}}}]
2023-04-02 00:59:53,646 DEBUG  , Thread-3, test_case.py:51, [trial: 7, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-02 00:59:53,646 DEBUG  , Thread-3, acto.py  :458, [trial: 7, gen: 1] Run and check
2023-04-02 00:59:54,035 INFO   , Thread-3, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 00:59:55,143 INFO   , Thread-16, common.py:629, Trial testrun-crdb-whitebox/trial-15-0005 completed without error
2023-04-02 00:59:55,144 INFO   , Thread-16, acto.py  :195, Test finished
2023-04-02 00:59:55,144 INFO   , Thread-16, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"clientTLSSecret\\\"]\"": [
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"configMapKeyRef\\\", \\\"key\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"resourceFieldRef\\\", \\\"containerName\\\"]\"": [
        "string-deletion",
        "string-change"
    ]
}
2023-04-02 01:00:01,194 INFO   , Thread-10, runner.py:323, [trial: 5, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 01:00:04,347 INFO   , Thread-8, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:00:12,773 INFO   , Thread-6, runner.py:360, [trial: 7, gen: 2] System took 00:01:02 to converge
2023-04-02 01:00:12,775 DEBUG  , Thread-6, runner.py:98, [trial: 7, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:00:12,775 DEBUG  , Thread-6, runner.py:99, [trial: 7, gen: 2] STDERR: 
2023-04-02 01:00:12,911 DEBUG  , Thread-6, runner.py:177, [trial: 7, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:44:38Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"affinity":{},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:44:35Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:44:38Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:affinity': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:59:10Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2599', 'uid': '28b48ab6-9e7a-4e52-81cb-1b009531415e'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'affinity': {}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:44:49Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:44:37Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:44:38Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:44:37Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:44:43Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:00:12,939 DEBUG  , Thread-6, runner.py:202, [trial: 7, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-7ntxn
2023-04-02 01:00:13,691 INFO   , Thread-6, acto.py  :187, Trial 7 finished, completed in 00:18:01
2023-04-02 01:00:13,691 INFO   , Thread-6, acto.py  :188, ---------------------------------------

2023-04-02 01:00:13,715 DEBUG  , Thread-6, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-7ntxn
2023-04-02 01:00:15,496 INFO   , Thread-5, runner.py:323, [trial: 6, gen: 3] Statefulset test-cluster is not ready yet
2023-04-02 01:00:22,913 INFO   , Thread-4, runner.py:360, [trial: 5, gen: 0] System took 00:02:06 to converge
2023-04-02 01:00:22,914 DEBUG  , Thread-4, runner.py:98, [trial: 5, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:00:22,915 DEBUG  , Thread-4, runner.py:99, [trial: 5, gen: 0] STDERR: 
2023-04-02 01:00:23,049 DEBUG  , Thread-4, runner.py:177, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:16Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:58:16Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:58:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:58:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1070', 'uid': 'f88622ac-1f50-4f77-8efa-5314df3adb4b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:31Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:00:23,075 DEBUG  , Thread-4, runner.py:202, [trial: 5, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-nrhk2
2023-04-02 01:00:23,314 WARNING, Thread-4, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:00:23,314 INFO   , Thread-4, input.py :723, [trial: 5, gen: 1] Progress [5] cases left
2023-04-02 01:00:23,314 DEBUG  , Thread-4, test_case.py:51, [trial: 5, gen: 1] Precondition [pop_precondition] Result [False]
2023-04-02 01:00:23,314 INFO   , Thread-4, acto.py  :267, [trial: 5, gen: 1] Precondition of ["spec", "additionalArgs"] fails, try setup first
2023-04-02 01:00:23,315 INFO   , Thread-4, acto.py  :107, [trial: 5, gen: 1] JSON patch: [{"op": "add", "path": "/spec/additionalArgs", "value": []}]
2023-04-02 01:00:23,315 DEBUG  , Thread-4, test_case.py:51, [trial: 5, gen: 1] Precondition [pop_precondition] Result [False]
2023-04-02 01:00:23,315 ERROR  , Thread-4, acto.py  :277, [trial: 5, gen: 1] Setup does not work correctly
2023-04-02 01:00:23,315 INFO   , Thread-4, acto.py  :321, [trial: 5, gen: 1] All setups failed
2023-04-02 01:00:23,315 WARNING, Thread-4, schema.py:573, [trial: 5, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:00:23,315 INFO   , Thread-4, input.py :723, [trial: 5, gen: 1] Progress [4] cases left
2023-04-02 01:00:23,315 DEBUG  , Thread-4, test_case.py:51, [trial: 5, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 01:00:23,316 INFO   , Thread-4, acto.py  :263, [trial: 5, gen: 1] Precondition of ['spec', 'additionalArgs'] satisfies
2023-04-02 01:00:23,316 INFO   , Thread-4, acto.py  :323, [trial: 5, gen: 1] Running bundled testcases
2023-04-02 01:00:23,316 DEBUG  , Thread-4, test_case.py:51, [trial: 5, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 01:00:23,316 INFO   , Thread-4, acto.py  :107, [trial: 5, gen: 1] JSON patch: [{"op": "add", "path": "/spec/additionalArgs", "value": []}]
2023-04-02 01:00:23,316 DEBUG  , Thread-4, acto.py  :458, [trial: 5, gen: 1] Run and check
2023-04-02 01:00:23,679 INFO   , Thread-4, runner.py:291, [trial: 5, gen: 1] Waiting for system to converge... 
2023-04-02 01:00:24,443 INFO   , Thread-2, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:00:29,348 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-5
2023-04-02 01:00:50,128 ERROR  , Thread-5, runner.py:363, [trial: 6, gen: 3] System failed to converge within 600 seconds
2023-04-02 01:00:50,130 DEBUG  , Thread-5, runner.py:98, [trial: 6, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:00:50,131 DEBUG  , Thread-5, runner.py:99, [trial: 6, gen: 3] STDERR: 
2023-04-02 01:00:50,288 DEBUG  , Thread-5, runner.py:177, [trial: 6, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:46:58Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"sqlPort":5,"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:45:52Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:49:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:sqlPort': {}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:50:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1559', 'uid': '7b05d3f0-6dfe-46a1-bf1d-2961a9636c82'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 5, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:49:39Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:46:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:46:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:45:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:48:50Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[2].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[2].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T04:49:34Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:00:50,322 DEBUG  , Thread-5, runner.py:202, [trial: 6, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-fmd9r
2023-04-02 01:00:51,157 INFO   , Thread-5, checker.py:134, [trial: 6, gen: 3] Number of system state fields: [3476] Number of delta: [232]
2023-04-02 01:00:51,158 ERROR  , Thread-5, checker.py:561, [trial: 6, gen: 3] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 01:00:51,159 DEBUG  , Thread-5, acto.py  :489, [trial: 6, gen: 3] Running recovery
2023-04-02 01:00:53,088 INFO   , Thread-5, runner.py:291, [trial: 6, gen: 3] Waiting for system to converge... 
2023-04-02 01:00:54,160 INFO   , Thread-3, runner.py:360, [trial: 7, gen: 1] System took 00:01:00 to converge
2023-04-02 01:00:54,162 DEBUG  , Thread-3, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:00:54,162 DEBUG  , Thread-3, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 01:00:54,310 DEBUG  , Thread-3, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","tls":[{"hosts":["ACTOKEY","ACTOKEY","ACTOKEY","ACTOKEY"]}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:18Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:58:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:59:53Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:59:54Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1285', 'uid': '34f5360c-3ee3-42e3-abfa-6bb6e7624f06'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY', 'tls': [{'hosts': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY', 'ACTOKEY']}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:33Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:21Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:22Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:21Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:58:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:00:22Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[3]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 01:00:54,344 DEBUG  , Thread-3, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-7pgtc
2023-04-02 01:00:55,069 INFO   , Thread-3, common.py:560, [trial: 7, gen: 1] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].hosts[3]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-02 01:00:55,069 INFO   , Thread-3, checker.py:134, [trial: 7, gen: 1] Number of system state fields: [3469] Number of delta: [9]
2023-04-02 01:00:55,070 INFO   , Thread-3, acto.py  :301, [trial: 7, gen: 1] Setup produced invalid input
2023-04-02 01:00:55,071 WARNING, Thread-3, schema.py:573, [trial: 7, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:00:55,071 DEBUG  , Thread-3, acto.py  :458, [trial: 7, gen: 1] Run and check
2023-04-02 01:00:55,413 INFO   , Thread-3, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 01:01:01,284 INFO   , Thread-10, runner.py:323, [trial: 5, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 01:01:04,429 INFO   , Thread-8, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:01:14,455 ERROR  , Thread-8, runner.py:363, [trial: 7, gen: 1] System failed to converge within 600 seconds
2023-04-02 01:01:14,456 DEBUG  , Thread-8, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:01:14,456 DEBUG  , Thread-8, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 01:01:14,694 DEBUG  , Thread-8, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:51:46Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"grpcPort":2,"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:49:10Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:grpcPort': {}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:50:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:51:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:51:47Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2418', 'uid': '311d5bf5-8677-4b18-9421-798c08c53ba9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 2, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:49:10Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:51:45Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:51:47Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:51:16Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:01:11Z', 'message': 'pod has not completely started', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:01:14,722 DEBUG  , Thread-8, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-tvn89
2023-04-02 01:01:15,549 INFO   , Thread-8, checker.py:134, [trial: 7, gen: 1] Number of system state fields: [3481] Number of delta: [1405]
2023-04-02 01:01:15,549 ERROR  , Thread-8, checker.py:561, [trial: 7, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [None] with unhealthy status
2023-04-02 01:01:15,551 INFO   , Thread-8, acto.py  :332, [trial: 7, gen: 1] Error result, running recovery
2023-04-02 01:01:15,551 DEBUG  , Thread-8, acto.py  :489, [trial: 7, gen: 1] Running recovery
2023-04-02 01:01:17,578 INFO   , Thread-8, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 01:01:22,804 INFO   , Thread-6, base.py  :41, Created cluster
2023-04-02 01:01:22,816 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:01:23,798 INFO   , Thread-4, runner.py:360, [trial: 5, gen: 1] System took 00:01:00 to converge
2023-04-02 01:01:23,819 DEBUG  , Thread-4, runner.py:98, [trial: 5, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:01:23,819 DEBUG  , Thread-4, runner.py:99, [trial: 5, gen: 1] STDERR: 
2023-04-02 01:01:23,955 DEBUG  , Thread-4, runner.py:177, [trial: 5, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":[],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:16Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:58:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:58:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:00:23Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1266', 'uid': 'f88622ac-1f50-4f77-8efa-5314df3adb4b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:31Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:01:23,982 DEBUG  , Thread-4, runner.py:202, [trial: 5, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-nrhk2
2023-04-02 01:01:24,620 INFO   , Thread-2, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:01:24,767 INFO   , Thread-4, checker.py:134, [trial: 5, gen: 1] Number of system state fields: [3456] Number of delta: [0]
2023-04-02 01:01:24,769 WARNING, Thread-4, schema.py:573, [trial: 5, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 01:01:24,769 INFO   , Thread-4, input.py :723, [trial: 5, gen: 2] Progress [3] cases left
2023-04-02 01:01:24,769 DEBUG  , Thread-4, test_case.py:51, [trial: 5, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-02 01:01:24,769 INFO   , Thread-4, acto.py  :267, [trial: 5, gen: 2] Precondition of ["spec", "podEnvVariables"] fails, try setup first
2023-04-02 01:01:24,773 INFO   , Thread-4, acto.py  :107, [trial: 5, gen: 2] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "value": "ACTOKEY", "valueFrom": {"configMapKeyRef": null, "fieldRef": {"apiVersion": "ACTOKEY", "fieldPath": "ACTOKEY"}, "resourceFieldRef": {"containerName": "ACTOKEY", "divisor": 5, "resource": "ACTOKEY"}, "secretKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": true}}}, {"name": "ACTOKEY", "value": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": true}, "fieldRef": {"apiVersion": "ACTOKEY", "fieldPath": "ACTOKEY"}, "resourceFieldRef": {"containerName": "ACTOKEY", "divisor": ".85809Gi", "resource": "ACTOKEY"}, "secretKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": true}}}, {"name": "ACTOKEY", "value": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": false}, "fieldRef": {"apiVersion": "ACTOKEY", "fieldPath": "ACTOKEY"}, "resourceFieldRef": {"containerName": "ACTOKEY", "divisor": ".257803Ei", "resource": "ACTOKEY"}, "secretKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": false}}}, {"name": "ACTOKEY", "value": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": false}, "fieldRef": {"apiVersion": "ACTOKEY", "fieldPath": "ACTOKEY"}, "resourceFieldRef": null, "secretKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": true}}}, {"name": "ACTOKEY", "value": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": false}, "fieldRef": {"apiVersion": "ACTOKEY", "fieldPath": "ACTOKEY"}, "resourceFieldRef": {"containerName": "ACTOKEY", "divisor": 2, "resource": "ACTOKEY"}, "secretKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": false}}}]}]
2023-04-02 01:01:24,773 DEBUG  , Thread-4, test_case.py:51, [trial: 5, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-02 01:01:24,773 DEBUG  , Thread-4, acto.py  :458, [trial: 5, gen: 2] Run and check
2023-04-02 01:01:25,423 INFO   , Thread-4, runner.py:291, [trial: 5, gen: 2] Waiting for system to converge... 
2023-04-02 01:01:40,378 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:01:50,465 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 01:01:50,465 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:01:52,550 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:01:55,524 INFO   , Thread-3, runner.py:360, [trial: 7, gen: 1] System took 00:01:00 to converge
2023-04-02 01:01:55,525 DEBUG  , Thread-3, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:01:55,525 DEBUG  , Thread-3, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 01:01:55,675 DEBUG  , Thread-3, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:18Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:58:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:59:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:00:55Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1338', 'uid': '34f5360c-3ee3-42e3-abfa-6bb6e7624f06'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:33Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:21Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:22Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:21Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:58:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:00:22Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[3]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 01:01:55,702 DEBUG  , Thread-3, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-7pgtc
2023-04-02 01:01:56,478 INFO   , Thread-3, acto.py  :321, [trial: 7, gen: 1] All setups failed
2023-04-02 01:01:56,479 WARNING, Thread-3, schema.py:573, [trial: 7, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:01:56,479 INFO   , Thread-3, input.py :723, [trial: 7, gen: 3] Progress [9] cases left
2023-04-02 01:01:56,480 DEBUG  , Thread-3, test_case.py:51, [trial: 7, gen: 3] Precondition [push_precondition] Result [False]
2023-04-02 01:01:56,480 INFO   , Thread-3, acto.py  :267, [trial: 7, gen: 3] Precondition of ["spec", "ingress", "ui", "tls", 0, "hosts"] fails, try setup first
2023-04-02 01:01:56,480 INFO   , Thread-3, acto.py  :107, [trial: 7, gen: 3] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": [{"hosts": ["ACTOKEY"]}]}}}]
2023-04-02 01:01:56,480 DEBUG  , Thread-3, test_case.py:51, [trial: 7, gen: 3] Precondition [push_precondition] Result [True]
2023-04-02 01:01:56,481 DEBUG  , Thread-3, acto.py  :458, [trial: 7, gen: 3] Run and check
2023-04-02 01:01:56,826 INFO   , Thread-3, runner.py:291, [trial: 7, gen: 3] Waiting for system to converge... 
2023-04-02 01:02:01,377 INFO   , Thread-10, runner.py:323, [trial: 5, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 01:02:02,648 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 01:02:02,648 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:02:14,371 INFO   , Thread-5, runner.py:360, [trial: 6, gen: 3] System took 00:01:21 to converge
2023-04-02 01:02:14,372 DEBUG  , Thread-5, runner.py:98, [trial: 6, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:02:14,372 DEBUG  , Thread-5, runner.py:99, [trial: 6, gen: 3] STDERR: 
2023-04-02 01:02:14,504 DEBUG  , Thread-5, runner.py:177, [trial: 6, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:46:58Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:45:52Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:49:39Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:00:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2544', 'uid': '7b05d3f0-6dfe-46a1-bf1d-2961a9636c82'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:49:39Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:46:57Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:46:58Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:45:54Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:48:50Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[2].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[2].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T04:49:34Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:02:14,530 DEBUG  , Thread-5, runner.py:202, [trial: 6, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-fmd9r
2023-04-02 01:02:15,192 INFO   , Thread-5, acto.py  :187, Trial 6 finished, completed in 00:18:38
2023-04-02 01:02:15,192 INFO   , Thread-5, acto.py  :188, ---------------------------------------

2023-04-02 01:02:15,212 DEBUG  , Thread-5, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-fmd9r
2023-04-02 01:02:25,235 INFO   , Thread-5, acto.py  :195, Test finished
2023-04-02 01:02:25,235 INFO   , Thread-5, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"dataStore\\\", \\\"supportsAutoResize\\\"]\"": [
        "boolean-deletion"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"sql\\\", \\\"tls\\\", 0, \\\"hosts\\\"]\"": [
        "array-deletion",
        "array-push"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"fieldRef\\\", \\\"fieldPath\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"sqlPort\\\"]\"": [
        "number-deletion",
        "number-increase",
        "number-decrease"
    ]
}
2023-04-02 01:02:42,771 WARNING, Thread-6, schema.py:573, [trial: 8, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:02:42,772 DEBUG  , Thread-6, acto.py  :458, [trial: 8, gen: 0] Run and check
2023-04-02 01:02:45,219 INFO   , Thread-6, runner.py:291, [trial: 8, gen: 0] Waiting for system to converge... 
2023-04-02 01:02:56,956 INFO   , Thread-3, runner.py:360, [trial: 7, gen: 3] System took 00:01:00 to converge
2023-04-02 01:02:56,958 DEBUG  , Thread-3, runner.py:98, [trial: 7, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:02:56,958 DEBUG  , Thread-3, runner.py:99, [trial: 7, gen: 3] STDERR: 
2023-04-02 01:02:57,113 DEBUG  , Thread-3, runner.py:177, [trial: 7, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","tls":[{"hosts":["ACTOKEY"]}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:18Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:01:56Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:01:56Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1523', 'uid': '34f5360c-3ee3-42e3-abfa-6bb6e7624f06'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY', 'tls': [{'hosts': ['ACTOKEY']}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:33Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:21Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:22Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:21Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:58:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:02:53Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 01:02:57,142 DEBUG  , Thread-3, runner.py:202, [trial: 7, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-7pgtc
2023-04-02 01:02:57,966 INFO   , Thread-3, common.py:560, [trial: 7, gen: 3] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-02 01:02:57,966 INFO   , Thread-3, checker.py:134, [trial: 7, gen: 3] Number of system state fields: [3466] Number of delta: [4]
2023-04-02 01:02:57,968 INFO   , Thread-3, acto.py  :301, [trial: 7, gen: 3] Setup produced invalid input
2023-04-02 01:02:57,968 WARNING, Thread-3, schema.py:573, [trial: 7, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:02:57,969 DEBUG  , Thread-3, acto.py  :458, [trial: 7, gen: 3] Run and check
2023-04-02 01:02:58,318 INFO   , Thread-3, runner.py:291, [trial: 7, gen: 3] Waiting for system to converge... 
2023-04-02 01:03:01,473 INFO   , Thread-10, runner.py:323, [trial: 5, gen: 7] Statefulset test-cluster is not ready yet
2023-04-02 01:03:08,302 INFO   , Thread-2, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:03:18,565 INFO   , Thread-9, runner.py:360, [trial: 6, gen: 1] System took 00:07:12 to converge
2023-04-02 01:03:18,567 DEBUG  , Thread-9, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:03:18,567 DEBUG  , Thread-9, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 01:03:18,675 DEBUG  , Thread-9, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:56:09Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"kiaqbglcgq":"1000m","memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:55:03Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:kiaqbglcgq': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:56:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:56:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T04:56:09Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1836', 'uid': 'a0d48ac2-efdc-4992-9fbc-0198c776a40a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'kiaqbglcgq': '1', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:55:03Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:56:08Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:56:09Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:55:05Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:03:14Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:03:18,697 DEBUG  , Thread-9, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-ngc7s
2023-04-02 01:03:19,033 DEBUG  , Thread-9, checker.py:278, [trial: 6, gen: 1] Input delta [['spec', 'resources', 'limits', 'kiaqbglcgq']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'limits', 'kiaqbglcgq']]
2023-04-02 01:03:19,205 INFO   , Thread-9, checker.py:134, [trial: 6, gen: 1] Number of system state fields: [2013] Number of delta: [546]
2023-04-02 01:03:19,206 INFO   , Thread-9, acto.py  :323, [trial: 6, gen: 1] Running bundled testcases
2023-04-02 01:03:19,206 DEBUG  , Thread-9, test_case.py:51, [trial: 6, gen: 1] Precondition [decrease_precondition] Result [True]
2023-04-02 01:03:19,207 INFO   , Thread-9, acto.py  :107, [trial: 6, gen: 1] JSON patch: [{"op": "replace", "path": "/spec/resources/limits/kiaqbglcgq", "value": "0.5000"}]
2023-04-02 01:03:19,207 DEBUG  , Thread-9, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 01:03:19,567 INFO   , Thread-9, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 01:03:31,494 ERROR  , Thread-10, runner.py:363, [trial: 5, gen: 7] System failed to converge within 600 seconds
2023-04-02 01:03:31,498 DEBUG  , Thread-10, runner.py:98, [trial: 5, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:03:31,499 DEBUG  , Thread-10, runner.py:99, [trial: 5, gen: 7] STDERR: 
2023-04-02 01:03:31,633 DEBUG  , Thread-10, runner.py:177, [trial: 5, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullPolicy":"IfNotPresent"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true,"topologySpreadConstraints":[{"labelSelector":{"matchLabels":{"foo":"bar"}},"maxSkew":1,"topologyKey":"kubernetes.io/hostname","whenUnsatisfiable":"INVALID"}]}}\n'}, 'creationTimestamp': '2023-04-02T04:39:20Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullPolicy': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:topologySpreadConstraints': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:53:31Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3140', 'uid': '36a02668-4108-4473-86fb-d90190c7a824'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'topologySpreadConstraints': [{'labelSelector': {'matchLabels': {'foo': 'bar'}}, 'maxSkew': 1, 'topologyKey': 'kubernetes.io/hostname', 'whenUnsatisfiable': 'INVALID'}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:39:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:39:22Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:39:29Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:41:01Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 01:03:31,658 DEBUG  , Thread-10, runner.py:202, [trial: 5, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-b9w5s
2023-04-02 01:03:32,254 DEBUG  , Thread-10, checker.py:278, [trial: 5, gen: 7] Input delta [['spec', 'topologySpreadConstraints', 0, 'maxSkew']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 0, 'max_skew']]
2023-04-02 01:03:32,255 DEBUG  , Thread-10, checker.py:278, [trial: 5, gen: 7] Input delta [['spec', 'topologySpreadConstraints', 0, 'topologyKey']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 0, 'topology_key']]
2023-04-02 01:03:32,256 DEBUG  , Thread-10, checker.py:278, [trial: 5, gen: 7] Input delta [['spec', 'topologySpreadConstraints', 0, 'whenUnsatisfiable']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 0, 'when_unsatisfiable']]
2023-04-02 01:03:32,256 DEBUG  , Thread-10, checker.py:278, [trial: 5, gen: 7] Input delta [['spec', 'topologySpreadConstraints', 0, 'labelSelector', 'matchLabels', 'foo']] matched with [['test-cluster', 'spec', 'template', 'spec', 'topology_spread_constraints', 0, 'label_selector', 'match_labels', 'foo']]
2023-04-02 01:03:32,443 INFO   , Thread-10, checker.py:134, [trial: 5, gen: 7] Number of system state fields: [3046] Number of delta: [208]
2023-04-02 01:03:32,443 ERROR  , Thread-10, checker.py:561, [trial: 5, gen: 7] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 01:03:32,444 INFO   , Thread-10, acto.py  :332, [trial: 5, gen: 7] Error result, running recovery
2023-04-02 01:03:32,444 DEBUG  , Thread-10, acto.py  :489, [trial: 5, gen: 7] Running recovery
2023-04-02 01:03:34,472 INFO   , Thread-10, runner.py:291, [trial: 5, gen: 7] Waiting for system to converge... 
2023-04-02 01:03:37,176 INFO   , Thread-8, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:03:56,661 INFO   , Thread-6, runner.py:360, [trial: 8, gen: 0] System took 00:01:11 to converge
2023-04-02 01:03:56,662 DEBUG  , Thread-6, runner.py:98, [trial: 8, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:03:56,662 DEBUG  , Thread-6, runner.py:99, [trial: 8, gen: 0] STDERR: 
2023-04-02 01:03:56,732 INFO   , Thread-4, runner.py:323, [trial: 5, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 01:03:56,852 DEBUG  , Thread-6, runner.py:177, [trial: 8, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:02:49Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:02:45Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:02:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:02:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:02:49Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1066', 'uid': '9d6e2915-8908-4870-be02-a4196ffabf78'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:03:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:02:48Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:02:49Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:02:47Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:02:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:03:56,882 DEBUG  , Thread-6, runner.py:202, [trial: 8, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-nwwdw
2023-04-02 01:03:57,132 WARNING, Thread-6, schema.py:573, [trial: 8, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:03:57,132 INFO   , Thread-6, input.py :723, [trial: 8, gen: 1] Progress [4] cases left
2023-04-02 01:03:57,133 DEBUG  , Thread-6, test_case.py:51, [trial: 8, gen: 1] Precondition [change_precondition] Result [False]
2023-04-02 01:03:57,133 INFO   , Thread-6, acto.py  :267, [trial: 8, gen: 1] Precondition of ["spec", "podEnvVariables", 0, "valueFrom", "secretKeyRef", "name"] fails, try setup first
2023-04-02 01:03:57,133 INFO   , Thread-6, acto.py  :107, [trial: 8, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"secretKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY"}}}]}]
2023-04-02 01:03:57,133 DEBUG  , Thread-6, test_case.py:51, [trial: 8, gen: 1] Precondition [change_precondition] Result [True]
2023-04-02 01:03:57,133 DEBUG  , Thread-6, acto.py  :458, [trial: 8, gen: 1] Run and check
2023-04-02 01:03:57,476 INFO   , Thread-6, runner.py:291, [trial: 8, gen: 1] Waiting for system to converge... 
2023-04-02 01:03:58,443 INFO   , Thread-3, runner.py:360, [trial: 7, gen: 3] System took 00:01:00 to converge
2023-04-02 01:03:58,444 DEBUG  , Thread-3, runner.py:98, [trial: 7, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:03:58,444 DEBUG  , Thread-3, runner.py:99, [trial: 7, gen: 3] STDERR: 
2023-04-02 01:03:58,588 DEBUG  , Thread-3, runner.py:177, [trial: 7, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:18Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:01:56Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:02:58Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1533', 'uid': '34f5360c-3ee3-42e3-abfa-6bb6e7624f06'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:33Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:21Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:22Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:21Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:58:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:02:53Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 01:03:58,618 DEBUG  , Thread-3, runner.py:202, [trial: 7, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-7pgtc
2023-04-02 01:03:59,323 INFO   , Thread-3, acto.py  :321, [trial: 7, gen: 3] All setups failed
2023-04-02 01:03:59,324 WARNING, Thread-3, schema.py:573, [trial: 7, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 01:03:59,324 INFO   , Thread-3, input.py :723, [trial: 7, gen: 5] Progress [8] cases left
2023-04-02 01:03:59,324 DEBUG  , Thread-3, test_case.py:51, [trial: 7, gen: 5] Precondition [pop_precondition] Result [False]
2023-04-02 01:03:59,324 INFO   , Thread-3, acto.py  :267, [trial: 7, gen: 5] Precondition of ["spec", "ingress", "ui", "tls", 0, "hosts"] fails, try setup first
2023-04-02 01:03:59,325 INFO   , Thread-3, acto.py  :107, [trial: 7, gen: 5] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": [{"hosts": ["ACTOKEY", "ACTOKEY", "ACTOKEY"]}]}}}]
2023-04-02 01:03:59,325 DEBUG  , Thread-3, test_case.py:51, [trial: 7, gen: 5] Precondition [pop_precondition] Result [True]
2023-04-02 01:03:59,325 DEBUG  , Thread-3, acto.py  :458, [trial: 7, gen: 5] Run and check
2023-04-02 01:03:59,660 INFO   , Thread-3, runner.py:291, [trial: 7, gen: 5] Waiting for system to converge... 
2023-04-02 01:04:08,394 INFO   , Thread-2, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:04:19,738 INFO   , Thread-9, runner.py:360, [trial: 6, gen: 1] System took 00:01:00 to converge
2023-04-02 01:04:19,739 DEBUG  , Thread-9, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:04:19,739 DEBUG  , Thread-9, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 01:04:19,851 DEBUG  , Thread-9, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:56:09Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"kiaqbglcgq":"0.5000","memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:55:03Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:kiaqbglcgq': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:56:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:03:24Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1956', 'uid': 'a0d48ac2-efdc-4992-9fbc-0198c776a40a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'kiaqbglcgq': '500m', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:55:03Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:56:08Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:56:09Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:55:05Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:04:19Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:04:19,877 DEBUG  , Thread-9, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-ngc7s
2023-04-02 01:04:20,271 DEBUG  , Thread-9, checker.py:278, [trial: 6, gen: 1] Input delta [['spec', 'resources', 'limits', 'kiaqbglcgq']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'limits', 'kiaqbglcgq']]
2023-04-02 01:04:20,408 INFO   , Thread-9, checker.py:134, [trial: 6, gen: 1] Number of system state fields: [2013] Number of delta: [4]
2023-04-02 01:04:20,409 WARNING, Thread-9, schema.py:573, [trial: 6, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:04:20,409 INFO   , Thread-9, input.py :723, [trial: 6, gen: 3] Progress [7] cases left
2023-04-02 01:04:20,410 DEBUG  , Thread-9, test_case.py:51, [trial: 6, gen: 3] Precondition [increase_precondition] Result [True]
2023-04-02 01:04:20,410 INFO   , Thread-9, acto.py  :263, [trial: 6, gen: 3] Precondition of ['spec', 'resources', 'limits', 'memory'] satisfies
2023-04-02 01:04:20,410 INFO   , Thread-9, acto.py  :323, [trial: 6, gen: 3] Running bundled testcases
2023-04-02 01:04:20,410 DEBUG  , Thread-9, test_case.py:51, [trial: 6, gen: 3] Precondition [increase_precondition] Result [True]
2023-04-02 01:04:20,410 INFO   , Thread-9, acto.py  :107, [trial: 6, gen: 3] JSON patch: [{"op": "replace", "path": "/spec/resources/limits/memory", "value": "4Gi"}]
2023-04-02 01:04:20,411 DEBUG  , Thread-9, acto.py  :458, [trial: 6, gen: 3] Run and check
2023-04-02 01:04:20,737 INFO   , Thread-9, runner.py:291, [trial: 6, gen: 3] Waiting for system to converge... 
2023-04-02 01:04:37,266 INFO   , Thread-8, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:04:54,690 INFO   , Thread-10, runner.py:360, [trial: 5, gen: 7] System took 00:01:20 to converge
2023-04-02 01:04:54,691 DEBUG  , Thread-10, runner.py:98, [trial: 5, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:04:54,692 DEBUG  , Thread-10, runner.py:99, [trial: 5, gen: 7] STDERR: 
2023-04-02 01:04:54,828 DEBUG  , Thread-10, runner.py:177, [trial: 5, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:39:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10","pullPolicy":"IfNotPresent"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:39:20Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:40:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}, 'f:pullPolicy': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:03:34Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '4067', 'uid': '36a02668-4108-4473-86fb-d90190c7a824'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:39:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:39:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:39:22Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:39:29Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T04:41:01Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 01:04:54,857 DEBUG  , Thread-10, runner.py:202, [trial: 5, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-b9w5s
2023-04-02 01:04:55,581 INFO   , Thread-10, acto.py  :187, Trial 5 finished, completed in 00:29:17
2023-04-02 01:04:55,581 INFO   , Thread-10, acto.py  :188, ---------------------------------------

2023-04-02 01:04:55,602 DEBUG  , Thread-10, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-b9w5s
2023-04-02 01:04:59,780 INFO   , Thread-3, runner.py:360, [trial: 7, gen: 5] System took 00:01:00 to converge
2023-04-02 01:04:59,781 DEBUG  , Thread-3, runner.py:98, [trial: 7, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:04:59,781 DEBUG  , Thread-3, runner.py:99, [trial: 7, gen: 5] STDERR: 
2023-04-02 01:04:59,987 DEBUG  , Thread-3, runner.py:177, [trial: 7, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","tls":[{"hosts":["ACTOKEY","ACTOKEY","ACTOKEY"]}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:18Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:03:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:03:59Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1715', 'uid': '34f5360c-3ee3-42e3-abfa-6bb6e7624f06'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY', 'tls': [{'hosts': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY']}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:33Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:21Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:22Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:21Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:58:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:04:55Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 01:05:00,027 DEBUG  , Thread-3, runner.py:202, [trial: 7, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-7pgtc
2023-04-02 01:05:00,763 INFO   , Thread-3, common.py:560, [trial: 7, gen: 5] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*'), spec.tls[0].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
2023-04-02 01:05:00,764 INFO   , Thread-3, checker.py:134, [trial: 7, gen: 5] Number of system state fields: [3468] Number of delta: [6]
2023-04-02 01:05:00,765 INFO   , Thread-3, acto.py  :301, [trial: 7, gen: 5] Setup produced invalid input
2023-04-02 01:05:00,765 WARNING, Thread-3, schema.py:573, [trial: 7, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 01:05:00,765 DEBUG  , Thread-3, acto.py  :458, [trial: 7, gen: 5] Run and check
2023-04-02 01:05:01,104 INFO   , Thread-3, runner.py:291, [trial: 7, gen: 5] Waiting for system to converge... 
2023-04-02 01:05:08,485 INFO   , Thread-2, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:05:11,442 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-9
2023-04-02 01:05:18,609 INFO   , Thread-4, runner.py:323, [trial: 5, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 01:05:20,920 INFO   , Thread-9, runner.py:360, [trial: 6, gen: 3] System took 00:01:00 to converge
2023-04-02 01:05:20,922 DEBUG  , Thread-9, runner.py:98, [trial: 6, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:05:20,922 DEBUG  , Thread-9, runner.py:99, [trial: 6, gen: 3] STDERR: 
2023-04-02 01:05:21,040 DEBUG  , Thread-9, runner.py:177, [trial: 6, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:56:09Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"kiaqbglcgq":"0.5000","memory":"4Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:55:03Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:kiaqbglcgq': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:56:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:04:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2064', 'uid': 'a0d48ac2-efdc-4992-9fbc-0198c776a40a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'kiaqbglcgq': '500m', 'memory': '4Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:55:03Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:56:08Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:56:09Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:55:05Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:05:20Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:05:21,063 DEBUG  , Thread-9, runner.py:202, [trial: 6, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-ngc7s
2023-04-02 01:05:21,478 DEBUG  , Thread-9, checker.py:278, [trial: 6, gen: 3] Input delta [['spec', 'resources', 'limits', 'memory']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'limits', 'memory']]
2023-04-02 01:05:21,616 INFO   , Thread-9, checker.py:134, [trial: 6, gen: 3] Number of system state fields: [2013] Number of delta: [4]
2023-04-02 01:05:21,617 WARNING, Thread-9, schema.py:573, [trial: 6, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-02 01:05:21,617 INFO   , Thread-9, input.py :723, [trial: 6, gen: 4] Progress [6] cases left
2023-04-02 01:05:21,617 DEBUG  , Thread-9, test_case.py:51, [trial: 6, gen: 4] Precondition [decrease_precondition] Result [True]
2023-04-02 01:05:21,617 INFO   , Thread-9, acto.py  :263, [trial: 6, gen: 4] Precondition of ['spec', 'resources', 'limits', 'memory'] satisfies
2023-04-02 01:05:21,618 INFO   , Thread-9, acto.py  :323, [trial: 6, gen: 4] Running bundled testcases
2023-04-02 01:05:21,618 DEBUG  , Thread-9, test_case.py:51, [trial: 6, gen: 4] Precondition [decrease_precondition] Result [True]
2023-04-02 01:05:21,618 INFO   , Thread-9, acto.py  :107, [trial: 6, gen: 4] JSON patch: [{"op": "replace", "path": "/spec/resources/limits/memory", "value": "2147483648.0"}]
2023-04-02 01:05:21,618 DEBUG  , Thread-9, acto.py  :458, [trial: 6, gen: 4] Run and check
2023-04-02 01:05:23,457 INFO   , Thread-9, runner.py:291, [trial: 6, gen: 4] Waiting for system to converge... 
2023-04-02 01:05:37,363 INFO   , Thread-8, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:05:56,856 INFO   , Thread-10, base.py  :41, Created cluster
2023-04-02 01:05:56,871 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:06:01,227 INFO   , Thread-3, runner.py:360, [trial: 7, gen: 5] System took 00:01:00 to converge
2023-04-02 01:06:01,229 DEBUG  , Thread-3, runner.py:98, [trial: 7, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:06:01,229 DEBUG  , Thread-3, runner.py:99, [trial: 7, gen: 5] STDERR: 
2023-04-02 01:06:01,373 DEBUG  , Thread-3, runner.py:177, [trial: 7, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:18Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:03:59Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:05:01Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1726', 'uid': '34f5360c-3ee3-42e3-abfa-6bb6e7624f06'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:33Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:21Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:22Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:21Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:58:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:04:55Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: [spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[0]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[1]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\'), spec.tls[0].hosts[2]: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')]', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 01:06:01,400 DEBUG  , Thread-3, runner.py:202, [trial: 7, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-7pgtc
2023-04-02 01:06:02,288 INFO   , Thread-3, acto.py  :321, [trial: 7, gen: 5] All setups failed
2023-04-02 01:06:02,288 WARNING, Thread-3, schema.py:573, [trial: 7, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-02 01:06:02,289 INFO   , Thread-3, input.py :723, [trial: 7, gen: 7] Progress [7] cases left
2023-04-02 01:06:02,289 DEBUG  , Thread-3, test_case.py:51, [trial: 7, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-02 01:06:02,289 INFO   , Thread-3, acto.py  :263, [trial: 7, gen: 7] Precondition of ['spec', 'ingress', 'ui', 'tls', 0, 'hosts'] satisfies
2023-04-02 01:06:02,289 INFO   , Thread-3, acto.py  :323, [trial: 7, gen: 7] Running bundled testcases
2023-04-02 01:06:02,289 DEBUG  , Thread-3, test_case.py:51, [trial: 7, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-02 01:06:02,290 INFO   , Thread-3, acto.py  :107, [trial: 7, gen: 7] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": [{"hosts": []}]}}}]
2023-04-02 01:06:02,290 DEBUG  , Thread-3, acto.py  :458, [trial: 7, gen: 7] Run and check
2023-04-02 01:06:02,615 INFO   , Thread-3, runner.py:291, [trial: 7, gen: 7] Waiting for system to converge... 
2023-04-02 01:06:08,575 INFO   , Thread-2, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:06:14,443 DEBUG  , Thread-10, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:06:18,695 INFO   , Thread-4, runner.py:323, [trial: 5, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 01:06:24,530 INFO   , Thread-10, deploy.py:91, Operator ready
2023-04-02 01:06:24,530 INFO   , Thread-10, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:06:26,555 DEBUG  , Thread-10, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:06:26,791 INFO   , Thread-6, runner.py:323, [trial: 8, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:06:31,174 ERROR  , Thread-2, runner.py:363, [trial: 6, gen: 1] System failed to converge within 600 seconds
2023-04-02 01:06:31,175 DEBUG  , Thread-2, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:06:31,176 DEBUG  , Thread-2, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 01:06:31,308 DEBUG  , Thread-2, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:55:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"secretKeyRef":{"key":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:55:20Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:55:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:56:31Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1166', 'uid': 'c971a0b3-4b64-48ff-be6f-5a6617cd5190'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'secretKeyRef': {'key': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:55:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:55:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:55:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:55:29Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:06:31,340 DEBUG  , Thread-2, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-qw652
2023-04-02 01:06:32,103 INFO   , Thread-2, checker.py:134, [trial: 6, gen: 1] Number of system state fields: [3040] Number of delta: [204]
2023-04-02 01:06:32,103 ERROR  , Thread-2, checker.py:561, [trial: 6, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 01:06:32,104 DEBUG  , Thread-2, acto.py  :489, [trial: 6, gen: 1] Running recovery
2023-04-02 01:06:33,982 ERROR  , Thread-11, runner.py:363, [trial: 7, gen: 3] System failed to converge within 600 seconds
2023-04-02 01:06:33,984 DEBUG  , Thread-11, runner.py:98, [trial: 7, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:06:33,984 DEBUG  , Thread-11, runner.py:99, [trial: 7, gen: 3] STDERR: 
2023-04-02 01:06:34,125 INFO   , Thread-2, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 01:06:34,141 DEBUG  , Thread-11, runner.py:177, [trial: 7, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:52:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.io/hostname","operator":"In","values":["NULL"]}]}]}}},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:51:49Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:53:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:affinity': {'.': {}, 'f:nodeAffinity': {'.': {}, 'f:requiredDuringSchedulingIgnoredDuringExecution': {'.': {}, 'f:nodeSelectorTerms': {}}}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:56:33Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1804', 'uid': 'd0f50402-d611-432b-9c88-c5ef9dd04a33'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'affinity': {'nodeAffinity': {'requiredDuringSchedulingIgnoredDuringExecution': {'nodeSelectorTerms': [{'matchExpressions': [{'key': 'kubernetes.io/hostname', 'operator': 'In', 'values': ['NULL']}]}]}}}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:53:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:52:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:52:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:51:51Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:53:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:06:34,176 DEBUG  , Thread-11, runner.py:202, [trial: 7, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-j4xfq
2023-04-02 01:06:35,062 INFO   , Thread-11, common.py:569, [trial: 7, gen: 3] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-02 01:06:35,062 INFO   , Thread-11, checker.py:134, [trial: 7, gen: 3] Number of system state fields: [3413] Number of delta: [246]
2023-04-02 01:06:35,062 ERROR  , Thread-11, checker.py:561, [trial: 7, gen: 3] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 01:06:35,062 ERROR  , Thread-11, checker.py:561, [trial: 7, gen: 3] Found pod: test-cluster-2 with unhealthy status
2023-04-02 01:06:35,063 DEBUG  , Thread-11, acto.py  :374, [trial: 7, gen: 3] Invalid input, revert
2023-04-02 01:06:35,064 WARNING, Thread-11, schema.py:573, [trial: 7, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:06:35,064 DEBUG  , Thread-11, acto.py  :458, [trial: 7, gen: 3] Run and check
2023-04-02 01:06:36,654 INFO   , Thread-10, deploy.py:91, Operator ready
2023-04-02 01:06:36,654 INFO   , Thread-10, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:06:37,073 INFO   , Thread-11, runner.py:291, [trial: 7, gen: 3] Waiting for system to converge... 
2023-04-02 01:07:02,741 INFO   , Thread-3, runner.py:360, [trial: 7, gen: 7] System took 00:01:00 to converge
2023-04-02 01:07:02,742 DEBUG  , Thread-3, runner.py:98, [trial: 7, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:07:02,743 DEBUG  , Thread-3, runner.py:99, [trial: 7, gen: 7] STDERR: 
2023-04-02 01:07:02,887 DEBUG  , Thread-3, runner.py:177, [trial: 7, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","tls":[{"hosts":[]}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:18Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:06:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:06:02Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1906', 'uid': '34f5360c-3ee3-42e3-abfa-6bb6e7624f06'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY', 'tls': [{}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:33Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:21Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:22Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:21Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:58:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:06:58Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 01:07:02,912 DEBUG  , Thread-3, runner.py:202, [trial: 7, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-7pgtc
2023-04-02 01:07:03,701 INFO   , Thread-3, common.py:560, [trial: 7, gen: 7] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 01:07:03,701 INFO   , Thread-3, checker.py:134, [trial: 7, gen: 7] Number of system state fields: [3465] Number of delta: [3]
2023-04-02 01:07:03,702 DEBUG  , Thread-3, acto.py  :374, [trial: 7, gen: 7] Invalid input, revert
2023-04-02 01:07:03,702 WARNING, Thread-3, schema.py:573, [trial: 7, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-02 01:07:03,703 DEBUG  , Thread-3, acto.py  :458, [trial: 7, gen: 7] Run and check
2023-04-02 01:07:04,058 INFO   , Thread-3, runner.py:291, [trial: 7, gen: 7] Waiting for system to converge... 
2023-04-02 01:07:16,795 WARNING, Thread-10, schema.py:573, [trial: 6, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:07:16,796 DEBUG  , Thread-10, acto.py  :458, [trial: 6, gen: 0] Run and check
2023-04-02 01:07:19,482 INFO   , Thread-10, runner.py:291, [trial: 6, gen: 0] Waiting for system to converge... 
2023-04-02 01:07:48,724 INFO   , Thread-6, runner.py:323, [trial: 8, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:07:49,336 INFO   , Thread-2, runner.py:360, [trial: 6, gen: 1] System took 00:01:15 to converge
2023-04-02 01:07:49,338 DEBUG  , Thread-2, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:07:49,338 DEBUG  , Thread-2, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 01:07:49,492 DEBUG  , Thread-2, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:55:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:55:20Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:55:34Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:06:34Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2112', 'uid': 'c971a0b3-4b64-48ff-be6f-5a6617cd5190'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:55:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:55:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:55:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:55:29Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:07:49,528 DEBUG  , Thread-2, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-qw652
2023-04-02 01:07:50,197 INFO   , Thread-2, acto.py  :187, Trial 6 finished, completed in 00:14:43
2023-04-02 01:07:50,197 INFO   , Thread-2, acto.py  :188, ---------------------------------------

2023-04-02 01:07:50,228 DEBUG  , Thread-2, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-qw652
2023-04-02 01:08:00,963 INFO   , Thread-8, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:08:02,472 INFO   , Thread-4, runner.py:323, [trial: 5, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 01:08:04,178 INFO   , Thread-3, runner.py:360, [trial: 7, gen: 7] System took 00:01:00 to converge
2023-04-02 01:08:04,179 DEBUG  , Thread-3, runner.py:98, [trial: 7, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:08:04,179 DEBUG  , Thread-3, runner.py:99, [trial: 7, gen: 7] STDERR: 
2023-04-02 01:08:04,339 DEBUG  , Thread-3, runner.py:177, [trial: 7, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:18Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:06:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:07:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1917', 'uid': '34f5360c-3ee3-42e3-abfa-6bb6e7624f06'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:33Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:21Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:22Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:21Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:58:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:06:58Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 01:08:04,451 DEBUG  , Thread-3, runner.py:202, [trial: 7, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-7pgtc
2023-04-02 01:08:05,190 DEBUG  , Thread-3, acto.py  :383, [trial: 7, gen: 7] Only one patch, no need to isolate
2023-04-02 01:08:05,191 WARNING, Thread-3, schema.py:573, [trial: 7, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-02 01:08:05,191 INFO   , Thread-3, input.py :723, [trial: 7, gen: 9] Progress [6] cases left
2023-04-02 01:08:05,191 DEBUG  , Thread-3, test_case.py:51, [trial: 7, gen: 9] Precondition [delete_precondition] Result [True]
2023-04-02 01:08:05,191 INFO   , Thread-3, acto.py  :263, [trial: 7, gen: 9] Precondition of ['spec'] satisfies
2023-04-02 01:08:05,191 INFO   , Thread-3, acto.py  :323, [trial: 7, gen: 9] Running bundled testcases
2023-04-02 01:08:05,192 DEBUG  , Thread-3, test_case.py:51, [trial: 7, gen: 9] Precondition [delete_precondition] Result [True]
2023-04-02 01:08:05,192 INFO   , Thread-3, acto.py  :107, [trial: 7, gen: 9] JSON patch: [{"op": "remove", "path": "/spec/nodes"}, {"op": "remove", "path": "/spec/tlsEnabled"}, {"op": "remove", "path": "/spec/image"}, {"op": "remove", "path": "/spec/resources"}, {"op": "remove", "path": "/spec/dataStore"}, {"op": "remove", "path": "/spec/additionalLabels"}]
2023-04-02 01:08:05,192 DEBUG  , Thread-3, acto.py  :458, [trial: 7, gen: 9] Run and check
2023-04-02 01:08:05,550 INFO   , Thread-3, runner.py:291, [trial: 7, gen: 9] Waiting for system to converge... 
2023-04-02 01:08:05,646 INFO   , Thread-9, runner.py:360, [trial: 6, gen: 4] System took 00:02:42 to converge
2023-04-02 01:08:05,647 DEBUG  , Thread-9, runner.py:98, [trial: 6, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:08:05,647 DEBUG  , Thread-9, runner.py:99, [trial: 6, gen: 4] STDERR: 
2023-04-02 01:08:05,765 DEBUG  , Thread-9, runner.py:177, [trial: 6, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:56:09Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"kiaqbglcgq":"0.5000","memory":"2147483648.0"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:55:03Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:kiaqbglcgq': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:56:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:05:23Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2344', 'uid': 'a0d48ac2-efdc-4992-9fbc-0198c776a40a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'kiaqbglcgq': '500m', 'memory': '2147483648'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:55:03Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:56:08Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:56:09Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:55:05Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:08:02Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:08:05,787 DEBUG  , Thread-9, runner.py:202, [trial: 6, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-ngc7s
2023-04-02 01:08:06,178 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-1
2023-04-02 01:08:06,216 DEBUG  , Thread-9, checker.py:278, [trial: 6, gen: 4] Input delta [['spec', 'resources', 'limits', 'memory']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'limits', 'memory']]
2023-04-02 01:08:06,370 INFO   , Thread-9, checker.py:134, [trial: 6, gen: 4] Number of system state fields: [2013] Number of delta: [4]
2023-04-02 01:08:06,372 WARNING, Thread-9, schema.py:573, [trial: 6, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 01:08:06,372 INFO   , Thread-9, input.py :723, [trial: 6, gen: 5] Progress [5] cases left
2023-04-02 01:08:06,373 DEBUG  , Thread-9, test_case.py:51, [trial: 6, gen: 5] Precondition [increase_precondition] Result [False]
2023-04-02 01:08:06,373 INFO   , Thread-9, acto.py  :267, [trial: 6, gen: 5] Precondition of ["spec", "resources", "requests", "odcchdyeng"] fails, try setup first
2023-04-02 01:08:06,373 INFO   , Thread-9, acto.py  :107, [trial: 6, gen: 5] JSON patch: [{"op": "add", "path": "/spec/resources/requests/odcchdyeng", "value": "1000m"}]
2023-04-02 01:08:06,373 DEBUG  , Thread-9, test_case.py:51, [trial: 6, gen: 5] Precondition [increase_precondition] Result [True]
2023-04-02 01:08:06,373 DEBUG  , Thread-9, acto.py  :458, [trial: 6, gen: 5] Run and check
2023-04-02 01:08:06,817 INFO   , Thread-9, runner.py:291, [trial: 6, gen: 5] Waiting for system to converge... 
2023-04-02 01:08:07,319 INFO   , Thread-11, runner.py:360, [trial: 7, gen: 3] System took 00:01:30 to converge
2023-04-02 01:08:07,320 DEBUG  , Thread-11, runner.py:98, [trial: 7, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:08:07,320 DEBUG  , Thread-11, runner.py:99, [trial: 7, gen: 3] STDERR: 
2023-04-02 01:08:07,455 DEBUG  , Thread-11, runner.py:177, [trial: 7, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:52:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:51:49Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:53:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:06:37Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2749', 'uid': 'd0f50402-d611-432b-9c88-c5ef9dd04a33'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:53:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:52:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:52:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:51:51Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:53:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:08:07,483 DEBUG  , Thread-11, runner.py:202, [trial: 7, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-j4xfq
2023-04-02 01:08:08,355 DEBUG  , Thread-11, acto.py  :383, [trial: 7, gen: 3] Only one patch, no need to isolate
2023-04-02 01:08:08,355 INFO   , Thread-11, acto.py  :332, [trial: 7, gen: 3] Error result, running recovery
2023-04-02 01:08:08,355 DEBUG  , Thread-11, acto.py  :489, [trial: 7, gen: 3] Running recovery
2023-04-02 01:08:08,719 INFO   , Thread-11, runner.py:291, [trial: 7, gen: 3] Waiting for system to converge... 
2023-04-02 01:08:31,506 INFO   , Thread-10, runner.py:360, [trial: 6, gen: 0] System took 00:01:12 to converge
2023-04-02 01:08:31,507 DEBUG  , Thread-10, runner.py:98, [trial: 6, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:08:31,507 DEBUG  , Thread-10, runner.py:99, [trial: 6, gen: 0] STDERR: 
2023-04-02 01:08:31,648 DEBUG  , Thread-10, runner.py:177, [trial: 6, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:07:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:07:19Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:07:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:07:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:07:23Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1063', 'uid': '2c3cde1b-3748-4dbf-bf91-ed0d5776d9fd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:07:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:07:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:07:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:07:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:08:31,679 DEBUG  , Thread-10, runner.py:202, [trial: 6, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-vxrns
2023-04-02 01:08:31,937 WARNING, Thread-10, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:08:31,937 INFO   , Thread-10, input.py :723, [trial: 6, gen: 1] Progress [6] cases left
2023-04-02 01:08:31,938 DEBUG  , Thread-10, test_case.py:51, [trial: 6, gen: 1] Precondition [increase_precondition] Result [True]
2023-04-02 01:08:31,938 INFO   , Thread-10, acto.py  :263, [trial: 6, gen: 1] Precondition of ['spec', 'resources', 'requests', 'memory'] satisfies
2023-04-02 01:08:31,938 INFO   , Thread-10, acto.py  :323, [trial: 6, gen: 1] Running bundled testcases
2023-04-02 01:08:31,938 DEBUG  , Thread-10, test_case.py:51, [trial: 6, gen: 1] Precondition [increase_precondition] Result [True]
2023-04-02 01:08:31,939 INFO   , Thread-10, acto.py  :107, [trial: 6, gen: 1] JSON patch: [{"op": "replace", "path": "/spec/resources/requests/memory", "value": "2Gi"}]
2023-04-02 01:08:31,939 DEBUG  , Thread-10, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 01:08:32,278 INFO   , Thread-10, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 01:08:48,815 INFO   , Thread-6, runner.py:323, [trial: 8, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:08:59,780 INFO   , Thread-2, base.py  :41, Created cluster
2023-04-02 01:08:59,793 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:09:01,045 INFO   , Thread-8, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:09:02,553 INFO   , Thread-4, runner.py:323, [trial: 5, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 01:09:05,658 INFO   , Thread-3, runner.py:360, [trial: 7, gen: 9] System took 00:01:00 to converge
2023-04-02 01:09:05,660 DEBUG  , Thread-3, runner.py:98, [trial: 7, gen: 9] STDOUT: 
2023-04-02 01:09:05,660 DEBUG  , Thread-3, runner.py:99, [trial: 7, gen: 9] STDERR: error: error validating "testrun-crdb-whitebox/trial-02-0007/mutated-9.yaml": error validating data: [ValidationError(CrdbCluster.spec): missing required field "dataStore" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec, ValidationError(CrdbCluster.spec): missing required field "nodes" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec]; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 01:09:05,803 DEBUG  , Thread-3, runner.py:177, [trial: 7, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:18Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:06:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:07:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1917', 'uid': '34f5360c-3ee3-42e3-abfa-6bb6e7624f06'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:33Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:21Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:22Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:21Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:58:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:06:58Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 01:09:05,833 DEBUG  , Thread-3, runner.py:202, [trial: 7, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-7pgtc
2023-04-02 01:09:06,160 INFO   , Thread-3, common.py:569, [trial: 7, gen: 9] Recognized invalid input through field [nodes] in error message: error: error validating "testrun-crdb-whitebox/trial-02-0007/mutated-9.yaml": error validating data: [ValidationError(CrdbCluster.spec): missing required field "dataStore" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec, ValidationError(CrdbCluster.spec): missing required field "nodes" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec]; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 01:09:06,161 INFO   , Thread-3, checker.py:213, [trial: 7, gen: 9] Invalid input, reject mutation
2023-04-02 01:09:06,161 INFO   , Thread-3, checker.py:214, [trial: 7, gen: 9] STDOUT: 
2023-04-02 01:09:06,161 INFO   , Thread-3, checker.py:215, [trial: 7, gen: 9] STDERR: error: error validating "testrun-crdb-whitebox/trial-02-0007/mutated-9.yaml": error validating data: [ValidationError(CrdbCluster.spec): missing required field "dataStore" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec, ValidationError(CrdbCluster.spec): missing required field "nodes" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec]; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 01:09:06,399 WARNING, Thread-3, checker.py:347, [trial: 7, gen: 9] 'AccessModeSchema' object is not subscriptable happened when trying to fetch default value
2023-04-02 01:09:06,399 ERROR  , Thread-3, checker.py:301, [trial: 7, gen: 9] Found no matching fields for input delta
2023-04-02 01:09:06,399 ERROR  , Thread-3, checker.py:302, [trial: 7, gen: 9] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'accessModes', 0]]
2023-04-02 01:09:06,709 INFO   , Thread-3, checker.py:134, [trial: 7, gen: 9] Number of system state fields: [3464] Number of delta: [0]
2023-04-02 01:09:06,710 DEBUG  , Thread-3, acto.py  :374, [trial: 7, gen: 9] Invalid input, revert
2023-04-02 01:09:06,710 WARNING, Thread-3, schema.py:573, [trial: 7, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-02 01:09:06,711 DEBUG  , Thread-3, acto.py  :458, [trial: 7, gen: 9] Run and check
2023-04-02 01:09:07,002 INFO   , Thread-9, runner.py:360, [trial: 6, gen: 5] System took 00:01:00 to converge
2023-04-02 01:09:07,003 DEBUG  , Thread-9, runner.py:98, [trial: 6, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:09:07,003 DEBUG  , Thread-9, runner.py:99, [trial: 6, gen: 5] STDERR: 
2023-04-02 01:09:07,109 DEBUG  , Thread-9, runner.py:177, [trial: 6, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:56:09Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"kiaqbglcgq":"0.5000","memory":"2147483648.0"},"requests":{"cpu":"100m","memory":"1Gi","odcchdyeng":"1000m"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:55:03Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:08:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:kiaqbglcgq': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}, 'f:odcchdyeng': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:08:06Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2454', 'uid': 'a0d48ac2-efdc-4992-9fbc-0198c776a40a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'kiaqbglcgq': '500m', 'memory': '2147483648'}, 'requests': {'cpu': '100m', 'memory': '1Gi', 'odcchdyeng': '1'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:55:03Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:56:08Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:56:09Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:55:05Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:09:02Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:09:07,146 DEBUG  , Thread-9, runner.py:202, [trial: 6, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-ngc7s
2023-04-02 01:09:07,515 DEBUG  , Thread-9, checker.py:278, [trial: 6, gen: 5] Input delta [['spec', 'resources', 'requests', 'odcchdyeng']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'requests', 'odcchdyeng']]
2023-04-02 01:09:07,669 INFO   , Thread-9, checker.py:134, [trial: 6, gen: 5] Number of system state fields: [2015] Number of delta: [4]
2023-04-02 01:09:07,670 INFO   , Thread-9, acto.py  :323, [trial: 6, gen: 5] Running bundled testcases
2023-04-02 01:09:07,670 DEBUG  , Thread-9, test_case.py:51, [trial: 6, gen: 5] Precondition [increase_precondition] Result [True]
2023-04-02 01:09:07,671 INFO   , Thread-9, acto.py  :107, [trial: 6, gen: 5] JSON patch: [{"op": "replace", "path": "/spec/resources/requests/odcchdyeng", "value": "2"}]
2023-04-02 01:09:07,671 DEBUG  , Thread-9, acto.py  :458, [trial: 6, gen: 5] Run and check
2023-04-02 01:09:08,021 INFO   , Thread-9, runner.py:291, [trial: 6, gen: 5] Waiting for system to converge... 
2023-04-02 01:09:08,851 INFO   , Thread-11, runner.py:360, [trial: 7, gen: 3] System took 00:01:00 to converge
2023-04-02 01:09:08,852 DEBUG  , Thread-11, runner.py:98, [trial: 7, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:09:08,852 DEBUG  , Thread-11, runner.py:99, [trial: 7, gen: 3] STDERR: 
2023-04-02 01:09:08,988 DEBUG  , Thread-11, runner.py:177, [trial: 7, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:52:55Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:51:49Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:53:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:06:37Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2749', 'uid': 'd0f50402-d611-432b-9c88-c5ef9dd04a33'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:53:06Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:52:53Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:52:55Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:51:51Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:53:00Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:09:09,018 DEBUG  , Thread-11, runner.py:202, [trial: 7, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-j4xfq
2023-04-02 01:09:09,019 INFO   , Thread-3, runner.py:291, [trial: 7, gen: 9] Waiting for system to converge... 
2023-04-02 01:09:09,732 INFO   , Thread-11, acto.py  :187, Trial 7 finished, completed in 00:20:54
2023-04-02 01:09:09,733 INFO   , Thread-11, acto.py  :188, ---------------------------------------

2023-04-02 01:09:09,757 DEBUG  , Thread-11, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-j4xfq
2023-04-02 01:09:17,184 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:09:26,293 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-10
2023-04-02 01:09:27,274 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-02 01:09:27,274 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:09:29,590 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:09:39,674 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-02 01:09:39,674 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:10:01,129 INFO   , Thread-8, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:10:02,639 INFO   , Thread-4, runner.py:323, [trial: 5, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 01:10:08,183 INFO   , Thread-9, runner.py:360, [trial: 6, gen: 5] System took 00:01:00 to converge
2023-04-02 01:10:08,184 DEBUG  , Thread-9, runner.py:98, [trial: 6, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:10:08,185 DEBUG  , Thread-9, runner.py:99, [trial: 6, gen: 5] STDERR: 
2023-04-02 01:10:08,285 DEBUG  , Thread-9, runner.py:177, [trial: 6, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:56:09Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"kiaqbglcgq":"0.5000","memory":"2147483648.0"},"requests":{"cpu":"100m","memory":"1Gi","odcchdyeng":"2"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:55:03Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:kiaqbglcgq': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}, 'f:odcchdyeng': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:08:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:09:08Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2572', 'uid': 'a0d48ac2-efdc-4992-9fbc-0198c776a40a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'kiaqbglcgq': '500m', 'memory': '2147483648'}, 'requests': {'cpu': '100m', 'memory': '1Gi', 'odcchdyeng': '2'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:55:03Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:56:08Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:56:09Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:55:05Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:10:08Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:10:08,313 DEBUG  , Thread-9, runner.py:202, [trial: 6, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-ngc7s
2023-04-02 01:10:08,639 DEBUG  , Thread-9, checker.py:278, [trial: 6, gen: 5] Input delta [['spec', 'resources', 'requests', 'odcchdyeng']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'requests', 'odcchdyeng']]
2023-04-02 01:10:08,780 INFO   , Thread-9, checker.py:134, [trial: 6, gen: 5] Number of system state fields: [2015] Number of delta: [4]
2023-04-02 01:10:08,781 WARNING, Thread-9, schema.py:573, [trial: 6, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-02 01:10:08,782 INFO   , Thread-9, input.py :723, [trial: 6, gen: 7] Progress [4] cases left
2023-04-02 01:10:08,782 DEBUG  , Thread-9, test_case.py:51, [trial: 6, gen: 7] Precondition [decrease_precondition] Result [True]
2023-04-02 01:10:08,782 INFO   , Thread-9, acto.py  :263, [trial: 6, gen: 7] Precondition of ['spec', 'resources', 'requests', 'odcchdyeng'] satisfies
2023-04-02 01:10:08,782 INFO   , Thread-9, acto.py  :323, [trial: 6, gen: 7] Running bundled testcases
2023-04-02 01:10:08,782 DEBUG  , Thread-9, test_case.py:51, [trial: 6, gen: 7] Precondition [decrease_precondition] Result [True]
2023-04-02 01:10:08,783 INFO   , Thread-9, acto.py  :107, [trial: 6, gen: 7] JSON patch: [{"op": "replace", "path": "/spec/resources/requests/odcchdyeng", "value": "1.0"}]
2023-04-02 01:10:08,783 DEBUG  , Thread-9, acto.py  :458, [trial: 6, gen: 7] Run and check
2023-04-02 01:10:09,128 INFO   , Thread-9, runner.py:291, [trial: 6, gen: 7] Waiting for system to converge... 
2023-04-02 01:10:09,139 INFO   , Thread-3, runner.py:360, [trial: 7, gen: 9] System took 00:01:00 to converge
2023-04-02 01:10:09,141 DEBUG  , Thread-3, runner.py:98, [trial: 7, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:10:09,141 DEBUG  , Thread-3, runner.py:99, [trial: 7, gen: 9] STDERR: 
2023-04-02 01:10:09,395 DEBUG  , Thread-3, runner.py:177, [trial: 7, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:22Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:18Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:06:02Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:07:04Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1917', 'uid': '34f5360c-3ee3-42e3-abfa-6bb6e7624f06'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:33Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:21Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:22Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:21Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T04:58:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:06:58Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 01:10:09,438 DEBUG  , Thread-3, runner.py:202, [trial: 7, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-7pgtc
2023-04-02 01:10:10,192 DEBUG  , Thread-3, acto.py  :383, [trial: 7, gen: 9] Only one patch, no need to isolate
2023-04-02 01:10:10,198 INFO   , Thread-3, acto.py  :187, Trial 7 finished, completed in 00:14:04
2023-04-02 01:10:10,198 INFO   , Thread-3, acto.py  :188, ---------------------------------------

2023-04-02 01:10:10,222 DEBUG  , Thread-3, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-7pgtc
2023-04-02 01:10:19,809 WARNING, Thread-2, schema.py:573, [trial: 7, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:10:19,810 DEBUG  , Thread-2, acto.py  :458, [trial: 7, gen: 0] Run and check
2023-04-02 01:10:20,038 INFO   , Thread-11, base.py  :41, Created cluster
2023-04-02 01:10:20,052 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:10:20,248 INFO   , Thread-3, common.py:629, Trial testrun-crdb-whitebox/trial-02-0007 completed without error
2023-04-02 01:10:22,594 INFO   , Thread-2, runner.py:291, [trial: 7, gen: 0] Waiting for system to converge... 
2023-04-02 01:10:26,191 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-2
2023-04-02 01:10:32,589 INFO   , Thread-6, runner.py:323, [trial: 8, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:10:37,572 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:10:47,651 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-02 01:10:47,651 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:10:49,815 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:10:59,902 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-02 01:10:59,902 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:11:01,211 INFO   , Thread-8, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:11:02,720 INFO   , Thread-4, runner.py:323, [trial: 5, gen: 2] Statefulset test-cluster is not ready yet
2023-04-02 01:11:09,305 INFO   , Thread-9, runner.py:360, [trial: 6, gen: 7] System took 00:01:00 to converge
2023-04-02 01:11:09,306 DEBUG  , Thread-9, runner.py:98, [trial: 6, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:11:09,307 DEBUG  , Thread-9, runner.py:99, [trial: 6, gen: 7] STDERR: 
2023-04-02 01:11:09,410 DEBUG  , Thread-9, runner.py:177, [trial: 6, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:56:09Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"kiaqbglcgq":"0.5000","memory":"2147483648.0"},"requests":{"cpu":"100m","memory":"1Gi","odcchdyeng":"1.0"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:55:03Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:kiaqbglcgq': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}, 'f:odcchdyeng': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:08:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:10:09Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2678', 'uid': 'a0d48ac2-efdc-4992-9fbc-0198c776a40a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'kiaqbglcgq': '500m', 'memory': '2147483648'}, 'requests': {'cpu': '100m', 'memory': '1Gi', 'odcchdyeng': '1'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:55:03Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:56:08Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:56:09Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:55:05Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:11:08Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:11:09,430 DEBUG  , Thread-9, runner.py:202, [trial: 6, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-ngc7s
2023-04-02 01:11:09,750 DEBUG  , Thread-9, checker.py:278, [trial: 6, gen: 7] Input delta [['spec', 'resources', 'requests', 'odcchdyeng']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'requests', 'odcchdyeng']]
2023-04-02 01:11:09,939 INFO   , Thread-9, checker.py:134, [trial: 6, gen: 7] Number of system state fields: [2015] Number of delta: [4]
2023-04-02 01:11:09,940 WARNING, Thread-9, schema.py:573, [trial: 6, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-02 01:11:09,941 INFO   , Thread-9, input.py :723, [trial: 6, gen: 8] Progress [3] cases left
2023-04-02 01:11:09,941 DEBUG  , Thread-9, test_case.py:51, [trial: 6, gen: 8] Precondition [scaleDownUpPrecondition] Result [False]
2023-04-02 01:11:09,941 INFO   , Thread-9, acto.py  :267, [trial: 6, gen: 8] Precondition of ["spec", "nodes"] fails, try setup first
2023-04-02 01:11:09,941 INFO   , Thread-9, acto.py  :107, [trial: 6, gen: 8] JSON patch: [{"op": "replace", "path": "/spec/nodes", "value": 1}]
2023-04-02 01:11:09,941 DEBUG  , Thread-9, test_case.py:51, [trial: 6, gen: 8] Precondition [scaleDownUpPrecondition] Result [True]
2023-04-02 01:11:09,941 DEBUG  , Thread-9, acto.py  :458, [trial: 6, gen: 8] Run and check
2023-04-02 01:11:10,281 INFO   , Thread-9, runner.py:291, [trial: 6, gen: 8] Waiting for system to converge... 
2023-04-02 01:11:13,864 INFO   , Thread-10, runner.py:360, [trial: 6, gen: 1] System took 00:02:41 to converge
2023-04-02 01:11:13,865 DEBUG  , Thread-10, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:11:13,865 DEBUG  , Thread-10, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 01:11:14,004 DEBUG  , Thread-10, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:07:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"2Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:07:19Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:07:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:07:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:07:23Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1176', 'uid': '2c3cde1b-3748-4dbf-bf91-ed0d5776d9fd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '2Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:07:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:07:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:07:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:07:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:11:14,033 DEBUG  , Thread-10, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-vxrns
2023-04-02 01:11:14,559 DEBUG  , Thread-10, checker.py:278, [trial: 6, gen: 1] Input delta [['spec', 'resources', 'requests', 'memory']] matched with [['test-cluster-0', 'spec', 'containers', 0, 'resources', 'requests', 'memory']]
2023-04-02 01:11:14,560 DEBUG  , Thread-10, checker.py:278, [trial: 6, gen: 1] Input delta [['spec', 'resources', 'requests', 'memory']] matched with [['test-cluster-1', 'spec', 'containers', 0, 'resources', 'requests', 'memory']]
2023-04-02 01:11:14,560 DEBUG  , Thread-10, checker.py:278, [trial: 6, gen: 1] Input delta [['spec', 'resources', 'requests', 'memory']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'resources', 'requests', 'memory']]
2023-04-02 01:11:14,560 DEBUG  , Thread-10, checker.py:278, [trial: 6, gen: 1] Input delta [['spec', 'resources', 'requests', 'memory']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'requests', 'memory']]
2023-04-02 01:11:14,837 INFO   , Thread-10, checker.py:134, [trial: 6, gen: 1] Number of system state fields: [3462] Number of delta: [71]
2023-04-02 01:11:14,838 WARNING, Thread-10, schema.py:573, [trial: 6, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 01:11:14,838 INFO   , Thread-10, input.py :723, [trial: 6, gen: 2] Progress [5] cases left
2023-04-02 01:11:14,839 DEBUG  , Thread-10, test_case.py:51, [trial: 6, gen: 2] Precondition [decrease_precondition] Result [True]
2023-04-02 01:11:14,839 INFO   , Thread-10, acto.py  :263, [trial: 6, gen: 2] Precondition of ['spec', 'resources', 'requests', 'memory'] satisfies
2023-04-02 01:11:14,839 INFO   , Thread-10, acto.py  :323, [trial: 6, gen: 2] Running bundled testcases
2023-04-02 01:11:14,839 DEBUG  , Thread-10, test_case.py:51, [trial: 6, gen: 2] Precondition [decrease_precondition] Result [True]
2023-04-02 01:11:14,839 INFO   , Thread-10, acto.py  :107, [trial: 6, gen: 2] JSON patch: [{"op": "replace", "path": "/spec/resources/requests/memory", "value": "1073741824.0"}]
2023-04-02 01:11:14,839 DEBUG  , Thread-10, acto.py  :458, [trial: 6, gen: 2] Run and check
2023-04-02 01:11:15,226 INFO   , Thread-10, runner.py:291, [trial: 6, gen: 2] Waiting for system to converge... 
2023-04-02 01:11:17,587 ERROR  , Thread-8, runner.py:363, [trial: 7, gen: 1] System failed to converge within 600 seconds
2023-04-02 01:11:17,591 DEBUG  , Thread-8, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:11:17,591 DEBUG  , Thread-8, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 01:11:17,750 DEBUG  , Thread-8, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:51:46Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"grpcPort":5,"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:49:10Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:grpcPort': {}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T04:50:12Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:51:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:01:17Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3549', 'uid': '311d5bf5-8677-4b18-9421-798c08c53ba9'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 5, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:49:10Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:51:45Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:51:47Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:51:16Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:11:16Z', 'message': 'pod has not completely started', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:11:17,777 DEBUG  , Thread-8, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-tvn89
2023-04-02 01:11:18,237 DEBUG  , Thread-8, checker.py:728, [trial: 7, gen: 1] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [root['pod']['test-cluster-0'], root['pod']['test-cluster-1'], root['pod']['test-cluster-2'], root['stateful_set']['test-cluster'], root['service']['test-cluster'], root['service']['test-cluster-public'], root['pvc']['datadir-test-cluster-0'], root['pvc']['datadir-test-cluster-1'], root['pvc']['datadir-test-cluster-2'], root['pod_disruption_budget']['test-cluster'], root['secret']['test-cluster-ca'], root['secret']['test-cluster-node'], root['secret']['test-cluster-root']]}
2023-04-02 01:11:18,243 INFO   , Thread-8, acto.py  :187, Trial 7 finished, completed in 00:24:30
2023-04-02 01:11:18,243 INFO   , Thread-8, acto.py  :188, ---------------------------------------

2023-04-02 01:11:18,270 DEBUG  , Thread-8, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-tvn89
2023-04-02 01:11:19,584 INFO   , Thread-3, base.py  :41, Created cluster
2023-04-02 01:11:19,599 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:11:25,430 ERROR  , Thread-4, runner.py:363, [trial: 5, gen: 2] System failed to converge within 600 seconds
2023-04-02 01:11:25,431 DEBUG  , Thread-4, runner.py:98, [trial: 5, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:11:25,431 DEBUG  , Thread-4, runner.py:99, [trial: 5, gen: 2] STDERR: 
2023-04-02 01:11:25,564 DEBUG  , Thread-4, runner.py:177, [trial: 5, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":[],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","value":"ACTOKEY","valueFrom":{"configMapKeyRef":null,"fieldRef":{"apiVersion":"ACTOKEY","fieldPath":"ACTOKEY"},"resourceFieldRef":{"containerName":"ACTOKEY","divisor":5,"resource":"ACTOKEY"},"secretKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":true}}},{"name":"ACTOKEY","value":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":true},"fieldRef":{"apiVersion":"ACTOKEY","fieldPath":"ACTOKEY"},"resourceFieldRef":{"containerName":"ACTOKEY","divisor":".85809Gi","resource":"ACTOKEY"},"secretKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":true}}},{"name":"ACTOKEY","value":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":false},"fieldRef":{"apiVersion":"ACTOKEY","fieldPath":"ACTOKEY"},"resourceFieldRef":{"containerName":"ACTOKEY","divisor":".257803Ei","resource":"ACTOKEY"},"secretKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":false}}},{"name":"ACTOKEY","value":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":false},"fieldRef":{"apiVersion":"ACTOKEY","fieldPath":"ACTOKEY"},"resourceFieldRef":null,"secretKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":true}}},{"name":"ACTOKEY","value":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":false},"fieldRef":{"apiVersion":"ACTOKEY","fieldPath":"ACTOKEY"},"resourceFieldRef":{"containerName":"ACTOKEY","divisor":2,"resource":"ACTOKEY"},"secretKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":false}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:16Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:58:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:01:25Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1360', 'uid': 'f88622ac-1f50-4f77-8efa-5314df3adb4b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'value': 'ACTOKEY', 'valueFrom': {'fieldRef': {'apiVersion': 'ACTOKEY', 'fieldPath': 'ACTOKEY'}, 'resourceFieldRef': {'containerName': 'ACTOKEY', 'divisor': '5', 'resource': 'ACTOKEY'}, 'secretKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': True}}}, {'name': 'ACTOKEY', 'value': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': True}, 'fieldRef': {'apiVersion': 'ACTOKEY', 'fieldPath': 'ACTOKEY'}, 'resourceFieldRef': {'containerName': 'ACTOKEY', 'divisor': '921367121756160u', 'resource': 'ACTOKEY'}, 'secretKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': True}}}, {'name': 'ACTOKEY', 'value': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': False}, 'fieldRef': {'apiVersion': 'ACTOKEY', 'fieldPath': 'ACTOKEY'}, 'resourceFieldRef': {'containerName': 'ACTOKEY', 'divisor': '297226622652158970953728u', 'resource': 'ACTOKEY'}, 'secretKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': False}}}, {'name': 'ACTOKEY', 'value': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': False}, 'fieldRef': {'apiVersion': 'ACTOKEY', 'fieldPath': 'ACTOKEY'}, 'secretKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': True}}}, {'name': 'ACTOKEY', 'value': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': False}, 'fieldRef': {'apiVersion': 'ACTOKEY', 'fieldPath': 'ACTOKEY'}, 'resourceFieldRef': {'containerName': 'ACTOKEY', 'divisor': '2', 'resource': 'ACTOKEY'}, 'secretKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': False}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:31Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:11:25,588 DEBUG  , Thread-4, runner.py:202, [trial: 5, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-nrhk2
2023-04-02 01:11:26,241 DEBUG  , Thread-4, checker.py:278, [trial: 5, gen: 2] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'fieldRef', 'apiVersion']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 1, 'value_from', 'field_ref', 'api_version']]
2023-04-02 01:11:26,241 ERROR  , Thread-4, checker.py:282, [trial: 5, gen: 2] Matched delta inconsistent with input delta
2023-04-02 01:11:26,241 ERROR  , Thread-4, checker.py:283, [trial: 5, gen: 2] Input delta: not present -> ACTOKEY
2023-04-02 01:11:26,241 ERROR  , Thread-4, checker.py:284, [trial: 5, gen: 2] Matched delta: v1 -> not present
2023-04-02 01:11:26,457 INFO   , Thread-4, common.py:569, [trial: 5, gen: 2] Recognized invalid input through field [resource] in error message: reconciling resources on deploy action
2023-04-02 01:11:26,458 INFO   , Thread-4, checker.py:134, [trial: 5, gen: 2] Number of system state fields: [3133] Number of delta: [336]
2023-04-02 01:11:26,458 ERROR  , Thread-4, checker.py:561, [trial: 5, gen: 2] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 01:11:26,459 DEBUG  , Thread-4, acto.py  :489, [trial: 5, gen: 2] Running recovery
2023-04-02 01:11:28,331 INFO   , Thread-4, runner.py:291, [trial: 5, gen: 2] Waiting for system to converge... 
2023-04-02 01:11:32,676 INFO   , Thread-6, runner.py:323, [trial: 8, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:11:34,289 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-7
2023-04-02 01:11:36,851 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:11:40,033 WARNING, Thread-11, schema.py:573, [trial: 8, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:11:40,034 DEBUG  , Thread-11, acto.py  :458, [trial: 8, gen: 0] Run and check
2023-04-02 01:11:42,668 INFO   , Thread-11, runner.py:291, [trial: 8, gen: 0] Waiting for system to converge... 
2023-04-02 01:11:46,944 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-02 01:11:46,945 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:11:48,314 INFO   , Thread-2, runner.py:360, [trial: 7, gen: 0] System took 00:01:25 to converge
2023-04-02 01:11:48,316 DEBUG  , Thread-2, runner.py:98, [trial: 7, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:11:48,316 DEBUG  , Thread-2, runner.py:99, [trial: 7, gen: 0] STDERR: 
2023-04-02 01:11:48,473 DEBUG  , Thread-2, runner.py:177, [trial: 7, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:10:27Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:10:22Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:10:22Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:10:28Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:10:28Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1067', 'uid': '2750d03f-5f3f-4e6d-a402-ab19955bc0a3'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:10:38Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:10:27Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:10:28Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:10:33Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:11:48,515 DEBUG  , Thread-2, runner.py:202, [trial: 7, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-4gllk
2023-04-02 01:11:48,741 WARNING, Thread-2, schema.py:573, [trial: 7, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:11:48,741 INFO   , Thread-2, input.py :723, [trial: 7, gen: 1] Progress [6] cases left
2023-04-02 01:11:48,741 DEBUG  , Thread-2, test_case.py:51, [trial: 7, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 01:11:48,741 INFO   , Thread-2, acto.py  :263, [trial: 7, gen: 1] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom', 'secretKeyRef', 'key'] satisfies
2023-04-02 01:11:48,741 INFO   , Thread-2, acto.py  :323, [trial: 7, gen: 1] Running bundled testcases
2023-04-02 01:11:48,742 DEBUG  , Thread-2, test_case.py:51, [trial: 7, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 01:11:48,742 INFO   , Thread-2, acto.py  :107, [trial: 7, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"secretKeyRef": {"key": ""}}}]}]
2023-04-02 01:11:48,742 DEBUG  , Thread-2, acto.py  :458, [trial: 7, gen: 1] Run and check
2023-04-02 01:11:49,001 DEBUG  , Thread-3, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:11:49,066 INFO   , Thread-2, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 01:11:59,091 INFO   , Thread-3, deploy.py:91, Operator ready
2023-04-02 01:11:59,091 INFO   , Thread-3, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:12:18,582 INFO   , Thread-9, runner.py:360, [trial: 6, gen: 8] System took 00:01:08 to converge
2023-04-02 01:12:18,583 DEBUG  , Thread-9, runner.py:98, [trial: 6, gen: 8] STDOUT: 
2023-04-02 01:12:18,583 DEBUG  , Thread-9, runner.py:99, [trial: 6, gen: 8] STDERR: The CrdbCluster "test-cluster" is invalid: spec.nodes: Invalid value: 1: spec.nodes in body should be greater than or equal to 3

2023-04-02 01:12:18,689 DEBUG  , Thread-9, runner.py:177, [trial: 6, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:56:09Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"kiaqbglcgq":"0.5000","memory":"2147483648.0"},"requests":{"cpu":"100m","memory":"1Gi","odcchdyeng":"1.0"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:55:03Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:kiaqbglcgq': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}, 'f:odcchdyeng': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:08:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:10:09Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2790', 'uid': 'a0d48ac2-efdc-4992-9fbc-0198c776a40a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'kiaqbglcgq': '500m', 'memory': '2147483648'}, 'requests': {'cpu': '100m', 'memory': '1Gi', 'odcchdyeng': '1'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:55:03Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:56:08Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:56:09Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:55:05Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:12:14Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:12:18,715 DEBUG  , Thread-9, runner.py:202, [trial: 6, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-ngc7s
2023-04-02 01:12:19,013 INFO   , Thread-9, common.py:560, [trial: 6, gen: 8] Recognized invalid input through regex: The CrdbCluster "test-cluster" is invalid: spec.nodes: Invalid value: 1: spec.nodes in body should be greater than or equal to 3

2023-04-02 01:12:19,014 INFO   , Thread-9, checker.py:213, [trial: 6, gen: 8] Invalid input, reject mutation
2023-04-02 01:12:19,015 INFO   , Thread-9, checker.py:214, [trial: 6, gen: 8] STDOUT: 
2023-04-02 01:12:19,015 INFO   , Thread-9, checker.py:215, [trial: 6, gen: 8] STDERR: The CrdbCluster "test-cluster" is invalid: spec.nodes: Invalid value: 1: spec.nodes in body should be greater than or equal to 3

2023-04-02 01:12:19,314 INFO   , Thread-9, checker.py:134, [trial: 6, gen: 8] Number of system state fields: [2015] Number of delta: [1]
2023-04-02 01:12:19,315 INFO   , Thread-9, acto.py  :301, [trial: 6, gen: 8] Setup produced invalid input
2023-04-02 01:12:19,315 WARNING, Thread-9, schema.py:573, [trial: 6, gen: 8] Field [name] does not have a schema, using opaque schema
2023-04-02 01:12:19,315 DEBUG  , Thread-9, acto.py  :458, [trial: 6, gen: 8] Run and check
2023-04-02 01:12:19,678 INFO   , Thread-9, runner.py:291, [trial: 6, gen: 8] Waiting for system to converge... 
2023-04-02 01:12:20,157 INFO   , Thread-8, base.py  :41, Created cluster
2023-04-02 01:12:20,171 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:12:32,765 INFO   , Thread-6, runner.py:323, [trial: 8, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:12:32,901 INFO   , Thread-4, runner.py:360, [trial: 5, gen: 2] System took 00:01:04 to converge
2023-04-02 01:12:32,903 DEBUG  , Thread-4, runner.py:98, [trial: 5, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:12:32,903 DEBUG  , Thread-4, runner.py:99, [trial: 5, gen: 2] STDERR: 
2023-04-02 01:12:33,039 DEBUG  , Thread-4, runner.py:177, [trial: 5, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:58:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalArgs":[],"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:58:16Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T04:58:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalArgs': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:11:28Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2304', 'uid': 'f88622ac-1f50-4f77-8efa-5314df3adb4b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:58:31Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:58:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:58:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:58:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:12:33,066 DEBUG  , Thread-4, runner.py:202, [trial: 5, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-nrhk2
2023-04-02 01:12:33,747 INFO   , Thread-4, acto.py  :187, Trial 5 finished, completed in 00:16:32
2023-04-02 01:12:33,747 INFO   , Thread-4, acto.py  :188, ---------------------------------------

2023-04-02 01:12:33,770 DEBUG  , Thread-4, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-nrhk2
2023-04-02 01:12:37,641 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:12:39,225 WARNING, Thread-3, schema.py:573, [trial: 8, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:12:39,226 DEBUG  , Thread-3, acto.py  :458, [trial: 8, gen: 0] Run and check
2023-04-02 01:12:41,797 INFO   , Thread-3, runner.py:291, [trial: 8, gen: 0] Waiting for system to converge... 
2023-04-02 01:12:42,800 INFO   , Thread-11, runner.py:360, [trial: 8, gen: 0] System took 00:01:00 to converge
2023-04-02 01:12:42,802 DEBUG  , Thread-11, runner.py:98, [trial: 8, gen: 0] STDOUT: 
2023-04-02 01:12:42,802 DEBUG  , Thread-11, runner.py:99, [trial: 8, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-10-0008/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.180.161:443: connect: connection refused

2023-04-02 01:12:42,893 DEBUG  , Thread-11, runner.py:177, [trial: 8, gen: 0] {}
2023-04-02 01:12:42,893 ERROR  , Thread-11, runner.py:107, [trial: 8, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 01:12:42,894 INFO   , Thread-11, checker.py:103, [trial: 8, gen: 0] Connection refused, reject mutation
2023-04-02 01:12:42,894 INFO   , Thread-11, acto.py  :472, [trial: 8, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 01:12:47,728 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-02 01:12:47,728 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:12:49,172 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-3
2023-04-02 01:12:49,704 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:12:59,796 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-02 01:12:59,796 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:13:03,326 INFO   , Thread-11, runner.py:291, [trial: 8, gen: 0] Waiting for system to converge... 
2023-04-02 01:13:19,800 INFO   , Thread-9, runner.py:360, [trial: 6, gen: 8] System took 00:01:00 to converge
2023-04-02 01:13:19,801 DEBUG  , Thread-9, runner.py:98, [trial: 6, gen: 8] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:13:19,801 DEBUG  , Thread-9, runner.py:99, [trial: 6, gen: 8] STDERR: 
2023-04-02 01:13:19,906 DEBUG  , Thread-9, runner.py:177, [trial: 6, gen: 8] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T04:56:09Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"kiaqbglcgq":"0.5000","memory":"2147483648.0"},"requests":{"cpu":"100m","memory":"1Gi","odcchdyeng":"1.0"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T04:55:03Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:kiaqbglcgq': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}, 'f:odcchdyeng': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:08:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:12:24Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2895', 'uid': 'a0d48ac2-efdc-4992-9fbc-0198c776a40a'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'kiaqbglcgq': '500m', 'memory': '2147483648'}, 'requests': {'cpu': '100m', 'memory': '1Gi', 'odcchdyeng': '1'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T04:55:03Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T04:56:08Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T04:56:09Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T04:55:05Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:13:14Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:13:19,929 DEBUG  , Thread-9, runner.py:202, [trial: 6, gen: 8] Got operator pod: pod name:cockroach-operator-manager-64c489884-ngc7s
2023-04-02 01:13:20,450 INFO   , Thread-9, acto.py  :321, [trial: 6, gen: 8] All setups failed
2023-04-02 01:13:20,456 INFO   , Thread-9, acto.py  :187, Trial 6 finished, completed in 00:20:39
2023-04-02 01:13:20,456 INFO   , Thread-9, acto.py  :188, ---------------------------------------

2023-04-02 01:13:20,479 DEBUG  , Thread-9, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-ngc7s
2023-04-02 01:13:30,498 INFO   , Thread-9, common.py:629, Trial testrun-crdb-whitebox/trial-08-0006 completed without error
2023-04-02 01:13:32,859 INFO   , Thread-6, runner.py:323, [trial: 8, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:13:35,990 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-8
2023-04-02 01:13:40,025 WARNING, Thread-8, schema.py:573, [trial: 8, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:13:40,026 DEBUG  , Thread-8, acto.py  :458, [trial: 8, gen: 0] Run and check
2023-04-02 01:13:42,147 INFO   , Thread-10, runner.py:360, [trial: 6, gen: 2] System took 00:02:26 to converge
2023-04-02 01:13:42,149 DEBUG  , Thread-10, runner.py:98, [trial: 6, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:13:42,149 DEBUG  , Thread-10, runner.py:99, [trial: 6, gen: 2] STDERR: 
2023-04-02 01:13:42,307 DEBUG  , Thread-10, runner.py:177, [trial: 6, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:07:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1073741824.0"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:07:19Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:07:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:07:23Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1555', 'uid': '2c3cde1b-3748-4dbf-bf91-ed0d5776d9fd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1073741824'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:07:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:07:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:07:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:07:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:13:42,337 DEBUG  , Thread-10, runner.py:202, [trial: 6, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-vxrns
2023-04-02 01:13:42,871 INFO   , Thread-4, base.py  :41, Created cluster
2023-04-02 01:13:42,962 DEBUG  , Thread-10, checker.py:278, [trial: 6, gen: 2] Input delta [['spec', 'resources', 'requests', 'memory']] matched with [['test-cluster-0', 'spec', 'containers', 0, 'resources', 'requests', 'memory']]
2023-04-02 01:13:42,971 DEBUG  , Thread-10, checker.py:278, [trial: 6, gen: 2] Input delta [['spec', 'resources', 'requests', 'memory']] matched with [['test-cluster-1', 'spec', 'containers', 0, 'resources', 'requests', 'memory']]
2023-04-02 01:13:42,972 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:13:42,982 DEBUG  , Thread-10, checker.py:278, [trial: 6, gen: 2] Input delta [['spec', 'resources', 'requests', 'memory']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'resources', 'requests', 'memory']]
2023-04-02 01:13:42,983 DEBUG  , Thread-10, checker.py:278, [trial: 6, gen: 2] Input delta [['spec', 'resources', 'requests', 'memory']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'requests', 'memory']]
2023-04-02 01:13:43,136 INFO   , Thread-8, runner.py:291, [trial: 8, gen: 0] Waiting for system to converge... 
2023-04-02 01:13:43,228 INFO   , Thread-10, checker.py:134, [trial: 6, gen: 2] Number of system state fields: [3456] Number of delta: [71]
2023-04-02 01:13:43,230 WARNING, Thread-10, schema.py:573, [trial: 6, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:13:43,230 INFO   , Thread-10, input.py :723, [trial: 6, gen: 3] Progress [4] cases left
2023-04-02 01:13:43,230 DEBUG  , Thread-10, test_case.py:51, [trial: 6, gen: 3] Precondition [plain_toleration_precondition] Result [True]
2023-04-02 01:13:43,230 INFO   , Thread-10, acto.py  :263, [trial: 6, gen: 3] Precondition of ['spec', 'tolerations', 0] satisfies
2023-04-02 01:13:43,230 INFO   , Thread-10, acto.py  :323, [trial: 6, gen: 3] Running bundled testcases
2023-04-02 01:13:43,231 DEBUG  , Thread-10, test_case.py:51, [trial: 6, gen: 3] Precondition [plain_toleration_precondition] Result [True]
2023-04-02 01:13:43,231 INFO   , Thread-10, acto.py  :107, [trial: 6, gen: 3] JSON patch: [{"op": "add", "path": "/spec/tolerations", "value": [{"key": "test-key", "operator": "Equal", "value": "test-value", "effect": "NoSchedule"}]}]
2023-04-02 01:13:43,231 DEBUG  , Thread-10, acto.py  :458, [trial: 6, gen: 3] Run and check
2023-04-02 01:13:43,286 INFO   , Thread-3, runner.py:360, [trial: 8, gen: 0] System took 00:01:01 to converge
2023-04-02 01:13:43,287 DEBUG  , Thread-3, runner.py:98, [trial: 8, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:13:43,287 DEBUG  , Thread-3, runner.py:99, [trial: 8, gen: 0] STDERR: 
2023-04-02 01:13:43,383 DEBUG  , Thread-3, runner.py:177, [trial: 8, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:12:41Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:12:41Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:12:43Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '914', 'uid': '33412ccf-fb86-4ece-af09-73daf5a975c0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:12:41Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:12:41Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:12:43Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 01:13:43,403 DEBUG  , Thread-3, runner.py:202, [trial: 8, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-c9hgn
2023-04-02 01:13:43,505 WARNING, Thread-3, schema.py:573, [trial: 8, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:13:43,506 INFO   , Thread-3, input.py :723, [trial: 8, gen: 1] Progress [5] cases left
2023-04-02 01:13:43,506 DEBUG  , Thread-3, test_case.py:51, [trial: 8, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 01:13:43,506 INFO   , Thread-3, acto.py  :263, [trial: 8, gen: 1] Precondition of ['spec'] satisfies
2023-04-02 01:13:43,506 INFO   , Thread-3, acto.py  :323, [trial: 8, gen: 1] Running bundled testcases
2023-04-02 01:13:43,506 DEBUG  , Thread-3, test_case.py:51, [trial: 8, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 01:13:43,506 INFO   , Thread-3, acto.py  :107, [trial: 8, gen: 1] JSON patch: [{"op": "remove", "path": "/spec/nodes"}, {"op": "remove", "path": "/spec/tlsEnabled"}, {"op": "remove", "path": "/spec/image"}, {"op": "remove", "path": "/spec/resources"}, {"op": "remove", "path": "/spec/dataStore"}, {"op": "remove", "path": "/spec/additionalLabels"}]
2023-04-02 01:13:43,506 DEBUG  , Thread-3, acto.py  :458, [trial: 8, gen: 1] Run and check
2023-04-02 01:13:43,676 INFO   , Thread-10, runner.py:291, [trial: 6, gen: 3] Waiting for system to converge... 
2023-04-02 01:13:43,833 INFO   , Thread-3, runner.py:291, [trial: 8, gen: 1] Waiting for system to converge... 
2023-04-02 01:13:57,486 ERROR  , Thread-6, runner.py:363, [trial: 8, gen: 1] System failed to converge within 600 seconds
2023-04-02 01:13:57,489 DEBUG  , Thread-6, runner.py:98, [trial: 8, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:13:57,489 DEBUG  , Thread-6, runner.py:99, [trial: 8, gen: 1] STDERR: 
2023-04-02 01:13:57,628 DEBUG  , Thread-6, runner.py:177, [trial: 8, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:02:49Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"secretKeyRef":{"key":"ACTOKEY","name":"ACTOKEY"}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:02:45Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:02:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:02:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:03:57Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1174', 'uid': '9d6e2915-8908-4870-be02-a4196ffabf78'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'secretKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:03:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:02:48Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:02:49Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:02:47Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:02:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:13:57,653 DEBUG  , Thread-6, runner.py:202, [trial: 8, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-nwwdw
2023-04-02 01:13:58,428 INFO   , Thread-6, checker.py:134, [trial: 8, gen: 1] Number of system state fields: [3045] Number of delta: [215]
2023-04-02 01:13:58,429 ERROR  , Thread-6, checker.py:561, [trial: 8, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 01:13:58,429 DEBUG  , Thread-6, acto.py  :489, [trial: 8, gen: 1] Running recovery
2023-04-02 01:14:00,164 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:14:00,418 INFO   , Thread-6, runner.py:291, [trial: 8, gen: 1] Waiting for system to converge... 
2023-04-02 01:14:10,251 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-02 01:14:10,252 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:14:12,247 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:14:15,080 INFO   , Thread-11, runner.py:360, [trial: 8, gen: 0] System took 00:01:11 to converge
2023-04-02 01:14:15,082 DEBUG  , Thread-11, runner.py:98, [trial: 8, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:14:15,082 DEBUG  , Thread-11, runner.py:99, [trial: 8, gen: 0] STDERR: 
2023-04-02 01:14:15,224 DEBUG  , Thread-11, runner.py:177, [trial: 8, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:13:06Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:13:03Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:13:03Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:13:07Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:13:07Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1187', 'uid': 'f3844567-7d26-49f5-9c7f-07029c1f6da5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:13:17Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:13:06Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:13:07Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:13:05Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:13:12Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:14:15,252 DEBUG  , Thread-11, runner.py:202, [trial: 8, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-c6ljk
2023-04-02 01:14:15,517 WARNING, Thread-11, schema.py:573, [trial: 8, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:14:15,517 INFO   , Thread-11, input.py :723, [trial: 8, gen: 1] Progress [2] cases left
2023-04-02 01:14:15,517 DEBUG  , Thread-11, test_case.py:51, [trial: 8, gen: 1] Precondition [null_affinity_precondition] Result [False]
2023-04-02 01:14:15,517 INFO   , Thread-11, acto.py  :267, [trial: 8, gen: 1] Precondition of ["spec", "affinity"] fails, try setup first
2023-04-02 01:14:15,518 INFO   , Thread-11, acto.py  :107, [trial: 8, gen: 1] JSON patch: [{"op": "add", "path": "/spec/affinity", "value": {"nodeAffinity": {"requiredDuringSchedulingIgnoredDuringExecution": {"nodeSelectorTerms": [{"matchExpressions": [{"key": "kubernetes.io/hostname", "operator": "In", "values": ["kind-worker", "kind-worker2", "kind-worker3kind-control-plane"]}]}]}}}}]
2023-04-02 01:14:15,518 DEBUG  , Thread-11, test_case.py:51, [trial: 8, gen: 1] Precondition [null_affinity_precondition] Result [True]
2023-04-02 01:14:15,518 DEBUG  , Thread-11, acto.py  :458, [trial: 8, gen: 1] Run and check
2023-04-02 01:14:15,850 INFO   , Thread-11, runner.py:291, [trial: 8, gen: 1] Waiting for system to converge... 
2023-04-02 01:14:20,643 INFO   , Thread-2, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:14:22,334 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-02 01:14:22,334 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:14:31,885 INFO   , Thread-9, base.py  :41, Created cluster
2023-04-02 01:14:31,897 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:14:43,941 INFO   , Thread-3, runner.py:360, [trial: 8, gen: 1] System took 00:01:00 to converge
2023-04-02 01:14:43,942 DEBUG  , Thread-3, runner.py:98, [trial: 8, gen: 1] STDOUT: 
2023-04-02 01:14:43,942 DEBUG  , Thread-3, runner.py:99, [trial: 8, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-02-0008/mutated-1.yaml": error validating data: [ValidationError(CrdbCluster.spec): missing required field "dataStore" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec, ValidationError(CrdbCluster.spec): missing required field "nodes" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec]; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 01:14:44,051 DEBUG  , Thread-3, runner.py:177, [trial: 8, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:12:41Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:12:41Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:12:43Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '914', 'uid': '33412ccf-fb86-4ece-af09-73daf5a975c0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:12:41Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:12:41Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:12:43Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 01:14:44,074 DEBUG  , Thread-3, runner.py:202, [trial: 8, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-c9hgn
2023-04-02 01:14:44,281 INFO   , Thread-3, common.py:569, [trial: 8, gen: 1] Recognized invalid input through field [nodes] in error message: error: error validating "testrun-crdb-whitebox/trial-02-0008/mutated-1.yaml": error validating data: [ValidationError(CrdbCluster.spec): missing required field "dataStore" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec, ValidationError(CrdbCluster.spec): missing required field "nodes" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec]; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 01:14:44,281 INFO   , Thread-3, checker.py:213, [trial: 8, gen: 1] Invalid input, reject mutation
2023-04-02 01:14:44,281 INFO   , Thread-3, checker.py:214, [trial: 8, gen: 1] STDOUT: 
2023-04-02 01:14:44,281 INFO   , Thread-3, checker.py:215, [trial: 8, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-02-0008/mutated-1.yaml": error validating data: [ValidationError(CrdbCluster.spec): missing required field "dataStore" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec, ValidationError(CrdbCluster.spec): missing required field "nodes" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec]; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 01:14:44,388 WARNING, Thread-3, checker.py:347, [trial: 8, gen: 1] 'AccessModeSchema' object is not subscriptable happened when trying to fetch default value
2023-04-02 01:14:44,388 ERROR  , Thread-3, checker.py:301, [trial: 8, gen: 1] Found no matching fields for input delta
2023-04-02 01:14:44,388 ERROR  , Thread-3, checker.py:302, [trial: 8, gen: 1] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'accessModes', 0]]
2023-04-02 01:14:44,494 INFO   , Thread-3, checker.py:134, [trial: 8, gen: 1] Number of system state fields: [1500] Number of delta: [0]
2023-04-02 01:14:44,495 DEBUG  , Thread-3, acto.py  :374, [trial: 8, gen: 1] Invalid input, revert
2023-04-02 01:14:44,496 WARNING, Thread-3, schema.py:573, [trial: 8, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:14:44,496 DEBUG  , Thread-3, acto.py  :458, [trial: 8, gen: 1] Run and check
2023-04-02 01:14:44,700 INFO   , Thread-8, runner.py:360, [trial: 8, gen: 0] System took 00:01:01 to converge
2023-04-02 01:14:44,701 DEBUG  , Thread-8, runner.py:98, [trial: 8, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:14:44,702 DEBUG  , Thread-8, runner.py:99, [trial: 8, gen: 0] STDERR: 
2023-04-02 01:14:44,812 DEBUG  , Thread-8, runner.py:177, [trial: 8, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:13:43Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:13:43Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:13:44Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '898', 'uid': '99d278ab-b363-4362-802f-4c2761ddb5da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:13:43Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:13:43Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:13:44Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 01:14:44,832 DEBUG  , Thread-8, runner.py:202, [trial: 8, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-r5422
2023-04-02 01:14:44,862 INFO   , Thread-3, runner.py:291, [trial: 8, gen: 1] Waiting for system to converge... 
2023-04-02 01:14:44,958 WARNING, Thread-8, schema.py:573, [trial: 8, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:14:44,959 INFO   , Thread-8, input.py :723, [trial: 8, gen: 1] Progress [9] cases left
2023-04-02 01:14:44,959 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 01:14:44,959 INFO   , Thread-8, acto.py  :263, [trial: 8, gen: 1] Precondition of ['spec', 'grpcPort'] satisfies
2023-04-02 01:14:44,959 INFO   , Thread-8, acto.py  :323, [trial: 8, gen: 1] Running bundled testcases
2023-04-02 01:14:44,960 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 01:14:44,960 INFO   , Thread-8, acto.py  :107, [trial: 8, gen: 1] JSON patch: [{"op": "add", "path": "/spec/grpcPort", "value": 0}]
2023-04-02 01:14:44,960 DEBUG  , Thread-8, acto.py  :458, [trial: 8, gen: 1] Run and check
2023-04-02 01:14:45,290 INFO   , Thread-8, runner.py:291, [trial: 8, gen: 1] Waiting for system to converge... 
2023-04-02 01:14:49,303 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:14:59,390 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-02 01:14:59,390 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:15:01,490 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:15:02,531 WARNING, Thread-4, schema.py:573, [trial: 6, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:15:02,531 DEBUG  , Thread-4, acto.py  :458, [trial: 6, gen: 0] Run and check
2023-04-02 01:15:05,242 INFO   , Thread-4, runner.py:291, [trial: 6, gen: 0] Waiting for system to converge... 
2023-04-02 01:15:11,582 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-02 01:15:11,582 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:15:22,470 INFO   , Thread-11, runner.py:323, [trial: 8, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:15:25,645 INFO   , Thread-6, runner.py:360, [trial: 8, gen: 1] System took 00:01:25 to converge
2023-04-02 01:15:25,646 DEBUG  , Thread-6, runner.py:98, [trial: 8, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:15:25,646 DEBUG  , Thread-6, runner.py:99, [trial: 8, gen: 1] STDERR: 
2023-04-02 01:15:25,792 DEBUG  , Thread-6, runner.py:177, [trial: 8, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:02:49Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:02:45Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:02:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:14:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2119', 'uid': '9d6e2915-8908-4870-be02-a4196ffabf78'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:03:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:02:48Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:02:49Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:02:47Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:02:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:15:25,820 DEBUG  , Thread-6, runner.py:202, [trial: 8, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-nwwdw
2023-04-02 01:15:26,517 INFO   , Thread-6, acto.py  :187, Trial 8 finished, completed in 00:15:02
2023-04-02 01:15:26,517 INFO   , Thread-6, acto.py  :188, ---------------------------------------

2023-04-02 01:15:26,541 DEBUG  , Thread-6, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-nwwdw
2023-04-02 01:15:42,543 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-5
2023-04-02 01:15:42,572 INFO   , Thread-2, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:15:48,652 INFO   , Thread-8, runner.py:360, [trial: 8, gen: 1] System took 00:01:03 to converge
2023-04-02 01:15:48,653 DEBUG  , Thread-8, runner.py:98, [trial: 8, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:15:48,653 DEBUG  , Thread-8, runner.py:99, [trial: 8, gen: 1] STDERR: 
2023-04-02 01:15:48,763 DEBUG  , Thread-8, runner.py:177, [trial: 8, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:14:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"grpcPort":0,"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:13:43Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:grpcPort': {}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:14:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:14:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:14:48Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1104', 'uid': '99d278ab-b363-4362-802f-4c2761ddb5da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 0, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:13:43Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:14:47Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:14:48Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:13:44Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:44Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 01:15:48,783 DEBUG  , Thread-8, runner.py:202, [trial: 8, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-r5422
2023-04-02 01:15:49,208 INFO   , Thread-8, common.py:560, [trial: 8, gen: 1] Recognized invalid input through regex: failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]
2023-04-02 01:15:49,209 INFO   , Thread-8, checker.py:134, [trial: 8, gen: 1] Number of system state fields: [1898] Number of delta: [202]
2023-04-02 01:15:49,209 DEBUG  , Thread-8, acto.py  :374, [trial: 8, gen: 1] Invalid input, revert
2023-04-02 01:15:49,210 WARNING, Thread-8, schema.py:573, [trial: 8, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:15:49,210 DEBUG  , Thread-8, acto.py  :458, [trial: 8, gen: 1] Run and check
2023-04-02 01:15:49,568 INFO   , Thread-8, runner.py:291, [trial: 8, gen: 1] Waiting for system to converge... 
2023-04-02 01:15:51,717 WARNING, Thread-9, schema.py:573, [trial: 7, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:15:51,718 DEBUG  , Thread-9, acto.py  :458, [trial: 7, gen: 0] Run and check
2023-04-02 01:15:54,682 INFO   , Thread-9, runner.py:291, [trial: 7, gen: 0] Waiting for system to converge... 
2023-04-02 01:16:10,482 INFO   , Thread-10, runner.py:360, [trial: 6, gen: 3] System took 00:02:26 to converge
2023-04-02 01:16:10,483 DEBUG  , Thread-10, runner.py:98, [trial: 6, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:16:10,483 DEBUG  , Thread-10, runner.py:99, [trial: 6, gen: 3] STDERR: 
2023-04-02 01:16:10,625 DEBUG  , Thread-10, runner.py:177, [trial: 6, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:07:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1073741824.0"}},"tlsEnabled":true,"tolerations":[{"effect":"NoSchedule","key":"test-key","operator":"Equal","value":"test-value"}]}}\n'}, 'creationTimestamp': '2023-04-02T05:07:19Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:07:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:13:43Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1961', 'uid': '2c3cde1b-3748-4dbf-bf91-ed0d5776d9fd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1073741824'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'tolerations': [{'effect': 'NoSchedule', 'key': 'test-key', 'operator': 'Equal', 'value': 'test-value'}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:07:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:07:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:07:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:07:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:16:10,653 DEBUG  , Thread-10, runner.py:202, [trial: 6, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-vxrns
2023-04-02 01:16:11,534 INFO   , Thread-10, common.py:569, [trial: 6, gen: 3] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-02 01:16:11,535 INFO   , Thread-10, checker.py:134, [trial: 6, gen: 3] Number of system state fields: [3479] Number of delta: [104]
2023-04-02 01:16:11,536 DEBUG  , Thread-10, acto.py  :374, [trial: 6, gen: 3] Invalid input, revert
2023-04-02 01:16:11,536 WARNING, Thread-10, schema.py:573, [trial: 6, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:16:11,537 DEBUG  , Thread-10, acto.py  :458, [trial: 6, gen: 3] Run and check
2023-04-02 01:16:11,914 INFO   , Thread-10, runner.py:291, [trial: 6, gen: 3] Waiting for system to converge... 
2023-04-02 01:16:28,422 INFO   , Thread-4, runner.py:360, [trial: 6, gen: 0] System took 00:01:23 to converge
2023-04-02 01:16:28,423 DEBUG  , Thread-4, runner.py:98, [trial: 6, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:16:28,423 DEBUG  , Thread-4, runner.py:99, [trial: 6, gen: 0] STDERR: 
2023-04-02 01:16:28,596 DEBUG  , Thread-4, runner.py:177, [trial: 6, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:15:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:15:05Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:15:05Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:15:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:15:09Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1068', 'uid': 'a18f3edc-1deb-4048-9cb9-b2da05cf533d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:15:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:15:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:15:09Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:15:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:16:28,629 DEBUG  , Thread-4, runner.py:202, [trial: 6, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-6pvfp
2023-04-02 01:16:28,811 INFO   , Thread-6, base.py  :41, Created cluster
2023-04-02 01:16:28,866 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:16:28,952 WARNING, Thread-4, schema.py:573, [trial: 6, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:16:28,953 INFO   , Thread-4, input.py :723, [trial: 6, gen: 1] Progress [2] cases left
2023-04-02 01:16:28,953 DEBUG  , Thread-4, test_case.py:51, [trial: 6, gen: 1] Precondition [push_precondition] Result [False]
2023-04-02 01:16:28,953 INFO   , Thread-4, acto.py  :267, [trial: 6, gen: 1] Precondition of ["spec", "podEnvVariables"] fails, try setup first
2023-04-02 01:16:28,954 INFO   , Thread-4, acto.py  :107, [trial: 6, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "value": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": null, "optional": true}, "fieldRef": null, "resourceFieldRef": {"containerName": "ACTOKEY", "divisor": 5, "resource": "ACTOKEY"}, "secretKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": false}}}, {"name": "ACTOKEY", "value": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": false}, "fieldRef": {"apiVersion": "ACTOKEY", "fieldPath": "ACTOKEY"}, "resourceFieldRef": {"containerName": "ACTOKEY", "divisor": 1, "resource": "ACTOKEY"}, "secretKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": true}}}]}]
2023-04-02 01:16:28,954 DEBUG  , Thread-4, test_case.py:51, [trial: 6, gen: 1] Precondition [push_precondition] Result [True]
2023-04-02 01:16:28,954 DEBUG  , Thread-4, acto.py  :458, [trial: 6, gen: 1] Run and check
2023-04-02 01:16:29,322 INFO   , Thread-4, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 01:16:42,659 INFO   , Thread-2, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:16:46,236 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:16:54,806 INFO   , Thread-9, runner.py:360, [trial: 7, gen: 0] System took 00:01:00 to converge
2023-04-02 01:16:54,808 DEBUG  , Thread-9, runner.py:98, [trial: 7, gen: 0] STDOUT: 
2023-04-02 01:16:54,808 DEBUG  , Thread-9, runner.py:99, [trial: 7, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-08-0007/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.22.31:443: connect: connection refused

2023-04-02 01:16:54,909 DEBUG  , Thread-9, runner.py:177, [trial: 7, gen: 0] {}
2023-04-02 01:16:54,909 ERROR  , Thread-9, runner.py:107, [trial: 7, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 01:16:54,910 INFO   , Thread-9, checker.py:103, [trial: 7, gen: 0] Connection refused, reject mutation
2023-04-02 01:16:54,910 INFO   , Thread-9, acto.py  :472, [trial: 7, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 01:16:56,318 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 01:16:56,318 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:16:58,285 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:17:08,376 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 01:17:08,377 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:17:15,328 INFO   , Thread-9, runner.py:291, [trial: 7, gen: 0] Waiting for system to converge... 
2023-04-02 01:17:18,109 INFO   , Thread-8, runner.py:360, [trial: 8, gen: 1] System took 00:01:28 to converge
2023-04-02 01:17:18,110 DEBUG  , Thread-8, runner.py:98, [trial: 8, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:17:18,111 DEBUG  , Thread-8, runner.py:99, [trial: 8, gen: 1] STDERR: 
2023-04-02 01:17:18,262 DEBUG  , Thread-8, runner.py:177, [trial: 8, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:14:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:13:43Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:15:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:16:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1274', 'uid': '99d278ab-b363-4362-802f-4c2761ddb5da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:16:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:14:47Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:14:48Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:13:44Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:44Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T05:15:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:17:18,291 DEBUG  , Thread-8, runner.py:202, [trial: 8, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-r5422
2023-04-02 01:17:18,831 DEBUG  , Thread-8, acto.py  :383, [trial: 8, gen: 1] Only one patch, no need to isolate
2023-04-02 01:17:18,831 WARNING, Thread-8, schema.py:573, [trial: 8, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:17:18,831 INFO   , Thread-8, input.py :723, [trial: 8, gen: 3] Progress [8] cases left
2023-04-02 01:17:18,831 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-02 01:17:18,831 INFO   , Thread-8, acto.py  :267, [trial: 8, gen: 3] Precondition of ["spec", "ingress", "ui", "tls"] fails, try setup first
2023-04-02 01:17:18,832 INFO   , Thread-8, acto.py  :107, [trial: 8, gen: 3] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": []}}}]
2023-04-02 01:17:18,832 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-02 01:17:18,832 ERROR  , Thread-8, acto.py  :277, [trial: 8, gen: 3] Setup does not work correctly
2023-04-02 01:17:18,832 INFO   , Thread-8, acto.py  :321, [trial: 8, gen: 3] All setups failed
2023-04-02 01:17:18,832 WARNING, Thread-8, schema.py:573, [trial: 8, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:17:18,833 INFO   , Thread-8, input.py :723, [trial: 8, gen: 3] Progress [7] cases left
2023-04-02 01:17:18,833 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 3] Precondition [push_precondition] Result [False]
2023-04-02 01:17:18,833 INFO   , Thread-8, acto.py  :267, [trial: 8, gen: 3] Precondition of ["spec", "ingress", "ui", "tls"] fails, try setup first
2023-04-02 01:17:18,833 INFO   , Thread-8, acto.py  :107, [trial: 8, gen: 3] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": [{"hosts": ["ACTOKEY", "ACTOKEY", "ACTOKEY", "ACTOKEY"], "secretName": "ACTOKEY"}, {"hosts": ["ACTOKEY", "ACTOKEY", "ACTOKEY"], "secretName": "ACTOKEY"}, {"hosts": [], "secretName": "ACTOKEY"}, {"hosts": ["ACTOKEY"], "secretName": "ACTOKEY"}, {"hosts": ["ACTOKEY", "ACTOKEY", "ACTOKEY"], "secretName": "ACTOKEY"}]}}}]
2023-04-02 01:17:18,833 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 3] Precondition [push_precondition] Result [False]
2023-04-02 01:17:18,833 ERROR  , Thread-8, acto.py  :277, [trial: 8, gen: 3] Setup does not work correctly
2023-04-02 01:17:18,833 INFO   , Thread-8, acto.py  :321, [trial: 8, gen: 3] All setups failed
2023-04-02 01:17:18,833 WARNING, Thread-8, schema.py:573, [trial: 8, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:17:18,834 INFO   , Thread-8, input.py :723, [trial: 8, gen: 3] Progress [6] cases left
2023-04-02 01:17:18,834 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 3] Precondition [pop_precondition] Result [False]
2023-04-02 01:17:18,834 INFO   , Thread-8, acto.py  :267, [trial: 8, gen: 3] Precondition of ["spec", "ingress", "ui", "tls"] fails, try setup first
2023-04-02 01:17:18,834 INFO   , Thread-8, acto.py  :107, [trial: 8, gen: 3] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": []}}}]
2023-04-02 01:17:18,834 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 3] Precondition [pop_precondition] Result [False]
2023-04-02 01:17:18,834 ERROR  , Thread-8, acto.py  :277, [trial: 8, gen: 3] Setup does not work correctly
2023-04-02 01:17:18,834 INFO   , Thread-8, acto.py  :321, [trial: 8, gen: 3] All setups failed
2023-04-02 01:17:18,834 WARNING, Thread-8, schema.py:573, [trial: 8, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:17:18,835 INFO   , Thread-8, input.py :723, [trial: 8, gen: 3] Progress [5] cases left
2023-04-02 01:17:18,835 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 3] Precondition [empty_precondition] Result [True]
2023-04-02 01:17:18,835 INFO   , Thread-8, acto.py  :263, [trial: 8, gen: 3] Precondition of ['spec', 'ingress', 'ui', 'tls'] satisfies
2023-04-02 01:17:18,835 INFO   , Thread-8, acto.py  :323, [trial: 8, gen: 3] Running bundled testcases
2023-04-02 01:17:18,835 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 3] Precondition [empty_precondition] Result [True]
2023-04-02 01:17:18,835 INFO   , Thread-8, acto.py  :107, [trial: 8, gen: 3] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"ui": {"host": "ACTOKEY", "tls": []}}}]
2023-04-02 01:17:18,835 DEBUG  , Thread-8, acto.py  :458, [trial: 8, gen: 3] Run and check
2023-04-02 01:17:19,175 INFO   , Thread-8, runner.py:291, [trial: 8, gen: 3] Waiting for system to converge... 
2023-04-02 01:17:48,520 WARNING, Thread-6, schema.py:573, [trial: 9, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:17:48,521 DEBUG  , Thread-6, acto.py  :458, [trial: 9, gen: 0] Run and check
2023-04-02 01:17:51,070 INFO   , Thread-6, runner.py:291, [trial: 9, gen: 0] Waiting for system to converge... 
2023-04-02 01:18:19,306 INFO   , Thread-8, runner.py:360, [trial: 8, gen: 3] System took 00:01:00 to converge
2023-04-02 01:18:19,308 DEBUG  , Thread-8, runner.py:98, [trial: 8, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:18:19,308 DEBUG  , Thread-8, runner.py:99, [trial: 8, gen: 3] STDERR: 
2023-04-02 01:18:19,461 DEBUG  , Thread-8, runner.py:177, [trial: 8, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:14:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"ui":{"host":"ACTOKEY","tls":[]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:13:43Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:16:00Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:17:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:ui': {'.': {}, 'f:host': {}, 'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:17:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1467', 'uid': '99d278ab-b363-4362-802f-4c2761ddb5da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'ui': {'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:16:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:14:47Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:14:48Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:13:44Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:44Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T05:15:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:17:47Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 01:18:19,492 DEBUG  , Thread-8, runner.py:202, [trial: 8, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-r5422
2023-04-02 01:18:19,897 INFO   , Thread-3, runner.py:360, [trial: 8, gen: 1] System took 00:03:35 to converge
2023-04-02 01:18:19,909 DEBUG  , Thread-3, runner.py:98, [trial: 8, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:18:19,919 DEBUG  , Thread-3, runner.py:99, [trial: 8, gen: 1] STDERR: 
2023-04-02 01:18:20,566 INFO   , Thread-8, common.py:560, [trial: 8, gen: 3] Recognized invalid input through regex: failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 01:18:20,568 INFO   , Thread-8, checker.py:134, [trial: 8, gen: 3] Number of system state fields: [3784] Number of delta: [5]
2023-04-02 01:18:20,570 DEBUG  , Thread-8, acto.py  :374, [trial: 8, gen: 3] Invalid input, revert
2023-04-02 01:18:20,570 WARNING, Thread-8, schema.py:573, [trial: 8, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:18:20,570 DEBUG  , Thread-8, acto.py  :458, [trial: 8, gen: 3] Run and check
2023-04-02 01:18:20,631 DEBUG  , Thread-3, runner.py:177, [trial: 8, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:15:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:12:41Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:12:41Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:15:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:15:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1339', 'uid': '33412ccf-fb86-4ece-af09-73daf5a975c0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:15:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:15:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:15:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:14:46Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:18:20,658 DEBUG  , Thread-3, runner.py:202, [trial: 8, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-c9hgn
2023-04-02 01:18:20,987 INFO   , Thread-8, runner.py:291, [trial: 8, gen: 3] Waiting for system to converge... 
2023-04-02 01:18:21,237 DEBUG  , Thread-3, acto.py  :383, [trial: 8, gen: 1] Only one patch, no need to isolate
2023-04-02 01:18:21,238 WARNING, Thread-3, schema.py:573, [trial: 8, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:18:21,238 INFO   , Thread-3, input.py :723, [trial: 8, gen: 3] Progress [4] cases left
2023-04-02 01:18:21,239 DEBUG  , Thread-3, test_case.py:51, [trial: 8, gen: 3] Precondition [delete_precondition] Result [False]
2023-04-02 01:18:21,239 INFO   , Thread-3, acto.py  :267, [trial: 8, gen: 3] Precondition of ["spec", "additionalAnnotations"] fails, try setup first
2023-04-02 01:18:21,239 INFO   , Thread-3, acto.py  :107, [trial: 8, gen: 3] JSON patch: [{"op": "add", "path": "/spec/additionalAnnotations", "value": {"ACTOKEY": "ACTOKEY"}}]
2023-04-02 01:18:21,239 DEBUG  , Thread-3, test_case.py:51, [trial: 8, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-02 01:18:21,240 DEBUG  , Thread-3, acto.py  :458, [trial: 8, gen: 3] Run and check
2023-04-02 01:18:21,593 INFO   , Thread-3, runner.py:291, [trial: 8, gen: 3] Waiting for system to converge... 
2023-04-02 01:18:26,448 INFO   , Thread-2, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:18:26,538 INFO   , Thread-9, runner.py:360, [trial: 7, gen: 0] System took 00:01:11 to converge
2023-04-02 01:18:26,539 DEBUG  , Thread-9, runner.py:98, [trial: 7, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:18:26,539 DEBUG  , Thread-9, runner.py:99, [trial: 7, gen: 0] STDERR: 
2023-04-02 01:18:26,676 DEBUG  , Thread-9, runner.py:177, [trial: 7, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:17:18Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:17:15Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:17:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:17:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1191', 'uid': '6e7703e3-73c0-4359-a7dd-a0a6e24c34bd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:17:29Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:17:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:17:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:17:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:18:26,703 DEBUG  , Thread-9, runner.py:202, [trial: 7, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-xzxmf
2023-04-02 01:18:26,972 WARNING, Thread-9, schema.py:573, [trial: 7, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:18:26,972 INFO   , Thread-9, input.py :723, [trial: 7, gen: 1] Progress [2] cases left
2023-04-02 01:18:26,972 DEBUG  , Thread-9, test_case.py:51, [trial: 7, gen: 1] Precondition [scaleUpDownPrecondition] Result [False]
2023-04-02 01:18:26,972 INFO   , Thread-9, acto.py  :267, [trial: 7, gen: 1] Precondition of ["spec", "nodes"] fails, try setup first
2023-04-02 01:18:26,973 INFO   , Thread-9, acto.py  :107, [trial: 7, gen: 1] JSON patch: [{"op": "replace", "path": "/spec/nodes", "value": 5}]
2023-04-02 01:18:26,973 DEBUG  , Thread-9, test_case.py:51, [trial: 7, gen: 1] Precondition [scaleUpDownPrecondition] Result [True]
2023-04-02 01:18:26,973 DEBUG  , Thread-9, acto.py  :458, [trial: 7, gen: 1] Run and check
2023-04-02 01:18:27,320 INFO   , Thread-9, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 01:18:47,440 INFO   , Thread-11, runner.py:323, [trial: 8, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:18:51,196 INFO   , Thread-6, runner.py:360, [trial: 9, gen: 0] System took 00:01:00 to converge
2023-04-02 01:18:51,198 DEBUG  , Thread-6, runner.py:98, [trial: 9, gen: 0] STDOUT: 
2023-04-02 01:18:51,198 DEBUG  , Thread-6, runner.py:99, [trial: 9, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-05-0009/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.49.37:443: connect: connection refused

2023-04-02 01:18:51,304 DEBUG  , Thread-6, runner.py:177, [trial: 9, gen: 0] {}
2023-04-02 01:18:51,304 ERROR  , Thread-6, runner.py:107, [trial: 9, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 01:18:51,305 INFO   , Thread-6, checker.py:103, [trial: 9, gen: 0] Connection refused, reject mutation
2023-04-02 01:18:51,305 INFO   , Thread-6, acto.py  :472, [trial: 9, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 01:18:56,833 INFO   , Thread-10, runner.py:360, [trial: 6, gen: 3] System took 00:02:44 to converge
2023-04-02 01:18:56,835 DEBUG  , Thread-10, runner.py:98, [trial: 6, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:18:56,835 DEBUG  , Thread-10, runner.py:99, [trial: 6, gen: 3] STDERR: 
2023-04-02 01:18:56,999 DEBUG  , Thread-10, runner.py:177, [trial: 6, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:07:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1073741824.0"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:07:19Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:07:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:16:11Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2367', 'uid': '2c3cde1b-3748-4dbf-bf91-ed0d5776d9fd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1073741824'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:07:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:07:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:07:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:07:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:18:57,026 DEBUG  , Thread-10, runner.py:202, [trial: 6, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-vxrns
2023-04-02 01:18:57,901 DEBUG  , Thread-10, acto.py  :383, [trial: 6, gen: 3] Only one patch, no need to isolate
2023-04-02 01:18:57,902 WARNING, Thread-10, schema.py:573, [trial: 6, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 01:18:57,902 INFO   , Thread-10, input.py :723, [trial: 6, gen: 5] Progress [3] cases left
2023-04-02 01:18:57,902 DEBUG  , Thread-10, test_case.py:51, [trial: 6, gen: 5] Precondition [control_plane_toleration_precondition] Result [True]
2023-04-02 01:18:57,902 INFO   , Thread-10, acto.py  :263, [trial: 6, gen: 5] Precondition of ['spec', 'tolerations', 0] satisfies
2023-04-02 01:18:57,902 INFO   , Thread-10, acto.py  :323, [trial: 6, gen: 5] Running bundled testcases
2023-04-02 01:18:57,902 DEBUG  , Thread-10, test_case.py:51, [trial: 6, gen: 5] Precondition [control_plane_toleration_precondition] Result [True]
2023-04-02 01:18:57,903 INFO   , Thread-10, acto.py  :107, [trial: 6, gen: 5] JSON patch: [{"op": "add", "path": "/spec/tolerations", "value": [{"key": "node-role.kubernetes.io/control-plane", "operator": "Exists", "effect": "NoSchedule"}]}]
2023-04-02 01:18:57,903 DEBUG  , Thread-10, acto.py  :458, [trial: 6, gen: 5] Run and check
2023-04-02 01:18:59,511 INFO   , Thread-4, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:19:00,312 INFO   , Thread-10, runner.py:291, [trial: 6, gen: 5] Waiting for system to converge... 
2023-04-02 01:19:11,755 INFO   , Thread-6, runner.py:291, [trial: 9, gen: 0] Waiting for system to converge... 
2023-04-02 01:19:21,349 INFO   , Thread-8, runner.py:360, [trial: 8, gen: 3] System took 00:01:00 to converge
2023-04-02 01:19:21,350 DEBUG  , Thread-8, runner.py:98, [trial: 8, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:19:21,350 DEBUG  , Thread-8, runner.py:99, [trial: 8, gen: 3] STDERR: 
2023-04-02 01:19:21,524 DEBUG  , Thread-8, runner.py:177, [trial: 8, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:14:48Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:13:43Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:16:00Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:17:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:ui': {'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:18:20Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1521', 'uid': '99d278ab-b363-4362-802f-4c2761ddb5da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:16:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:14:47Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:14:48Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:13:44Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:44Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T05:15:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:17:47Z', 'message': 'failed to reconcile ui-test-cluster: Ingress.extensions "ui-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'version': 'v21.2.10'}}}
2023-04-02 01:19:21,557 DEBUG  , Thread-8, runner.py:202, [trial: 8, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-r5422
2023-04-02 01:19:22,450 DEBUG  , Thread-8, acto.py  :383, [trial: 8, gen: 3] Only one patch, no need to isolate
2023-04-02 01:19:22,451 WARNING, Thread-8, schema.py:573, [trial: 8, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 01:19:22,451 INFO   , Thread-8, input.py :723, [trial: 8, gen: 5] Progress [4] cases left
2023-04-02 01:19:22,451 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 5] Precondition [delete_precondition] Result [False]
2023-04-02 01:19:22,451 INFO   , Thread-8, acto.py  :267, [trial: 8, gen: 5] Precondition of ["spec", "ingress", "sql", "tls", 0] fails, try setup first
2023-04-02 01:19:22,452 INFO   , Thread-8, acto.py  :107, [trial: 8, gen: 5] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": [{"hosts": ["ACTOKEY", "ACTOKEY", "ACTOKEY"], "secretName": "ACTOKEY"}]}}}]
2023-04-02 01:19:22,452 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 5] Precondition [delete_precondition] Result [True]
2023-04-02 01:19:22,452 DEBUG  , Thread-8, acto.py  :458, [trial: 8, gen: 5] Run and check
2023-04-02 01:19:22,794 INFO   , Thread-8, runner.py:291, [trial: 8, gen: 5] Waiting for system to converge... 
2023-04-02 01:19:26,534 INFO   , Thread-2, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:19:34,003 INFO   , Thread-9, runner.py:360, [trial: 7, gen: 1] System took 00:01:06 to converge
2023-04-02 01:19:34,004 DEBUG  , Thread-9, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:19:34,004 DEBUG  , Thread-9, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 01:19:34,242 DEBUG  , Thread-9, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:17:18Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":5,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:17:15Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:17:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:17:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1300', 'uid': '6e7703e3-73c0-4359-a7dd-a0a6e24c34bd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 5, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:17:29Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:17:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:17:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:17:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:19:34,277 DEBUG  , Thread-9, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-xzxmf
2023-04-02 01:19:35,109 INFO   , Thread-9, checker.py:134, [trial: 7, gen: 1] Number of system state fields: [4434] Number of delta: [473]
2023-04-02 01:19:35,110 INFO   , Thread-9, acto.py  :323, [trial: 7, gen: 1] Running bundled testcases
2023-04-02 01:19:35,111 DEBUG  , Thread-9, test_case.py:51, [trial: 7, gen: 1] Precondition [scaleUpDownPrecondition] Result [True]
2023-04-02 01:19:35,111 INFO   , Thread-9, acto.py  :107, [trial: 7, gen: 1] JSON patch: [{"op": "replace", "path": "/spec/nodes", "value": 3}]
2023-04-02 01:19:35,111 DEBUG  , Thread-9, acto.py  :458, [trial: 7, gen: 1] Run and check
2023-04-02 01:19:35,453 INFO   , Thread-9, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 01:20:21,437 INFO   , Thread-4, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:20:22,328 INFO   , Thread-6, runner.py:360, [trial: 9, gen: 0] System took 00:01:10 to converge
2023-04-02 01:20:22,330 DEBUG  , Thread-6, runner.py:98, [trial: 9, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:20:22,330 DEBUG  , Thread-6, runner.py:99, [trial: 9, gen: 0] STDERR: 
2023-04-02 01:20:22,478 DEBUG  , Thread-6, runner.py:177, [trial: 9, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:19:15Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:19:11Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:19:11Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:19:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:19:15Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1181', 'uid': '65300f9f-679c-4c7d-ad89-51122accb508'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:19:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:19:14Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:19:15Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:19:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:20:22,506 DEBUG  , Thread-6, runner.py:202, [trial: 9, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-tw9bd
2023-04-02 01:20:22,750 WARNING, Thread-6, schema.py:573, [trial: 9, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:20:22,751 INFO   , Thread-6, input.py :723, [trial: 9, gen: 1] Progress [3] cases left
2023-04-02 01:20:22,751 DEBUG  , Thread-6, test_case.py:51, [trial: 9, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 01:20:22,751 INFO   , Thread-6, acto.py  :263, [trial: 9, gen: 1] Precondition of ['spec', 'podEnvVariables', 0, 'valueFrom', 'secretKeyRef', 'name'] satisfies
2023-04-02 01:20:22,751 INFO   , Thread-6, acto.py  :323, [trial: 9, gen: 1] Running bundled testcases
2023-04-02 01:20:22,751 DEBUG  , Thread-6, test_case.py:51, [trial: 9, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 01:20:22,751 INFO   , Thread-6, acto.py  :107, [trial: 9, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "valueFrom": {"secretKeyRef": {"key": "ACTOKEY", "name": ""}}}]}]
2023-04-02 01:20:22,752 DEBUG  , Thread-6, acto.py  :458, [trial: 9, gen: 1] Run and check
2023-04-02 01:20:22,951 INFO   , Thread-8, runner.py:360, [trial: 8, gen: 5] System took 00:01:00 to converge
2023-04-02 01:20:22,953 DEBUG  , Thread-8, runner.py:98, [trial: 8, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:20:22,953 DEBUG  , Thread-8, runner.py:99, [trial: 8, gen: 5] STDERR: 
2023-04-02 01:20:23,072 INFO   , Thread-6, runner.py:291, [trial: 9, gen: 1] Waiting for system to converge... 
2023-04-02 01:20:23,138 DEBUG  , Thread-8, runner.py:177, [trial: 8, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:19:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[{"hosts":["ACTOKEY","ACTOKEY","ACTOKEY"],"secretName":"ACTOKEY"}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:13:43Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}, 'f:ui': {'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:19:22Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:19:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:19:23Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1670', 'uid': '99d278ab-b363-4362-802f-4c2761ddb5da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'tls': [{'hosts': ['ACTOKEY', 'ACTOKEY', 'ACTOKEY'], 'secretName': 'ACTOKEY'}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:16:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:14:47Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:14:48Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:13:44Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:44Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T05:15:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:19:53Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 01:20:23,183 DEBUG  , Thread-8, runner.py:202, [trial: 8, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-r5422
2023-04-02 01:20:23,956 INFO   , Thread-8, common.py:560, [trial: 8, gen: 5] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 01:20:23,956 INFO   , Thread-8, checker.py:134, [trial: 8, gen: 5] Number of system state fields: [3789] Number of delta: [10]
2023-04-02 01:20:23,957 INFO   , Thread-8, acto.py  :301, [trial: 8, gen: 5] Setup produced invalid input
2023-04-02 01:20:23,958 WARNING, Thread-8, schema.py:573, [trial: 8, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 01:20:23,958 DEBUG  , Thread-8, acto.py  :458, [trial: 8, gen: 5] Run and check
2023-04-02 01:20:24,287 INFO   , Thread-8, runner.py:291, [trial: 8, gen: 5] Waiting for system to converge... 
2023-04-02 01:20:26,626 INFO   , Thread-2, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:20:35,579 INFO   , Thread-9, runner.py:360, [trial: 7, gen: 1] System took 00:01:00 to converge
2023-04-02 01:20:35,580 DEBUG  , Thread-9, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:20:35,580 DEBUG  , Thread-9, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 01:20:35,817 DEBUG  , Thread-9, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:17:18Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:17:15Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:17:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:17:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1499', 'uid': '6e7703e3-73c0-4359-a7dd-a0a6e24c34bd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:17:29Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:17:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:17:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:17:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:20:35,849 DEBUG  , Thread-9, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-xzxmf
2023-04-02 01:20:36,476 ERROR  , Thread-9, checker.py:301, [trial: 7, gen: 1] Found no matching fields for input delta
2023-04-02 01:20:36,476 ERROR  , Thread-9, checker.py:302, [trial: 7, gen: 1] Input delta [['spec', 'nodes']]
2023-04-02 01:20:36,802 INFO   , Thread-9, checker.py:134, [trial: 7, gen: 1] Number of system state fields: [4434] Number of delta: [1]
2023-04-02 01:20:36,803 INFO   , Thread-9, acto.py  :332, [trial: 7, gen: 1] Error result, running recovery
2023-04-02 01:20:36,804 DEBUG  , Thread-9, acto.py  :489, [trial: 7, gen: 1] Running recovery
2023-04-02 01:20:37,160 INFO   , Thread-9, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 01:20:48,123 INFO   , Thread-3, runner.py:360, [trial: 8, gen: 3] System took 00:02:26 to converge
2023-04-02 01:20:48,124 DEBUG  , Thread-3, runner.py:98, [trial: 8, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:20:48,125 DEBUG  , Thread-3, runner.py:99, [trial: 8, gen: 3] STDERR: 
2023-04-02 01:20:48,292 DEBUG  , Thread-3, runner.py:177, [trial: 8, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:15:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalAnnotations":{"ACTOKEY":"ACTOKEY"},"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:12:41Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:15:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:15:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalAnnotations': {'.': {}, 'f:ACTOKEY': {}}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:18:21Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1628', 'uid': '33412ccf-fb86-4ece-af09-73daf5a975c0'}, 'spec': {'additionalAnnotations': {'ACTOKEY': 'ACTOKEY'}, 'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:15:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:15:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:15:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:14:46Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:20:48,326 DEBUG  , Thread-3, runner.py:202, [trial: 8, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-c9hgn
2023-04-02 01:20:48,970 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-0', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-02 01:20:48,970 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-1', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-02 01:20:48,970 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-2', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-02 01:20:48,970 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'template', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-02 01:20:48,971 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-02 01:20:48,971 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-02 01:20:48,971 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-public', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-02 01:20:48,971 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-02 01:20:49,209 INFO   , Thread-3, checker.py:134, [trial: 8, gen: 3] Number of system state fields: [3792] Number of delta: [236]
2023-04-02 01:20:49,210 INFO   , Thread-3, acto.py  :323, [trial: 8, gen: 3] Running bundled testcases
2023-04-02 01:20:49,211 DEBUG  , Thread-3, test_case.py:51, [trial: 8, gen: 3] Precondition [delete_precondition] Result [True]
2023-04-02 01:20:49,211 INFO   , Thread-3, acto.py  :107, [trial: 8, gen: 3] JSON patch: [{"op": "remove", "path": "/spec/additionalAnnotations/ACTOKEY"}]
2023-04-02 01:20:49,211 DEBUG  , Thread-3, acto.py  :458, [trial: 8, gen: 3] Run and check
2023-04-02 01:20:49,608 INFO   , Thread-3, runner.py:291, [trial: 8, gen: 3] Waiting for system to converge... 
2023-04-02 01:21:21,529 INFO   , Thread-4, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:21:24,415 INFO   , Thread-8, runner.py:360, [trial: 8, gen: 5] System took 00:01:00 to converge
2023-04-02 01:21:24,417 DEBUG  , Thread-8, runner.py:98, [trial: 8, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:21:24,417 DEBUG  , Thread-8, runner.py:99, [trial: 8, gen: 5] STDERR: 
2023-04-02 01:21:24,553 DEBUG  , Thread-8, runner.py:177, [trial: 8, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:19:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:13:43Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:19:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:19:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:ui': {'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:20:24Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1716', 'uid': '99d278ab-b363-4362-802f-4c2761ddb5da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:16:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:14:47Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:14:48Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:13:44Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:44Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T05:15:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:19:53Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 01:21:24,580 DEBUG  , Thread-8, runner.py:202, [trial: 8, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-r5422
2023-04-02 01:21:25,357 INFO   , Thread-8, acto.py  :321, [trial: 8, gen: 5] All setups failed
2023-04-02 01:21:25,358 WARNING, Thread-8, schema.py:573, [trial: 8, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-02 01:21:25,358 INFO   , Thread-8, input.py :723, [trial: 8, gen: 7] Progress [3] cases left
2023-04-02 01:21:25,358 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-02 01:21:25,358 INFO   , Thread-8, acto.py  :263, [trial: 8, gen: 7] Precondition of ['spec', 'ingress', 'sql', 'tls', 0] satisfies
2023-04-02 01:21:25,358 INFO   , Thread-8, acto.py  :323, [trial: 8, gen: 7] Running bundled testcases
2023-04-02 01:21:25,358 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-02 01:21:25,359 INFO   , Thread-8, acto.py  :107, [trial: 8, gen: 7] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY", "tls": [{}]}}}]
2023-04-02 01:21:25,359 DEBUG  , Thread-8, acto.py  :458, [trial: 8, gen: 7] Run and check
2023-04-02 01:21:25,715 INFO   , Thread-8, runner.py:291, [trial: 8, gen: 7] Waiting for system to converge... 
2023-04-02 01:21:26,716 INFO   , Thread-2, runner.py:323, [trial: 7, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:21:34,017 INFO   , Thread-10, runner.py:360, [trial: 6, gen: 5] System took 00:02:33 to converge
2023-04-02 01:21:34,018 DEBUG  , Thread-10, runner.py:98, [trial: 6, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:21:34,018 DEBUG  , Thread-10, runner.py:99, [trial: 6, gen: 5] STDERR: 
2023-04-02 01:21:34,178 DEBUG  , Thread-10, runner.py:177, [trial: 6, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:07:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1073741824.0"}},"tlsEnabled":true,"tolerations":[{"effect":"NoSchedule","key":"node-role.kubernetes.io/control-plane","operator":"Exists"}]}}\n'}, 'creationTimestamp': '2023-04-02T05:07:19Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:07:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}, 'f:tolerations': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:19:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2754', 'uid': '2c3cde1b-3748-4dbf-bf91-ed0d5776d9fd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1073741824'}}, 'sqlPort': 26257, 'tlsEnabled': True, 'tolerations': [{'effect': 'NoSchedule', 'key': 'node-role.kubernetes.io/control-plane', 'operator': 'Exists'}]}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:07:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:07:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:07:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:07:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:21:34,206 DEBUG  , Thread-10, runner.py:202, [trial: 6, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-vxrns
2023-04-02 01:21:35,119 INFO   , Thread-10, common.py:569, [trial: 6, gen: 5] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-02 01:21:35,119 INFO   , Thread-10, checker.py:134, [trial: 6, gen: 5] Number of system state fields: [3478] Number of delta: [96]
2023-04-02 01:21:35,120 DEBUG  , Thread-10, acto.py  :374, [trial: 6, gen: 5] Invalid input, revert
2023-04-02 01:21:35,121 WARNING, Thread-10, schema.py:573, [trial: 6, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 01:21:35,121 DEBUG  , Thread-10, acto.py  :458, [trial: 6, gen: 5] Run and check
2023-04-02 01:21:35,494 INFO   , Thread-10, runner.py:291, [trial: 6, gen: 5] Waiting for system to converge... 
2023-04-02 01:21:41,618 INFO   , Thread-9, runner.py:360, [trial: 7, gen: 1] System took 00:01:04 to converge
2023-04-02 01:21:41,619 DEBUG  , Thread-9, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:21:41,619 DEBUG  , Thread-9, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 01:21:41,765 DEBUG  , Thread-9, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:17:18Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":5,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:17:15Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:17:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:17:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1595', 'uid': '6e7703e3-73c0-4359-a7dd-a0a6e24c34bd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 5, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:17:29Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:17:18Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:17:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:17:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:21:41,792 DEBUG  , Thread-9, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-xzxmf
2023-04-02 01:21:42,589 DEBUG  , Thread-9, checker.py:728, [trial: 7, gen: 1] failed attempt recovering to seed state - system state diff: {'dictionary_item_removed': [root['pod']['test-cluster-4']], 'values_changed': {"root['stateful_set']['test-cluster']['spec']['replicas']": {'new_value': 4, 'old_value': 5}}}
2023-04-02 01:21:42,593 INFO   , Thread-9, acto.py  :187, Trial 7 finished, completed in 00:08:12
2023-04-02 01:21:42,594 INFO   , Thread-9, acto.py  :188, ---------------------------------------

2023-04-02 01:21:42,615 DEBUG  , Thread-9, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-xzxmf
2023-04-02 01:21:49,073 ERROR  , Thread-2, runner.py:363, [trial: 7, gen: 1] System failed to converge within 600 seconds
2023-04-02 01:21:49,075 DEBUG  , Thread-2, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:21:49,075 DEBUG  , Thread-2, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 01:21:49,226 DEBUG  , Thread-2, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:10:27Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"secretKeyRef":{"key":""}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:10:22Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:10:28Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:10:28Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:11:49Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1201', 'uid': '2750d03f-5f3f-4e6d-a402-ab19955bc0a3'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'secretKeyRef': {'key': ''}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:10:38Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:10:27Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:10:28Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:10:33Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:21:49,252 DEBUG  , Thread-2, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-4gllk
2023-04-02 01:21:49,946 INFO   , Thread-2, checker.py:134, [trial: 7, gen: 1] Number of system state fields: [3040] Number of delta: [213]
2023-04-02 01:21:49,946 ERROR  , Thread-2, checker.py:561, [trial: 7, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 01:21:49,947 INFO   , Thread-2, acto.py  :332, [trial: 7, gen: 1] Error result, running recovery
2023-04-02 01:21:49,947 DEBUG  , Thread-2, acto.py  :489, [trial: 7, gen: 1] Running recovery
2023-04-02 01:21:51,912 INFO   , Thread-2, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 01:21:58,562 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-8
2023-04-02 01:22:25,846 INFO   , Thread-8, runner.py:360, [trial: 8, gen: 7] System took 00:01:00 to converge
2023-04-02 01:22:25,847 DEBUG  , Thread-8, runner.py:98, [trial: 8, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:22:25,847 DEBUG  , Thread-8, runner.py:99, [trial: 8, gen: 7] STDERR: 
2023-04-02 01:22:25,989 DEBUG  , Thread-8, runner.py:177, [trial: 8, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:19:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY","tls":[{}]}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:13:43Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:21:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}, 'f:tls': {}}, 'f:ui': {'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:21:25Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1900', 'uid': '99d278ab-b363-4362-802f-4c2761ddb5da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY', 'tls': [{}]}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:16:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:14:47Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:14:48Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:13:44Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:44Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T05:15:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:22:21Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 01:22:26,015 DEBUG  , Thread-8, runner.py:202, [trial: 8, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-r5422
2023-04-02 01:22:26,621 ERROR  , Thread-8, checker.py:301, [trial: 8, gen: 7] Found no matching fields for input delta
2023-04-02 01:22:26,621 ERROR  , Thread-8, checker.py:302, [trial: 8, gen: 7] Input delta [['spec', 'ingress', 'sql', 'host']]
2023-04-02 01:22:26,834 INFO   , Thread-8, common.py:560, [trial: 8, gen: 7] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 01:22:26,834 INFO   , Thread-8, checker.py:134, [trial: 8, gen: 7] Number of system state fields: [3470] Number of delta: [2]
2023-04-02 01:22:26,835 DEBUG  , Thread-8, acto.py  :374, [trial: 8, gen: 7] Invalid input, revert
2023-04-02 01:22:26,835 WARNING, Thread-8, schema.py:573, [trial: 8, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-02 01:22:26,836 DEBUG  , Thread-8, acto.py  :458, [trial: 8, gen: 7] Run and check
2023-04-02 01:22:27,183 INFO   , Thread-8, runner.py:291, [trial: 8, gen: 7] Waiting for system to converge... 
2023-04-02 01:22:50,333 INFO   , Thread-3, runner.py:360, [trial: 8, gen: 3] System took 00:02:00 to converge
2023-04-02 01:22:50,334 DEBUG  , Thread-3, runner.py:98, [trial: 8, gen: 3] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:22:50,334 DEBUG  , Thread-3, runner.py:99, [trial: 8, gen: 3] STDERR: 
2023-04-02 01:22:50,487 DEBUG  , Thread-3, runner.py:177, [trial: 8, gen: 3] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:15:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalAnnotations":{},"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:12:41Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:15:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalAnnotations': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:20:49Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2041', 'uid': '33412ccf-fb86-4ece-af09-73daf5a975c0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:15:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:15:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:15:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:14:46Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:22:50,520 DEBUG  , Thread-3, runner.py:202, [trial: 8, gen: 3] Got operator pod: pod name:cockroach-operator-manager-64c489884-c9hgn
2023-04-02 01:22:51,179 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-1', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-02 01:22:51,179 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster-2', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-02 01:22:51,179 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 3] Input delta [['spec', 'additionalAnnotations', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'template', 'metadata', 'annotations', 'ACTOKEY']]
2023-04-02 01:22:51,446 INFO   , Thread-3, checker.py:134, [trial: 8, gen: 3] Number of system state fields: [3466] Number of delta: [226]
2023-04-02 01:22:51,447 WARNING, Thread-3, schema.py:573, [trial: 8, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 01:22:51,448 INFO   , Thread-3, input.py :723, [trial: 8, gen: 5] Progress [3] cases left
2023-04-02 01:22:51,448 DEBUG  , Thread-3, test_case.py:51, [trial: 8, gen: 5] Precondition [empty_precondition] Result [False]
2023-04-02 01:22:51,448 INFO   , Thread-3, acto.py  :267, [trial: 8, gen: 5] Precondition of ["spec", "additionalAnnotations"] fails, try setup first
2023-04-02 01:22:51,448 INFO   , Thread-3, acto.py  :107, [trial: 8, gen: 5] JSON patch: []
2023-04-02 01:22:51,448 DEBUG  , Thread-3, test_case.py:51, [trial: 8, gen: 5] Precondition [empty_precondition] Result [False]
2023-04-02 01:22:51,448 ERROR  , Thread-3, acto.py  :277, [trial: 8, gen: 5] Setup does not work correctly
2023-04-02 01:22:51,448 INFO   , Thread-3, acto.py  :321, [trial: 8, gen: 5] All setups failed
2023-04-02 01:22:51,448 WARNING, Thread-3, schema.py:573, [trial: 8, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 01:22:51,449 INFO   , Thread-3, input.py :723, [trial: 8, gen: 5] Progress [2] cases left
2023-04-02 01:22:51,449 DEBUG  , Thread-3, test_case.py:51, [trial: 8, gen: 5] Precondition [delete_precondition] Result [True]
2023-04-02 01:22:51,449 INFO   , Thread-3, acto.py  :263, [trial: 8, gen: 5] Precondition of ['spec', 'additionalLabels'] satisfies
2023-04-02 01:22:51,449 INFO   , Thread-3, acto.py  :323, [trial: 8, gen: 5] Running bundled testcases
2023-04-02 01:22:51,449 DEBUG  , Thread-3, test_case.py:51, [trial: 8, gen: 5] Precondition [delete_precondition] Result [True]
2023-04-02 01:22:51,449 INFO   , Thread-3, acto.py  :107, [trial: 8, gen: 5] JSON patch: [{"op": "remove", "path": "/spec/additionalLabels/crdb"}]
2023-04-02 01:22:51,449 DEBUG  , Thread-3, acto.py  :458, [trial: 8, gen: 5] Run and check
2023-04-02 01:22:52,462 INFO   , Thread-9, base.py  :41, Created cluster
2023-04-02 01:22:52,476 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:22:53,502 INFO   , Thread-6, runner.py:323, [trial: 9, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:22:53,528 INFO   , Thread-3, runner.py:291, [trial: 8, gen: 5] Waiting for system to converge... 
2023-04-02 01:22:54,335 INFO   , Thread-2, runner.py:360, [trial: 7, gen: 1] System took 00:01:02 to converge
2023-04-02 01:22:54,337 DEBUG  , Thread-2, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:22:54,337 DEBUG  , Thread-2, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 01:22:54,479 DEBUG  , Thread-2, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:10:27Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:10:22Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:10:28Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:21:51Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2145', 'uid': '2750d03f-5f3f-4e6d-a402-ab19955bc0a3'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:10:38Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:10:27Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:10:28Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:10:33Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:22:54,614 DEBUG  , Thread-2, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-4gllk
2023-04-02 01:22:55,309 INFO   , Thread-2, acto.py  :187, Trial 7 finished, completed in 00:14:55
2023-04-02 01:22:55,309 INFO   , Thread-2, acto.py  :188, ---------------------------------------

2023-04-02 01:22:55,327 DEBUG  , Thread-2, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-4gllk
2023-04-02 01:23:05,304 INFO   , Thread-4, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:23:09,898 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:23:11,434 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-1
2023-04-02 01:23:19,984 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-02 01:23:19,985 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:23:22,004 DEBUG  , Thread-9, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:23:27,318 INFO   , Thread-8, runner.py:360, [trial: 8, gen: 7] System took 00:01:00 to converge
2023-04-02 01:23:27,319 DEBUG  , Thread-8, runner.py:98, [trial: 8, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:23:27,320 DEBUG  , Thread-8, runner.py:99, [trial: 8, gen: 7] STDERR: 
2023-04-02 01:23:27,454 DEBUG  , Thread-8, runner.py:177, [trial: 8, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:19:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:13:43Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:21:25Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:ui': {'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:22:27Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1911', 'uid': '99d278ab-b363-4362-802f-4c2761ddb5da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:16:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:14:47Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:14:48Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:13:44Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:44Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T05:15:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:22:21Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 01:23:27,480 DEBUG  , Thread-8, runner.py:202, [trial: 8, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-r5422
2023-04-02 01:23:28,277 DEBUG  , Thread-8, acto.py  :383, [trial: 8, gen: 7] Only one patch, no need to isolate
2023-04-02 01:23:28,278 WARNING, Thread-8, schema.py:573, [trial: 8, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-02 01:23:28,278 INFO   , Thread-8, input.py :723, [trial: 8, gen: 9] Progress [2] cases left
2023-04-02 01:23:28,278 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 9] Precondition [delete_precondition] Result [False]
2023-04-02 01:23:28,278 INFO   , Thread-8, acto.py  :267, [trial: 8, gen: 9] Precondition of ["spec", "ingress", "sql", "host"] fails, try setup first
2023-04-02 01:23:28,279 INFO   , Thread-8, acto.py  :107, [trial: 8, gen: 9] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY"}}}]
2023-04-02 01:23:28,279 DEBUG  , Thread-8, test_case.py:51, [trial: 8, gen: 9] Precondition [delete_precondition] Result [True]
2023-04-02 01:23:28,279 DEBUG  , Thread-8, acto.py  :458, [trial: 8, gen: 9] Run and check
2023-04-02 01:23:28,607 INFO   , Thread-8, runner.py:291, [trial: 8, gen: 9] Waiting for system to converge... 
2023-04-02 01:23:32,090 INFO   , Thread-9, deploy.py:91, Operator ready
2023-04-02 01:23:32,090 INFO   , Thread-9, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:23:52,480 INFO   , Thread-10, runner.py:360, [trial: 6, gen: 5] System took 00:02:16 to converge
2023-04-02 01:23:52,485 DEBUG  , Thread-10, runner.py:98, [trial: 6, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:23:52,485 DEBUG  , Thread-10, runner.py:99, [trial: 6, gen: 5] STDERR: 
2023-04-02 01:23:52,626 DEBUG  , Thread-10, runner.py:177, [trial: 6, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:07:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1073741824.0"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:07:19Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:07:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:21:35Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3161', 'uid': '2c3cde1b-3748-4dbf-bf91-ed0d5776d9fd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1073741824'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:07:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:07:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:07:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:07:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:23:52,652 DEBUG  , Thread-10, runner.py:202, [trial: 6, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-vxrns
2023-04-02 01:23:53,627 DEBUG  , Thread-10, acto.py  :383, [trial: 6, gen: 5] Only one patch, no need to isolate
2023-04-02 01:23:53,627 WARNING, Thread-10, schema.py:573, [trial: 6, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-02 01:23:53,628 INFO   , Thread-10, input.py :723, [trial: 6, gen: 7] Progress [2] cases left
2023-04-02 01:23:53,628 DEBUG  , Thread-10, test_case.py:51, [trial: 6, gen: 7] Precondition [increase_precondition] Result [True]
2023-04-02 01:23:53,628 INFO   , Thread-10, acto.py  :263, [trial: 6, gen: 7] Precondition of ['spec', 'dataStore', 'pvc', 'spec', 'resources', 'requests', 'storage'] satisfies
2023-04-02 01:23:53,628 INFO   , Thread-10, acto.py  :323, [trial: 6, gen: 7] Running bundled testcases
2023-04-02 01:23:53,629 DEBUG  , Thread-10, test_case.py:51, [trial: 6, gen: 7] Precondition [increase_precondition] Result [True]
2023-04-02 01:23:53,629 INFO   , Thread-10, acto.py  :107, [trial: 6, gen: 7] JSON patch: [{"op": "replace", "path": "/spec/dataStore/pvc/spec/resources/requests/storage", "value": "2Gi"}]
2023-04-02 01:23:53,629 DEBUG  , Thread-10, acto.py  :458, [trial: 6, gen: 7] Run and check
2023-04-02 01:23:53,670 INFO   , Thread-3, runner.py:360, [trial: 8, gen: 5] System took 00:01:00 to converge
2023-04-02 01:23:53,671 DEBUG  , Thread-3, runner.py:98, [trial: 8, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:23:53,671 DEBUG  , Thread-3, runner.py:99, [trial: 8, gen: 5] STDERR: 
2023-04-02 01:23:53,802 DEBUG  , Thread-3, runner.py:177, [trial: 8, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:15:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalAnnotations":{},"additionalLabels":{},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:12:41Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:15:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:22:53Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalAnnotations': {}, 'f:additionalLabels': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:22:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2459', 'uid': '33412ccf-fb86-4ece-af09-73daf5a975c0'}, 'spec': {'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:15:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:15:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:15:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:14:46Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:23:50Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 01:23:53,829 DEBUG  , Thread-3, runner.py:202, [trial: 8, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-c9hgn
2023-04-02 01:23:53,992 INFO   , Thread-10, runner.py:291, [trial: 6, gen: 7] Waiting for system to converge... 
2023-04-02 01:23:54,495 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 5] Input delta [['spec', 'additionalLabels', 'crdb']] matched with [['test-cluster', 'spec', 'selector', 'crdb']]
2023-04-02 01:23:54,496 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 5] Input delta [['spec', 'additionalLabels', 'crdb']] matched with [['test-cluster-public', 'spec', 'selector', 'crdb']]
2023-04-02 01:23:54,737 INFO   , Thread-3, common.py:560, [trial: 8, gen: 5] Recognized invalid input through regex: failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than 'replicas', 'template', 'updateStrategy' and 'minReadySeconds' are forbidden
2023-04-02 01:23:54,738 INFO   , Thread-3, checker.py:134, [trial: 8, gen: 5] Number of system state fields: [3467] Number of delta: [9]
2023-04-02 01:23:54,741 DEBUG  , Thread-3, acto.py  :374, [trial: 8, gen: 5] Invalid input, revert
2023-04-02 01:23:54,742 WARNING, Thread-3, schema.py:573, [trial: 8, gen: 5] Field [name] does not have a schema, using opaque schema
2023-04-02 01:23:54,743 DEBUG  , Thread-3, acto.py  :458, [trial: 8, gen: 5] Run and check
2023-04-02 01:23:55,089 INFO   , Thread-3, runner.py:291, [trial: 8, gen: 5] Waiting for system to converge... 
2023-04-02 01:23:57,426 INFO   , Thread-2, base.py  :41, Created cluster
2023-04-02 01:23:57,442 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:24:05,395 INFO   , Thread-4, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:24:12,230 WARNING, Thread-9, schema.py:573, [trial: 8, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:24:12,231 DEBUG  , Thread-9, acto.py  :458, [trial: 8, gen: 0] Run and check
2023-04-02 01:24:14,898 INFO   , Thread-9, runner.py:291, [trial: 8, gen: 0] Waiting for system to converge... 
2023-04-02 01:24:14,912 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:24:15,431 INFO   , Thread-6, runner.py:323, [trial: 9, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:24:15,858 ERROR  , Thread-11, runner.py:363, [trial: 8, gen: 1] System failed to converge within 600 seconds
2023-04-02 01:24:15,861 DEBUG  , Thread-11, runner.py:98, [trial: 8, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:24:15,862 DEBUG  , Thread-11, runner.py:99, [trial: 8, gen: 1] STDERR: 
2023-04-02 01:24:16,013 DEBUG  , Thread-11, runner.py:177, [trial: 8, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:13:06Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.io/hostname","operator":"In","values":["kind-worker","kind-worker2","kind-worker3kind-control-plane"]}]}]}}},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:13:03Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:13:07Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:13:07Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:affinity': {'.': {}, 'f:nodeAffinity': {'.': {}, 'f:requiredDuringSchedulingIgnoredDuringExecution': {'.': {}, 'f:nodeSelectorTerms': {}}}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:14:15Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1303', 'uid': 'f3844567-7d26-49f5-9c7f-07029c1f6da5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'affinity': {'nodeAffinity': {'requiredDuringSchedulingIgnoredDuringExecution': {'nodeSelectorTerms': [{'matchExpressions': [{'key': 'kubernetes.io/hostname', 'operator': 'In', 'values': ['kind-worker', 'kind-worker2', 'kind-worker3kind-control-plane']}]}]}}}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:13:17Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:13:06Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:13:07Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:13:05Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:13:12Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:24:16,040 DEBUG  , Thread-11, runner.py:202, [trial: 8, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-c6ljk
2023-04-02 01:24:16,884 INFO   , Thread-11, common.py:569, [trial: 8, gen: 1] Recognized invalid input through field [operator] in error message: cockroach-operator-system/test-cluster
2023-04-02 01:24:16,884 INFO   , Thread-11, checker.py:134, [trial: 8, gen: 1] Number of system state fields: [3419] Number of delta: [103]
2023-04-02 01:24:16,884 ERROR  , Thread-11, checker.py:561, [trial: 8, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 01:24:16,884 ERROR  , Thread-11, checker.py:561, [trial: 8, gen: 1] Found pod: test-cluster-2 with unhealthy status
2023-04-02 01:24:16,885 DEBUG  , Thread-11, acto.py  :489, [trial: 8, gen: 1] Running recovery
2023-04-02 01:24:18,943 INFO   , Thread-11, runner.py:291, [trial: 8, gen: 1] Waiting for system to converge... 
2023-04-02 01:24:25,006 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-02 01:24:25,006 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:24:27,113 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:24:28,732 INFO   , Thread-8, runner.py:360, [trial: 8, gen: 9] System took 00:01:00 to converge
2023-04-02 01:24:28,733 DEBUG  , Thread-8, runner.py:98, [trial: 8, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:24:28,734 DEBUG  , Thread-8, runner.py:99, [trial: 8, gen: 9] STDERR: 
2023-04-02 01:24:28,891 DEBUG  , Thread-8, runner.py:177, [trial: 8, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:19:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:13:43Z', 'generation': 10, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:23:28Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}}, 'f:ui': {'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:23:28Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2095', 'uid': '99d278ab-b363-4362-802f-4c2761ddb5da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:16:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:14:47Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:14:48Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:13:44Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:44Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T05:15:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:24:24Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 01:24:28,922 DEBUG  , Thread-8, runner.py:202, [trial: 8, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-r5422
2023-04-02 01:24:29,548 ERROR  , Thread-8, checker.py:301, [trial: 8, gen: 9] Found no matching fields for input delta
2023-04-02 01:24:29,548 ERROR  , Thread-8, checker.py:302, [trial: 8, gen: 9] Input delta [['spec', 'ingress', 'sql', 'host']]
2023-04-02 01:24:29,770 INFO   , Thread-8, common.py:560, [trial: 8, gen: 9] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 01:24:29,770 INFO   , Thread-8, checker.py:134, [trial: 8, gen: 9] Number of system state fields: [3470] Number of delta: [2]
2023-04-02 01:24:29,771 INFO   , Thread-8, acto.py  :301, [trial: 8, gen: 9] Setup produced invalid input
2023-04-02 01:24:29,772 WARNING, Thread-8, schema.py:573, [trial: 8, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-02 01:24:29,772 DEBUG  , Thread-8, acto.py  :458, [trial: 8, gen: 9] Run and check
2023-04-02 01:24:31,734 INFO   , Thread-8, runner.py:291, [trial: 8, gen: 9] Waiting for system to converge... 
2023-04-02 01:24:37,204 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-02 01:24:37,204 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:24:54,834 INFO   , Thread-10, runner.py:360, [trial: 6, gen: 7] System took 00:01:00 to converge
2023-04-02 01:24:54,836 DEBUG  , Thread-10, runner.py:98, [trial: 6, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:24:54,836 DEBUG  , Thread-10, runner.py:99, [trial: 6, gen: 7] STDERR: 
2023-04-02 01:24:54,968 DEBUG  , Thread-10, runner.py:177, [trial: 6, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:07:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"2Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1073741824.0"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:07:19Z', 'generation': 8, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:07:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:21:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:23:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3591', 'uid': '2c3cde1b-3748-4dbf-bf91-ed0d5776d9fd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '2Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1073741824'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:07:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:07:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:07:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:07:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:24:22Z', 'message': 'updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: persistentvolumeclaims "datadir-test-cluster-0" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize', 'status': 'Failed', 'type': 'ResizePVC'}], 'version': 'v21.2.10'}}}
2023-04-02 01:24:54,997 DEBUG  , Thread-10, runner.py:202, [trial: 6, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-vxrns
2023-04-02 01:24:55,682 ERROR  , Thread-10, checker.py:301, [trial: 6, gen: 7] Found no matching fields for input delta
2023-04-02 01:24:55,682 ERROR  , Thread-10, checker.py:302, [trial: 6, gen: 7] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'resources', 'requests', 'storage']]
2023-04-02 01:24:55,789 INFO   , Thread-3, runner.py:360, [trial: 8, gen: 5] System took 00:01:00 to converge
2023-04-02 01:24:55,800 DEBUG  , Thread-3, runner.py:98, [trial: 8, gen: 5] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:24:55,805 DEBUG  , Thread-3, runner.py:99, [trial: 8, gen: 5] STDERR: 
2023-04-02 01:24:55,978 INFO   , Thread-10, common.py:569, [trial: 6, gen: 7] Recognized invalid input through field [storage] in error message: updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: persistentvolumeclaims "datadir-test-cluster-0" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize
2023-04-02 01:24:55,978 INFO   , Thread-10, checker.py:134, [trial: 6, gen: 7] Number of system state fields: [3460] Number of delta: [5]
2023-04-02 01:24:55,984 DEBUG  , Thread-10, acto.py  :374, [trial: 6, gen: 7] Invalid input, revert
2023-04-02 01:24:55,990 WARNING, Thread-10, schema.py:573, [trial: 6, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-02 01:24:56,003 DEBUG  , Thread-10, acto.py  :458, [trial: 6, gen: 7] Run and check
2023-04-02 01:24:56,126 DEBUG  , Thread-3, runner.py:177, [trial: 8, gen: 5] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:15:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalAnnotations":{},"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:12:41Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:15:20Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:22:53Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalAnnotations': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:23:55Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2470', 'uid': '33412ccf-fb86-4ece-af09-73daf5a975c0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:15:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:15:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:15:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:14:46Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:23:50Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 01:24:56,158 DEBUG  , Thread-3, runner.py:202, [trial: 8, gen: 5] Got operator pod: pod name:cockroach-operator-manager-64c489884-c9hgn
2023-04-02 01:24:56,395 INFO   , Thread-10, runner.py:291, [trial: 6, gen: 7] Waiting for system to converge... 
2023-04-02 01:24:57,047 DEBUG  , Thread-3, acto.py  :383, [trial: 8, gen: 5] Only one patch, no need to isolate
2023-04-02 01:24:57,048 WARNING, Thread-3, schema.py:573, [trial: 8, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-02 01:24:57,049 INFO   , Thread-3, input.py :723, [trial: 8, gen: 7] Progress [1] cases left
2023-04-02 01:24:57,049 DEBUG  , Thread-3, test_case.py:51, [trial: 8, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-02 01:24:57,049 INFO   , Thread-3, acto.py  :263, [trial: 8, gen: 7] Precondition of ['spec', 'additionalLabels'] satisfies
2023-04-02 01:24:57,049 INFO   , Thread-3, acto.py  :323, [trial: 8, gen: 7] Running bundled testcases
2023-04-02 01:24:57,049 DEBUG  , Thread-3, test_case.py:51, [trial: 8, gen: 7] Precondition [empty_precondition] Result [True]
2023-04-02 01:24:57,050 INFO   , Thread-3, acto.py  :107, [trial: 8, gen: 7] JSON patch: [{"op": "remove", "path": "/spec/additionalLabels/crdb"}]
2023-04-02 01:24:57,050 DEBUG  , Thread-3, acto.py  :458, [trial: 8, gen: 7] Run and check
2023-04-02 01:24:57,387 INFO   , Thread-3, runner.py:291, [trial: 8, gen: 7] Waiting for system to converge... 
2023-04-02 01:25:05,492 INFO   , Thread-4, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:25:15,039 INFO   , Thread-9, runner.py:360, [trial: 8, gen: 0] System took 00:01:00 to converge
2023-04-02 01:25:15,039 DEBUG  , Thread-9, runner.py:98, [trial: 8, gen: 0] STDOUT: 
2023-04-02 01:25:15,040 DEBUG  , Thread-9, runner.py:99, [trial: 8, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-08-0008/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.151.58:443: connect: connection refused

2023-04-02 01:25:15,131 DEBUG  , Thread-9, runner.py:177, [trial: 8, gen: 0] {}
2023-04-02 01:25:15,131 ERROR  , Thread-9, runner.py:107, [trial: 8, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 01:25:15,132 INFO   , Thread-9, checker.py:103, [trial: 8, gen: 0] Connection refused, reject mutation
2023-04-02 01:25:15,132 INFO   , Thread-9, acto.py  :472, [trial: 8, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 01:25:15,515 INFO   , Thread-6, runner.py:323, [trial: 9, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:25:17,334 WARNING, Thread-2, schema.py:573, [trial: 8, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:25:17,335 DEBUG  , Thread-2, acto.py  :458, [trial: 8, gen: 0] Run and check
2023-04-02 01:25:20,025 INFO   , Thread-2, runner.py:291, [trial: 8, gen: 0] Waiting for system to converge... 
2023-04-02 01:25:20,448 INFO   , Thread-11, runner.py:360, [trial: 8, gen: 1] System took 00:01:01 to converge
2023-04-02 01:25:20,450 DEBUG  , Thread-11, runner.py:98, [trial: 8, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:25:20,451 DEBUG  , Thread-11, runner.py:99, [trial: 8, gen: 1] STDERR: 
2023-04-02 01:25:20,591 DEBUG  , Thread-11, runner.py:177, [trial: 8, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:13:06Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:13:03Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:13:07Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:24:18Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2244', 'uid': 'f3844567-7d26-49f5-9c7f-07029c1f6da5'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:13:17Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:13:06Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:13:07Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:13:05Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:13:12Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:25:20,620 DEBUG  , Thread-11, runner.py:202, [trial: 8, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-c6ljk
2023-04-02 01:25:21,359 INFO   , Thread-11, acto.py  :187, Trial 8 finished, completed in 00:16:01
2023-04-02 01:25:21,359 INFO   , Thread-11, acto.py  :188, ---------------------------------------

2023-04-02 01:25:21,374 DEBUG  , Thread-11, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-c6ljk
2023-04-02 01:25:31,854 INFO   , Thread-8, runner.py:360, [trial: 8, gen: 9] System took 00:01:00 to converge
2023-04-02 01:25:31,855 DEBUG  , Thread-8, runner.py:98, [trial: 8, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:25:31,855 DEBUG  , Thread-8, runner.py:99, [trial: 8, gen: 9] STDERR: 
2023-04-02 01:25:31,998 DEBUG  , Thread-8, runner.py:177, [trial: 8, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:19:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:13:43Z', 'generation': 11, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:23:28Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'f:ui': {'f:tls': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:24:31Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2107', 'uid': '99d278ab-b363-4362-802f-4c2761ddb5da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:16:00Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:14:47Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:14:48Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:13:44Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:44Z', 'message': 'failed to reconcile test-cluster: Service "test-cluster" is invalid: [spec.ports[0].port: Invalid value: 0: must be between 1 and 65535, inclusive, spec.ports[0].targetPort: Invalid value: 0: must be between 1 and 65535, inclusive]', 'status': 'Failed', 'type': 'Deploy'}, {'lastTransitionTime': '2023-04-02T05:15:54Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:24:24Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 01:25:32,036 DEBUG  , Thread-8, runner.py:202, [trial: 8, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-r5422
2023-04-02 01:25:32,894 INFO   , Thread-8, acto.py  :321, [trial: 8, gen: 9] All setups failed
2023-04-02 01:25:32,899 INFO   , Thread-8, acto.py  :187, Trial 8 finished, completed in 00:14:04
2023-04-02 01:25:32,899 INFO   , Thread-8, acto.py  :188, ---------------------------------------

2023-04-02 01:25:32,927 DEBUG  , Thread-8, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-r5422
2023-04-02 01:25:35,531 INFO   , Thread-9, runner.py:291, [trial: 8, gen: 0] Waiting for system to converge... 
2023-04-02 01:25:38,028 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-10
2023-04-02 01:25:42,959 INFO   , Thread-8, common.py:629, Trial testrun-crdb-whitebox/trial-07-0008 completed without error
2023-04-02 01:25:48,521 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-7
2023-04-02 01:25:57,168 INFO   , Thread-10, runner.py:360, [trial: 6, gen: 7] System took 00:01:00 to converge
2023-04-02 01:25:57,170 DEBUG  , Thread-10, runner.py:98, [trial: 6, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:25:57,171 DEBUG  , Thread-10, runner.py:99, [trial: 6, gen: 7] STDERR: 
2023-04-02 01:25:57,316 DEBUG  , Thread-10, runner.py:177, [trial: 6, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:07:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1073741824.0"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:07:19Z', 'generation': 9, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:07:23Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:21:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:23:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3644', 'uid': '2c3cde1b-3748-4dbf-bf91-ed0d5776d9fd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1073741824'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:07:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:07:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:07:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:07:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:24:22Z', 'message': 'updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: persistentvolumeclaims "datadir-test-cluster-0" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize', 'status': 'Failed', 'type': 'ResizePVC'}], 'version': 'v21.2.10'}}}
2023-04-02 01:25:57,347 DEBUG  , Thread-10, runner.py:202, [trial: 6, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-vxrns
2023-04-02 01:25:57,870 INFO   , Thread-3, runner.py:360, [trial: 8, gen: 7] System took 00:01:00 to converge
2023-04-02 01:25:57,886 DEBUG  , Thread-3, runner.py:98, [trial: 8, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:25:57,892 DEBUG  , Thread-3, runner.py:99, [trial: 8, gen: 7] STDERR: 
2023-04-02 01:25:58,503 DEBUG  , Thread-10, acto.py  :383, [trial: 6, gen: 7] Only one patch, no need to isolate
2023-04-02 01:25:58,503 WARNING, Thread-10, schema.py:573, [trial: 6, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-02 01:25:58,504 INFO   , Thread-10, input.py :723, [trial: 6, gen: 9] Progress [1] cases left
2023-04-02 01:25:58,504 DEBUG  , Thread-10, test_case.py:51, [trial: 6, gen: 9] Precondition [decrease_precondition] Result [True]
2023-04-02 01:25:58,504 INFO   , Thread-10, acto.py  :263, [trial: 6, gen: 9] Precondition of ['spec', 'dataStore', 'pvc', 'spec', 'resources', 'requests', 'storage'] satisfies
2023-04-02 01:25:58,504 INFO   , Thread-10, acto.py  :323, [trial: 6, gen: 9] Running bundled testcases
2023-04-02 01:25:58,505 DEBUG  , Thread-10, test_case.py:51, [trial: 6, gen: 9] Precondition [decrease_precondition] Result [True]
2023-04-02 01:25:58,505 INFO   , Thread-10, acto.py  :107, [trial: 6, gen: 9] JSON patch: [{"op": "replace", "path": "/spec/dataStore/pvc/spec/resources/requests/storage", "value": "536870912.0"}]
2023-04-02 01:25:58,505 DEBUG  , Thread-10, acto.py  :458, [trial: 6, gen: 9] Run and check
2023-04-02 01:25:58,526 DEBUG  , Thread-3, runner.py:177, [trial: 8, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:15:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalAnnotations":{},"additionalLabels":{},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:12:41Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:24:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalAnnotations': {}, 'f:additionalLabels': {}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:24:57Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2658', 'uid': '33412ccf-fb86-4ece-af09-73daf5a975c0'}, 'spec': {'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:15:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:15:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:15:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:14:46Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:25:54Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 01:25:58,555 DEBUG  , Thread-3, runner.py:202, [trial: 8, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-c9hgn
2023-04-02 01:25:58,860 INFO   , Thread-10, runner.py:291, [trial: 6, gen: 9] Waiting for system to converge... 
2023-04-02 01:25:59,249 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 7] Input delta [['spec', 'additionalLabels', 'crdb']] matched with [['test-cluster', 'spec', 'selector', 'crdb']]
2023-04-02 01:25:59,250 DEBUG  , Thread-3, checker.py:278, [trial: 8, gen: 7] Input delta [['spec', 'additionalLabels', 'crdb']] matched with [['test-cluster-public', 'spec', 'selector', 'crdb']]
2023-04-02 01:25:59,510 INFO   , Thread-3, common.py:560, [trial: 8, gen: 7] Recognized invalid input through regex: failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than 'replicas', 'template', 'updateStrategy' and 'minReadySeconds' are forbidden
2023-04-02 01:25:59,510 INFO   , Thread-3, checker.py:134, [trial: 8, gen: 7] Number of system state fields: [3467] Number of delta: [6]
2023-04-02 01:25:59,513 DEBUG  , Thread-3, acto.py  :374, [trial: 8, gen: 7] Invalid input, revert
2023-04-02 01:25:59,514 WARNING, Thread-3, schema.py:573, [trial: 8, gen: 7] Field [name] does not have a schema, using opaque schema
2023-04-02 01:25:59,514 DEBUG  , Thread-3, acto.py  :458, [trial: 8, gen: 7] Run and check
2023-04-02 01:25:59,904 INFO   , Thread-3, runner.py:291, [trial: 8, gen: 7] Waiting for system to converge... 
2023-04-02 01:26:05,586 INFO   , Thread-4, runner.py:323, [trial: 6, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:26:20,140 INFO   , Thread-2, runner.py:360, [trial: 8, gen: 0] System took 00:01:00 to converge
2023-04-02 01:26:20,141 DEBUG  , Thread-2, runner.py:98, [trial: 8, gen: 0] STDOUT: 
2023-04-02 01:26:20,142 DEBUG  , Thread-2, runner.py:99, [trial: 8, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-01-0008/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.73.85:443: connect: connection refused

2023-04-02 01:26:20,231 DEBUG  , Thread-2, runner.py:177, [trial: 8, gen: 0] {}
2023-04-02 01:26:20,231 ERROR  , Thread-2, runner.py:107, [trial: 8, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 01:26:20,232 INFO   , Thread-2, checker.py:103, [trial: 8, gen: 0] Connection refused, reject mutation
2023-04-02 01:26:20,232 INFO   , Thread-2, acto.py  :472, [trial: 8, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 01:26:23,731 INFO   , Thread-11, base.py  :41, Created cluster
2023-04-02 01:26:23,745 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:26:29,330 ERROR  , Thread-4, runner.py:363, [trial: 6, gen: 1] System failed to converge within 600 seconds
2023-04-02 01:26:29,332 DEBUG  , Thread-4, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:26:29,332 DEBUG  , Thread-4, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 01:26:29,458 DEBUG  , Thread-4, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:15:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","value":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":null,"optional":true},"fieldRef":null,"resourceFieldRef":{"containerName":"ACTOKEY","divisor":5,"resource":"ACTOKEY"},"secretKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":false}}},{"name":"ACTOKEY","value":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":false},"fieldRef":{"apiVersion":"ACTOKEY","fieldPath":"ACTOKEY"},"resourceFieldRef":{"containerName":"ACTOKEY","divisor":1,"resource":"ACTOKEY"},"secretKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":true}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:15:05Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:15:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:15:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:16:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1201', 'uid': 'a18f3edc-1deb-4048-9cb9-b2da05cf533d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'value': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'optional': True}, 'resourceFieldRef': {'containerName': 'ACTOKEY', 'divisor': '5', 'resource': 'ACTOKEY'}, 'secretKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': False}}}, {'name': 'ACTOKEY', 'value': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': False}, 'fieldRef': {'apiVersion': 'ACTOKEY', 'fieldPath': 'ACTOKEY'}, 'resourceFieldRef': {'containerName': 'ACTOKEY', 'divisor': '1', 'resource': 'ACTOKEY'}, 'secretKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': True}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:15:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:15:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:15:09Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:15:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:26:29,486 DEBUG  , Thread-4, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-6pvfp
2023-04-02 01:26:30,119 DEBUG  , Thread-4, checker.py:278, [trial: 6, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'configMapKeyRef', 'optional']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 4, 'value_from', 'config_map_key_ref', 'optional']]
2023-04-02 01:26:30,119 DEBUG  , Thread-4, checker.py:278, [trial: 6, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'configMapKeyRef', 'optional']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 5, 'value_from', 'config_map_key_ref', 'optional']]
2023-04-02 01:26:30,120 DEBUG  , Thread-4, checker.py:278, [trial: 6, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'containerName']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 4, 'value_from', 'resource_field_ref', 'container_name']]
2023-04-02 01:26:30,120 DEBUG  , Thread-4, checker.py:278, [trial: 6, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'containerName']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 5, 'value_from', 'resource_field_ref', 'container_name']]
2023-04-02 01:26:30,121 DEBUG  , Thread-4, checker.py:278, [trial: 6, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'resourceFieldRef', 'divisor']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 2, 'value_from', 'resource_field_ref', 'divisor']]
2023-04-02 01:26:30,121 ERROR  , Thread-4, checker.py:282, [trial: 6, gen: 1] Matched delta inconsistent with input delta
2023-04-02 01:26:30,121 ERROR  , Thread-4, checker.py:283, [trial: 6, gen: 1] Input delta: not present -> 5
2023-04-02 01:26:30,121 ERROR  , Thread-4, checker.py:284, [trial: 6, gen: 1] Matched delta: 1 -> not present
2023-04-02 01:26:30,323 INFO   , Thread-4, common.py:569, [trial: 6, gen: 1] Recognized invalid input through field [resource] in error message: reconciling resources on deploy action
2023-04-02 01:26:30,323 INFO   , Thread-4, checker.py:134, [trial: 6, gen: 1] Number of system state fields: [3061] Number of delta: [246]
2023-04-02 01:26:30,323 ERROR  , Thread-4, checker.py:561, [trial: 6, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 01:26:30,324 DEBUG  , Thread-4, acto.py  :489, [trial: 6, gen: 1] Running recovery
2023-04-02 01:26:32,271 INFO   , Thread-4, runner.py:291, [trial: 6, gen: 1] Waiting for system to converge... 
2023-04-02 01:26:40,630 INFO   , Thread-2, runner.py:291, [trial: 8, gen: 0] Waiting for system to converge... 
2023-04-02 01:26:41,172 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:26:41,675 INFO   , Thread-8, base.py  :41, Created cluster
2023-04-02 01:26:41,686 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:26:48,182 INFO   , Thread-9, runner.py:360, [trial: 8, gen: 0] System took 00:01:12 to converge
2023-04-02 01:26:48,183 DEBUG  , Thread-9, runner.py:98, [trial: 8, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:26:48,183 DEBUG  , Thread-9, runner.py:99, [trial: 8, gen: 0] STDERR: 
2023-04-02 01:26:48,329 DEBUG  , Thread-9, runner.py:177, [trial: 8, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:25:39Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:25:35Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:25:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:25:49Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1205', 'uid': '4388bed3-e0c8-4a39-ad01-7ef6e17e9e4b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:25:49Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:25:38Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:25:39Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:25:44Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:26:48,355 DEBUG  , Thread-9, runner.py:202, [trial: 8, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-wtv66
2023-04-02 01:26:48,665 WARNING, Thread-9, schema.py:573, [trial: 8, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:26:48,666 INFO   , Thread-9, input.py :723, [trial: 8, gen: 1] Progress [1] cases left
2023-04-02 01:26:48,666 DEBUG  , Thread-9, test_case.py:51, [trial: 8, gen: 1] Precondition [increase_precondition] Result [False]
2023-04-02 01:26:48,666 INFO   , Thread-9, acto.py  :267, [trial: 8, gen: 1] Precondition of ["spec", "dataStore", "pvc", "spec", "resources", "limits", "storage"] fails, try setup first
2023-04-02 01:26:48,666 INFO   , Thread-9, acto.py  :107, [trial: 8, gen: 1] JSON patch: [{"op": "add", "path": "/spec/dataStore/pvc/spec/resources/limits", "value": {"storage": "1000m"}}]
2023-04-02 01:26:48,667 DEBUG  , Thread-9, test_case.py:51, [trial: 8, gen: 1] Precondition [increase_precondition] Result [True]
2023-04-02 01:26:48,667 DEBUG  , Thread-9, acto.py  :458, [trial: 8, gen: 1] Run and check
2023-04-02 01:26:48,987 INFO   , Thread-9, runner.py:291, [trial: 8, gen: 1] Waiting for system to converge... 
2023-04-02 01:26:51,259 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-02 01:26:51,260 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:26:53,207 DEBUG  , Thread-11, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:26:58,971 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:26:59,298 INFO   , Thread-6, runner.py:323, [trial: 9, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:26:59,609 INFO   , Thread-10, runner.py:360, [trial: 6, gen: 9] System took 00:01:00 to converge
2023-04-02 01:26:59,610 DEBUG  , Thread-10, runner.py:98, [trial: 6, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:26:59,610 DEBUG  , Thread-10, runner.py:99, [trial: 6, gen: 9] STDERR: 
2023-04-02 01:26:59,732 DEBUG  , Thread-10, runner.py:177, [trial: 6, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:07:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"536870912.0"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1073741824.0"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:07:19Z', 'generation': 10, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:21:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:25:58Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3831', 'uid': '2c3cde1b-3748-4dbf-bf91-ed0d5776d9fd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '536870912'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1073741824'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:07:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:07:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:07:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:07:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:26:55Z', 'message': 'updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: spec.resources.requests.storage: Forbidden: field can not be less than previous value', 'status': 'Failed', 'type': 'ResizePVC'}], 'version': 'v21.2.10'}}}
2023-04-02 01:26:59,757 DEBUG  , Thread-10, runner.py:202, [trial: 6, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-vxrns
2023-04-02 01:27:00,452 ERROR  , Thread-10, checker.py:301, [trial: 6, gen: 9] Found no matching fields for input delta
2023-04-02 01:27:00,452 ERROR  , Thread-10, checker.py:302, [trial: 6, gen: 9] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'resources', 'requests', 'storage']]
2023-04-02 01:27:00,661 INFO   , Thread-10, common.py:560, [trial: 6, gen: 9] Recognized invalid input through regex: updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: spec.resources.requests.storage: Forbidden: field can not be less than previous value
2023-04-02 01:27:00,661 INFO   , Thread-10, checker.py:134, [trial: 6, gen: 9] Number of system state fields: [3460] Number of delta: [3]
2023-04-02 01:27:00,662 DEBUG  , Thread-10, acto.py  :374, [trial: 6, gen: 9] Invalid input, revert
2023-04-02 01:27:00,662 WARNING, Thread-10, schema.py:573, [trial: 6, gen: 9] Field [name] does not have a schema, using opaque schema
2023-04-02 01:27:00,662 DEBUG  , Thread-10, acto.py  :458, [trial: 6, gen: 9] Run and check
2023-04-02 01:27:01,020 INFO   , Thread-10, runner.py:291, [trial: 6, gen: 9] Waiting for system to converge... 
2023-04-02 01:27:03,366 INFO   , Thread-11, deploy.py:91, Operator ready
2023-04-02 01:27:03,366 INFO   , Thread-11, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:27:09,049 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-02 01:27:09,050 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:27:11,059 DEBUG  , Thread-8, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:27:21,145 INFO   , Thread-8, deploy.py:91, Operator ready
2023-04-02 01:27:21,145 INFO   , Thread-8, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:27:33,721 INFO   , Thread-4, runner.py:360, [trial: 6, gen: 1] System took 00:01:01 to converge
2023-04-02 01:27:33,722 DEBUG  , Thread-4, runner.py:98, [trial: 6, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:27:33,722 DEBUG  , Thread-4, runner.py:99, [trial: 6, gen: 1] STDERR: 
2023-04-02 01:27:33,867 DEBUG  , Thread-4, runner.py:177, [trial: 6, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:15:08Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:15:05Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:15:09Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:26:32Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2146', 'uid': 'a18f3edc-1deb-4048-9cb9-b2da05cf533d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:15:19Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:15:07Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:15:09Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:15:14Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:27:33,896 DEBUG  , Thread-4, runner.py:202, [trial: 6, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-6pvfp
2023-04-02 01:27:34,554 INFO   , Thread-4, acto.py  :187, Trial 6 finished, completed in 00:14:50
2023-04-02 01:27:34,554 INFO   , Thread-4, acto.py  :188, ---------------------------------------

2023-04-02 01:27:34,575 DEBUG  , Thread-4, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-6pvfp
2023-04-02 01:27:42,092 INFO   , Thread-2, runner.py:360, [trial: 8, gen: 0] System took 00:01:01 to converge
2023-04-02 01:27:42,093 DEBUG  , Thread-2, runner.py:98, [trial: 8, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:27:42,093 DEBUG  , Thread-2, runner.py:99, [trial: 8, gen: 0] STDERR: 
2023-04-02 01:27:42,194 DEBUG  , Thread-2, runner.py:177, [trial: 8, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:26:40Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:26:40Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:26:42Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1016', 'uid': 'e0f5b915-ae55-4c91-87a2-ca1bfd05e705'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:26:40Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:26:40Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:26:42Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 01:27:42,216 DEBUG  , Thread-2, runner.py:202, [trial: 8, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-mxz8l
2023-04-02 01:27:42,373 WARNING, Thread-2, schema.py:573, [trial: 8, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:27:42,374 INFO   , Thread-2, input.py :723, [trial: 8, gen: 1] Progress [5] cases left
2023-04-02 01:27:42,374 DEBUG  , Thread-2, test_case.py:51, [trial: 8, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-02 01:27:42,374 INFO   , Thread-2, acto.py  :267, [trial: 8, gen: 1] Precondition of ["spec", "nodeSelector"] fails, try setup first
2023-04-02 01:27:42,374 INFO   , Thread-2, acto.py  :107, [trial: 8, gen: 1] JSON patch: [{"op": "add", "path": "/spec/nodeSelector", "value": {"ACTOKEY": "ACTOKEY"}}]
2023-04-02 01:27:42,375 DEBUG  , Thread-2, test_case.py:51, [trial: 8, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-02 01:27:42,375 DEBUG  , Thread-2, acto.py  :458, [trial: 8, gen: 1] Run and check
2023-04-02 01:27:42,715 INFO   , Thread-2, runner.py:291, [trial: 8, gen: 1] Waiting for system to converge... 
2023-04-02 01:27:43,499 WARNING, Thread-11, schema.py:573, [trial: 9, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:27:43,499 DEBUG  , Thread-11, acto.py  :458, [trial: 9, gen: 0] Run and check
2023-04-02 01:27:46,120 INFO   , Thread-11, runner.py:291, [trial: 9, gen: 0] Waiting for system to converge... 
2023-04-02 01:27:49,112 INFO   , Thread-9, runner.py:360, [trial: 8, gen: 1] System took 00:01:00 to converge
2023-04-02 01:27:49,114 DEBUG  , Thread-9, runner.py:98, [trial: 8, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:27:49,114 DEBUG  , Thread-9, runner.py:99, [trial: 8, gen: 1] STDERR: 
2023-04-02 01:27:49,255 DEBUG  , Thread-9, runner.py:177, [trial: 8, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:25:39Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"limits":{"storage":"1000m"},"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:25:35Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:25:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:storage': {}}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:26:48Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:26:49Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1364', 'uid': '4388bed3-e0c8-4a39-ad01-7ef6e17e9e4b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'limits': {'storage': '1'}, 'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:25:49Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:25:38Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:25:39Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:25:44Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:27:17Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 01:27:49,283 DEBUG  , Thread-9, runner.py:202, [trial: 8, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-wtv66
2023-04-02 01:27:49,806 ERROR  , Thread-9, checker.py:301, [trial: 8, gen: 1] Found no matching fields for input delta
2023-04-02 01:27:49,806 ERROR  , Thread-9, checker.py:302, [trial: 8, gen: 1] Input delta [['spec', 'dataStore', 'pvc', 'spec', 'resources', 'limits', 'storage']]
2023-04-02 01:27:50,097 INFO   , Thread-9, common.py:560, [trial: 8, gen: 1] Recognized invalid input through regex: failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than 'replicas', 'template', 'updateStrategy' and 'minReadySeconds' are forbidden
2023-04-02 01:27:50,097 INFO   , Thread-9, checker.py:134, [trial: 8, gen: 1] Number of system state fields: [3461] Number of delta: [5]
2023-04-02 01:27:50,098 INFO   , Thread-9, acto.py  :301, [trial: 8, gen: 1] Setup produced invalid input
2023-04-02 01:27:50,099 WARNING, Thread-9, schema.py:573, [trial: 8, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:27:50,099 DEBUG  , Thread-9, acto.py  :458, [trial: 8, gen: 1] Run and check
2023-04-02 01:27:50,301 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-3
2023-04-02 01:27:50,430 INFO   , Thread-9, runner.py:291, [trial: 8, gen: 1] Waiting for system to converge... 
2023-04-02 01:27:59,389 INFO   , Thread-6, runner.py:323, [trial: 9, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:28:01,146 INFO   , Thread-10, runner.py:360, [trial: 6, gen: 9] System took 00:01:00 to converge
2023-04-02 01:28:01,148 DEBUG  , Thread-10, runner.py:98, [trial: 6, gen: 9] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:28:01,148 DEBUG  , Thread-10, runner.py:99, [trial: 6, gen: 9] STDERR: 
2023-04-02 01:28:01,321 WARNING, Thread-8, schema.py:573, [trial: 9, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:28:01,322 DEBUG  , Thread-8, acto.py  :458, [trial: 9, gen: 0] Run and check
2023-04-02 01:28:01,341 DEBUG  , Thread-10, runner.py:177, [trial: 6, gen: 9] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:07:23Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1073741824.0"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:07:19Z', 'generation': 11, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:21:35Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:25:58Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3842', 'uid': '2c3cde1b-3748-4dbf-bf91-ed0d5776d9fd'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1073741824'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:07:34Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:07:22Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:07:23Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:07:28Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:26:55Z', 'message': 'updating PVCs for statefulset cockroach-operator-system.test-cluster: error resizing PVCs: PersistentVolumeClaim "datadir-test-cluster-0" is invalid: spec.resources.requests.storage: Forbidden: field can not be less than previous value', 'status': 'Failed', 'type': 'ResizePVC'}], 'version': 'v21.2.10'}}}
2023-04-02 01:28:01,374 DEBUG  , Thread-10, runner.py:202, [trial: 6, gen: 9] Got operator pod: pod name:cockroach-operator-manager-64c489884-vxrns
2023-04-02 01:28:02,310 DEBUG  , Thread-10, acto.py  :383, [trial: 6, gen: 9] Only one patch, no need to isolate
2023-04-02 01:28:02,311 INFO   , Thread-10, acto.py  :339, [trial: 6, gen: 9] Input model is empty, break
2023-04-02 01:28:02,315 INFO   , Thread-10, acto.py  :187, Trial 6 finished, completed in 00:22:56
2023-04-02 01:28:02,315 INFO   , Thread-10, acto.py  :188, ---------------------------------------

2023-04-02 01:28:02,331 DEBUG  , Thread-10, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-vxrns
2023-04-02 01:28:03,956 INFO   , Thread-8, runner.py:291, [trial: 9, gen: 0] Waiting for system to converge... 
2023-04-02 01:28:12,359 INFO   , Thread-10, common.py:629, Trial testrun-crdb-whitebox/trial-09-0006 completed without error
2023-04-02 01:28:12,361 INFO   , Thread-10, acto.py  :195, Test finished
2023-04-02 01:28:12,362 INFO   , Thread-10, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"maxSQLMemory\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"ui\\\", \\\"tls\\\", 0]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"cockroachDBVersion\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"topologySpreadConstraints\\\", 0]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"dataStore\\\", \\\"pvc\\\", \\\"spec\\\", \\\"resources\\\", \\\"limits\\\", \\\"storage\\\"]\"": [
        "k8s-quantity_decrease"
    ],
    "\"[\\\"spec\\\", \\\"tolerations\\\"]\"": [
        "k8s-tolerations_pop"
    ]
}
2023-04-02 01:28:37,863 INFO   , Thread-3, runner.py:360, [trial: 8, gen: 7] System took 00:02:37 to converge
2023-04-02 01:28:37,865 DEBUG  , Thread-3, runner.py:98, [trial: 8, gen: 7] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:28:37,865 DEBUG  , Thread-3, runner.py:99, [trial: 8, gen: 7] STDERR: 
2023-04-02 01:28:38,015 DEBUG  , Thread-3, runner.py:177, [trial: 8, gen: 7] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:15:20Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalAnnotations":{},"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:12:41Z', 'generation': 7, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:24:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalAnnotations': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:25:59Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2668', 'uid': '33412ccf-fb86-4ece-af09-73daf5a975c0'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:15:30Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:15:19Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:15:20Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:14:46Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:15:25Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:25:54Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 01:28:38,053 DEBUG  , Thread-3, runner.py:202, [trial: 8, gen: 7] Got operator pod: pod name:cockroach-operator-manager-64c489884-c9hgn
2023-04-02 01:28:38,908 DEBUG  , Thread-3, acto.py  :383, [trial: 8, gen: 7] Only one patch, no need to isolate
2023-04-02 01:28:38,908 INFO   , Thread-3, acto.py  :339, [trial: 8, gen: 7] Input model is empty, break
2023-04-02 01:28:38,913 INFO   , Thread-3, acto.py  :187, Trial 8 finished, completed in 00:18:18
2023-04-02 01:28:38,913 INFO   , Thread-3, acto.py  :188, ---------------------------------------

2023-04-02 01:28:38,938 DEBUG  , Thread-3, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-c9hgn
2023-04-02 01:28:44,765 INFO   , Thread-4, base.py  :41, Created cluster
2023-04-02 01:28:44,780 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:28:48,969 INFO   , Thread-3, common.py:629, Trial testrun-crdb-whitebox/trial-02-0008 completed without error
2023-04-02 01:28:48,969 INFO   , Thread-3, acto.py  :195, Test finished
2023-04-02 01:28:48,970 INFO   , Thread-3, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"affinity\\\", \\\"podAntiAffinity\\\"]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"resourceFieldRef\\\", \\\"divisor\\\"]\"": [
        "number-deletion",
        "number-increase",
        "number-decrease",
        "number-empty",
        "string-deletion",
        "string-change",
        "string-empty"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"ui\\\", \\\"tls\\\", 0, \\\"hosts\\\"]\"": [
        "array-deletion",
        "array-push",
        "array-pop"
    ],
    "\"[\\\"spec\\\", \\\"additionalAnnotations\\\"]\"": [
        "object-empty"
    ]
}
2023-04-02 01:28:50,549 INFO   , Thread-9, runner.py:360, [trial: 8, gen: 1] System took 00:01:00 to converge
2023-04-02 01:28:50,551 DEBUG  , Thread-9, runner.py:98, [trial: 8, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:28:50,551 DEBUG  , Thread-9, runner.py:99, [trial: 8, gen: 1] STDERR: 
2023-04-02 01:28:50,682 DEBUG  , Thread-9, runner.py:177, [trial: 8, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:25:39Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:25:35Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:25:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:26:49Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:27:50Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1414', 'uid': '4388bed3-e0c8-4a39-ad01-7ef6e17e9e4b'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:25:49Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:25:38Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:25:39Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:25:44Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:27:17Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 01:28:50,711 DEBUG  , Thread-9, runner.py:202, [trial: 8, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-wtv66
2023-04-02 01:28:51,537 INFO   , Thread-9, acto.py  :321, [trial: 8, gen: 1] All setups failed
2023-04-02 01:28:51,537 WARNING, Thread-9, schema.py:573, [trial: 8, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:28:51,538 INFO   , Thread-9, acto.py  :187, Trial 8 finished, completed in 00:06:58
2023-04-02 01:28:51,538 INFO   , Thread-9, acto.py  :188, ---------------------------------------

2023-04-02 01:28:51,562 DEBUG  , Thread-9, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-wtv66
2023-04-02 01:28:59,486 INFO   , Thread-6, runner.py:323, [trial: 9, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:28:59,493 INFO   , Thread-11, runner.py:360, [trial: 9, gen: 0] System took 00:01:13 to converge
2023-04-02 01:28:59,493 DEBUG  , Thread-11, runner.py:98, [trial: 9, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:28:59,494 DEBUG  , Thread-11, runner.py:99, [trial: 9, gen: 0] STDERR: 
2023-04-02 01:28:59,640 DEBUG  , Thread-11, runner.py:177, [trial: 9, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:27:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:27:46Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:27:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:27:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:27:52Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1073', 'uid': '92626862-7cea-47ad-b755-e05831f5e5af'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:28:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:27:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:27:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:27:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:28:59,668 DEBUG  , Thread-11, runner.py:202, [trial: 9, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-fgcvx
2023-04-02 01:28:59,887 WARNING, Thread-11, schema.py:573, [trial: 9, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:28:59,887 INFO   , Thread-11, input.py :723, [trial: 9, gen: 1] Progress [1] cases left
2023-04-02 01:28:59,888 DEBUG  , Thread-11, test_case.py:51, [trial: 9, gen: 1] Precondition [increase_precondition] Result [True]
2023-04-02 01:28:59,888 INFO   , Thread-11, acto.py  :263, [trial: 9, gen: 1] Precondition of ['spec', 'resources', 'requests', 'cpu'] satisfies
2023-04-02 01:28:59,888 INFO   , Thread-11, acto.py  :323, [trial: 9, gen: 1] Running bundled testcases
2023-04-02 01:28:59,888 DEBUG  , Thread-11, test_case.py:51, [trial: 9, gen: 1] Precondition [increase_precondition] Result [True]
2023-04-02 01:28:59,889 INFO   , Thread-11, acto.py  :107, [trial: 9, gen: 1] JSON patch: [{"op": "replace", "path": "/spec/resources/requests/cpu", "value": "200m"}]
2023-04-02 01:28:59,889 DEBUG  , Thread-11, acto.py  :458, [trial: 9, gen: 1] Run and check
2023-04-02 01:29:00,215 INFO   , Thread-11, runner.py:291, [trial: 9, gen: 1] Waiting for system to converge... 
2023-04-02 01:29:01,589 INFO   , Thread-9, common.py:629, Trial testrun-crdb-whitebox/trial-08-0008 completed without error
2023-04-02 01:29:01,590 INFO   , Thread-9, acto.py  :195, Test finished
2023-04-02 01:29:01,591 INFO   , Thread-9, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"nodeTLSSecret\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"secretKeyRef\\\", \\\"optional\\\"]\"": [
        "boolean-deletion",
        "boolean-toggle-off"
    ],
    "\"[\\\"spec\\\", \\\"resources\\\", \\\"limits\\\", \\\"kiaqbglcgq\\\"]\"": [
        "k8s-quantity_increase"
    ],
    "\"[\\\"spec\\\", \\\"nodes\\\"]\"": [
        "k8s-scaleDownUp"
    ],
    "\"[\\\"spec\\\", \\\"dataStore\\\", \\\"pvc\\\", \\\"spec\\\", \\\"resources\\\", \\\"limits\\\", \\\"storage\\\"]\"": [
        "k8s-quantity_increase"
    ]
}
2023-04-02 01:29:02,166 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:29:05,901 INFO   , Thread-8, runner.py:360, [trial: 9, gen: 0] System took 00:01:01 to converge
2023-04-02 01:29:05,903 DEBUG  , Thread-8, runner.py:98, [trial: 9, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:29:05,903 DEBUG  , Thread-8, runner.py:99, [trial: 9, gen: 0] STDERR: 
2023-04-02 01:29:06,036 DEBUG  , Thread-8, runner.py:177, [trial: 9, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:28:03Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:28:03Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:28:06Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '914', 'uid': '69b53388-af3a-484e-999d-28923d76c30d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:28:04Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:28:04Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:28:06Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 01:29:06,053 DEBUG  , Thread-8, runner.py:202, [trial: 9, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-q62zz
2023-04-02 01:29:06,165 WARNING, Thread-8, schema.py:573, [trial: 9, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:29:06,166 INFO   , Thread-8, input.py :723, [trial: 9, gen: 1] Progress [1] cases left
2023-04-02 01:29:06,166 DEBUG  , Thread-8, test_case.py:51, [trial: 9, gen: 1] Precondition [change_precondition] Result [False]
2023-04-02 01:29:06,166 INFO   , Thread-8, acto.py  :267, [trial: 9, gen: 1] Precondition of ["spec", "ingress", "sql", "host"] fails, try setup first
2023-04-02 01:29:06,167 INFO   , Thread-8, acto.py  :107, [trial: 9, gen: 1] JSON patch: [{"op": "add", "path": "/spec/ingress", "value": {"sql": {"host": "ACTOKEY"}}}]
2023-04-02 01:29:06,167 DEBUG  , Thread-8, test_case.py:51, [trial: 9, gen: 1] Precondition [change_precondition] Result [True]
2023-04-02 01:29:06,167 DEBUG  , Thread-8, acto.py  :458, [trial: 9, gen: 1] Run and check
2023-04-02 01:29:06,513 INFO   , Thread-8, runner.py:291, [trial: 9, gen: 1] Waiting for system to converge... 
2023-04-02 01:29:12,240 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-02 01:29:12,240 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:29:14,301 DEBUG  , Thread-4, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:29:24,384 INFO   , Thread-4, deploy.py:91, Operator ready
2023-04-02 01:29:24,384 INFO   , Thread-4, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:29:59,578 INFO   , Thread-6, runner.py:323, [trial: 9, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:30:04,516 WARNING, Thread-4, schema.py:573, [trial: 7, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:30:04,517 DEBUG  , Thread-4, acto.py  :458, [trial: 7, gen: 0] Run and check
2023-04-02 01:30:06,963 INFO   , Thread-4, runner.py:291, [trial: 7, gen: 0] Waiting for system to converge... 
2023-04-02 01:30:17,764 INFO   , Thread-8, runner.py:360, [trial: 9, gen: 1] System took 00:01:11 to converge
2023-04-02 01:30:17,765 DEBUG  , Thread-8, runner.py:98, [trial: 9, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:30:17,765 DEBUG  , Thread-8, runner.py:99, [trial: 9, gen: 1] STDERR: 
2023-04-02 01:30:17,974 DEBUG  , Thread-8, runner.py:177, [trial: 9, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:29:10Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"ingress":{"sql":{"host":"ACTOKEY"}},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:28:03Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:ingress': {'.': {}, 'f:sql': {'.': {}, 'f:host': {}}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:29:06Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:29:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:29:21Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1289', 'uid': '69b53388-af3a-484e-999d-28923d76c30d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'ingress': {'sql': {'host': 'ACTOKEY'}}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:29:21Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:29:09Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:29:10Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:28:06Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:29:15Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:30:11Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 01:30:18,001 DEBUG  , Thread-8, runner.py:202, [trial: 9, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-q62zz
2023-04-02 01:30:18,645 INFO   , Thread-8, common.py:560, [trial: 9, gen: 1] Recognized invalid input through regex: failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
2023-04-02 01:30:18,645 INFO   , Thread-8, checker.py:134, [trial: 9, gen: 1] Number of system state fields: [3770] Number of delta: [1093]
2023-04-02 01:30:18,646 INFO   , Thread-8, acto.py  :301, [trial: 9, gen: 1] Setup produced invalid input
2023-04-02 01:30:18,647 WARNING, Thread-8, schema.py:573, [trial: 9, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:30:18,647 DEBUG  , Thread-8, acto.py  :458, [trial: 9, gen: 1] Run and check
2023-04-02 01:30:18,995 INFO   , Thread-8, runner.py:291, [trial: 9, gen: 1] Waiting for system to converge... 
2023-04-02 01:30:23,080 ERROR  , Thread-6, runner.py:363, [trial: 9, gen: 1] System failed to converge within 600 seconds
2023-04-02 01:30:23,083 DEBUG  , Thread-6, runner.py:98, [trial: 9, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:30:23,084 DEBUG  , Thread-6, runner.py:99, [trial: 9, gen: 1] STDERR: 
2023-04-02 01:30:23,230 DEBUG  , Thread-6, runner.py:177, [trial: 9, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:19:15Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","valueFrom":{"secretKeyRef":{"key":"ACTOKEY","name":""}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:19:11Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:19:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:19:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:20:23Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1293', 'uid': '65300f9f-679c-4c7d-ad89-51122accb508'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'secretKeyRef': {'key': 'ACTOKEY'}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:19:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:19:14Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:19:15Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:19:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:30:23,255 DEBUG  , Thread-6, runner.py:202, [trial: 9, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-tw9bd
2023-04-02 01:30:24,011 INFO   , Thread-6, checker.py:134, [trial: 9, gen: 1] Number of system state fields: [3040] Number of delta: [213]
2023-04-02 01:30:24,011 ERROR  , Thread-6, checker.py:561, [trial: 9, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 01:30:24,012 INFO   , Thread-6, acto.py  :332, [trial: 9, gen: 1] Error result, running recovery
2023-04-02 01:30:24,012 DEBUG  , Thread-6, acto.py  :489, [trial: 9, gen: 1] Running recovery
2023-04-02 01:30:26,058 INFO   , Thread-6, runner.py:291, [trial: 9, gen: 1] Waiting for system to converge... 
2023-04-02 01:31:07,086 INFO   , Thread-4, runner.py:360, [trial: 7, gen: 0] System took 00:01:00 to converge
2023-04-02 01:31:07,087 DEBUG  , Thread-4, runner.py:98, [trial: 7, gen: 0] STDOUT: 
2023-04-02 01:31:07,088 DEBUG  , Thread-4, runner.py:99, [trial: 7, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-03-0007/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.185.147:443: connect: connection refused

2023-04-02 01:31:07,189 DEBUG  , Thread-4, runner.py:177, [trial: 7, gen: 0] {}
2023-04-02 01:31:07,189 ERROR  , Thread-4, runner.py:107, [trial: 7, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 01:31:07,190 INFO   , Thread-4, checker.py:103, [trial: 7, gen: 0] Connection refused, reject mutation
2023-04-02 01:31:07,190 INFO   , Thread-4, acto.py  :472, [trial: 7, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 01:31:24,829 INFO   , Thread-11, runner.py:360, [trial: 9, gen: 1] System took 00:02:24 to converge
2023-04-02 01:31:24,830 DEBUG  , Thread-11, runner.py:98, [trial: 9, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:31:24,830 DEBUG  , Thread-11, runner.py:99, [trial: 9, gen: 1] STDERR: 
2023-04-02 01:31:24,964 DEBUG  , Thread-11, runner.py:177, [trial: 9, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:27:51Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"200m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:27:46Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:27:46Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:27:51Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:27:52Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1182', 'uid': '92626862-7cea-47ad-b755-e05831f5e5af'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '200m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:28:02Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:27:50Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:27:51Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:27:57Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:31:24,994 DEBUG  , Thread-11, runner.py:202, [trial: 9, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-fgcvx
2023-04-02 01:31:25,559 DEBUG  , Thread-11, checker.py:278, [trial: 9, gen: 1] Input delta [['spec', 'resources', 'requests', 'cpu']] matched with [['test-cluster-0', 'spec', 'containers', 0, 'resources', 'requests', 'cpu']]
2023-04-02 01:31:25,560 DEBUG  , Thread-11, checker.py:278, [trial: 9, gen: 1] Input delta [['spec', 'resources', 'requests', 'cpu']] matched with [['test-cluster-1', 'spec', 'containers', 0, 'resources', 'requests', 'cpu']]
2023-04-02 01:31:25,560 DEBUG  , Thread-11, checker.py:278, [trial: 9, gen: 1] Input delta [['spec', 'resources', 'requests', 'cpu']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'resources', 'requests', 'cpu']]
2023-04-02 01:31:25,560 DEBUG  , Thread-11, checker.py:278, [trial: 9, gen: 1] Input delta [['spec', 'resources', 'requests', 'cpu']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'resources', 'requests', 'cpu']]
2023-04-02 01:31:25,772 INFO   , Thread-11, checker.py:134, [trial: 9, gen: 1] Number of system state fields: [3462] Number of delta: [71]
2023-04-02 01:31:25,773 INFO   , Thread-11, acto.py  :339, [trial: 9, gen: 1] Input model is empty, break
2023-04-02 01:31:25,773 INFO   , Thread-11, acto.py  :187, Trial 9 finished, completed in 00:05:54
2023-04-02 01:31:25,774 INFO   , Thread-11, acto.py  :188, ---------------------------------------

2023-04-02 01:31:25,795 DEBUG  , Thread-11, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-fgcvx
2023-04-02 01:31:27,618 INFO   , Thread-4, runner.py:291, [trial: 7, gen: 0] Waiting for system to converge... 
2023-04-02 01:31:35,824 INFO   , Thread-11, common.py:629, Trial testrun-crdb-whitebox/trial-10-0009 completed without error
2023-04-02 01:31:35,825 INFO   , Thread-11, acto.py  :195, Test finished
2023-04-02 01:31:35,826 INFO   , Thread-11, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"configMapKeyRef\\\", \\\"name\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"resources\\\", \\\"requests\\\"]\"": [
        "object-empty"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"ui\\\", \\\"annotations\\\", \\\"ACTOKEY\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"secretKeyRef\\\"]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"dataStore\\\", \\\"pvc\\\", \\\"spec\\\", \\\"resources\\\", \\\"requests\\\", \\\"rgztrsjoct\\\"]\"": [
        "k8s-quantity_increase",
        "k8s-quantity_decrease"
    ],
    "\"[\\\"spec\\\", \\\"dataStore\\\", \\\"pvc\\\", \\\"spec\\\", \\\"resources\\\", \\\"limits\\\", \\\"tpkhxkwcgs\\\"]\"": [
        "k8s-quantity_increase",
        "k8s-quantity_decrease"
    ],
    "\"[\\\"spec\\\", \\\"affinity\\\"]\"": [
        "k8s-null_affinity"
    ]
}
2023-04-02 01:31:39,583 INFO   , Thread-8, runner.py:360, [trial: 9, gen: 1] System took 00:01:20 to converge
2023-04-02 01:31:39,584 DEBUG  , Thread-8, runner.py:98, [trial: 9, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:31:39,585 DEBUG  , Thread-8, runner.py:99, [trial: 9, gen: 1] STDERR: 
2023-04-02 01:31:39,731 DEBUG  , Thread-8, runner.py:177, [trial: 9, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:29:10Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:28:03Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:sqlHost': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:29:10Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:29:21Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:30:18Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1299', 'uid': '69b53388-af3a-484e-999d-28923d76c30d'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:29:21Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:29:09Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:29:10Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:28:06Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:29:15Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:30:11Z', 'message': 'failed to reconcile sql-test-cluster: Ingress.extensions "sql-test-cluster" is invalid: spec.rules[0].host: Invalid value: "ACTOKEY": a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, \'-\' or \'.\', and must start and end with an alphanumeric character (e.g. \'example.com\', regex used for validation is \'[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\')', 'status': 'Failed', 'type': 'ExposeIngressAction'}], 'sqlHost': 'ACTOKEY', 'version': 'v21.2.10'}}}
2023-04-02 01:31:39,760 DEBUG  , Thread-8, runner.py:202, [trial: 9, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-q62zz
2023-04-02 01:31:40,254 INFO   , Thread-8, acto.py  :321, [trial: 9, gen: 1] All setups failed
2023-04-02 01:31:40,255 WARNING, Thread-8, schema.py:573, [trial: 9, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:31:40,256 INFO   , Thread-8, acto.py  :187, Trial 9 finished, completed in 00:05:57
2023-04-02 01:31:40,256 INFO   , Thread-8, acto.py  :188, ---------------------------------------

2023-04-02 01:31:40,279 DEBUG  , Thread-8, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-q62zz
2023-04-02 01:31:41,273 INFO   , Thread-6, runner.py:360, [trial: 9, gen: 1] System took 00:01:15 to converge
2023-04-02 01:31:41,274 DEBUG  , Thread-6, runner.py:98, [trial: 9, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:31:41,274 DEBUG  , Thread-6, runner.py:99, [trial: 9, gen: 1] STDERR: 
2023-04-02 01:31:41,406 DEBUG  , Thread-6, runner.py:177, [trial: 9, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:19:15Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:19:11Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:19:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:30:25Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2240', 'uid': '65300f9f-679c-4c7d-ad89-51122accb508'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:19:25Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:19:14Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:19:15Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:19:20Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:31:41,433 DEBUG  , Thread-6, runner.py:202, [trial: 9, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-tw9bd
2023-04-02 01:31:42,090 INFO   , Thread-6, acto.py  :187, Trial 9 finished, completed in 00:16:05
2023-04-02 01:31:42,090 INFO   , Thread-6, acto.py  :188, ---------------------------------------

2023-04-02 01:31:42,112 DEBUG  , Thread-6, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-tw9bd
2023-04-02 01:31:50,307 INFO   , Thread-8, common.py:629, Trial testrun-crdb-whitebox/trial-07-0009 completed without error
2023-04-02 01:31:50,307 INFO   , Thread-8, acto.py  :195, Test finished
2023-04-02 01:31:50,308 INFO   , Thread-8, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"nodeSelector\\\", \\\"ACTOKEY\\\"]\"": [
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"image\\\", \\\"pullPolicy\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"resourceFieldRef\\\"]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"logConfigMap\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"ui\\\", \\\"tls\\\"]\"": [
        "array-deletion",
        "array-push",
        "array-pop"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"sql\\\", \\\"tls\\\", 0]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"sql\\\", \\\"host\\\"]\"": [
        "string-deletion",
        "string-change"
    ]
}
2023-04-02 01:31:58,861 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-5
2023-04-02 01:32:29,111 INFO   , Thread-4, runner.py:360, [trial: 7, gen: 0] System took 00:01:01 to converge
2023-04-02 01:32:29,113 DEBUG  , Thread-4, runner.py:98, [trial: 7, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:32:29,113 DEBUG  , Thread-4, runner.py:99, [trial: 7, gen: 0] STDERR: 
2023-04-02 01:32:29,214 DEBUG  , Thread-4, runner.py:177, [trial: 7, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:31:27Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:31:27Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/containerimage': {}, 'f:crdb.io/version': {}}}, 'f:status': {'.': {}, 'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:31:29Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1043', 'uid': 'cab7a528-15e5-4890-9843-4d7681291146'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:31:27Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:31:27Z', 'status': 'False', 'type': 'CrdbVersionChecked'}], 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:31:29Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}]}}}
2023-04-02 01:32:29,234 DEBUG  , Thread-4, runner.py:202, [trial: 7, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-wfnmx
2023-04-02 01:32:29,375 WARNING, Thread-4, schema.py:573, [trial: 7, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:32:29,376 INFO   , Thread-4, input.py :723, [trial: 7, gen: 1] Progress [1] cases left
2023-04-02 01:32:29,376 DEBUG  , Thread-4, test_case.py:51, [trial: 7, gen: 1] Precondition [pop_precondition] Result [False]
2023-04-02 01:32:29,376 INFO   , Thread-4, acto.py  :267, [trial: 7, gen: 1] Precondition of ["spec", "podEnvVariables"] fails, try setup first
2023-04-02 01:32:29,377 INFO   , Thread-4, acto.py  :107, [trial: 7, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "value": null, "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": false}, "fieldRef": {"apiVersion": "ACTOKEY", "fieldPath": "ACTOKEY"}, "resourceFieldRef": {"containerName": "ACTOKEY", "divisor": 0, "resource": "ACTOKEY"}, "secretKeyRef": {"key": "ACTOKEY", "name": null, "optional": true}}}, {"name": "ACTOKEY", "value": "ACTOKEY", "valueFrom": null}, {"name": "ACTOKEY", "value": null, "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": null, "optional": false}, "fieldRef": {"apiVersion": "ACTOKEY", "fieldPath": "ACTOKEY"}, "resourceFieldRef": {"containerName": "ACTOKEY", "divisor": 1, "resource": "ACTOKEY"}, "secretKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": false}}}, {"name": "ACTOKEY", "value": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": false}, "fieldRef": {"apiVersion": "ACTOKEY", "fieldPath": "ACTOKEY"}, "resourceFieldRef": {"containerName": "ACTOKEY", "divisor": 0, "resource": "ACTOKEY"}, "secretKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": false}}}]}]
2023-04-02 01:32:29,378 DEBUG  , Thread-4, test_case.py:51, [trial: 7, gen: 1] Precondition [pop_precondition] Result [True]
2023-04-02 01:32:29,378 DEBUG  , Thread-4, acto.py  :458, [trial: 7, gen: 1] Run and check
2023-04-02 01:32:29,757 INFO   , Thread-4, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 01:32:52,481 INFO   , Thread-6, base.py  :41, Created cluster
2023-04-02 01:32:52,492 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:33:10,081 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:33:20,185 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 01:33:20,185 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:33:22,322 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:33:32,415 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 01:33:32,415 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:34:12,551 WARNING, Thread-6, schema.py:573, [trial: 10, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:34:12,551 DEBUG  , Thread-6, acto.py  :458, [trial: 10, gen: 0] Run and check
2023-04-02 01:34:15,170 INFO   , Thread-6, runner.py:291, [trial: 10, gen: 0] Waiting for system to converge... 
2023-04-02 01:36:20,964 INFO   , Thread-6, runner.py:360, [trial: 10, gen: 0] System took 00:02:05 to converge
2023-04-02 01:36:20,966 DEBUG  , Thread-6, runner.py:98, [trial: 10, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:36:20,967 DEBUG  , Thread-6, runner.py:99, [trial: 10, gen: 0] STDERR: 
2023-04-02 01:36:21,117 DEBUG  , Thread-6, runner.py:177, [trial: 10, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:34:18Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:34:15Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:34:15Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:34:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:34:19Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1069', 'uid': '6d605349-d2c6-422f-8ed9-013fbc9cf1da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:34:29Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:34:17Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:34:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:34:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:36:21,147 DEBUG  , Thread-6, runner.py:202, [trial: 10, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-tlnfm
2023-04-02 01:36:21,394 WARNING, Thread-6, schema.py:573, [trial: 10, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:36:21,395 INFO   , Thread-6, input.py :723, [trial: 10, gen: 1] Progress [2] cases left
2023-04-02 01:36:21,395 DEBUG  , Thread-6, test_case.py:51, [trial: 10, gen: 1] Precondition [delete_precondition] Result [False]
2023-04-02 01:36:21,395 INFO   , Thread-6, acto.py  :267, [trial: 10, gen: 1] Precondition of ["spec", "podEnvVariables", 0] fails, try setup first
2023-04-02 01:36:21,396 INFO   , Thread-6, acto.py  :107, [trial: 10, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{"name": "ACTOKEY", "value": "ACTOKEY", "valueFrom": {"configMapKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": false}, "fieldRef": {"apiVersion": "ACTOKEY", "fieldPath": "ACTOKEY"}, "resourceFieldRef": {"containerName": "ACTOKEY", "divisor": 0, "resource": "ACTOKEY"}, "secretKeyRef": {"key": "ACTOKEY", "name": "ACTOKEY", "optional": true}}}]}]
2023-04-02 01:36:21,396 DEBUG  , Thread-6, test_case.py:51, [trial: 10, gen: 1] Precondition [delete_precondition] Result [True]
2023-04-02 01:36:21,396 DEBUG  , Thread-6, acto.py  :458, [trial: 10, gen: 1] Run and check
2023-04-02 01:36:21,770 INFO   , Thread-6, runner.py:291, [trial: 10, gen: 1] Waiting for system to converge... 
2023-04-02 01:37:42,723 ERROR  , Thread-2, runner.py:363, [trial: 8, gen: 1] System failed to converge within 600 seconds
2023-04-02 01:37:42,723 DEBUG  , Thread-2, runner.py:98, [trial: 8, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:37:42,723 DEBUG  , Thread-2, runner.py:99, [trial: 8, gen: 1] STDERR: 
2023-04-02 01:37:42,865 DEBUG  , Thread-2, runner.py:177, [trial: 8, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:27:46Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodeSelector":{"ACTOKEY":"ACTOKEY"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:26:40Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodeSelector': {'.': {}, 'f:ACTOKEY': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:27:42Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:27:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:27:47Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2304', 'uid': 'e0f5b915-ae55-4c91-87a2-ca1bfd05e705'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodeSelector': {'ACTOKEY': 'ACTOKEY'}, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:26:40Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:27:45Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:27:47Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:26:42Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:37:38Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:37:42,889 DEBUG  , Thread-2, runner.py:202, [trial: 8, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-mxz8l
2023-04-02 01:37:43,208 DEBUG  , Thread-2, checker.py:278, [trial: 8, gen: 1] Input delta [['spec', 'nodeSelector', 'ACTOKEY']] matched with [['test-cluster-0', 'spec', 'node_selector', 'ACTOKEY']]
2023-04-02 01:37:43,208 DEBUG  , Thread-2, checker.py:278, [trial: 8, gen: 1] Input delta [['spec', 'nodeSelector', 'ACTOKEY']] matched with [['test-cluster-1', 'spec', 'node_selector', 'ACTOKEY']]
2023-04-02 01:37:43,208 DEBUG  , Thread-2, checker.py:278, [trial: 8, gen: 1] Input delta [['spec', 'nodeSelector', 'ACTOKEY']] matched with [['test-cluster-2', 'spec', 'node_selector', 'ACTOKEY']]
2023-04-02 01:37:43,208 DEBUG  , Thread-2, checker.py:278, [trial: 8, gen: 1] Input delta [['spec', 'nodeSelector', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'template', 'spec', 'node_selector', 'ACTOKEY']]
2023-04-02 01:37:43,452 INFO   , Thread-2, checker.py:134, [trial: 8, gen: 1] Number of system state fields: [3188] Number of delta: [1024]
2023-04-02 01:37:43,452 ERROR  , Thread-2, checker.py:561, [trial: 8, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [None] with unhealthy status
2023-04-02 01:37:43,452 ERROR  , Thread-2, checker.py:561, [trial: 8, gen: 1] Found pod: test-cluster-0, test-cluster-1, test-cluster-2 with unhealthy status
2023-04-02 01:37:43,453 DEBUG  , Thread-2, acto.py  :489, [trial: 8, gen: 1] Running recovery
2023-04-02 01:37:45,493 INFO   , Thread-2, runner.py:291, [trial: 8, gen: 1] Waiting for system to converge... 
2023-04-02 01:38:53,688 INFO   , Thread-6, runner.py:323, [trial: 10, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:39:40,758 INFO   , Thread-4, runner.py:360, [trial: 7, gen: 1] System took 00:07:11 to converge
2023-04-02 01:39:40,759 DEBUG  , Thread-4, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:39:40,759 DEBUG  , Thread-4, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 01:39:40,866 DEBUG  , Thread-4, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:32:32Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","value":null,"valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":false},"fieldRef":{"apiVersion":"ACTOKEY","fieldPath":"ACTOKEY"},"resourceFieldRef":{"containerName":"ACTOKEY","divisor":0,"resource":"ACTOKEY"},"secretKeyRef":{"key":"ACTOKEY","name":null,"optional":true}}},{"name":"ACTOKEY","value":"ACTOKEY","valueFrom":null},{"name":"ACTOKEY","value":null,"valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":null,"optional":false},"fieldRef":{"apiVersion":"ACTOKEY","fieldPath":"ACTOKEY"},"resourceFieldRef":{"containerName":"ACTOKEY","divisor":1,"resource":"ACTOKEY"},"secretKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":false}}},{"name":"ACTOKEY","value":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":false},"fieldRef":{"apiVersion":"ACTOKEY","fieldPath":"ACTOKEY"},"resourceFieldRef":{"containerName":"ACTOKEY","divisor":0,"resource":"ACTOKEY"},"secretKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":false}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:31:27Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:32:29Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:32:33Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:32:33Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1965', 'uid': 'cab7a528-15e5-4890-9843-4d7681291146'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': False}, 'fieldRef': {'apiVersion': 'ACTOKEY', 'fieldPath': 'ACTOKEY'}, 'resourceFieldRef': {'containerName': 'ACTOKEY', 'divisor': '0', 'resource': 'ACTOKEY'}, 'secretKeyRef': {'key': 'ACTOKEY', 'optional': True}}}, {'name': 'ACTOKEY', 'value': 'ACTOKEY'}, {'name': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'optional': False}, 'fieldRef': {'apiVersion': 'ACTOKEY', 'fieldPath': 'ACTOKEY'}, 'resourceFieldRef': {'containerName': 'ACTOKEY', 'divisor': '1', 'resource': 'ACTOKEY'}, 'secretKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': False}}}, {'name': 'ACTOKEY', 'value': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': False}, 'fieldRef': {'apiVersion': 'ACTOKEY', 'fieldPath': 'ACTOKEY'}, 'resourceFieldRef': {'containerName': 'ACTOKEY', 'divisor': '0', 'resource': 'ACTOKEY'}, 'secretKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': False}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:31:27Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:32:32Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:32:33Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:31:29Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:39:37Z', 'message': 'pod not created', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:39:40,889 DEBUG  , Thread-4, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-wfnmx
2023-04-02 01:39:41,374 DEBUG  , Thread-4, checker.py:278, [trial: 7, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'fieldRef', 'apiVersion']] matched with [['test-cluster', 'spec', 'template', 'spec', 'containers', 0, 'env', 1, 'value_from', 'field_ref', 'api_version']]
2023-04-02 01:39:41,374 ERROR  , Thread-4, checker.py:282, [trial: 7, gen: 1] Matched delta inconsistent with input delta
2023-04-02 01:39:41,374 ERROR  , Thread-4, checker.py:283, [trial: 7, gen: 1] Input delta: not present -> ACTOKEY
2023-04-02 01:39:41,374 ERROR  , Thread-4, checker.py:284, [trial: 7, gen: 1] Matched delta: not present -> v1
2023-04-02 01:39:41,461 INFO   , Thread-4, common.py:569, [trial: 7, gen: 1] Recognized invalid input through field [name] in error message: User set image.name, using that field instead of cockroachDBVersion
2023-04-02 01:39:41,462 INFO   , Thread-4, checker.py:134, [trial: 7, gen: 1] Number of system state fields: [2085] Number of delta: [613]
2023-04-02 01:39:41,463 INFO   , Thread-4, acto.py  :301, [trial: 7, gen: 1] Setup produced invalid input
2023-04-02 01:39:41,463 WARNING, Thread-4, schema.py:573, [trial: 7, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:39:41,464 DEBUG  , Thread-4, acto.py  :458, [trial: 7, gen: 1] Run and check
2023-04-02 01:39:41,846 INFO   , Thread-4, runner.py:291, [trial: 7, gen: 1] Waiting for system to converge... 
2023-04-02 01:40:15,628 INFO   , Thread-6, runner.py:323, [trial: 10, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:40:48,921 INFO   , Thread-4, runner.py:360, [trial: 7, gen: 1] System took 00:01:07 to converge
2023-04-02 01:40:48,922 DEBUG  , Thread-4, runner.py:98, [trial: 7, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:40:48,923 DEBUG  , Thread-4, runner.py:99, [trial: 7, gen: 1] STDERR: 
2023-04-02 01:40:49,126 DEBUG  , Thread-4, runner.py:177, [trial: 7, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:32:32Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:31:27Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:39:41Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:39:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2109', 'uid': 'cab7a528-15e5-4890-9843-4d7681291146'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:39:53Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:32:32Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:32:33Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:31:29Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:39:47Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:40:49,152 DEBUG  , Thread-4, runner.py:202, [trial: 7, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-wfnmx
2023-04-02 01:40:49,574 INFO   , Thread-4, acto.py  :321, [trial: 7, gen: 1] All setups failed
2023-04-02 01:40:49,574 WARNING, Thread-4, schema.py:573, [trial: 7, gen: 3] Field [name] does not have a schema, using opaque schema
2023-04-02 01:40:49,575 INFO   , Thread-4, acto.py  :187, Trial 7 finished, completed in 00:13:04
2023-04-02 01:40:49,575 INFO   , Thread-4, acto.py  :188, ---------------------------------------

2023-04-02 01:40:49,595 DEBUG  , Thread-4, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-wfnmx
2023-04-02 01:40:59,619 INFO   , Thread-4, common.py:629, Trial testrun-crdb-whitebox/trial-03-0007 completed without error
2023-04-02 01:40:59,620 INFO   , Thread-4, acto.py  :195, Test finished
2023-04-02 01:40:59,620 INFO   , Thread-4, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"tolerations\\\", 0]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"tolerations\\\"]\"": [
        "array-deletion",
        "array-push",
        "array-pop"
    ],
    "\"[\\\"spec\\\", \\\"dataStore\\\", \\\"hostPath\\\"]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"sql\\\", \\\"tls\\\", 0, \\\"hosts\\\", 0]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"additionalArgs\\\"]\"": [
        "array-deletion",
        "array-push",
        "array-pop"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\"]\"": [
        "array-deletion",
        "array-push",
        "array-pop"
    ]
}
2023-04-02 01:41:15,709 INFO   , Thread-6, runner.py:323, [trial: 10, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:42:59,492 INFO   , Thread-6, runner.py:323, [trial: 10, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:43:59,576 INFO   , Thread-6, runner.py:323, [trial: 10, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:44:59,657 INFO   , Thread-6, runner.py:323, [trial: 10, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:45:59,741 INFO   , Thread-6, runner.py:323, [trial: 10, gen: 1] Statefulset test-cluster is not ready yet
2023-04-02 01:46:21,777 ERROR  , Thread-6, runner.py:363, [trial: 10, gen: 1] System failed to converge within 600 seconds
2023-04-02 01:46:21,778 DEBUG  , Thread-6, runner.py:98, [trial: 10, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:46:21,778 DEBUG  , Thread-6, runner.py:99, [trial: 10, gen: 1] STDERR: 
2023-04-02 01:46:21,928 DEBUG  , Thread-6, runner.py:177, [trial: 10, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:34:18Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"podEnvVariables":[{"name":"ACTOKEY","value":"ACTOKEY","valueFrom":{"configMapKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":false},"fieldRef":{"apiVersion":"ACTOKEY","fieldPath":"ACTOKEY"},"resourceFieldRef":{"containerName":"ACTOKEY","divisor":0,"resource":"ACTOKEY"},"secretKeyRef":{"key":"ACTOKEY","name":"ACTOKEY","optional":true}}}],"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:34:15Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:34:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:34:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:podEnvVariables': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:36:21Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1257', 'uid': '6d605349-d2c6-422f-8ed9-013fbc9cf1da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'podEnvVariables': [{'name': 'ACTOKEY', 'value': 'ACTOKEY', 'valueFrom': {'configMapKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': False}, 'fieldRef': {'apiVersion': 'ACTOKEY', 'fieldPath': 'ACTOKEY'}, 'resourceFieldRef': {'containerName': 'ACTOKEY', 'divisor': '0', 'resource': 'ACTOKEY'}, 'secretKeyRef': {'key': 'ACTOKEY', 'name': 'ACTOKEY', 'optional': True}}}], 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:34:29Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:34:17Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:34:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:34:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:46:21,953 DEBUG  , Thread-6, runner.py:202, [trial: 10, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-tlnfm
2023-04-02 01:46:22,462 DEBUG  , Thread-6, checker.py:278, [trial: 10, gen: 1] Input delta [['spec', 'podEnvVariables', 0, 'valueFrom', 'fieldRef', 'apiVersion']] matched with [['test-cluster-2', 'spec', 'containers', 0, 'env', 1, 'value_from', 'field_ref', 'api_version']]
2023-04-02 01:46:22,462 ERROR  , Thread-6, checker.py:282, [trial: 10, gen: 1] Matched delta inconsistent with input delta
2023-04-02 01:46:22,462 ERROR  , Thread-6, checker.py:283, [trial: 10, gen: 1] Input delta: not present -> ACTOKEY
2023-04-02 01:46:22,462 ERROR  , Thread-6, checker.py:284, [trial: 10, gen: 1] Matched delta: v1 -> not present
2023-04-02 01:46:22,702 INFO   , Thread-6, common.py:569, [trial: 10, gen: 1] Recognized invalid input through field [resource] in error message: reconciling resources on deploy action
2023-04-02 01:46:22,702 INFO   , Thread-6, checker.py:134, [trial: 10, gen: 1] Number of system state fields: [3056] Number of delta: [226]
2023-04-02 01:46:22,702 ERROR  , Thread-6, checker.py:561, [trial: 10, gen: 1] Found statefulset: test-cluster replicas [3] ready_replicas [2] with unhealthy status
2023-04-02 01:46:22,703 DEBUG  , Thread-6, acto.py  :489, [trial: 10, gen: 1] Running recovery
2023-04-02 01:46:24,671 INFO   , Thread-6, runner.py:291, [trial: 10, gen: 1] Waiting for system to converge... 
2023-04-02 01:47:44,921 INFO   , Thread-6, runner.py:360, [trial: 10, gen: 1] System took 00:01:20 to converge
2023-04-02 01:47:44,922 DEBUG  , Thread-6, runner.py:98, [trial: 10, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:47:44,922 DEBUG  , Thread-6, runner.py:99, [trial: 10, gen: 1] STDERR: 
2023-04-02 01:47:45,056 DEBUG  , Thread-6, runner.py:177, [trial: 10, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:34:18Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:34:15Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:34:19Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:46:24Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '2200', 'uid': '6d605349-d2c6-422f-8ed9-013fbc9cf1da'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:34:29Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:34:17Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:34:19Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:34:24Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:47:45,084 DEBUG  , Thread-6, runner.py:202, [trial: 10, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-tlnfm
2023-04-02 01:47:45,566 ERROR  , Thread-2, runner.py:363, [trial: 8, gen: 1] System failed to converge within 600 seconds
2023-04-02 01:47:45,572 DEBUG  , Thread-2, runner.py:98, [trial: 8, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:47:45,573 DEBUG  , Thread-2, runner.py:99, [trial: 8, gen: 1] STDERR: 
2023-04-02 01:47:45,770 INFO   , Thread-6, acto.py  :187, Trial 10 finished, completed in 00:15:53
2023-04-02 01:47:45,771 INFO   , Thread-6, acto.py  :188, ---------------------------------------

2023-04-02 01:47:45,828 DEBUG  , Thread-6, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-tlnfm
2023-04-02 01:47:45,945 DEBUG  , Thread-2, runner.py:177, [trial: 8, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:27:46Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:26:40Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:27:47Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:37:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:37:45Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '3430', 'uid': 'e0f5b915-ae55-4c91-87a2-ca1bfd05e705'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:26:40Z', 'status': 'False', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:27:45Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:27:47Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:26:42Z', 'message': 'failed to check the version of the cluster', 'status': 'Failed', 'type': 'VersionCheckerAction'}, {'lastTransitionTime': '2023-04-02T05:47:45Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:47:45,971 DEBUG  , Thread-2, runner.py:202, [trial: 8, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-mxz8l
2023-04-02 01:47:46,357 DEBUG  , Thread-2, checker.py:728, [trial: 8, gen: 1] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [root['pod']['test-cluster-0'], root['pod']['test-cluster-1'], root['pod']['test-cluster-2'], root['stateful_set']['test-cluster'], root['service']['test-cluster'], root['service']['test-cluster-public'], root['pvc']['datadir-test-cluster-0'], root['pvc']['datadir-test-cluster-1'], root['pvc']['datadir-test-cluster-2'], root['pod_disruption_budget']['test-cluster'], root['secret']['test-cluster-ca'], root['secret']['test-cluster-node'], root['secret']['test-cluster-root']]}
2023-04-02 01:47:46,359 INFO   , Thread-2, acto.py  :187, Trial 8 finished, completed in 00:24:41
2023-04-02 01:47:46,359 INFO   , Thread-2, acto.py  :188, ---------------------------------------

2023-04-02 01:47:46,388 DEBUG  , Thread-2, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-mxz8l
2023-04-02 01:48:04,826 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-1
2023-04-02 01:48:05,264 INFO   , root, kind.py  :69, Kubeconfig: /users/tylergu/.kube/kind-acto-cluster-5
2023-04-02 01:48:58,449 INFO   , Thread-2, base.py  :41, Created cluster
2023-04-02 01:48:58,456 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:49:00,115 INFO   , Thread-6, base.py  :41, Created cluster
2023-04-02 01:49:00,127 INFO   , root, kind.py  :96, Loading preload images
2023-04-02 01:49:14,723 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:49:15,909 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:49:24,811 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-02 01:49:24,811 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:49:26,002 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 01:49:26,002 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:49:27,608 DEBUG  , Thread-2, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:49:28,655 DEBUG  , Thread-6, deploy.py:75, Waiting for all pods to be ready
2023-04-02 01:49:37,704 INFO   , Thread-2, deploy.py:91, Operator ready
2023-04-02 01:49:37,704 INFO   , Thread-2, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:49:38,733 INFO   , Thread-6, deploy.py:91, Operator ready
2023-04-02 01:49:38,734 INFO   , Thread-6, deploy.py:96, All pods took 0 seconds to get ready
2023-04-02 01:50:17,825 WARNING, Thread-2, schema.py:573, [trial: 9, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:50:17,826 DEBUG  , Thread-2, acto.py  :458, [trial: 9, gen: 0] Run and check
2023-04-02 01:50:18,859 WARNING, Thread-6, schema.py:573, [trial: 11, gen: 0] Field [name] does not have a schema, using opaque schema
2023-04-02 01:50:18,859 DEBUG  , Thread-6, acto.py  :458, [trial: 11, gen: 0] Run and check
2023-04-02 01:50:21,096 INFO   , Thread-2, runner.py:291, [trial: 9, gen: 0] Waiting for system to converge... 
2023-04-02 01:50:22,191 INFO   , Thread-6, runner.py:291, [trial: 11, gen: 0] Waiting for system to converge... 
2023-04-02 01:51:21,228 INFO   , Thread-2, runner.py:360, [trial: 9, gen: 0] System took 00:01:00 to converge
2023-04-02 01:51:21,230 DEBUG  , Thread-2, runner.py:98, [trial: 9, gen: 0] STDOUT: 
2023-04-02 01:51:21,230 DEBUG  , Thread-2, runner.py:99, [trial: 9, gen: 0] STDERR: Error from server (InternalError): error when creating "testrun-crdb-whitebox/trial-01-0009/mutated-0.yaml": Internal error occurred: failed calling webhook "mcrdbcluster.kb.io": failed to call webhook: Post "https://cockroach-operator-webhook-service.cockroach-operator-system.svc:443/mutate-crdb-cockroachlabs-com-v1alpha1-crdbcluster?timeout=10s": dial tcp 10.96.94.114:443: connect: connection refused

2023-04-02 01:51:21,340 DEBUG  , Thread-2, runner.py:177, [trial: 9, gen: 0] {}
2023-04-02 01:51:21,340 ERROR  , Thread-2, runner.py:107, [trial: 9, gen: 0] Bug! Exception raised when waiting for converge.
Traceback (most recent call last):
  File "/users/tylergu/acto/runner.py", line 103, in run
    system_state = self.collect_system_state()
  File "/users/tylergu/acto/runner.py", line 180, in collect_system_state
    if 'spec' in current_cr['test-cluster'] else None
KeyError: 'test-cluster'
2023-04-02 01:51:21,341 INFO   , Thread-2, checker.py:103, [trial: 9, gen: 0] Connection refused, reject mutation
2023-04-02 01:51:21,341 INFO   , Thread-2, acto.py  :472, [trial: 9, gen: 0] Connection failed. Retry the test after 20 seconds
2023-04-02 01:51:33,303 INFO   , Thread-6, runner.py:360, [trial: 11, gen: 0] System took 00:01:11 to converge
2023-04-02 01:51:33,304 DEBUG  , Thread-6, runner.py:98, [trial: 11, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:51:33,305 DEBUG  , Thread-6, runner.py:99, [trial: 11, gen: 0] STDERR: 
2023-04-02 01:51:33,483 DEBUG  , Thread-6, runner.py:177, [trial: 11, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:50:25Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:50:22Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:50:22Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:50:36Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1085', 'uid': '44724dd1-1cdc-432d-bc5c-8851b91b3f17'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:50:36Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:50:24Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:50:26Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:50:31Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:51:33,510 DEBUG  , Thread-6, runner.py:202, [trial: 11, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-pfcj4
2023-04-02 01:51:33,704 WARNING, Thread-6, schema.py:573, [trial: 11, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:51:33,705 INFO   , Thread-6, input.py :723, [trial: 11, gen: 1] Progress [1] cases left
2023-04-02 01:51:33,705 DEBUG  , Thread-6, test_case.py:51, [trial: 11, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 01:51:33,705 INFO   , Thread-6, acto.py  :263, [trial: 11, gen: 1] Precondition of ['spec', 'podEnvVariables', 0] satisfies
2023-04-02 01:51:33,705 INFO   , Thread-6, acto.py  :323, [trial: 11, gen: 1] Running bundled testcases
2023-04-02 01:51:33,705 DEBUG  , Thread-6, test_case.py:51, [trial: 11, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 01:51:33,705 INFO   , Thread-6, acto.py  :107, [trial: 11, gen: 1] JSON patch: [{"op": "add", "path": "/spec/podEnvVariables", "value": [{}]}]
2023-04-02 01:51:33,705 DEBUG  , Thread-6, acto.py  :458, [trial: 11, gen: 1] Run and check
2023-04-02 01:51:34,017 INFO   , Thread-6, runner.py:291, [trial: 11, gen: 1] Waiting for system to converge... 
2023-04-02 01:51:41,759 INFO   , Thread-2, runner.py:291, [trial: 9, gen: 0] Waiting for system to converge... 
2023-04-02 01:52:34,133 INFO   , Thread-6, runner.py:360, [trial: 11, gen: 1] System took 00:01:00 to converge
2023-04-02 01:52:34,134 DEBUG  , Thread-6, runner.py:98, [trial: 11, gen: 1] STDOUT: 
2023-04-02 01:52:34,135 DEBUG  , Thread-6, runner.py:99, [trial: 11, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-05-0011/mutated-1.yaml": error validating data: ValidationError(CrdbCluster.spec.podEnvVariables[0]): missing required field "name" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.podEnvVariables; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 01:52:34,271 DEBUG  , Thread-6, runner.py:177, [trial: 11, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:50:25Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:50:22Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:50:22Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:50:36Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1085', 'uid': '44724dd1-1cdc-432d-bc5c-8851b91b3f17'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:50:36Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:50:24Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:50:26Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:50:31Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:52:34,298 DEBUG  , Thread-6, runner.py:202, [trial: 11, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-pfcj4
2023-04-02 01:52:34,620 INFO   , Thread-6, checker.py:213, [trial: 11, gen: 1] Invalid input, reject mutation
2023-04-02 01:52:34,620 INFO   , Thread-6, checker.py:214, [trial: 11, gen: 1] STDOUT: 
2023-04-02 01:52:34,620 INFO   , Thread-6, checker.py:215, [trial: 11, gen: 1] STDERR: error: error validating "testrun-crdb-whitebox/trial-05-0011/mutated-1.yaml": error validating data: ValidationError(CrdbCluster.spec.podEnvVariables[0]): missing required field "name" in com.cockroachlabs.crdb.v1alpha1.CrdbCluster.spec.podEnvVariables; if you choose to ignore these errors, turn validation off with --validate=false

2023-04-02 01:52:35,049 INFO   , Thread-6, checker.py:134, [trial: 11, gen: 1] Number of system state fields: [3456] Number of delta: [0]
2023-04-02 01:52:35,051 DEBUG  , Thread-6, acto.py  :374, [trial: 11, gen: 1] Invalid input, revert
2023-04-02 01:52:35,051 WARNING, Thread-6, schema.py:573, [trial: 11, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:52:35,052 DEBUG  , Thread-6, acto.py  :458, [trial: 11, gen: 1] Run and check
2023-04-02 01:52:35,429 INFO   , Thread-6, runner.py:291, [trial: 11, gen: 1] Waiting for system to converge... 
2023-04-02 01:52:52,740 INFO   , Thread-2, runner.py:360, [trial: 9, gen: 0] System took 00:01:10 to converge
2023-04-02 01:52:52,742 DEBUG  , Thread-2, runner.py:98, [trial: 9, gen: 0] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster created

2023-04-02 01:52:52,742 DEBUG  , Thread-2, runner.py:99, [trial: 9, gen: 0] STDERR: 
2023-04-02 01:52:52,978 DEBUG  , Thread-2, runner.py:177, [trial: 9, gen: 0] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:51:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:51:41Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:51:41Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:51:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:51:45Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1190', 'uid': '93213a02-b271-4d87-936c-53cf3fe0a890'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:51:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:51:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:51:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:51:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:52:53,010 DEBUG  , Thread-2, runner.py:202, [trial: 9, gen: 0] Got operator pod: pod name:cockroach-operator-manager-64c489884-wmz2c
2023-04-02 01:52:53,187 WARNING, Thread-2, schema.py:573, [trial: 9, gen: 1] Field [name] does not have a schema, using opaque schema
2023-04-02 01:52:53,188 INFO   , Thread-2, input.py :723, [trial: 9, gen: 1] Progress [4] cases left
2023-04-02 01:52:53,188 DEBUG  , Thread-2, test_case.py:51, [trial: 9, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 01:52:53,188 INFO   , Thread-2, acto.py  :263, [trial: 9, gen: 1] Precondition of ['spec', 'nodeSelector'] satisfies
2023-04-02 01:52:53,188 INFO   , Thread-2, acto.py  :323, [trial: 9, gen: 1] Running bundled testcases
2023-04-02 01:52:53,188 DEBUG  , Thread-2, test_case.py:51, [trial: 9, gen: 1] Precondition [empty_precondition] Result [True]
2023-04-02 01:52:53,188 INFO   , Thread-2, acto.py  :107, [trial: 9, gen: 1] JSON patch: [{"op": "add", "path": "/spec/nodeSelector", "value": {}}]
2023-04-02 01:52:53,189 DEBUG  , Thread-2, acto.py  :458, [trial: 9, gen: 1] Run and check
2023-04-02 01:52:53,528 INFO   , Thread-2, runner.py:291, [trial: 9, gen: 1] Waiting for system to converge... 
2023-04-02 01:53:35,558 INFO   , Thread-6, runner.py:360, [trial: 11, gen: 1] System took 00:01:00 to converge
2023-04-02 01:53:35,560 DEBUG  , Thread-6, runner.py:98, [trial: 11, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:53:35,560 DEBUG  , Thread-6, runner.py:99, [trial: 11, gen: 1] STDERR: 
2023-04-02 01:53:35,709 DEBUG  , Thread-6, runner.py:177, [trial: 11, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:50:25Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:50:22Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:50:22Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:50:36Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1289', 'uid': '44724dd1-1cdc-432d-bc5c-8851b91b3f17'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:50:36Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:50:24Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:50:26Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:50:31Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:53:35,736 DEBUG  , Thread-6, runner.py:202, [trial: 11, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-pfcj4
2023-04-02 01:53:36,478 DEBUG  , Thread-6, acto.py  :383, [trial: 11, gen: 1] Only one patch, no need to isolate
2023-04-02 01:53:36,479 INFO   , Thread-6, acto.py  :339, [trial: 11, gen: 1] Input model is empty, break
2023-04-02 01:53:36,481 INFO   , Thread-6, acto.py  :187, Trial 11 finished, completed in 00:05:40
2023-04-02 01:53:36,481 INFO   , Thread-6, acto.py  :188, ---------------------------------------

2023-04-02 01:53:36,516 DEBUG  , Thread-6, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-pfcj4
2023-04-02 01:53:46,538 INFO   , Thread-6, common.py:629, Trial testrun-crdb-whitebox/trial-05-0011 completed without error
2023-04-02 01:53:46,539 INFO   , Thread-6, acto.py  :195, Test finished
2023-04-02 01:53:46,539 INFO   , Thread-6, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"sql\\\", \\\"tls\\\", 0, \\\"hosts\\\"]\"": [
        "array-pop"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"resourceFieldRef\\\", \\\"resource\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"ingress\\\", \\\"sql\\\"]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"affinity\\\"]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"secretKeyRef\\\", \\\"name\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0]\"": [
        "object-deletion"
    ]
}
2023-04-02 01:53:53,655 INFO   , Thread-2, runner.py:360, [trial: 9, gen: 1] System took 00:01:00 to converge
2023-04-02 01:53:53,656 DEBUG  , Thread-2, runner.py:98, [trial: 9, gen: 1] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:53:53,656 DEBUG  , Thread-2, runner.py:99, [trial: 9, gen: 1] STDERR: 
2023-04-02 01:53:53,835 DEBUG  , Thread-2, runner.py:177, [trial: 9, gen: 1] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:51:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodeSelector":{},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:51:41Z', 'generation': 1, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:crdb.io/certexpiration': {}}}, 'f:status': {'f:crdbcontainerimage': {}, 'f:version': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:51:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}, 'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:51:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodeSelector': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:52:53Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1306', 'uid': '93213a02-b271-4d87-936c-53cf3fe0a890'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:51:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:51:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:51:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:51:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}], 'version': 'v21.2.10'}}}
2023-04-02 01:53:53,860 DEBUG  , Thread-2, runner.py:202, [trial: 9, gen: 1] Got operator pod: pod name:cockroach-operator-manager-64c489884-wmz2c
2023-04-02 01:53:54,594 INFO   , Thread-2, checker.py:134, [trial: 9, gen: 1] Number of system state fields: [3456] Number of delta: [0]
2023-04-02 01:53:54,595 WARNING, Thread-2, schema.py:573, [trial: 9, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 01:53:54,595 INFO   , Thread-2, input.py :723, [trial: 9, gen: 2] Progress [3] cases left
2023-04-02 01:53:54,595 DEBUG  , Thread-2, test_case.py:51, [trial: 9, gen: 2] Precondition [delete_precondition] Result [False]
2023-04-02 01:53:54,595 INFO   , Thread-2, acto.py  :267, [trial: 9, gen: 2] Precondition of ["spec", "additionalLabels", "ACTOKEY"] fails, try setup first
2023-04-02 01:53:54,595 INFO   , Thread-2, acto.py  :107, [trial: 9, gen: 2] JSON patch: [{"op": "add", "path": "/spec/additionalLabels/ACTOKEY", "value": "ACTOKEY"}]
2023-04-02 01:53:54,595 DEBUG  , Thread-2, test_case.py:51, [trial: 9, gen: 2] Precondition [delete_precondition] Result [True]
2023-04-02 01:53:54,596 DEBUG  , Thread-2, acto.py  :458, [trial: 9, gen: 2] Run and check
2023-04-02 01:53:54,955 INFO   , Thread-2, runner.py:291, [trial: 9, gen: 2] Waiting for system to converge... 
2023-04-02 01:54:55,072 INFO   , Thread-2, runner.py:360, [trial: 9, gen: 2] System took 00:01:00 to converge
2023-04-02 01:54:55,073 DEBUG  , Thread-2, runner.py:98, [trial: 9, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:54:55,073 DEBUG  , Thread-2, runner.py:99, [trial: 9, gen: 2] STDERR: 
2023-04-02 01:54:55,205 DEBUG  , Thread-2, runner.py:177, [trial: 9, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:51:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"ACTOKEY":"ACTOKEY","crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodeSelector":{},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:51:41Z', 'generation': 2, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:51:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:ACTOKEY': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodeSelector': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:53:54Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:53:55Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1455', 'uid': '93213a02-b271-4d87-936c-53cf3fe0a890'}, 'spec': {'additionalLabels': {'ACTOKEY': 'ACTOKEY', 'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:51:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:51:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:51:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:51:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:54:23Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 01:54:55,230 DEBUG  , Thread-2, runner.py:202, [trial: 9, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-wmz2c
2023-04-02 01:54:55,759 DEBUG  , Thread-2, checker.py:278, [trial: 9, gen: 2] Input delta [['spec', 'additionalLabels', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'labels', 'ACTOKEY']]
2023-04-02 01:54:55,760 DEBUG  , Thread-2, checker.py:278, [trial: 9, gen: 2] Input delta [['spec', 'additionalLabels', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'selector', 'ACTOKEY']]
2023-04-02 01:54:55,760 DEBUG  , Thread-2, checker.py:278, [trial: 9, gen: 2] Input delta [['spec', 'additionalLabels', 'ACTOKEY']] matched with [['test-cluster-public', 'metadata', 'labels', 'ACTOKEY']]
2023-04-02 01:54:55,760 DEBUG  , Thread-2, checker.py:278, [trial: 9, gen: 2] Input delta [['spec', 'additionalLabels', 'ACTOKEY']] matched with [['test-cluster-public', 'spec', 'selector', 'ACTOKEY']]
2023-04-02 01:54:55,760 DEBUG  , Thread-2, checker.py:278, [trial: 9, gen: 2] Input delta [['spec', 'additionalLabels', 'ACTOKEY']] matched with [['test-cluster', 'metadata', 'labels', 'ACTOKEY']]
2023-04-02 01:54:55,760 DEBUG  , Thread-2, checker.py:278, [trial: 9, gen: 2] Input delta [['spec', 'additionalLabels', 'ACTOKEY']] matched with [['test-cluster-public', 'metadata', 'labels', 'ACTOKEY']]
2023-04-02 01:54:55,964 INFO   , Thread-2, common.py:560, [trial: 9, gen: 2] Recognized invalid input through regex: failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than 'replicas', 'template', 'updateStrategy' and 'minReadySeconds' are forbidden
2023-04-02 01:54:55,964 INFO   , Thread-2, checker.py:134, [trial: 9, gen: 2] Number of system state fields: [3383] Number of delta: [78]
2023-04-02 01:54:55,965 INFO   , Thread-2, acto.py  :301, [trial: 9, gen: 2] Setup produced invalid input
2023-04-02 01:54:55,966 WARNING, Thread-2, schema.py:573, [trial: 9, gen: 2] Field [name] does not have a schema, using opaque schema
2023-04-02 01:54:55,966 DEBUG  , Thread-2, acto.py  :458, [trial: 9, gen: 2] Run and check
2023-04-02 01:54:56,323 INFO   , Thread-2, runner.py:291, [trial: 9, gen: 2] Waiting for system to converge... 
2023-04-02 01:55:56,462 INFO   , Thread-2, runner.py:360, [trial: 9, gen: 2] System took 00:01:00 to converge
2023-04-02 01:55:56,464 DEBUG  , Thread-2, runner.py:98, [trial: 9, gen: 2] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:55:56,464 DEBUG  , Thread-2, runner.py:99, [trial: 9, gen: 2] STDERR: 
2023-04-02 01:55:56,600 DEBUG  , Thread-2, runner.py:177, [trial: 9, gen: 2] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:51:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodeSelector":{},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:51:41Z', 'generation': 3, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:clusterStatus': {}, 'f:conditions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:51:45Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:53:55Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodeSelector': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:54:56Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1504', 'uid': '93213a02-b271-4d87-936c-53cf3fe0a890'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:51:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:51:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:51:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:51:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:54:23Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 01:55:56,626 DEBUG  , Thread-2, runner.py:202, [trial: 9, gen: 2] Got operator pod: pod name:cockroach-operator-manager-64c489884-wmz2c
2023-04-02 01:55:57,367 INFO   , Thread-2, acto.py  :321, [trial: 9, gen: 2] All setups failed
2023-04-02 01:55:57,367 WARNING, Thread-2, schema.py:573, [trial: 9, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-02 01:55:57,367 INFO   , Thread-2, input.py :723, [trial: 9, gen: 4] Progress [2] cases left
2023-04-02 01:55:57,367 DEBUG  , Thread-2, test_case.py:51, [trial: 9, gen: 4] Precondition [change_precondition] Result [False]
2023-04-02 01:55:57,367 INFO   , Thread-2, acto.py  :267, [trial: 9, gen: 4] Precondition of ["spec", "additionalLabels", "ACTOKEY"] fails, try setup first
2023-04-02 01:55:57,368 INFO   , Thread-2, acto.py  :107, [trial: 9, gen: 4] JSON patch: [{"op": "add", "path": "/spec/additionalLabels/ACTOKEY", "value": "ACTOKEY"}]
2023-04-02 01:55:57,368 DEBUG  , Thread-2, test_case.py:51, [trial: 9, gen: 4] Precondition [change_precondition] Result [True]
2023-04-02 01:55:57,368 DEBUG  , Thread-2, acto.py  :458, [trial: 9, gen: 4] Run and check
2023-04-02 01:55:57,696 INFO   , Thread-2, runner.py:291, [trial: 9, gen: 4] Waiting for system to converge... 
2023-04-02 01:56:57,828 INFO   , Thread-2, runner.py:360, [trial: 9, gen: 4] System took 00:01:00 to converge
2023-04-02 01:56:57,829 DEBUG  , Thread-2, runner.py:98, [trial: 9, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:56:57,829 DEBUG  , Thread-2, runner.py:99, [trial: 9, gen: 4] STDERR: 
2023-04-02 01:56:57,965 DEBUG  , Thread-2, runner.py:177, [trial: 9, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:51:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"ACTOKEY":"ACTOKEY","crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodeSelector":{},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:51:41Z', 'generation': 4, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'subresource': 'status', 'time': '2023-04-02T05:55:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:ACTOKEY': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodeSelector': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:55:57Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1639', 'uid': '93213a02-b271-4d87-936c-53cf3fe0a890'}, 'spec': {'additionalLabels': {'ACTOKEY': 'ACTOKEY', 'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:51:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:51:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:51:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:51:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:56:13Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 01:56:57,991 DEBUG  , Thread-2, runner.py:202, [trial: 9, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-wmz2c
2023-04-02 01:56:58,522 DEBUG  , Thread-2, checker.py:278, [trial: 9, gen: 4] Input delta [['spec', 'additionalLabels', 'ACTOKEY']] matched with [['test-cluster', 'spec', 'selector', 'ACTOKEY']]
2023-04-02 01:56:58,522 DEBUG  , Thread-2, checker.py:278, [trial: 9, gen: 4] Input delta [['spec', 'additionalLabels', 'ACTOKEY']] matched with [['test-cluster-public', 'spec', 'selector', 'ACTOKEY']]
2023-04-02 01:56:58,736 INFO   , Thread-2, common.py:560, [trial: 9, gen: 4] Recognized invalid input through regex: failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than 'replicas', 'template', 'updateStrategy' and 'minReadySeconds' are forbidden
2023-04-02 01:56:58,736 INFO   , Thread-2, checker.py:134, [trial: 9, gen: 4] Number of system state fields: [3383] Number of delta: [71]
2023-04-02 01:56:58,738 INFO   , Thread-2, acto.py  :301, [trial: 9, gen: 4] Setup produced invalid input
2023-04-02 01:56:58,738 WARNING, Thread-2, schema.py:573, [trial: 9, gen: 4] Field [name] does not have a schema, using opaque schema
2023-04-02 01:56:58,739 DEBUG  , Thread-2, acto.py  :458, [trial: 9, gen: 4] Run and check
2023-04-02 01:56:59,087 INFO   , Thread-2, runner.py:291, [trial: 9, gen: 4] Waiting for system to converge... 
2023-04-02 01:57:59,216 INFO   , Thread-2, runner.py:360, [trial: 9, gen: 4] System took 00:01:00 to converge
2023-04-02 01:57:59,217 DEBUG  , Thread-2, runner.py:98, [trial: 9, gen: 4] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:57:59,217 DEBUG  , Thread-2, runner.py:99, [trial: 9, gen: 4] STDERR: 
2023-04-02 01:57:59,354 DEBUG  , Thread-2, runner.py:177, [trial: 9, gen: 4] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:51:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodeSelector":{},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:51:41Z', 'generation': 5, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:55:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodeSelector': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:56:59Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1706', 'uid': '93213a02-b271-4d87-936c-53cf3fe0a890'}, 'spec': {'additionalLabels': {'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:51:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:51:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:51:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:51:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:56:13Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 01:57:59,382 DEBUG  , Thread-2, runner.py:202, [trial: 9, gen: 4] Got operator pod: pod name:cockroach-operator-manager-64c489884-wmz2c
2023-04-02 01:58:00,134 INFO   , Thread-2, acto.py  :321, [trial: 9, gen: 4] All setups failed
2023-04-02 01:58:00,134 WARNING, Thread-2, schema.py:573, [trial: 9, gen: 6] Field [name] does not have a schema, using opaque schema
2023-04-02 01:58:00,134 INFO   , Thread-2, input.py :723, [trial: 9, gen: 6] Progress [1] cases left
2023-04-02 01:58:00,134 DEBUG  , Thread-2, test_case.py:51, [trial: 9, gen: 6] Precondition [empty_precondition] Result [True]
2023-04-02 01:58:00,134 INFO   , Thread-2, acto.py  :263, [trial: 9, gen: 6] Precondition of ['spec', 'additionalLabels', 'ACTOKEY'] satisfies
2023-04-02 01:58:00,134 INFO   , Thread-2, acto.py  :323, [trial: 9, gen: 6] Running bundled testcases
2023-04-02 01:58:00,135 DEBUG  , Thread-2, test_case.py:51, [trial: 9, gen: 6] Precondition [empty_precondition] Result [True]
2023-04-02 01:58:00,135 INFO   , Thread-2, acto.py  :107, [trial: 9, gen: 6] JSON patch: [{"op": "add", "path": "/spec/additionalLabels/ACTOKEY", "value": ""}]
2023-04-02 01:58:00,135 DEBUG  , Thread-2, acto.py  :458, [trial: 9, gen: 6] Run and check
2023-04-02 01:58:00,460 INFO   , Thread-2, runner.py:291, [trial: 9, gen: 6] Waiting for system to converge... 
2023-04-02 01:59:00,581 INFO   , Thread-2, runner.py:360, [trial: 9, gen: 6] System took 00:01:00 to converge
2023-04-02 01:59:00,582 DEBUG  , Thread-2, runner.py:98, [trial: 9, gen: 6] STDOUT: crdbcluster.crdb.cockroachlabs.com/test-cluster configured

2023-04-02 01:59:00,582 DEBUG  , Thread-2, runner.py:99, [trial: 9, gen: 6] STDERR: 
2023-04-02 01:59:00,724 DEBUG  , Thread-2, runner.py:177, [trial: 9, gen: 6] {'test-cluster': {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'kind': 'CrdbCluster', 'metadata': {'annotations': {'crdb.io/certexpiration': '2028-04-05T05:51:45Z', 'crdb.io/containerimage': 'cockroachdb/cockroach:v21.2.10', 'crdb.io/version': 'v21.2.10', 'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"crdb.cockroachlabs.com/v1alpha1","kind":"CrdbCluster","metadata":{"annotations":{},"name":"test-cluster","namespace":"cockroach-operator-system"},"spec":{"additionalLabels":{"ACTOKEY":"","crdb":"is-cool"},"dataStore":{"pvc":{"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"volumeMode":"Filesystem"}}},"image":{"name":"cockroachdb/cockroach:v21.2.10"},"nodeSelector":{},"nodes":3,"resources":{"limits":{"cpu":2,"memory":"2Gi"},"requests":{"cpu":"100m","memory":"1Gi"}},"tlsEnabled":true}}\n'}, 'creationTimestamp': '2023-04-02T05:51:41Z', 'generation': 6, 'managedFields': [{'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'f:operatorActions': {}}}, 'manager': 'cockroach-operator', 'operation': 'Update', 'time': '2023-04-02T05:55:57Z'}, {'apiVersion': 'crdb.cockroachlabs.com/v1alpha1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}}, 'f:spec': {'.': {}, 'f:additionalLabels': {'.': {}, 'f:ACTOKEY': {}, 'f:crdb': {}}, 'f:dataStore': {'.': {}, 'f:pvc': {'.': {}, 'f:spec': {'.': {}, 'f:accessModes': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:storage': {}}}, 'f:volumeMode': {}}}}, 'f:image': {'.': {}, 'f:name': {}}, 'f:nodeSelector': {}, 'f:nodes': {}, 'f:resources': {'.': {}, 'f:limits': {'.': {}, 'f:cpu': {}, 'f:memory': {}}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:tlsEnabled': {}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2023-04-02T05:58:00Z'}], 'name': 'test-cluster', 'namespace': 'cockroach-operator-system', 'resourceVersion': '1805', 'uid': '93213a02-b271-4d87-936c-53cf3fe0a890'}, 'spec': {'additionalLabels': {'ACTOKEY': '', 'crdb': 'is-cool'}, 'dataStore': {'pvc': {'source': {'claimName': ''}, 'spec': {'accessModes': ['ReadWriteOnce'], 'resources': {'requests': {'storage': '1Gi'}}, 'volumeMode': 'Filesystem'}}, 'supportsAutoResize': False}, 'grpcPort': 26258, 'httpPort': 8080, 'image': {'name': 'cockroachdb/cockroach:v21.2.10', 'pullPolicy': 'IfNotPresent'}, 'maxUnavailable': 1, 'nodes': 3, 'resources': {'limits': {'cpu': '2', 'memory': '2Gi'}, 'requests': {'cpu': '100m', 'memory': '1Gi'}}, 'sqlPort': 26257, 'tlsEnabled': True}, 'status': {'clusterStatus': 'Failed', 'conditions': [{'lastTransitionTime': '2023-04-02T05:51:55Z', 'status': 'True', 'type': 'Initialized'}, {'lastTransitionTime': '2023-04-02T05:51:44Z', 'status': 'True', 'type': 'CrdbVersionChecked'}, {'lastTransitionTime': '2023-04-02T05:51:45Z', 'status': 'True', 'type': 'CertificateGenerated'}], 'crdbcontainerimage': 'cockroachdb/cockroach:v21.2.10', 'operatorActions': [{'lastTransitionTime': '2023-04-02T05:51:50Z', 'message': 'pod is not running', 'status': 'Failed', 'type': 'Initialize'}, {'lastTransitionTime': '2023-04-02T05:56:13Z', 'message': 'failed to reconcile test-cluster: StatefulSet.apps "test-cluster" is invalid: spec: Forbidden: updates to statefulset spec for fields other than \'replicas\', \'template\', \'updateStrategy\' and \'minReadySeconds\' are forbidden', 'status': 'Failed', 'type': 'Deploy'}], 'version': 'v21.2.10'}}}
2023-04-02 01:59:00,752 DEBUG  , Thread-2, runner.py:202, [trial: 9, gen: 6] Got operator pod: pod name:cockroach-operator-manager-64c489884-wmz2c
2023-04-02 01:59:01,493 INFO   , Thread-2, checker.py:134, [trial: 9, gen: 6] Number of system state fields: [3383] Number of delta: [74]
2023-04-02 01:59:01,494 INFO   , Thread-2, acto.py  :339, [trial: 9, gen: 6] Input model is empty, break
2023-04-02 01:59:01,496 INFO   , Thread-2, acto.py  :187, Trial 9 finished, completed in 00:11:05
2023-04-02 01:59:01,496 INFO   , Thread-2, acto.py  :188, ---------------------------------------

2023-04-02 01:59:01,515 DEBUG  , Thread-2, k8s_helper.py:115, Got operator pod: pod name:cockroach-operator-manager-64c489884-wmz2c
2023-04-02 01:59:11,546 INFO   , Thread-2, common.py:629, Trial testrun-crdb-whitebox/trial-01-0009 completed without error
2023-04-02 01:59:11,546 INFO   , Thread-2, acto.py  :195, Test finished
2023-04-02 01:59:11,546 INFO   , Thread-2, acto.py  :198, Failed test cases: {
    "\"[\\\"spec\\\", \\\"dataStore\\\", \\\"pvc\\\", \\\"spec\\\", \\\"volumeName\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"topologySpreadConstraints\\\"]\"": [
        "array-deletion",
        "array-push",
        "array-pop"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"fieldRef\\\", \\\"apiVersion\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"podEnvVariables\\\", 0, \\\"valueFrom\\\", \\\"secretKeyRef\\\", \\\"key\\\"]\"": [
        "string-deletion",
        "string-change"
    ],
    "\"[\\\"spec\\\", \\\"nodeSelector\\\"]\"": [
        "object-deletion"
    ],
    "\"[\\\"spec\\\", \\\"additionalLabels\\\", \\\"ACTOKEY\\\"]\"": [
        "string-deletion",
        "string-change"
    ]
}
2023-04-02 01:59:11,548 INFO   , MainThread, acto.py  :827, All tests finished
2023-04-02 01:59:11,549 INFO   , MainThread, acto.py  :1010, Acto finished in 2:50:25.761593
