{"level":"info","ts":1680280791.9408703,"logger":"controller_psmdb","msg":"Set allowUnsafeConfigurations=true to disable safe configuration"}
{"level":"info","ts":1680280791.9408755,"logger":"controller_psmdb","msg":"Replset size will be changed from 2 to 4 due to safe config"}
{"level":"info","ts":1680280791.940879,"logger":"controller_psmdb","msg":"Set allowUnsafeConfigurations=true to disable safe configuration"}
{"level":"info","ts":1680280791.9409854,"logger":"controller_psmdb","msg":"Replset size will be increased from 2 to 3"}
{"level":"info","ts":1680280791.9409938,"logger":"controller_psmdb","msg":"Set allowUnsafeConfigurations=true to disable safe configuration"}
{"level":"info","ts":1680280791.9410012,"logger":"controller_psmdb","msg":"Point-in-time recovery can be enabled only if one bucket is used in spec.backup.storages"}
{"level":"error","ts":1680280801.950812,"logger":"controller_psmdb","msg":"Cluster crashed, trying to recover","cluster":"test-cluster","error":"ping mongo: server selection error: context deadline exceeded, current topology: { Type: ReplicaSetNoPrimary, Servers: [{ Addr: test-cluster-cfg-2.test-cluster-cfg.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-cfg-2.test-cluster-cfg.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-cfg-1.test-cluster-cfg.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-cfg-1.test-cluster-cfg.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-cfg-0.test-cluster-cfg.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-cfg-0.test-cluster-cfg.acto-namespace.actokey on 10.96.0.10:53: no such host }, ] }","errorVerbose":"server selection error: context deadline exceeded, current topology: { Type: ReplicaSetNoPrimary, Servers: [{ Addr: test-cluster-cfg-2.test-cluster-cfg.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-cfg-2.test-cluster-cfg.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-cfg-1.test-cluster-cfg.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-cfg-1.test-cluster-cfg.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-cfg-0.test-cluster-cfg.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-cfg-0.test-cluster-cfg.acto-namespace.actokey on 10.96.0.10:53: no such host }, ] }\nping mongo\ngithub.com/percona/percona-server-mongodb-operator/pkg/psmdb/mongo.Dial\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/psmdb/mongo/mongo.go:64\ngithub.com/percona/percona-server-mongodb-operator/pkg/psmdb.MongoClient\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/psmdb/client.go:47\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).mongoClientWithRole\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/connections.go:21\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:75\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581","stacktrace":"github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:86\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227"}
{"level":"info","ts":1680280801.9781816,"logger":"controller_psmdb","msg":"Writing replicaset config","config":{"_id":"cfg","version":175908,"members":[{"_id":0,"host":"test-cluster-cfg-1.acto-namespace.ACTOKEY:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":2,"tags":{"podName":"test-cluster-cfg-1","serviceName":"test-cluster"},"slaveDelay":0,"votes":1},{"_id":1,"host":"test-cluster-cfg-2.acto-namespace.ACTOKEY:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":2,"tags":{"podName":"test-cluster-cfg-2","serviceName":"test-cluster"},"slaveDelay":0,"votes":1},{"_id":2,"host":"test-cluster-cfg-0.acto-namespace.ACTOKEY:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":2,"tags":{"podName":"test-cluster-cfg-0","serviceName":"test-cluster"},"slaveDelay":0,"votes":1}],"configsvr":true,"protocolVersion":1,"settings":{"chainingAllowed":true,"heartbeatIntervalMillis":2000,"heartbeatTimeoutSecs":10,"electionTimeoutMillis":10000,"catchUpTimeoutMillis":-1,"getLastErrorDefaults":{"w":1,"wtimeout":0},"replicaSetId":"64270a508792a14a0e052ea4"},"writeConcernMajorityJournalDefault":true}}
{"level":"error","ts":1680280801.9999328,"logger":"controller_psmdb","msg":"failed to reconcile cluster","Request.Namespace":"acto-namespace","Request.Name":"test-cluster","replset":"cfg","error":"force reconfig to recover: write mongo config: replSetReconfig: (NodeNotFound) No host described in new configuration with {version: 242456, term: -1} for replica set cfg maps to this node","errorVerbose":"(NodeNotFound) No host described in new configuration with {version: 242456, term: -1} for replica set cfg maps to this node\nreplSetReconfig\ngithub.com/percona/percona-server-mongodb-operator/pkg/psmdb/mongo.WriteConfig\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/psmdb/mongo/mongo.go:232\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).recoverReplsetNoPrimary\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:690\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:87\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581\nwrite mongo config\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).recoverReplsetNoPrimary\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:691\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:87\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581\nforce reconfig to recover\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:88\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227"}
{"level":"error","ts":1680280812.0176256,"logger":"controller_psmdb","msg":"Cluster crashed, trying to recover","cluster":"test-cluster","error":"ping mongo: server selection error: context deadline exceeded, current topology: { Type: ReplicaSetNoPrimary, Servers: [{ Addr: test-cluster-rs0-nv-0.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-nv-0.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-nv-1.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-nv-1.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-0.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-0.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-arbiter-0.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-arbiter-0.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-1.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-1.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-2.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-2.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-3.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-3.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, ] }","errorVerbose":"server selection error: context deadline exceeded, current topology: { Type: ReplicaSetNoPrimary, Servers: [{ Addr: test-cluster-rs0-nv-0.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-nv-0.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-nv-1.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-nv-1.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-0.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-0.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-arbiter-0.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-arbiter-0.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-1.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-1.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-2.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-2.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-3.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-3.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, ] }\nping mongo\ngithub.com/percona/percona-server-mongodb-operator/pkg/psmdb/mongo.Dial\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/psmdb/mongo/mongo.go:64\ngithub.com/percona/percona-server-mongodb-operator/pkg/psmdb.MongoClient\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/psmdb/client.go:47\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).mongoClientWithRole\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/connections.go:21\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:75\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581","stacktrace":"github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:86\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227"}
{"level":"info","ts":1680280812.0435781,"logger":"controller_psmdb","msg":"Writing replicaset config","config":{"_id":"rs0","version":2974519,"members":[{"_id":0,"host":"test-cluster-rs0-0.acto-namespace.ACTOKEY:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":2,"tags":{"podName":"test-cluster-rs0-0","serviceName":"test-cluster"},"slaveDelay":0,"votes":1},{"_id":1,"host":"test-cluster-rs0-nv-0.acto-namespace.ACTOKEY:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":0,"tags":{"nonVoting":"true","podName":"test-cluster-rs0-nv-0","serviceName":"test-cluster"},"slaveDelay":0,"votes":0},{"_id":2,"host":"test-cluster-rs0-nv-1.acto-namespace.ACTOKEY:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":0,"tags":{"nonVoting":"true","podName":"test-cluster-rs0-nv-1","serviceName":"test-cluster"},"slaveDelay":0,"votes":0},{"_id":3,"host":"test-cluster-rs0-1.acto-namespace.ACTOKEY:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":2,"tags":{"podName":"test-cluster-rs0-1","serviceName":"test-cluster"},"slaveDelay":0,"votes":1},{"_id":4,"host":"test-cluster-rs0-2.acto-namespace.ACTOKEY:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":2,"tags":{"podName":"test-cluster-rs0-2","serviceName":"test-cluster"},"slaveDelay":0,"votes":1},{"_id":5,"host":"test-cluster-rs0-3.acto-namespace.ACTOKEY:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":2,"tags":{"podName":"test-cluster-rs0-3","serviceName":"test-cluster"},"slaveDelay":0,"votes":1},{"_id":6,"host":"10.96.167.74:27017","arbiterOnly":true,"buildIndexes":true,"hidden":false,"priority":0,"slaveDelay":0,"votes":1}],"protocolVersion":1,"settings":{"chainingAllowed":true,"heartbeatIntervalMillis":2000,"heartbeatTimeoutSecs":10,"electionTimeoutMillis":10000,"catchUpTimeoutMillis":-1,"getLastErrorDefaults":{"w":1,"wtimeout":0},"replicaSetId":"64270a61cab257965b11393b"},"writeConcernMajorityJournalDefault":true}}
{"level":"error","ts":1680280812.111684,"logger":"controller_psmdb","msg":"failed to reconcile cluster","Request.Namespace":"acto-namespace","Request.Name":"test-cluster","replset":"rs0","error":"force reconfig to recover: write mongo config: replSetReconfig: (NodeNotFound) No host described in new configuration with {version: 3069134, term: -1} for replica set rs0 maps to this node","errorVerbose":"(NodeNotFound) No host described in new configuration with {version: 3069134, term: -1} for replica set rs0 maps to this node\nreplSetReconfig\ngithub.com/percona/percona-server-mongodb-operator/pkg/psmdb/mongo.WriteConfig\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/psmdb/mongo/mongo.go:232\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).recoverReplsetNoPrimary\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:690\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:87\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581\nwrite mongo config\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).recoverReplsetNoPrimary\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:691\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:87\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581\nforce reconfig to recover\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:88\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227"}
{"level":"info","ts":1680280813.125135,"logger":"controller_psmdb","msg":"waiting for mongos update","updated":0,"replicas":2}
{"level":"error","ts":1680280843.1517258,"logger":"controller.psmdb-controller","msg":"Reconciler error","name":"test-cluster","namespace":"acto-namespace","error":"create pbm object: create PBM connection to test-cluster-rs0-nv-0.test-cluster-rs0.acto-namespace.ACTOKEY:27017,test-cluster-rs0-nv-1.test-cluster-rs0.acto-namespace.ACTOKEY:27017,test-cluster-rs0-2.test-cluster-rs0.acto-namespace.ACTOKEY:27017,test-cluster-rs0-3.test-cluster-rs0.acto-namespace.ACTOKEY:27017,test-cluster-rs0-0.test-cluster-rs0.acto-namespace.ACTOKEY:27017,test-cluster-rs0-arbiter-0.test-cluster-rs0.acto-namespace.ACTOKEY:27017,test-cluster-rs0-1.test-cluster-rs0.acto-namespace.ACTOKEY:27017: create mongo connection: mongo ping: server selection error: server selection timeout, current topology: { Type: Unknown, Servers: [{ Addr: test-cluster-rs0-nv-0.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-nv-0.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-nv-1.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-nv-1.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-2.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-2.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-3.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-3.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-0.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-0.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-arbiter-0.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-arbiter-0.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-1.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-1.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, ] }","errorVerbose":"server selection error: server selection timeout, current topology: { Type: Unknown, Servers: [{ Addr: test-cluster-rs0-nv-0.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-nv-0.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-nv-1.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-nv-1.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-2.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-2.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-3.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-3.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-0.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-0.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-arbiter-0.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-arbiter-0.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-rs0-1.test-cluster-rs0.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-rs0-1.test-cluster-rs0.acto-namespace.actokey on 10.96.0.10:53: no such host }, ] }\nmongo ping\ngithub.com/percona/percona-backup-mongodb/pbm.connect\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/github.com/percona/percona-backup-mongodb/pbm/pbm.go:512\ngithub.com/percona/percona-backup-mongodb/pbm.New\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/github.com/percona/percona-backup-mongodb/pbm/pbm.go:316\ngithub.com/percona/percona-server-mongodb-operator/pkg/psmdb/backup.NewPBM\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/psmdb/backup/pbm.go:73\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).updatePITR\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/backup.go:226\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:550\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581\ncreate mongo connection\ngithub.com/percona/percona-backup-mongodb/pbm.New\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/github.com/percona/percona-backup-mongodb/pbm/pbm.go:318\ngithub.com/percona/percona-server-mongodb-operator/pkg/psmdb/backup.NewPBM\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/psmdb/backup/pbm.go:73\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).updatePITR\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/backup.go:226\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:550\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581\ncreate PBM connection to test-cluster-rs0-nv-0.test-cluster-rs0.acto-namespace.ACTOKEY:27017,test-cluster-rs0-nv-1.test-cluster-rs0.acto-namespace.ACTOKEY:27017,test-cluster-rs0-2.test-cluster-rs0.acto-namespace.ACTOKEY:27017,test-cluster-rs0-3.test-cluster-rs0.acto-namespace.ACTOKEY:27017,test-cluster-rs0-0.test-cluster-rs0.acto-namespace.ACTOKEY:27017,test-cluster-rs0-arbiter-0.test-cluster-rs0.acto-namespace.ACTOKEY:27017,test-cluster-rs0-1.test-cluster-rs0.acto-namespace.ACTOKEY:27017\ngithub.com/percona/percona-server-mongodb-operator/pkg/psmdb/backup.NewPBM\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/psmdb/backup/pbm.go:75\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).updatePITR\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/backup.go:226\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:550\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581\ncreate pbm object\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).updatePITR\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/backup.go:228\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:550\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227"}
{"level":"info","ts":1680280843.1525903,"logger":"controller_psmdb","msg":"Arbiter size will be changed from 2 to 1 due to safe config"}
{"level":"info","ts":1680280843.15261,"logger":"controller_psmdb","msg":"Set allowUnsafeConfigurations=true to disable safe configuration"}
{"level":"info","ts":1680280843.1526165,"logger":"controller_psmdb","msg":"Replset size will be changed from 2 to 4 due to safe config"}
{"level":"info","ts":1680280843.1526215,"logger":"controller_psmdb","msg":"Set allowUnsafeConfigurations=true to disable safe configuration"}
{"level":"info","ts":1680280843.1527596,"logger":"controller_psmdb","msg":"Replset size will be increased from 2 to 3"}
{"level":"info","ts":1680280843.152769,"logger":"controller_psmdb","msg":"Set allowUnsafeConfigurations=true to disable safe configuration"}
{"level":"info","ts":1680280843.1527784,"logger":"controller_psmdb","msg":"Point-in-time recovery can be enabled only if one bucket is used in spec.backup.storages"}
{"level":"error","ts":1680280853.1662817,"logger":"controller_psmdb","msg":"Cluster crashed, trying to recover","cluster":"test-cluster","error":"ping mongo: server selection error: context deadline exceeded, current topology: { Type: ReplicaSetNoPrimary, Servers: [{ Addr: test-cluster-cfg-1.test-cluster-cfg.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-cfg-1.test-cluster-cfg.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-cfg-2.test-cluster-cfg.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-cfg-2.test-cluster-cfg.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-cfg-0.test-cluster-cfg.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-cfg-0.test-cluster-cfg.acto-namespace.actokey on 10.96.0.10:53: no such host }, ] }","errorVerbose":"server selection error: context deadline exceeded, current topology: { Type: ReplicaSetNoPrimary, Servers: [{ Addr: test-cluster-cfg-1.test-cluster-cfg.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-cfg-1.test-cluster-cfg.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-cfg-2.test-cluster-cfg.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-cfg-2.test-cluster-cfg.acto-namespace.actokey on 10.96.0.10:53: no such host }, { Addr: test-cluster-cfg-0.test-cluster-cfg.acto-namespace.actokey:27017, Type: Unknown, Last error: connection() error occured during connection handshake: dial tcp: lookup test-cluster-cfg-0.test-cluster-cfg.acto-namespace.actokey on 10.96.0.10:53: no such host }, ] }\nping mongo\ngithub.com/percona/percona-server-mongodb-operator/pkg/psmdb/mongo.Dial\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/psmdb/mongo/mongo.go:64\ngithub.com/percona/percona-server-mongodb-operator/pkg/psmdb.MongoClient\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/psmdb/client.go:47\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).mongoClientWithRole\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/connections.go:21\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:75\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581","stacktrace":"github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:86\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227"}
{"level":"info","ts":1680280853.194345,"logger":"controller_psmdb","msg":"Writing replicaset config","config":{"_id":"cfg","version":175908,"members":[{"_id":0,"host":"test-cluster-cfg-1.acto-namespace.ACTOKEY:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":2,"tags":{"podName":"test-cluster-cfg-1","serviceName":"test-cluster"},"slaveDelay":0,"votes":1},{"_id":1,"host":"test-cluster-cfg-2.acto-namespace.ACTOKEY:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":2,"tags":{"podName":"test-cluster-cfg-2","serviceName":"test-cluster"},"slaveDelay":0,"votes":1},{"_id":2,"host":"test-cluster-cfg-0.acto-namespace.ACTOKEY:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":2,"tags":{"podName":"test-cluster-cfg-0","serviceName":"test-cluster"},"slaveDelay":0,"votes":1}],"configsvr":true,"protocolVersion":1,"settings":{"chainingAllowed":true,"heartbeatIntervalMillis":2000,"heartbeatTimeoutSecs":10,"electionTimeoutMillis":10000,"catchUpTimeoutMillis":-1,"getLastErrorDefaults":{"w":1,"wtimeout":0},"replicaSetId":"64270a508792a14a0e052ea4"},"writeConcernMajorityJournalDefault":true}}
{"level":"error","ts":1680280853.2166545,"logger":"controller_psmdb","msg":"failed to reconcile cluster","Request.Namespace":"acto-namespace","Request.Name":"test-cluster","replset":"cfg","error":"force reconfig to recover: write mongo config: replSetReconfig: (NodeNotFound) No host described in new configuration with {version: 209703, term: -1} for replica set cfg maps to this node","errorVerbose":"(NodeNotFound) No host described in new configuration with {version: 209703, term: -1} for replica set cfg maps to this node\nreplSetReconfig\ngithub.com/percona/percona-server-mongodb-operator/pkg/psmdb/mongo.WriteConfig\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/psmdb/mongo/mongo.go:232\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).recoverReplsetNoPrimary\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:690\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:87\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581\nwrite mongo config\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).recoverReplsetNoPrimary\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:691\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:87\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581\nforce reconfig to recover\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).reconcileCluster\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/mgo.go:88\ngithub.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb.(*ReconcilePerconaServerMongoDB).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/pkg/controller/perconaservermongodb/psmdb_controller.go:493\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1581","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/src/github.com/percona/percona-server-mongodb-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:227"}

