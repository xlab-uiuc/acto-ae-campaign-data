{"level":"info","ts":1680299134.136166,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299134.1486418,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299134.1491494,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299137.1676931,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulSet deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"error","ts":1680299137.179741,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299137.1798825,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299137.1909263,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680299137.1990306,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update status because of conflict; requeueing...","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","namespace":"rabbitmq-system","name":"test-cluster"}
{"level":"info","ts":1680299137.2075918,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"+31269980G\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680299137.2131464,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299137.2247775,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299137.224919,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299137.226878,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680299137.2335634,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299137.233745,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299137.245095,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680299137.2454207,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"+31269980G\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680299137.3924,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299137.4053261,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299137.4056323,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299137.4077997,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680299137.5746942,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299137.5747976,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299137.588093,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680299137.5884314,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"+31269980G\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680299137.5939898,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299138.172049,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299138.172399,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299138.1741664,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680299138.5760303,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299138.5761209,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299138.5851953,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680299138.5854108,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"+31269980G\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680299138.5895498,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299139.173574,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299139.1738305,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299139.176382,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680299139.5737183,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299139.5738132,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299139.5847795,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680299139.584996,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"+31269980G\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680299139.589737,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299140.1735501,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299140.173794,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299140.176294,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680299140.5773249,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299140.5774198,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299140.5859432,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680299140.5861804,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"+31269980G\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680299140.5936553,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299141.173039,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299141.1733327,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299141.1760404,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680299141.5728703,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299141.5729802,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299141.5846987,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680299141.5850089,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"+31269980G\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680299141.589309,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299142.174144,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299142.1744218,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299142.1771111,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680299142.5739956,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299142.5740738,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299142.5871835,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680299142.5874674,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"+31269980G\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680299142.5917604,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299143.173709,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299143.174022,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299143.1773324,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680299143.5732634,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299143.5733447,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299143.5866122,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680299143.5868766,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"+31269980G\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680299143.5920362,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299144.1738317,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299144.174158,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299144.1772091,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680299144.574567,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299144.5746908,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299144.588448,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680299144.588839,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"+31269980G\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680299144.5942018,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299145.172873,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299145.173156,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299145.175714,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680299145.5751684,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299145.5753076,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299145.5909,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680299145.8694868,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"+31269980G\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680299145.880084,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299146.1734939,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299146.1736617,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299146.1756759,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680299146.5770946,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299146.5773172,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299146.5932114,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680299151.7141256,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"+31269980G\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680299151.7262533,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299151.7372248,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299151.7373571,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299151.7391026,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680299151.7457492,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299151.74586,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299151.7572615,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680299161.9979835,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"+31269980G\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680299162.0080993,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299162.018916,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299162.0191097,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299162.0207398,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680299162.0265136,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299162.0266235,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299162.0369284,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680299182.5177312,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"+31269980G\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680299182.5311153,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680299182.5398169,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"a8618489-bda7-4495-8c8c-7eef6daa1f93","resourceVersion":"1031","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-a8618489-bda7-4495-8c8c-7eef6daa1f93","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"9b73ebd8-981e-4902-94cc-4b13490c2539","resourceVersion":"1039","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-9b73ebd8-981e-4902-94cc-4b13490c2539","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","resourceVersion":"1051","creationTimestamp":"2023-03-31T21:35:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-0-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"5ed9bfa0-c475-4764-9512-8c8e98be16bb","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5ed9bfa0-c475-4764-9512-8c8e98be16bb\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T21:35:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-5ea9eb4d-f7b1-4d1f-8cc3-701aadc830fc","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680299182.5401077,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680299182.5417383,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680299182.5479345,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299182.5480173,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680299182.557708,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}

