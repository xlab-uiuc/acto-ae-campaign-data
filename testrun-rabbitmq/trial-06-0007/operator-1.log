{"level":"info","ts":1680305770.9416504,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305770.9536905,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305770.9541066,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305773.975448,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulSet deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"error","ts":1680305773.9870183,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305773.9871683,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305774.0002549,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680305774.0078447,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update status because of conflict; requeueing...","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","namespace":"rabbitmq-system","name":"test-cluster"}
{"level":"info","ts":1680305774.0184398,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"100Gi\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680305774.0234728,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305774.0351892,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305774.0355544,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305774.037717,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680305774.0430849,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305774.0431678,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305774.0539758,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680305774.054197,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"100Gi\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680305774.0923953,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305774.1923034,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305774.193002,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305774.1969216,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680305774.380422,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305774.3805306,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305774.392243,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680305774.3924894,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"100Gi\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680305774.4000351,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305774.9800634,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305774.980312,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305774.9828267,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680305775.3820615,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305775.3821747,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305775.3964336,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680305775.3967643,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"100Gi\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680305775.4033506,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305775.9789932,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305775.9792595,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305775.9816003,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680305776.3877127,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305776.3878086,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305776.3990812,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680305776.3992777,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"100Gi\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680305776.4030473,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305776.9797099,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305776.9800038,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305776.9822814,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680305777.3829188,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305777.38301,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305777.3960931,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680305777.3963883,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"100Gi\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680305777.4024553,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305777.9806914,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305777.980949,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305777.9837847,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680305778.3828135,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305778.3829434,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305778.394364,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680305778.3946457,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"100Gi\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680305778.4017873,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305778.980338,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305778.9807444,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305778.9828272,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680305779.3817394,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305779.381853,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305779.398483,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680305779.3987744,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"100Gi\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680305779.4048018,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305779.979859,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305779.9802167,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305779.98273,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680305780.3818736,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305780.3819878,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305780.39386,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680305780.3941052,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"100Gi\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680305780.3992217,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305780.9800365,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305780.980238,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305780.9822881,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680305781.3853478,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305781.3854282,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305781.3942327,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680305781.3944602,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"100Gi\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680305781.3994057,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305781.9795146,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305781.9797595,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305781.982807,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680305782.3801117,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305782.3802037,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305782.3931231,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680305782.6747434,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"100Gi\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680305782.6845407,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305782.9807959,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305782.9811292,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305782.98357,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680305783.380018,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305783.3801,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305783.3940988,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680305788.515223,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"100Gi\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680305788.5230796,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305788.5368536,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305788.5371392,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305788.5400252,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680305788.5473988,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305788.5475385,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305788.56197,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680305798.8022041,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"100Gi\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680305798.8112357,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305798.825361,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305798.825525,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305798.827177,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680305798.8339574,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305798.8340356,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305798.8446262,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"info","ts":1680305819.325335,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Start reconciling","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","spec":"{\"replicas\":3,\"image\":\"rabbitmq:3.8.21-management\",\"service\":{\"type\":\"ClusterIP\"},\"persistence\":{\"storage\":\"100Gi\"},\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"4Gi\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"4Gi\"}},\"affinity\":{\"podAffinity\":{},\"podAntiAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":[{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app.kubernetes.io/name\",\"operator\":\"In\",\"values\":[\"test-cluster\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"}]}},\"rabbitmq\":{\"additionalConfig\":\"cluster_partition_handling = pause_minority\\nvm_memory_high_watermark_paging_ratio = 0.99\\ndisk_free_limit.relative = 1.0\\ncollect_statistics_interval = 10000\\n\"},\"tls\":{},\"override\":{},\"terminationGracePeriodSeconds\":1024,\"secretBackend\":{}}"}
{"level":"info","ts":1680305819.3337593,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"updated resource test-cluster-nodes of Type *v1.Service","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system"}
{"level":"info","ts":1680305819.3455298,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Scaling up PVCs","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","RabbitmqCluster":"test-cluster","pvcsToBeScaled":[{"metadata":{"name":"persistence-test-cluster-server-0","namespace":"rabbitmq-system","uid":"f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","resourceVersion":"1013","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker2"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-f25df3ab-1b0d-4ff1-aec7-c90878bc0da8","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-1","namespace":"rabbitmq-system","uid":"6aa8d202-1572-4d12-9f6d-aa2c225dee26","resourceVersion":"1020","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-6aa8d202-1572-4d12-9f6d-aa2c225dee26","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}},{"metadata":{"name":"persistence-test-cluster-server-2","namespace":"rabbitmq-system","uid":"51bac6f5-6371-438b-a7e4-273dab4464c3","resourceVersion":"1036","creationTimestamp":"2023-03-31T23:34:35Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"test-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"rancher.io/local-path","volume.kubernetes.io/selected-node":"acto-cluster-6-worker3"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"test-cluster","uid":"32491ee1-2647-4de3-9a04-5f8ef114798e","controller":true,"blockOwnerDeletion":false}],"finalizers":["kubernetes.io/pvc-protection"],"managedFields":[{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:volume.kubernetes.io/selected-node":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:pv.kubernetes.io/bind-completed":{},"f:pv.kubernetes.io/bound-by-controller":{},"f:volume.beta.kubernetes.io/storage-provisioner":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"32491ee1-2647-4de3-9a04-5f8ef114798e\"}":{}}},"f:spec":{"f:accessModes":{},"f:resources":{"f:requests":{".":{},"f:storage":{}}},"f:volumeMode":{},"f:volumeName":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2023-03-31T23:34:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:accessModes":{},"f:capacity":{".":{},"f:storage":{}},"f:phase":{}}}}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"50Gi"}},"volumeName":"pvc-51bac6f5-6371-438b-a7e4-273dab4464c3","storageClassName":"standard","volumeMode":"Filesystem"},"status":{"phase":"Bound","accessModes":["ReadWriteOnce"],"capacity":{"storage":"50Gi"}}}]}
{"level":"info","ts":1680305819.345684,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"deleting statefulSet (pods won't be deleted)","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","statefulSet":"test-cluster-server"}
{"level":"info","ts":1680305819.347201,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"statefulset has already been deleted","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","StatefulSet":"test-cluster","RabbitmqCluster":"test-cluster"}
{"level":"error","ts":1680305819.35508,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"failed to update PersistentVolumeClaim","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","PersistentVolumeClaim":"persistence-test-cluster-server-0","error":"persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/internal/scaling.PersistenceScaler.Scale\n\t/workspace/internal/scaling/scaling.go:73\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).reconcilePVC\n\t/workspace/controllers/reconcile_persistence.go:18\ngithub.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305819.355163,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Failed to scale PVCs: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"Hit an error while scaling PVC capacity: failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"github.com/rabbitmq/cluster-operator/controllers.(*RabbitmqClusterReconciler).Reconcile\n\t/workspace/controllers/rabbitmqcluster_controller.go:211\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:298\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}
{"level":"error","ts":1680305819.3651893,"logger":"controller-runtime.manager.controller.rabbitmqcluster","msg":"Reconciler error","reconciler group":"rabbitmq.com","reconciler kind":"RabbitmqCluster","name":"test-cluster","namespace":"rabbitmq-system","error":"failed to update PersistentVolumeClaim persistence-test-cluster-server-0: persistentvolumeclaims \"persistence-test-cluster-server-0\" is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:253\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.9.6/pkg/internal/controller/controller.go:214"}

