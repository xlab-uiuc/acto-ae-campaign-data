apiVersion: pingcap.com/v1alpha1
kind: TidbCluster
metadata:
  name: test-cluster
spec:
  configUpdateStrategy: RollingUpdate
  enableDynamicConfiguration: true
  helper:
    image: busybox:1.34.1
  pd:
    baseImage: pingcap/pd
    config: "[dashboard]\n  internal-proxy = true\n"
    maxFailoverCount: 0
    mountClusterClientSecret: true
    replicas: 3
    requests:
      storage: 10Gi
  pvReclaimPolicy: Retain
  tidb:
    additionalContainers:
    - args:
      - ACTOKEY
      - ACTOKEY
      - ACTOKEY
      - ACTOKEY
      - ACTOKEY
      command:
      - ACTOKEY
      - ACTOKEY
      - ACTOKEY
      - ACTOKEY
      - ACTOKEY
      env:
      - name: ACTOKEY
        value: ACTOKEY
        valueFrom:
          configMapKeyRef:
            key: ACTOKEY
            name: null
            optional: false
          fieldRef:
            apiVersion: ACTOKEY
            fieldPath: ACTOKEY
          resourceFieldRef:
            containerName: ACTOKEY
            divisor: 2
            resource: ACTOKEY
          secretKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: null
      - name: ACTOKEY
        value: ACTOKEY
        valueFrom:
          configMapKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: null
          fieldRef:
            apiVersion: ACTOKEY
            fieldPath: ACTOKEY
          resourceFieldRef:
            containerName: ACTOKEY
            divisor: 5
            resource: ACTOKEY
          secretKeyRef:
            key: ACTOKEY
            name: null
            optional: true
      - name: ACTOKEY
        value: ACTOKEY
        valueFrom: null
      - name: ACTOKEY
        value: ACTOKEY
        valueFrom:
          configMapKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: true
          fieldRef: null
          resourceFieldRef:
            containerName: ACTOKEY
            divisor: 1
            resource: ACTOKEY
          secretKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: false
      - name: ACTOKEY
        value: ACTOKEY
        valueFrom:
          configMapKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: true
          fieldRef:
            apiVersion: ACTOKEY
            fieldPath: ACTOKEY
          resourceFieldRef:
            containerName: ACTOKEY
            divisor: null
            resource: ACTOKEY
          secretKeyRef: null
      envFrom:
      - configMapRef: null
        prefix: ACTOKEY
        secretRef:
          name: ACTOKEY
          optional: true
      image: ACTOKEY
      imagePullPolicy: ACTOKEY
      lifecycle:
        postStart:
          exec:
            command:
            - ACTOKEY
            - ACTOKEY
            - ACTOKEY
          httpGet:
            host: ACTOKEY
            httpHeaders: []
            path: ACTOKEY
            port: ACTOKEY
            scheme: ACTOKEY
          tcpSocket:
            host: ACTOKEY
            port: 5
        preStop:
          exec:
            command: []
          httpGet:
            host: ACTOKEY
            httpHeaders:
            - name: ACTOKEY
              value: ACTOKEY
            path: ACTOKEY
            port: ACTOKEY
            scheme: ACTOKEY
          tcpSocket: null
      livenessProbe:
        exec:
          command:
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
        failureThreshold: 2
        httpGet:
          host: ACTOKEY
          httpHeaders:
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          path: null
          port: 3
          scheme: ACTOKEY
        initialDelaySeconds: 1
        periodSeconds: 4
        successThreshold: 0
        tcpSocket:
          host: ACTOKEY
          port: ACTOKEY
        timeoutSeconds: 0
      name: ACTOKEY
      ports:
      - containerPort: 2
        hostIP: ACTOKEY
        hostPort: 5
        name: ACTOKEY
        protocol: ACTOKEY
      - containerPort: 4
        hostIP: ACTOKEY
        hostPort: 1
        name: ACTOKEY
        protocol: ACTOKEY
      readinessProbe:
        exec: null
        failureThreshold: 2
        httpGet:
          host: ACTOKEY
          httpHeaders:
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          path: ACTOKEY
          port: 5
          scheme: ACTOKEY
        initialDelaySeconds: 5
        periodSeconds: 3
        successThreshold: 5
        tcpSocket:
          host: ACTOKEY
          port: ACTOKEY
        timeoutSeconds: 3
      resources:
        limits:
          cpu: 800m
          memory: 1000m
        requests:
          cpu: 800m
          memory: 1000m
      securityContext:
        allowPrivilegeEscalation: true
        capabilities:
          add:
          - ACTOKEY
          - ACTOKEY
          drop:
          - ACTOKEY
        privileged: false
        procMount: null
        readOnlyRootFilesystem: false
        runAsGroup: 5
        runAsNonRoot: false
        runAsUser: 0
        seLinuxOptions:
          level: null
          role: ACTOKEY
          type: ACTOKEY
          user: ACTOKEY
        seccompProfile:
          localhostProfile: ACTOKEY
          type: ACTOKEY
        windowsOptions: null
      startupProbe:
        exec:
          command:
          - ACTOKEY
          - ACTOKEY
        failureThreshold: 2
        httpGet:
          host: ACTOKEY
          httpHeaders:
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          path: ACTOKEY
          port: 3
          scheme: ACTOKEY
        initialDelaySeconds: null
        periodSeconds: 2
        successThreshold: 0
        tcpSocket:
          host: ACTOKEY
          port: ACTOKEY
        timeoutSeconds: 0
      stdin: false
      stdinOnce: null
      terminationMessagePath: ACTOKEY
      terminationMessagePolicy: ACTOKEY
      tty: false
      volumeDevices:
      - devicePath: ACTOKEY
        name: ACTOKEY
      - devicePath: ACTOKEY
        name: ACTOKEY
      - devicePath: ACTOKEY
        name: ACTOKEY
      volumeMounts:
      - mountPath: ACTOKEY
        mountPropagation: ACTOKEY
        name: ACTOKEY
        readOnly: true
        subPath: ACTOKEY
        subPathExpr: null
      - mountPath: ACTOKEY
        mountPropagation: ACTOKEY
        name: ACTOKEY
        readOnly: true
        subPath: ACTOKEY
        subPathExpr: ACTOKEY
      - mountPath: ACTOKEY
        mountPropagation: ACTOKEY
        name: ACTOKEY
        readOnly: false
        subPath: ACTOKEY
        subPathExpr: ACTOKEY
      - mountPath: ACTOKEY
        mountPropagation: null
        name: ACTOKEY
        readOnly: true
        subPath: ACTOKEY
        subPathExpr: ACTOKEY
      - mountPath: ACTOKEY
        mountPropagation: null
        name: ACTOKEY
        readOnly: true
        subPath: ACTOKEY
        subPathExpr: ACTOKEY
      workingDir: ACTOKEY
    - args:
      - ACTOKEY
      - ACTOKEY
      - ACTOKEY
      - ACTOKEY
      command: null
      env: null
      envFrom: []
      image: ACTOKEY
      imagePullPolicy: ACTOKEY
      lifecycle:
        postStart: null
        preStop:
          exec:
            command:
            - ACTOKEY
            - ACTOKEY
            - ACTOKEY
          httpGet:
            host: ACTOKEY
            httpHeaders:
            - name: ACTOKEY
              value: ACTOKEY
            - name: ACTOKEY
              value: ACTOKEY
            - name: ACTOKEY
              value: ACTOKEY
            - name: ACTOKEY
              value: ACTOKEY
            - name: ACTOKEY
              value: ACTOKEY
            path: ACTOKEY
            port: ACTOKEY
            scheme: ACTOKEY
          tcpSocket:
            host: ACTOKEY
            port: 5
      livenessProbe:
        exec:
          command:
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
        failureThreshold: 2
        httpGet:
          host: ACTOKEY
          httpHeaders:
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          path: ACTOKEY
          port: 2
          scheme: ACTOKEY
        initialDelaySeconds: 2
        periodSeconds: 5
        successThreshold: 3
        tcpSocket:
          host: ACTOKEY
          port: ACTOKEY
        timeoutSeconds: 0
      name: ACTOKEY
      ports:
      - containerPort: 3
        hostIP: null
        hostPort: 1
        name: ACTOKEY
        protocol: ACTOKEY
      - containerPort: 1
        hostIP: ACTOKEY
        hostPort: 0
        name: ACTOKEY
        protocol: ACTOKEY
      - containerPort: 1
        hostIP: ACTOKEY
        hostPort: 5
        name: ACTOKEY
        protocol: ACTOKEY
      - containerPort: 1
        hostIP: ACTOKEY
        hostPort: 0
        name: ACTOKEY
        protocol: ACTOKEY
      - containerPort: 3
        hostIP: ACTOKEY
        hostPort: 2
        name: ACTOKEY
        protocol: ACTOKEY
      readinessProbe: null
      resources:
        limits:
          cpu: 800m
          memory: 1000m
        requests:
          cpu: 800m
          memory: 1000m
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          add: null
          drop: []
        privileged: true
        procMount: ACTOKEY
        readOnlyRootFilesystem: null
        runAsGroup: 0
        runAsNonRoot: false
        runAsUser: 5
        seLinuxOptions: null
        seccompProfile:
          localhostProfile: ACTOKEY
          type: ACTOKEY
        windowsOptions:
          gmsaCredentialSpec: ACTOKEY
          gmsaCredentialSpecName: ACTOKEY
          runAsUserName: ACTOKEY
      startupProbe:
        exec:
          command: null
        failureThreshold: 3
        httpGet: null
        initialDelaySeconds: 1
        periodSeconds: 3
        successThreshold: 5
        tcpSocket:
          host: ACTOKEY
          port: 1
        timeoutSeconds: 3
      stdin: true
      stdinOnce: true
      terminationMessagePath: ACTOKEY
      terminationMessagePolicy: ACTOKEY
      tty: true
      volumeDevices: []
      volumeMounts: []
      workingDir: null
    - args:
      - ACTOKEY
      - ACTOKEY
      command:
      - ACTOKEY
      env:
      - name: ACTOKEY
        value: ACTOKEY
        valueFrom:
          configMapKeyRef: null
          fieldRef:
            apiVersion: ACTOKEY
            fieldPath: ACTOKEY
          resourceFieldRef:
            containerName: ACTOKEY
            divisor: '.1679012764'
            resource: ACTOKEY
          secretKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: false
      envFrom:
      - configMapRef:
          name: ACTOKEY
          optional: true
        prefix: ACTOKEY
        secretRef:
          name: ACTOKEY
          optional: true
      - configMapRef: null
        prefix: ACTOKEY
        secretRef:
          name: ACTOKEY
          optional: false
      - configMapRef:
          name: ACTOKEY
          optional: true
        prefix: ACTOKEY
        secretRef:
          name: ACTOKEY
          optional: true
      - configMapRef:
          name: ACTOKEY
          optional: false
        prefix: ACTOKEY
        secretRef:
          name: null
          optional: null
      - configMapRef:
          name: ACTOKEY
          optional: false
        prefix: ACTOKEY
        secretRef: null
      image: ACTOKEY
      imagePullPolicy: ACTOKEY
      lifecycle:
        postStart:
          exec:
            command:
            - ACTOKEY
          httpGet: null
          tcpSocket:
            host: ACTOKEY
            port: ACTOKEY
        preStop:
          exec:
            command:
            - ACTOKEY
            - ACTOKEY
          httpGet:
            host: ACTOKEY
            httpHeaders:
            - name: ACTOKEY
              value: ACTOKEY
            - name: ACTOKEY
              value: ACTOKEY
            - name: ACTOKEY
              value: ACTOKEY
            - name: ACTOKEY
              value: ACTOKEY
            - name: ACTOKEY
              value: ACTOKEY
            path: ACTOKEY
            port: ACTOKEY
            scheme: ACTOKEY
          tcpSocket:
            host: ACTOKEY
            port: 2
      livenessProbe:
        exec:
          command:
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
        failureThreshold: 5
        httpGet:
          host: null
          httpHeaders:
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          path: ACTOKEY
          port: 5
          scheme: ACTOKEY
        initialDelaySeconds: 1
        periodSeconds: 4
        successThreshold: 5
        tcpSocket:
          host: ACTOKEY
          port: ACTOKEY
        timeoutSeconds: 0
      name: ACTOKEY
      ports:
      - containerPort: 0
        hostIP: ACTOKEY
        hostPort: 2
        name: ACTOKEY
        protocol: ACTOKEY
      readinessProbe:
        exec:
          command:
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
        failureThreshold: null
        httpGet:
          host: null
          httpHeaders:
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          path: ACTOKEY
          port: 4
          scheme: ACTOKEY
        initialDelaySeconds: 4
        periodSeconds: 3
        successThreshold: 2
        tcpSocket:
          host: ACTOKEY
          port: 3
        timeoutSeconds: 5
      resources:
        limits:
          cpu: 800m
          memory: 1000m
        requests:
          cpu: 800m
          memory: 1000m
      securityContext:
        allowPrivilegeEscalation: true
        capabilities:
          add:
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
          drop:
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
        privileged: false
        procMount: ACTOKEY
        readOnlyRootFilesystem: true
        runAsGroup: 2
        runAsNonRoot: true
        runAsUser: 5
        seLinuxOptions:
          level: null
          role: ACTOKEY
          type: ACTOKEY
          user: null
        seccompProfile:
          localhostProfile: ACTOKEY
          type: ACTOKEY
        windowsOptions:
          gmsaCredentialSpec: ACTOKEY
          gmsaCredentialSpecName: ACTOKEY
          runAsUserName: ACTOKEY
      startupProbe:
        exec:
          command:
          - ACTOKEY
        failureThreshold: 0
        httpGet: null
        initialDelaySeconds: null
        periodSeconds: 1
        successThreshold: 5
        tcpSocket:
          host: ACTOKEY
          port: ACTOKEY
        timeoutSeconds: 2
      stdin: true
      stdinOnce: null
      terminationMessagePath: ACTOKEY
      terminationMessagePolicy: ACTOKEY
      tty: true
      volumeDevices:
      - devicePath: ACTOKEY
        name: ACTOKEY
      - devicePath: ACTOKEY
        name: ACTOKEY
      volumeMounts:
      - mountPath: ACTOKEY
        mountPropagation: ACTOKEY
        name: ACTOKEY
        readOnly: true
        subPath: ACTOKEY
        subPathExpr: ACTOKEY
      - mountPath: ACTOKEY
        mountPropagation: ACTOKEY
        name: ACTOKEY
        readOnly: true
        subPath: ACTOKEY
        subPathExpr: ACTOKEY
      - mountPath: ACTOKEY
        mountPropagation: ACTOKEY
        name: ACTOKEY
        readOnly: false
        subPath: ACTOKEY
        subPathExpr: ACTOKEY
      - mountPath: ACTOKEY
        mountPropagation: ACTOKEY
        name: ACTOKEY
        readOnly: false
        subPath: ACTOKEY
        subPathExpr: null
      - mountPath: ACTOKEY
        mountPropagation: ACTOKEY
        name: ACTOKEY
        readOnly: true
        subPath: ACTOKEY
        subPathExpr: ACTOKEY
      workingDir: ACTOKEY
    - args:
      - ACTOKEY
      command:
      - ACTOKEY
      - ACTOKEY
      - ACTOKEY
      - ACTOKEY
      env:
      - name: ACTOKEY
        value: ACTOKEY
        valueFrom:
          configMapKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: true
          fieldRef:
            apiVersion: ACTOKEY
            fieldPath: ACTOKEY
          resourceFieldRef:
            containerName: ACTOKEY
            divisor: 511E+.5
            resource: ACTOKEY
          secretKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: false
      - name: ACTOKEY
        value: ACTOKEY
        valueFrom:
          configMapKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: true
          fieldRef:
            apiVersion: null
            fieldPath: ACTOKEY
          resourceFieldRef:
            containerName: ACTOKEY
            divisor: +.189e-.68
            resource: ACTOKEY
          secretKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: true
      - name: ACTOKEY
        value: ACTOKEY
        valueFrom:
          configMapKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: false
          fieldRef:
            apiVersion: null
            fieldPath: ACTOKEY
          resourceFieldRef:
            containerName: ACTOKEY
            divisor: 6496671Ki
            resource: ACTOKEY
          secretKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: false
      - name: ACTOKEY
        value: ACTOKEY
        valueFrom:
          configMapKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: true
          fieldRef:
            apiVersion: null
            fieldPath: ACTOKEY
          resourceFieldRef:
            containerName: ACTOKEY
            divisor: -8.2m
            resource: ACTOKEY
          secretKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: false
      - name: ACTOKEY
        value: ACTOKEY
        valueFrom:
          configMapKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: false
          fieldRef:
            apiVersion: ACTOKEY
            fieldPath: ACTOKEY
          resourceFieldRef:
            containerName: ACTOKEY
            divisor: 4
            resource: ACTOKEY
          secretKeyRef:
            key: ACTOKEY
            name: ACTOKEY
            optional: false
      envFrom:
      - configMapRef: null
        prefix: ACTOKEY
        secretRef:
          name: null
          optional: true
      - configMapRef:
          name: ACTOKEY
          optional: null
        prefix: ACTOKEY
        secretRef:
          name: ACTOKEY
          optional: true
      image: ACTOKEY
      imagePullPolicy: ACTOKEY
      lifecycle:
        postStart:
          exec:
            command: []
          httpGet:
            host: ACTOKEY
            httpHeaders:
            - name: ACTOKEY
              value: ACTOKEY
            - name: ACTOKEY
              value: ACTOKEY
            path: ACTOKEY
            port: ACTOKEY
            scheme: null
          tcpSocket:
            host: ACTOKEY
            port: 2
        preStop:
          exec: null
          httpGet:
            host: ACTOKEY
            httpHeaders: []
            path: ACTOKEY
            port: 0
            scheme: ACTOKEY
          tcpSocket:
            host: ACTOKEY
            port: ACTOKEY
      livenessProbe:
        exec:
          command: []
        failureThreshold: 4
        httpGet:
          host: ACTOKEY
          httpHeaders:
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          path: ACTOKEY
          port: ACTOKEY
          scheme: ACTOKEY
        initialDelaySeconds: 1
        periodSeconds: 1
        successThreshold: 0
        tcpSocket:
          host: ACTOKEY
          port: 2
        timeoutSeconds: 1
      name: ACTOKEY
      ports:
      - containerPort: 3
        hostIP: ACTOKEY
        hostPort: 5
        name: ACTOKEY
        protocol: ACTOKEY
      readinessProbe:
        exec:
          command:
          - ACTOKEY
          - ACTOKEY
        failureThreshold: 3
        httpGet:
          host: ACTOKEY
          httpHeaders:
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          path: ACTOKEY
          port: 5
          scheme: ACTOKEY
        initialDelaySeconds: 1
        periodSeconds: null
        successThreshold: 5
        tcpSocket:
          host: null
          port: 1
        timeoutSeconds: 5
      resources:
        limits:
          cpu: 800m
          memory: 1000m
        requests:
          cpu: 800m
          memory: 1000m
      securityContext:
        allowPrivilegeEscalation: true
        capabilities:
          add:
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
          drop:
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
          - ACTOKEY
        privileged: true
        procMount: ACTOKEY
        readOnlyRootFilesystem: null
        runAsGroup: 2
        runAsNonRoot: true
        runAsUser: 4
        seLinuxOptions:
          level: ACTOKEY
          role: ACTOKEY
          type: ACTOKEY
          user: ACTOKEY
        seccompProfile:
          localhostProfile: ACTOKEY
          type: ACTOKEY
        windowsOptions:
          gmsaCredentialSpec: ACTOKEY
          gmsaCredentialSpecName: ACTOKEY
          runAsUserName: ACTOKEY
      startupProbe:
        exec:
          command:
          - ACTOKEY
          - ACTOKEY
        failureThreshold: 4
        httpGet:
          host: ACTOKEY
          httpHeaders:
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          - name: ACTOKEY
            value: ACTOKEY
          path: ACTOKEY
          port: ACTOKEY
          scheme: ACTOKEY
        initialDelaySeconds: null
        periodSeconds: 0
        successThreshold: 4
        tcpSocket:
          host: ACTOKEY
          port: 3
        timeoutSeconds: null
      stdin: true
      stdinOnce: true
      terminationMessagePath: ACTOKEY
      terminationMessagePolicy: null
      tty: true
      volumeDevices:
      - devicePath: ACTOKEY
        name: ACTOKEY
      - devicePath: ACTOKEY
        name: ACTOKEY
      volumeMounts: null
      workingDir: ACTOKEY
    baseImage: pingcap/tidb
    config: "[performance]\n  tcp-keep-alive = true\n"
    maxFailoverCount: 0
    replicas: 3
    service:
      externalTrafficPolicy: Local
      type: NodePort
  tikv:
    baseImage: pingcap/tikv
    config: 'log-level = "info"

      '
    maxFailoverCount: 0
    mountClusterClientSecret: true
    recoverFailover: false
    replicas: 3
    requests:
      storage: 100Gi
    separateRaftLog: true
  timezone: UTC
  version: v5.4.0
